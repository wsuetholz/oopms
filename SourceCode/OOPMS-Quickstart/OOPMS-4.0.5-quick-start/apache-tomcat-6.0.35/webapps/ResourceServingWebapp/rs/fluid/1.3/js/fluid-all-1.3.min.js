var fluid_1_3=fluid_1_3||{};var fluid=fluid||fluid_1_3;(function(a,b){b.version="Infusion 1.3";b.environment={fluid:b};var c=window||{};b.fail=function(j){b.setLogging(true);b.log(j.message?j.message:j);throw new Error(j)};var i;b.setLogging=function(j){if(typeof j==="boolean"){i=j}else{i=false}};b.log=function(j){if(i){j=b.renderTimestamp(new Date())+":  "+j;if(typeof(console)!=="undefined"){if(console.debug){console.debug(j)}else{console.log(j)}}else{if(typeof(YAHOO)!=="undefined"){YAHOO.log(j)}else{if(typeof(opera)!=="undefined"){opera.postError(j)}}}}};b.wrap=function(j){return((!j||j.jquery)?j:a(j))};b.unwrap=function(j){return j&&j.jquery&&j.length===1?j[0]:j};b.freshContainer=function(j){return b.isArrayable(j)?[]:{}};b.copy=function(j){if(b.isPrimitive(j)){return j}return a.extend(true,b.freshContainer(j),j)};b.identity=function(j){return j};b.isPrimitive=function(j){var k=typeof(j);return !j||k==="string"||k==="boolean"||k==="number"||k==="function"};b.isArrayable=function(j){return j&&!b.isPrimitive(j)&&typeof(j.length)==="number"};b.makeArray=function(j){if(j===null||j===undefined){return[]}else{return a.makeArray(j)}};function h(p,o,n,m){var k=p[n];for(var l=0;l<m.length-1;++l){k=m[l+1](k,n)}o[n]=k}b.transform=function(m){var l=b.freshContainer(m);if(b.isArrayable(m)){for(var k=0;k<m.length;++k){h(m,l,k,arguments)}}else{for(var j in m){h(m,l,j,arguments)}}return l};b.each=function(m,l){if(b.isArrayable(m)){for(var k=0;k<m.length;++k){l(m[k],k)}}else{for(var j in m){l(m[j],j)}}};b.find=function(n,m,o){var j;if(b.isArrayable(n)){for(var l=0;l<n.length;++l){j=m(n[l],l);if(j!==undefined){return j}}}else{for(var k in n){j=m(n[k],k);if(j!==undefined){return j}}}return o};b.accumulate=function(m,l,j){for(var k=0;k<m.length;++k){j=l(m[k],j,k)}return j};b.remove_if=function(m,l){if(b.isArrayable(m)){for(var k=0;k<m.length;++k){if(l(m[k],k)){m.splice(k,1);--k}}}else{for(var j in m){if(l(m[j],j)){delete m[j]}}}return m};b.keyForValue=function(k,j){return b.find(k,function(l,m){if(j===l){return m}})};b.findKeyInObject=b.keyForValue;b.clear=function(k){if(k instanceof Array){k.length=0}else{for(var j in k){delete k[j]}}};b.model={};b.VALUE={type:"fluid.marker",value:"VALUE"};b.NO_VALUE={type:"fluid.marker",value:"NO_VALUE"};b.isMarker=function(j,k){if(!j||typeof(j)!=="object"||j.type!=="fluid.marker"){return false}if(!k){return true}return j.value===k||j.value===k.value};b.model.copyModel=function(k,j){b.clear(k);a.extend(true,k,j)};b.model.parseEL=function(j){return String(j).split(".")};b.model.composePath=function(j,k){return j===""?k:(k===""?j:j+"."+k)};b.model.composeSegments=function(){return a.makeArray(arguments).join(".")};b.model.environmentStrategy=function(j){return{init:function(){var k=j;return function(l,o,m){var n;if(k&&k[o]){n=k[o]}k=null;return n}}}};b.model.defaultCreatorStrategy=function(j,k){if(j[k]===undefined){j[k]={};return j[k]}};b.model.defaultFetchStrategy=function(j,k){return j[k]};b.model.funcResolverStrategy=function(j,k){if(j.resolvePathSegment){return j.resolvePathSegment(k)}};b.model.makeResolver=function(j,m,k){var l={segs:b.model.parseEL(m),root:j,index:0,strategies:b.transform(k,function(n){return n.init?n.init():n})};l.next=function(){if(!l.root){return}var p;for(var n=0;n<l.strategies.length;++n){var o=l.strategies[n](l.root,l.segs[l.index],l.index);if(p===undefined){p=o}}if(p===b.NO_VALUE){p=undefined}l.root=p;++l.index};l.step=function(n){for(var o=0;o<n;++o){l.next()}l.last=l.segs[l.index]};return l};b.model.defaultSetConfig=[b.model.funcResolverStrategy,b.model.defaultFetchStrategy,b.model.defaultCreatorStrategy];b.model.getPenultimate=function(j,l,k){k=k||b.model.defaultGetConfig;var m=b.model.makeResolver(j,l,k);m.step(m.segs.length-1);return m};b.set=function(j,l,m,k){k=k||b.model.defaultSetConfig;var n=b.model.getPenultimate(j,l,k);n.root[n.last]=m};b.model.defaultGetConfig=[b.model.funcResolverStrategy,b.model.defaultFetchStrategy];b.get=function(j,l,k){if(l===""||l===null||l===undefined){return j}k=k||b.model.defaultGetConfig;var m=b.model.makeResolver(j,l,k);m.step(m.segs.length);return m.root};b.model.setBeanValue=b.set;b.model.getBeanValue=b.get;b.getGlobalValue=function(l,k){if(l){k=k||b.environment;var j=b.model.environmentStrategy(k);return b.get(c,l,[j].concat(b.model.defaultGetConfig))}};b.invokeGlobalFunction=function(k,l,j){var m=b.getGlobalValue(k,j);if(!m){b.fail("Error invoking global function: "+k+" could not be located")}else{return m.apply(null,l)}};b.registerGlobalFunction=function(k,m,l){l=l||b.environment;var j=b.model.environmentStrategy(l);b.set(c,k,m,[j].concat(b.model.defaultSetConfig))};b.setGlobalValue=b.registerGlobalFunction;b.registerNamespace=function(l,j){j=j||b.environment;var k=b.getGlobalValue(l,j);if(!k){k={};b.setGlobalValue(l,k,j)}return k};b.registerNamespace("fluid.event");b.event.addListenerToFirer=function(k,l,j){if(typeof(l)==="function"){k.addListener(l,j)}else{if(l&&typeof(l)==="object"){k.addListener(l.listener,j,l.predicate,l.priority)}}};b.mergeListeners=function(j,k){b.each(k,function(p,m){var q=m.indexOf(".");var o;if(q!==-1){o=m.substring(q+1);m=m.substring(0,q)}if(!j[m]){j[m]=b.event.getEventFirer()}var n=j[m];if(b.isArrayable(p)){for(var l=0;l<p.length;++l){b.event.addListenerToFirer(n,p[l],o)}}else{b.event.addListenerToFirer(n,p,o)}})};b.instantiateFirers=function(m,j){m.events={};if(j.events){for(var l in j.events){var k=j.events[l];m.events[l]=b.event.getEventFirer(k==="unicast",k==="preventable")}}b.mergeListeners(m.events,j.listeners)};b.dumpEl=b.identity;b.renderTimestamp=b.identity;var f={};var g={};b.defaults=function(){var m=0;var k=f;if(typeof arguments[0]==="boolean"){k=g;m=1}var j=arguments[m];var l=arguments[m+1];if(l!==undefined){k[j]=l;return l}return k[j]};b.mergePolicyIs=function(j,k){return typeof(j)==="string"&&j.indexOf(k)!==-1};function d(o,r,n,j,s){if(typeof(s)==="function"){s.apply(null,n,j);return n}if(b.mergePolicyIs(s,"replace")){b.clear(n)}for(var l in j){var t=(r?r+".":"")+l;var p=o&&typeof(o)!=="string"?o[t]:o;var q=n[l];var m=j[l];var k=b.isPrimitive(q);if(m!==undefined){if(m!==null&&typeof m==="object"&&!m.nodeType&&!m.jquery&&m!==b.VALUE&&!b.mergePolicyIs(p,"preserve")){if(k){n[l]=q=m instanceof Array?[]:{}}d(o,t,q,m,p)}else{if(typeof(p)==="function"){p.call(null,n,j,l)}else{if(q===null||q===undefined||!b.mergePolicyIs(p,"reverse")){n[l]=b.mergePolicyIs(p,"preserve")?b.model.mergeModel(q,m):m}}}}}return n}b.merge=function(n,m){var r="";for(var l=2;l<arguments.length;++l){var j=arguments[l];if(j!==null&&j!==undefined){d(n,r,m,j,n?n[""]:null)}}if(n&&typeof(n)!=="string"){for(var p in n){var q=n[p];if(typeof(q)==="string"&&q!=="replace"){var k=b.get(m,p);if(k===null||k===undefined){var o=b.get(m,q);b.set(m,p,o)}}}}return m};b.mergeComponentOptions=function(k,j,m){var l=b.defaults(j);if(b.expandOptions){l=b.expandOptions(b.copy(l),k)}k.options=b.merge(l?l.mergePolicy:null,{},l,m)};b.COMPONENT_OPTIONS={type:"fluid.marker",value:"COMPONENT_OPTIONS"};b.emptySubcomponent=function(j){var l={};j=a.makeArray(j);var m=function(){};for(var k=0;k<j.length;++k){l[j[k]]=m}return l};b.computeNickName=function(k){var j=b.model.parseEL(k);return j[j.length-1]};b.initLittleComponent=function(k,j){var l={typeName:k,id:b.allocateGuid()};l.nickName=j&&j.nickName?j.nickName:b.computeNickName(l.typeName);b.mergeComponentOptions(l,k,j);return l};var e=1;b.allocateGuid=function(){return e++};b.event.identifyListener=function(j){if(!j.$$guid){j.$$guid=b.allocateGuid()}return j.$$guid};b.event.mapPriority=function(j){return(j===null||j===undefined?0:(j==="last"?-Number.MAX_VALUE:(j==="first"?Number.MAX_VALUE:j)))};b.event.listenerComparator=function(k,j){return j.priority-k.priority};b.event.sortListeners=function(j){var k=[];b.each(j,function(l){k.push(l)});return k.sort(b.event.listenerComparator)};b.event.getEventFirer=function(l,m){var k={};var j=[];function n(s,q,v){for(var r in s){var o=s[r];var t=o.listener;if(o.predicate&&!o.predicate(t,q)){continue}try{var p=(v?v(t):t).apply(null,q);if(m&&p===false){return false}}catch(u){b.log("FireEvent received exception "+u.message+" e "+u+" firing to listener "+r);throw (u)}}}return{addListener:function(r,q,o,p){if(!r){return}if(l){q="unicast"}if(!q){q=b.event.identifyListener(r)}k[q]={listener:r,predicate:o,priority:b.event.mapPriority(p)};j=b.event.sortListeners(k)},removeListener:function(o){if(typeof(o)==="string"){delete k[o]}else{if(o.$$guid){delete k[o.$$guid]}}j=b.event.sortListeners(k)},fireToListeners:function(p,o,q){return n(p,o,q)},fire:function(){return n(j,arguments)}}};b.container=function(l,m){var j=b.wrap(l);if(m&&!j||j.length===0){return null}if(!j||!j.jquery||j.length!==1){if(typeof(l)!=="string"){l=j.selector}var k=j.length!==undefined?j.length:0;b.fail({name:"NotOne",message:k>1?"More than one ("+k+") container elements were ":"No container element was found for selector "+l})}return j};b.createDomBinder=function(k,m){var l={},n={};function o(q,p){return b.allocateSimpleId(p)+"-"+q}function j(r,q,p){l[o(r,q)]=p}n.locate=function(r,t){var p,q,s;p=m[r];q=t?t:k;if(!q){b.fail("DOM binder invoked for selector "+r+" without container")}if(!p){return q}if(typeof(p)==="function"){s=a(p.call(null,b.unwrap(q)))}else{s=a(p,q)}if(s.get(0)===document){s=[]}if(!s.selector){s.selector=p;s.context=q}s.selectorName=r;j(r,q,s);return s};n.fastLocate=function(q,t){var p=t?t:k;var r=o(q,p);var s=l[r];return s?s:n.locate(q,t)};n.clear=function(){l={}};n.refresh=function(s,t){var q=t?t:k;if(typeof s==="string"){s=[s]}if(q.length===undefined){q=[q]}for(var r=0;r<s.length;++r){for(var p=0;p<q.length;++p){n.locate(s[r],q[p])}}};n.resolvePathSegment=n.locate;return n};b.expectFilledSelector=function(j,k){if(j&&j.length===0&&j.jquery){b.fail(k+': selector "'+j.selector+'" with name '+j.selectorName+" returned no results in context "+b.dumpEl(j.context))}};b.initView=function(k,j,m){b.expectFilledSelector(j,'Error instantiating component with name "'+k);j=b.container(j,true);
if(!j){return null}var l=b.initLittleComponent(k,m);l.container=j;b.initDomBinder(l);b.instantiateFirers(l,l.options);return l};b.initSubcomponent=function(l,k,j){return b.initSubcomponents(l,k,j)[0]};b.initSubcomponentImpl=function(o,n,l){var m;if(typeof(n)!=="function"){var p=typeof(n)==="string"?n:n.type;var j=b.defaults(true,p);b.merge("reverse",o.options,j);m=p==="fluid.emptySubcomponent"?b.emptySubcomponent(n.options):b.invokeGlobalFunction(p,l)}else{m=n.apply(null,l)}var k=m?m.returnedOptions:null;if(k){b.merge(o.options.mergePolicy,o.options,k);if(k.listeners){b.mergeListeners(o.events,k.listeners)}}return m};b.initSubcomponents=function(p,m,k){var o=p.options[m];if(!o){return}var j=a.makeArray(o);var q=-1;var n=[];k=a.makeArray(k);for(var l=0;l<k.length;++l){if(k[l]===b.COMPONENT_OPTIONS){q=l}}for(l=0;l<j.length;++l){o=j[l];if(q!==-1){k[q]=o.options}n[l]=b.initSubcomponentImpl(p,o,k)}return n};b.initDomBinder=function(j){j.dom=b.createDomBinder(j.container,j.options.selectors);j.locate=j.dom.locate};b.findAncestor=function(j,k){j=b.unwrap(j);while(j){if(k(j)){return j}j=j.parentNode}};b.jById=function(m,l){l=l&&l.nodeType===9?l:document;var j=b.byId(m,l);var k=j?a(j):[];k.selector="#"+m;k.context=l;return k};b.byId=function(l,k){k=k&&k.nodeType===9?k:document;var j=k.getElementById(l);if(j){if(j.getAttribute("id")!==l){b.fail("Problem in document structure - picked up element "+b.dumpEl(j)+" for id "+l+" without this id - most likely the element has a name which conflicts with this id")}return j}else{return null}};b.getId=function(j){return b.unwrap(j).getAttribute("id")};b.allocateSimpleId=function(j){j=b.unwrap(j);if(!j.id){j.id="fluid-id-"+b.allocateGuid()}return j.id};b.stringTemplate=function(n,k){var m=n;for(var l in k){var j="%"+l;m=m.replace(j,k[l])}return m};b.messageResolver=function(j){var k=b.initLittleComponent("fluid.messageResolver",j);k.messageBase=k.options.parseFunc(k.options.messageBase);k.lookup=function(m){var l=b.messageResolver.resolveOne(k.messageBase,m);if(l===undefined){return b.find(k.options.parents,function(n){return n.lookup(m)})}else{return{template:l,resolveFunc:k.options.resolveFunc}}};k.resolve=function(l,m){if(!l){return"[No messagecodes provided]"}l=b.makeArray(l);var n=k.lookup(l);return n?n.resolveFunc(n.template,m):"[Message string for key "+l[0]+" not found]"};return k};b.defaults("fluid.messageResolver",{mergePolicy:{messageBase:"preserve"},resolveFunc:b.stringTemplate,parseFunc:b.identity,messageBase:{},parents:[]});b.messageResolver.resolveOne=function(n,j){for(var k=0;k<j.length;++k){var m=j[k];var l=n[m];if(l!==undefined){return l}}};b.messageLocator=function(k,j){var l=b.messageResolver({messageBase:k,resolveFunc:j});return function(m,n){return l.resolve(m,n)}}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(e,d){var a="fluid-scoped-data";d.getScopedData=function(h,f){var g=e(h).data(a);return g?g[f]:undefined};d.setScopedData=function(h,f,g){e(h).each(function(){var i=e.data(this,a)||{};i[f]=g;e.data(this,a,i)})};var b=null;e(document).bind("focusin",function(f){b=f.target});d.getLastFocusedElement=function(){return b};var c="enablement";d.enabled=function(g,f){g=e(g);if(f===undefined){return d.getScopedData(g,c)!==false}else{e("*",g).add(g).each(function(){if(d.getScopedData(this,c)!==undefined){d.setScopedData(this,c,f)}else{if(/select|textarea|input/i.test(this.nodeName)){e(this).attr("disabled",!f)}}});d.setScopedData(g,c,f)}};d.initEnablement=function(f){d.setScopedData(f,c,true)}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(c,b){b.dom=b.dom||{};var a=function(d){if(d.node.firstChild){d.node=d.node.firstChild;d.depth+=1;return d}while(d.node){if(d.node.nextSibling){d.node=d.node.nextSibling;return d}d.node=d.node.parentNode;d.depth-=1}return d};b.dom.iterateDom=function(h,g,f){var e={node:h,depth:0};var d=h;var i;while(e.node!==null&&e.depth>=0&&e.depth<b.dom.iterateDom.DOM_BAIL_DEPTH){i=null;if(e.node.nodeType===1||f){i=g(e.node,e.depth)}if(i){if(i==="delete"){e.node.parentNode.removeChild(e.node);e.node=d}else{if(i==="stop"){return e.node}}}d=e.node;e=a(e)}};b.dom.iterateDom.DOM_BAIL_DEPTH=256;b.dom.isContainer=function(d,e){for(;e;e=e.parentNode){if(d===e){return true}}return false};b.dom.getElementText=function(f){var d=f.childNodes;var g="";for(var e=0;e<d.length;++e){var h=d[e];if(h.nodeType==3){g=g+h.nodeValue}}return g}})(jQuery,fluid_1_3);fluid_1_3=fluid_1_3||{};(function(c,b){var d=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;b.unescapeProperties=function(f){f=f.replace(d,function(j){var k=j.substring(2);var i=parseInt(k,16);return String.fromCharCode(i)});var h=0;while(true){var e=f.indexOf("\\",h);if(e===-1){break}if(e===f.length-1){return[f.substring(0,f.length-1),true]}var g=f.charAt(e+1);if(g==="n"){g="\n"}if(g==="r"){g="\r"}if(g==="t"){g="\t"}f=f.substring(0,e)+g+f.substring(e+2);h=e+1}return[f,false]};var a=/[^\\][\s:=]/;b.parseJavaProperties=function(l){var f={};l=l.replace(/\r\n/g,"\n");l=l.replace(/\r/g,"\n");lines=l.split("\n");var m,k,e,o,j;for(var g=0;g<lines.length;++g){var n=c.trim(lines[g]);if(!n||n.charAt(0)==="#"||n.charAt(0)==="!"){continue}if(!m){e="";var h=n.search(a);if(h===-1){k=n;o=""}else{k=c.trim(n.substring(0,h+1));o=c.trim(n.substring(h+2));if(o.charAt(0)===":"||o.charAt(0)==="="){o=c.trim(o.substring(1))}}k=b.unescapeProperties(k)[0];j=b.unescapeProperties(o)}else{j=b.unescapeProperties(n)}m=j[1];if(!j[1]){f[k]=e+j[0]}else{e+=j[0]}}return f};b.formatMessage=function(g,e){if(!e){return g}if(typeof(e)==="string"){e=[e]}for(var f=0;f<e.length;++f){g=g.replace("{"+f+"}",e[f])}return g}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};var fluid=fluid||fluid_1_3;(function(d,c){c.renderTimestamp=function(e){var f=function(h,i){if(!i){i=2}var g=(h==undefined?"":h.toString());return"00000".substring(5-i+g.length)+g};return f(e.getHours())+":"+f(e.getMinutes())+":"+f(e.getSeconds())+"."+f(e.getMilliseconds(),3)};function a(h,g){var f="";for(var e=0;e<g;++e){f+=h}return f}function b(l,k,g){var e=k+g.indentChars;if(l===null){return"null"}else{if(c.isPrimitive(l)){return JSON.stringify(l)}else{var f=[];if(c.isArrayable(l)){if(l.length===0){return"[]"}for(var h=0;h<l.length;++h){f[h]=b(l[h],e,g)}return"[\n"+e+f.join(",\n"+e)+"\n"+k+"]"}else{var h=0;c.each(l,function(j,i){f[h++]=JSON.stringify(i)+": "+b(j,e,g)});return"{\n"+e+f.join(",\n"+e)+"\n"+k+"}"}}}}c.prettyPrintJSON=function(f,e){e=d.extend({indent:4},e);e.indentChars=a(" ",e.indent);return b(f,"",e)};c.dumpEl=function(f){var g;if(!f){return"null"}if(f.nodeType===3||f.nodeType===8){return"[data: "+f.data+"]"}if(f.nodeType===9){return"[document: location "+f.location+"]"}if(!f.nodeType&&c.isArrayable(f)){g="[";for(var e=0;e<f.length;++e){g+=c.dumpEl(f[e]);if(e<f.length-1){g+=", "}}return g+"]"}f=d(f);g=f.get(0).tagName;if(f.attr("id")){g+="#"+f.attr("id")}if(f.attr("class")){g+="."+f.attr("class")}return g}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(e,d){d.BINDING_ROOT_KEY="fluid-binding-root";d.findData=function(i,h){while(i){var j=e.data(i,h);if(j){return j}i=i.parentNode}};d.bindFossils=function(i,j,h){e.data(i,d.BINDING_ROOT_KEY,{data:j,fossils:h})};d.boundPathForNode=function(k,j){k=d.unwrap(k);var i=k.name||k.id;var h=j[i];return h?h.EL:null};d.findForm=function(h){return d.findAncestor(h,function(i){return i.nodeName.toLowerCase()==="form"})};d.value=function(o,n){var l=d.unwrap(o);var h=false;if(l.nodeType===undefined&&l.length>1){l=l[0];h=true}if("input"!==l.nodeName.toLowerCase()||!/radio|checkbox/.test(l.type)){return e(l).val(n)}var i=l.name;if(i===undefined){d.fail("Cannot acquire value from node "+d.dumpEl(l)+" which does not have name attribute set")}var m;if(h){m=o}else{m=document.getElementsByName(i);var j=d.findForm(l);m=e.grep(m,function(p){if(p.name!==i){return false}return !j||d.dom.isContainer(j,p)})}if(n!==undefined){if(typeof(n)==="boolean"){n=(n?"true":"false")}e.each(m,function(){this.checked=(n instanceof Array?e.inArray(this.value,n)!==-1:n===this.value)})}else{var k=e.map(m,function(p){return p.checked?p.value:null});return l.type==="radio"?k[0]:k}};d.applyChange=function(m,n,j){m=d.unwrap(m);if(n===undefined){n=d.value(m)}if(m.nodeType===undefined&&m.length>0){m=m[0]}var h=d.findData(m,d.BINDING_ROOT_KEY);if(!h){d.fail("Bound data could not be discovered in any node above "+d.dumpEl(m))}var i=m.name;var k=h.fossils[i];if(!k){d.fail("No fossil discovered for name "+i+" in fossil record above "+d.dumpEl(m))}if(typeof(k.oldvalue)==="boolean"){n=n[0]?true:false}var l=h.fossils[i].EL;if(j){j.fireChangeRequest({path:l,value:n,source:m.id})}else{d.set(h.data,l,n)}};d.pathUtil={};var g=function(k,n,j){var l=null;if(k){l=""}var m=false;var h=n.length;for(;j<h;++j){var o=n.charAt(j);if(!m){if(o==="."){break}else{if(o==="\\"){m=true}else{if(l!==null){l+=o}}}}else{m=false;if(l!==null){k+=o}}}if(l!==null){k[0]=l}return j};var a=[];d.pathUtil.getPathSegment=function(j,h){g(a,j,h);return a[0]};d.pathUtil.getHeadPath=function(h){return d.pathUtil.getPathSegment(h,0)};d.pathUtil.getFromHeadPath=function(i){var h=g(null,i,0);return h===i.length?null:i.substring(h+1)};function f(h){return h.lastIndexOf(".")}d.pathUtil.getToTailPath=function(i){var h=f(i);return h===-1?null:i.substring(0,h)};d.pathUtil.getTailPath=function(i){var h=f(i);return d.pathUtil.getPathSegment(i,h+1)};var c=function(k,j){for(var h=0;h<j.length;++h){var l=j.charAt(h);if(l==="."||l==="\\"||l==="}"){k+="\\"}k+=l}return k};d.pathUtil.composePath=function(h,i){if(h.length!==0){h+="."}return c(h,i)};d.pathUtil.matchPath=function(h,k){var j="";while(true){if(!h||k===""){break}if(!k){return null}var i=d.pathUtil.getHeadPath(h);var l=d.pathUtil.getHeadPath(k);if(i!=="*"&&i!==l){return null}j=d.pathUtil.composePath(j,l);h=d.pathUtil.getFromHeadPath(h);k=d.pathUtil.getFromHeadPath(k)}return j};d.model.mergeModel=function(k,j,i){var h=d.copy(j);i=i||d.makeChangeApplier(j);i.fireChangeRequest({type:"ADD",path:"",value:k});i.fireChangeRequest({type:"MERGE",path:"",value:h});
return j};d.model.isNullChange=function(i,k,h){if(k.type==="ADD"){var j=d.get(i,k.path,h);if(j===k.value){return true}}};d.model.applyChangeRequest=function(h,k,j){var i=d.model.getPenultimate(h,k.path,j||d.model.defaultSetConfig);if(k.type==="ADD"||k.type==="MERGE"){if(i.last===""||k.type==="MERGE"){if(k.type==="ADD"){d.clear(i.root)}e.extend(true,i.last===""?i.root:i.root[i.last],k.value)}else{i.root[i.last]=k.value}}else{if(k.type==="DELETE"){if(i.last===""){d.clear(i.root)}else{delete i.root[i.last]}}}};function b(h){h.requestChange=function(l,k,i){var j={path:l,value:k,type:i};h.fireChangeRequest(j)}}d.makeChangeApplier=function(n,w){w=w||{};var m={guards:d.event.getEventFirer(false,true),postGuards:d.event.getEventFirer(false,true),modelChanged:d.event.getEventFirer(false,false)};var q={model:n};function i(y){if(!y){return null}var x=function(z){return function(A,B,D){var C=z(A,B,D);if(C===false){return false}else{if(d.model.isNullChange(A,B)){x.culled=true;return false}}}};return x}function v(B,x){var z=x;var A=false;var y=Number.MAX_VALUE;if(typeof(x)!=="string"){z=x.path;A=x.transactional;if(x.priority!==undefined){y=x.priority}}else{if(z.charAt(0)==="!"){A=true;z=z.substring(1)}}return function(H,G,D){var F=d.event.identifyListener(B);var I=G.guids[F];if(!I){var E=d.pathUtil.matchPath(z,H);if(E!==null){var C={changePath:H,pathSpec:z,listener:B,priority:y,transactional:A};if(D){C.accumulate=[D]}G.guids[F]=C;var J=A?"transListeners":"listeners";G[J].push(C);G.all.push(C)}}else{if(D){if(!I.accumulate){I.accumulate=[]}I.accumulate.push(D)}}}}function p(z,y,x,A,B){return m[z].fireToListeners(y[A],x,B)}function k(y,x){return y.priority-x.priority}function l(A,z,y,x){m[A].fire(z,y,x);y.all.sort(k);y.listeners.sort(k);y.transListeners.sort(k)}function s(){return{guids:{},all:[],listeners:[],transListeners:[]}}function o(z,y){var x=s();l(z,y,x);return x}function u(A,z,y,B){var x=o(A,z);return p(A,x,y,"all",B)}function j(y,x){y[x]={addListener:function(z,B,A){m[x].addListener(v(B,z),A)},removeListener:function(z){m[x].removeListener(z)}}}j(q,"guards");j(q,"postGuards");j(q,"modelChanged");function h(x){if(!x.type){x.type="ADD"}}var t={fireChangeRequest:function(x){q.fireChangeRequest(x,true)}};b(t);q.fireChangeRequest=function(z,C){h(z);var A=C?null:o("guards",z.path);if(A&&A.transListeners.length>0){var y=q.initiate();y.fireChangeRequest(z,A);y.commit()}else{if(!C){var x=p("guards",A,[n,z,t],"listeners");if(x===false){return false}}var B=n;if(!w.thin){B={};d.model.copyModel(B,n)}d.model.applyChangeRequest(n,z,w.resolverSetConfig);u("modelChanged",z.path,[n,B,[z]])}};b(q);function r(B,G,E,D,y){var x=s();for(var A=0;A<E.length;++A){l(B,E[A].path,x,E[A])}for(var z=0;z<x[G].length;++z){var F=x[G][z];if(y){D[y]=F.accumulate}var C=F.listener.apply(null,D);if(C===false){return false}}}q.initiate=function(y){var A=false;var z=[];if(w.thin){y=n}else{y=y||{};d.model.copyModel(y,n)}var B={fireChangeRequest:function(C){h(C);d.model.applyChangeRequest(y,C,w.resolverSetConfig);z.push(C)}};b(B);var x={commit:function(){var D;if(A){return false}var C=r("postGuards","transListeners",z,[y,null,B],1);if(C===false){return false}if(w.thin){D=n}else{D={};d.model.copyModel(D,n);d.clear(n);d.model.copyModel(n,y)}r("modelChanged","all",z,[n,D,null],2)},fireChangeRequest:function(D){h(D);if(w.cullUnchanged&&d.model.isNullChange(n,D,w.resolverGetConfig)){return}var E=i(w.cullUnchanged);var C=u("guards",D.path,[y,D,B],E);if(C===false&&!(E&&E.culled)){A=true}if(!A){if(!(E&&E.culled)){d.model.applyChangeRequest(y,D,w.resolverSetConfig);z.push(D)}}}};b(x);return x};return q};d.makeSuperApplier=function(){var i=[];var h={};h.addSubApplier=function(j,k){i.push({path:j,subApplier:k})};h.fireChangeRequest=function(m){for(var l=0;l<i.length;++l){var n=i[l].path;if(m.path.indexOf(n)===0){var k=m.path.substring(n.length+1);var j=d.copy(m);j.path=k;i[l].subApplier.fireChangeRequest(j)}}};b(h);return h};d.attachModel=function(h,o,m){var k=d.model.parseEL(o);for(var n=0;n<k.length-1;++n){var j=k[n];var l=h[j];if(!l){h[j]=l={}}h=l}h[k[k.length-1]]=m};d.assembleModel=function(h){var i={};var k=d.makeSuperApplier();var j={model:i,applier:k};for(var l in h){var m=h[l];d.attachModel(i,l,m.model);if(m.applier){k.addSubApplier(l,m.applier)}}return j}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};var fluid=fluid||fluid_1_3;(function(j,n){n.thatistBridge=function(G,I){var H=function(J){var L=J.split(".");var K=I;for(var O=0;O<L.length;++O){K=K[L[O]]}var N=[this];if(arguments.length===2){N=N.concat(j.makeArray(arguments[1]))}var M=K.apply(null,N);this.that=function(){return M};var P=typeof(M);return !M||P==="string"||P==="number"||P==="boolean"||M&&M.length!==undefined?M:this};j.fn[G]=H;return H};n.thatistBridge("fluid",n);n.thatistBridge("fluid_1_3",fluid_1_3);var k=function(){return j.browser.msie?"tabIndex":"tabindex"};var p=function(G){if(G.length<=0){return false}return j(G[0]).is("a, input, button, select, area, textarea, object")};var g=function(H){if(H.length<=0){return undefined}if(!n.tabindex.hasAttr(H)){return p(H)?Number(0):undefined}var G=H.attr(k());return Number(G)};var d=function(G,H){return G.each(function(I,J){j(J).attr(k(),H)})};n.tabindex=function(H,G){H=j(H);if(G!==null&&G!==undefined){return d(H,G)}else{return g(H)}};n.tabindex.remove=function(G){G=j(G);return G.each(function(H,I){j(I).removeAttr(k())})};n.tabindex.hasAttr=function(H){H=j(H);if(H.length<=0){return false}var G=H.map(function(){var I=this.getAttributeNode(k());return I?I.specified:false});return G.length===1?G[0]:G};n.tabindex.has=function(G){G=j(G);return n.tabindex.hasAttr(G)||p(G)};n.a11y=j.a11y||{};n.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var t={next:j.ui.keyCode.DOWN,previous:j.ui.keyCode.UP};var b={next:j.ui.keyCode.RIGHT,previous:j.ui.keyCode.LEFT};var B=function(G){return G.jquery?G[0]:G};var w=function(G){G.each(function(H,I){I=j(I);if(!I.fluid("tabindex.has")||I.fluid("tabindex")<0){I.fluid("tabindex",0)}})};n.tabbable=function(G){G=j(G);w(G)};var o="selectionContext";var v=-32768;var q=function(G){if(G.activeItemIndex!==v){if(G.options.onLeaveContainer){G.options.onLeaveContainer(G.selectables[G.activeItemIndex])}else{if(G.options.onUnselect){G.options.onUnselect(G.selectables[G.activeItemIndex])}}}if(!G.options.rememberSelectionState){G.activeItemIndex=v}};var m=function(G,H){if(H){H(G)}};var x=function(H,G){if(G&&H){G(H)}};var f=function(H,G){x(H,G.options.onUnselect)};var y=function(G,H){f(H.selectedElement(),H);G=B(G);var I=H.selectables.index(G);if(I===-1){return}H.activeItemIndex=I;m(G,H.options.onSelect)};var F=function(G){return function(H){j(H.target).fluid("tabindex",0);y(H.target,G);return H.stopPropagation()}};var h=function(G){return function(H){j(H.target).fluid("tabindex",G.options.selectablesTabindex);f(H.target,G);return H.stopPropagation()}};var u=function(G){var H=G.selectables;if(G.activeItemIndex>=H.length){G.activeItemIndex=0}if(G.activeItemIndex<0&&G.activeItemIndex!==v){G.activeItemIndex=H.length-1}if(G.activeItemIndex>=0){j(H[G.activeItemIndex]).focus()}};var A=function(G){var H=G.selectedElement();if(H){H.blur()}f(G.selectedElement(),G);if(G.activeItemIndex===v){G.activeItemIndex=-1}};var C=function(G){A(G);++G.activeItemIndex;u(G)};var l=function(G){A(G);--G.activeItemIndex;u(G)};var i=function(G,I,H){return function(J){if(J.which===I.next){C(G);J.preventDefault()}else{if(J.which===I.previous){l(G);J.preventDefault()}}}};var s=function(G){var H;if(G===n.a11y.orientation.HORIZONTAL){H=b}else{if(G===n.a11y.orientation.VERTICAL){H=t}}return H};var c=function(G){return function(H){if(H.which!==j.ui.keyCode.TAB){return}q(G);if(H.shiftKey){G.focusIsLeavingContainer=true}}};var r=function(G){return function(H){var J=G.options.autoSelectFirstItem;var I=typeof(J)==="function"?J():J;if(G.focusIsLeavingContainer){I=false}if(I&&H.target===G.container.get(0)){if(G.activeItemIndex===v){G.activeItemIndex=0}j(G.selectables[G.activeItemIndex]).focus()}return H.stopPropagation()}};var z=function(G){return function(H){G.focusIsLeavingContainer=false;return H.stopPropagation()}};var e=function(H,K,L){var I=j.extend(true,{},K,L);var M=s(I.direction);var G=I.selectableElements?I.selectableElements:H.find(I.selectableSelector);var J={container:H,activeItemIndex:v,selectables:G,focusIsLeavingContainer:false,options:I};J.selectablesUpdated=function(N){if(typeof(J.options.selectablesTabindex)==="number"){J.selectables.fluid("tabindex",J.options.selectablesTabindex)}J.selectables.unbind("focus."+o);J.selectables.unbind("blur."+o);J.selectables.bind("focus."+o,F(J));J.selectables.bind("blur."+o,h(J));if(M&&J.options.noBubbleListeners){J.selectables.unbind("keydown."+o);J.selectables.bind("keydown."+o,i(J,M))}if(N){y(N,J)}else{u(J)}};J.refresh=function(){if(!J.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}J.selectables=H.find(I.selectableSelector);J.selectablesUpdated()};J.selectedElement=function(){return J.activeItemIndex<0?null:J.selectables[J.activeItemIndex]};if(M&&!J.options.noBubbleListeners){H.keydown(i(J,M))}H.keydown(c(J));H.focus(r(J));H.blur(z(J));J.selectablesUpdated();return J};n.selectable=function(I,G){I=j(I);var H=e(I,n.selectable.defaults,G);n.setScopedData(I,o,H);return H};n.selectable.select=function(H,G){j(G).focus()};n.selectable.selectNext=function(G){G=j(G);C(n.getScopedData(G,o))};n.selectable.selectPrevious=function(G){G=j(G);l(n.getScopedData(G,o))};n.selectable.currentSelection=function(H){H=j(H);var G=n.getScopedData(H,o);return j(G.selectedElement())};n.selectable.defaults={direction:n.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null};var a=function(L,H){if(!L.modifier){return true}var I=L.modifier;var J=I&&H.ctrlKey;var G=I&&H.altKey;var K=I&&H.shiftKey;return J||G||K};var E=function(G){return function(H){var K=H.target;
if(!n.enabled(H.target)){return}var J=H.which?H.which:H.keyCode;if(J===G.key&&G.activateHandler&&a(G,H)){var I=j.Event("fluid-activate");j(H.target).trigger(I,[G.activateHandler]);if(I.isDefaultPrevented()){H.preventDefault()}}}};var D=function(J,M,G,H){var L=[];j(G).each(function(N,O){L.push({modifier:null,key:O,activateHandler:M})});if(H&&H.additionalBindings){L=L.concat(H.additionalBindings)}n.initEnablement(J);for(var I=0;I<L.length;++I){var K=L[I];J.keydown(E(K))}J.bind("fluid-activate",function(N,O){O=O||M;return O?O(N):null})};n.activatable=function(I,H,G){I=j(I);D(I,H,n.activatable.defaults.keys,G)};n.activate=function(G){j(G).trigger("fluid-activate")};n.activatable.defaults={keys:[j.ui.keyCode.ENTER,j.ui.keyCode.SPACE]}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(c,b){b.defaults("fluid.ariaLabeller",{labelAttribute:"aria-label",liveRegionMarkup:'<div class="liveRegion fl-offScreen-hidden" aria-live="polite"></div>',liveRegionId:"fluid-ariaLabeller-liveRegion",invokers:{generateLiveElement:{funcName:"fluid.ariaLabeller.generateLiveElement",args:["{ariaLabeller}"]}}});b.ariaLabeller=function(e,d){var f=b.initView("fluid.ariaLabeller",e,d);b.initDependents(f);f.update=function(h){h=h||f.options;f.container.attr(f.options.labelAttribute,h.text);if(h.dynamicLabel){var g=b.jById(f.options.liveRegionId);if(g.length===0){g=f.generateLiveElement()}g.text(h.text)}};f.update();return f};b.ariaLabeller.generateLiveElement=function(e){var d=c(e.options.liveRegionMarkup);d.attr("id",e.options.liveRegionId);c("body").append(d);return d};var a="aria-labelling";b.getAriaLabeller=function(d){d=c(d);var e=b.getScopedData(d,a);return e};b.updateAriaLabel=function(e,g,d){var d=c.extend({},d||{},{text:g});var f=b.getAriaLabeller(e);if(!f){f=b.ariaLabeller(e,d);b.setScopedData(e,a,f)}else{f.update(d)}return f};b.deadMansBlur=function(f,d){var e=b.initLittleComponent("fluid.deadMansBlur",d);e.blurPending=false;c(f).blur(function(){e.blurPending=true;setTimeout(function(){if(e.blurPending){e.options.handler(f)}},e.options.delay)});e.canceller=function(){e.blurPending=false};b.each(e.options.exclusions,function(g){var g=c(g);b.each(g,function(h){c(h).bind("focusin",e.canceller);c(h).click(e.canceller)})});return e};b.defaults("fluid.deadMansBlur",{delay:150})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(e,f){var j="__CURRENTLY_IN_CREATION__";var a=function(q,r,p){for(var o in q){var n=q[o];if(!n||n===p||!n.typeName){continue}if(r(n,o)){return true}a(n,r)}};var l=function(o,r){var p;for(var n=o.length-1;n>=0;--n){var q=o[n];if(q.options&&q.options.fireBreak){return}if(q.typeName){if(r(q,"")){return}}if(a(q,r,p)){return}p=q}};function m(n){return function(q,p){var o=q[p];if(o!==undefined){if(o[j]&&o!==n[0]){f.fail("Component of type "+o.typeName+" cannot be used for lookup of path "+segs.join(".")+" since it is still in creation. Please reorganise your dependencies so that they no longer contain circular references")}}else{if(q.options&&q.options.components&&q.options.components[p]){f.initDependent(q,p,n);o=q[p]}}return o}}function d(o,p){var n=[f.model.funcResolverStrategy,m(o)];var q=function(s){var t=s.context;var r;l(o,function(v,u){if(t===u||t===v.typeName||t===v.nickName){r=v;return true}if(v.options&&v.options.components&&v.options.components[t]&&!v[t]){r=f.get(v,t,n);return true}});return f.get(r,s.path,n)};return q}function k(n,o){return e.extend({},f.defaults("fluid.resolveEnvironment"),{noCopy:true,fetcher:d(n,o)})}function g(q,n,s,t){var r=q[0].model;var o=k(q,r);o.model=r;if(f.isMarker(n,f.COMPONENT_OPTIONS)){n=f.expander.expandLight(t,o)}else{if(typeof(n)==="string"&&n.charAt(0)==="@"){var p=n.substring(1);n=s[p]}else{n=f.expander.expandLight(n,o)}}return n}f.embodyDemands=function(q,w,n,A){var u=e.makeArray(w.args);A=A||{};if(u.length===0){if(A.componentOptions){u=[f.COMPONENT_OPTIONS]}else{if(A.passArgs){u=f.transform(n,function(B,C){return"@"+C})}}}var v=[];if(u){for(var t=0;t<u.length;++t){var z=u[t];if(typeof(z)==="object"&&!f.isMarker(z)){var s={};for(var y in z){var p=z[y];var x=g(q,p,n,A.componentOptions);f.set(s,y,x)}v[t]=s}else{var r=g(q,z,n,A.componentOptions);v[t]=r}if(t===u.length-1&&v[t]&&typeof(v[t])==="object"&&!v[t].typeName&&!v[t].targetTypeName){v[t].targetTypeName=w.funcName}}}else{v=n?n:[]}var o={args:v,funcName:w.funcName};return o};var i={};function b(n,s){var q=i[n]||[];outer:for(var p=0;p<q.length;++p){var r=q[p];for(var o=0;o<s.length;++o){if(r.contexts[o]!==s[o]){continue outer}}return r.spec}}f.demands=function(o,q,n){var r=e.makeArray(q).sort();if(!n){return b(o,r)}else{if(n.length){n={args:n}}}var p=i[o];if(!p){p=[];i[o]=p}p.push({contexts:r,spec:n})};f.getEnvironmentalThatStack=function(){return[f.staticEnvironment]};f.getDynamicEnvironmentalThatStack=function(){var n=f.threadLocal();var o=n["fluid.initDependents"];return o?o:f.getEnvironmentalThatStack()};f.locateDemands=function(n,o){var w=f.getEnvironmentalThatStack().concat(o);var x={};l(w,function(y){x[y.typeName]=true});var u=[];for(var s=0;s<n.length;++s){var q=i[n[s]]||[];for(var r=0;r<q.length;++r){var v=q[r];var t={spec:v.spec,intersect:0,uncess:0};for(var p=0;p<v.contexts.length;++p){t[x[v.contexts[p]]?"intersect":"uncess"]+=2}if(v.contexts.length===0){t.intersect++}u.push(t)}}u.sort(function(z,y){var A=y.intersect-z.intersect;return A===0?z.uncess-y.uncess:A});return u.length===0||u[0].intersect===0?null:u[0].spec};f.determineDemands=function(r,q){var t=r[r.length-1];q=e.makeArray(q);var n=f.locateDemands(q,r);if(!n){n={}}var p=q[0];if(n.funcName){p=n.funcName}var u=[];if(n.parent){var s=b(q[0],e.makeArray(n.parent).sort());if(s){u=s.args}}var o=[];f.merge(null,o,e.makeArray(u),e.makeArray(n.args));return{funcName:p,args:o}};f.resolveDemands=function(q,p,r,o){var n=f.determineDemands(q,p);return f.embodyDemands(q,n,r,o)};f.invoke=function(q,o,p,n){o=f.makeArray(o);return f.withNewComponent(p||{typeName:q},function(r){var s=f.resolveDemands(r,q,o,{passArgs:true});return f.invokeGlobalFunction(s.funcName,s.args,n)})};f.makeFreeInvoker=function(o,n){var p=f.determineDemands([f.staticEnvironment],o);return function(){var q=f.embodyDemands(f.staticEnvironment,p,arguments);return f.invokeGlobalFunction(q.funcName,q.args,n)}};f.makeInvoker=function(p,o,q,n){o=o||f.determineDemands(p,q);p=e.makeArray(p);return function(){var r=f.embodyDemands(p,o,arguments);return f.invokeGlobalFunction(r.funcName,r.args,n)}};f.addBoiledListener=function(q,o,s,r,n){q=e.makeArray(q);var p=q[q.length-1];p.events[o].addListener(function(u){var t=f.resolveDemands(q,o,u);s.apply(null,t.args)},r,n)};f.registerNamespace("fluid.expander");f.expander.preserveFromExpansion=function(n){var o={};var p=["mergePolicy","components","invokers"];f.each(n.mergePolicy,function(r,q){if(f.mergePolicyIs(r,"noexpand")){p.push(q)}});f.each(p,function(s){var q=f.model.getPenultimate(n,s);var r=q.root[q.last];delete q.root[q.last];f.set(o,s,r)});return{restore:function(q){f.each(p,function(s){var r=f.get(o,s);if(r!==undefined){f.set(q,s,r)}})}}};f.expandOptions=function(n,o){if(f.isPrimitive(n)){return n}return f.withNewComponent(o,function(q){var r=k(q);r.noCopy=true;if(!f.isArrayable(n)){var s=f.expander.preserveFromExpansion(n)}var p=f.expander.expandLight(n,r);if(s){s.restore(p)}return p})};f.initDependent=function(r,p,q){if(!r||r[p]){return}var o=r.options.components[p];var s=f.resolveDemands(q,[o.type,p],[],{componentOptions:o.options});var n=f.initSubcomponentImpl(r,{type:s.funcName},s.args);if(n){r[p]=n}};f.withNewComponent=function(r,q){r[j]=true;var n=f.threadLocal();var p=n["fluid.initDependents"];if(!p){p=[r];n["fluid.initDependents"]=p}else{p.push(r)}var o=[f.staticEnvironment,f.threadLocal()].concat(f.makeArray(p));try{return q(o)}finally{p.pop();delete r[j]}};f.initDependents=function(o){var n=o.options;f.withNewComponent(o,function(r){var s=n.components||{};for(var q in s){f.initDependent(o,q,r)}var p=n.invokers||{};for(var q in p){var u=p[q];var t=typeof(u)==="string"?u:null;o[q]=f.makeInvoker(r,t?null:u,t)}})};f.typeTag=function(n){return{typeName:n}};f.standardComponent=function(n){return function(o,p){var q=f.initView(n,o,p);f.initDependents(q);return q}};f.littleComponent=function(n){return function(o){var p=f.initLittleComponent(n,o);f.initDependents(p);return p}};f.makeComponents=function(p,o){if(!o){o=f.environment}for(var n in p){f.setGlobalValue(n,f.invokeGlobalFunction(p[n],[n],o),o)}};f.staticEnvironment=f.typeTag("fluid.staticEnvironment");f.staticEnvironment.environmentClass=f.typeTag("fluid.browser");f.demands("fluid.threadLocal","fluid.browser",{funcName:"fluid.singleThreadLocal"});var h=f.typeTag("fluid.dynamicEnvironment");f.singleThreadLocal=function(){return h};f.threadLocal=f.makeFreeInvoker("fluid.threadLocal");f.withEnvironment=function(o,q){var n=f.threadLocal();try{e.extend(n,o);return q()}finally{for(var p in o){delete n[p]}}};f.extractEL=function(o,n){if(n.ELstyle==="ALL"){return o}else{if(n.ELstyle.length===1){if(o.charAt(0)===n.ELstyle){return o.substring(1)}}else{if(n.ELstyle==="${}"){var q=o.indexOf("${");var p=o.lastIndexOf("}");if(q===0&&p!==-1){return o.substring(2,p)}}}}};f.extractELWithContext=function(o,n){var p=f.extractEL(o,n);if(p&&p.charAt(0)==="{"){return f.parseContextReference(p,0)}return p?{path:p}:p};f.extractContextualPath=function(p,o,q){var n=f.extractELWithContext(p,o);if(n){if(n.context){var r=q[n.context];if(typeof(r)!=="string"){f.fail("Could not look up context path named "+n.context+" to string value")}return f.model.composePath(r,n.path)}else{return n.path}}};f.parseContextReference=function(n,p,o){var s=n.indexOf("}",p+1);if(s===-1){f.fail("Malformed context reference without }")}var q=n.substring(p+1,s);var r=o?n.indexOf(o,s+1):n.length;var t=n.substring(s+1,r);if(t.charAt(0)==="."){t=t.substring(1)}return{context:q,path:t,endpos:r}};f.fetchContextReference=function(n,p,o){var q=n.context?o[n.context]:p;if(!q){return q}return f.get(q,n.path)};f.resolveContextValue=function(p,o){if(o.bareContextRefs&&p.charAt(0)==="{"){var n=f.parseContextReference(p,0);
return o.fetcher(n)}else{if(o.ELstyle&&o.ELstyle!=="${}"){var n=f.extractELWithContext(p,o);if(n){return o.fetcher(n)}}}while(typeof(p)==="string"){var t=p.indexOf("${");var s=p.indexOf("}",t+2);var r=(t===0&&s===p.length-1);if(t!==-1&&s!==-1){var n;if(p.charAt(t+2)==="{"){n=f.parseContextReference(p,t+2,"}");s=n.endpos}else{n={path:p.substring(t+2,s)}}var q=o.fetcher(n);if(q===undefined||q===null){return q}p=r?q:p.substring(0,t)+q+p.substring(s+1)}else{break}}return p};function c(p,n){function o(q){return c(q,n)}if(typeof(p)==="string"&&!n.noValue){return f.resolveContextValue(p,n)}else{if(f.isPrimitive(p)||p.nodeType!==undefined||p.jquery){return p}else{if(n.filter){return n.filter(p,o,n)}else{return(n.noCopy?f.each:f.transform)(p,function(r,q){return c(r,n)})}}}}f.defaults("fluid.resolveEnvironment",{ELstyle:"${}",bareContextRefs:true});f.environmentFetcher=function(o){var n=f.threadLocal();return function(p){return f.fetchContextReference(p,o,n)}};f.resolveEnvironment=function(p,o,q){o=o||{};var n=f.merge(null,{},f.defaults("fluid.resolveEnvironment"),q);if(!n.fetcher){n.fetcher=f.environmentFetcher(o)}return c(p,n)};f.expander.deferredCall=function(q,p,o){var r=p.expander;var n=(!r.args||f.isArrayable(r.args))?r.args:e.makeArray(r.args);n=o(n);return f.invokeGlobalFunction(r.func,n)};f.deferredCall=f.expander.deferredCall;f.deferredInvokeCall=function(q,p,o){var r=p.expander;var n=(!r.args||f.isArrayable(r.args))?r.args:e.makeArray(r.args);n=o(n);return f.invoke(r.func,n)};f.expander.noexpand=function(o,n){return e.extend(o,n.expander.tree)};f.noexpand=f.expander.noexpand;f.expander.lightFilter=function(s,q,n){var p;if(f.isArrayable(s)){p=n.noCopy?s:[];f.each(s,function(v,u){p[u]=q(v)})}else{p=n.noCopy?s:{};for(var o in s){var r=s[o];var t;if(o==="expander"&&!(n.expandOnly&&n.expandOnly[r.type])){t=f.getGlobalValue(r.type);if(t){return t.call(null,p,s,q)}}if(o!=="expander"||!t){p[o]=q(r)}}}return n.noCopy?s:p};f.expander.expandLight=function(p,o){var n=e.extend({},o);n.filter=f.expander.lightFilter;return f.resolveEnvironment(p,n.model,n)}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(e,d){var c={};var b={};d.fetchResources=function(g,i,f){var h=d.initLittleComponent("fluid.fetchResources",f);h.resourceSpecs=g;h.callback=i;h.operate=function(){d.fetchResources.fetchResourcesImpl(h)};d.each(g,function(j){j.recurseFirer=d.event.getEventFirer();j.recurseFirer.addListener(h.operate);if(j.url&&!j.href){j.href=j.url}});if(h.options.amalgamateClasses){d.fetchResources.amalgamateClasses(g,h.options.amalgamateClasses,h.operate)}h.operate();return h};d.fetchResources.amalgamateClasses=function(h,g,f){d.each(g,function(i){var j=b[i];d.each(j,function(k,l){h[i+"!"+l]=k;k.recurseFirer.addListener(f)})})};d.fetchResources.timeSuccessCallback=function(f){if(f.timeSuccess&&f.options&&f.options.success){var g=f.options.success;f.options.success=function(){var i=new Date();var h=g.apply(null,arguments);d.log("External callback for URL "+f.href+" completed - callback time: "+(new Date().getTime()-i.getTime())+"ms");return h}}};function a(f){return f}d.fetchResources.clearResourceCache=function(f){if(f){delete c[a(f)]}else{d.clear(c)}};d.fetchResources.handleCachedRequest=function(g,f){var i=a(g.href);var h=c[i];if(h.$$firer$$){d.log("Handling request for "+i+" from cache");var j=g.fetchClass;if(j&&b[j]){d.log("Clearing pendingClass entry for class "+j);delete b[j][i]}c[i]=f;h.fire(f)}};d.fetchResources.completeRequest=function(f,g){f.queued=false;f.completeTime=new Date();d.log("Request to URL "+f.href+" completed - total elapsed time: "+(f.completeTime.getTime()-f.initTime.getTime())+"ms");f.recurseFirer.fire()};d.fetchResources.makeResourceCallback=function(f){return{success:function(g){f.resourceText=g;f.resourceKey=f.href;if(f.forceCache){d.fetchResources.handleCachedRequest(f,g)}d.fetchResources.completeRequest(f)},error:function(g,i,h){f.fetchError={status:g.status,textStatus:g.textStatus,errorThrown:h};d.fetchResources.completeRequest(f)}}};d.fetchResources.issueCachedRequest=function(g,f){var i=a(g.href);var h=c[i];if(!h){d.log("First request for cached resource with url "+i);h=d.event.getEventFirer();h.$$firer$$=true;c[i]=h;var j=g.fetchClass;if(j){if(!b[j]){b[j]={}}b[j][i]=g}f.cache=false;e.ajax(f)}else{if(!h.$$firer$$){f.success(h)}else{d.log("Request for cached resource which is in flight: url "+i);h.addListener(function(k){f.success(k)})}}};d.fetchResources.composeCallbacks=function(f,g){return g?function(){try{g.apply(null,arguments)}catch(h){d.log("Exception applying external fetchResources callback: "+h)}f.apply(null,arguments)}:f};d.fetchResources.composePolicy=function(h,g,f){h[f]=d.fetchResources.composeCallbacks(h[f],g[f])};d.defaults("fluid.fetchResources.issueRequest",{mergePolicy:{success:d.fetchResources.composePolicy,error:d.fetchResources.composePolicy,url:"reverse"}});d.fetchResources.issueRequest=function(g,h){var i=d.fetchResources.makeResourceCallback(g);var f={url:g.href,success:i.success,error:i.error};d.fetchResources.timeSuccessCallback(g);d.merge(d.defaults("fluid.fetchResources.issueRequest").mergePolicy,f,g.options);g.queued=true;g.initTime=new Date();d.log("Request with key "+h+" queued for "+g.href);if(g.forceCache){d.fetchResources.issueCachedRequest(g,f)}else{e.ajax(f)}};d.fetchResources.fetchResourcesImpl=function(l){var f=true;var j=true;var h=l.resourceSpecs;for(var i in h){var g=h[i];if(!g.options||g.options.async){j=false}if(g.href&&!g.completeTime){if(!g.queued){d.fetchResources.issueRequest(g,i)}if(g.queued){f=false}}else{if(g.nodeId&&!g.resourceText){var k=document.getElementById(g.nodeId);g.resourceText=d.dom.getElementText(k);g.resourceKey=g.nodeId}}}if(f&&l.callback&&!l.callbackCalled){l.callbackCalled=true;if(e.browser.mozilla&&!j){setTimeout(function(){l.callback(h)},1)}else{l.callback(h)}}};d.fetchResources.primeCacheFromResources=function(f){var i=d.defaults(f).resources;var h={typeName:"fluid.fetchResources.primeCacheFromResources"};var g=(d.expandOptions?d.expandOptions:d.identity)(d.copy(i),h);d.fetchResources(g)};d.registerNamespace("fluid.expander");d.expander.makeDefaultFetchOptions=function(f,h,g){return e.extend(true,{dataType:"text"},g,{success:function(i,k){var j=JSON.parse(i);k(f(j))},error:function(i,j){d.log("Error fetching "+h+": "+j)}})};d.expander.makeFetchExpander=function(f){return{expander:{type:"fluid.expander.deferredFetcher",href:f.url,options:d.expander.makeDefaultFetchOptions(f.disposer,f.url,f.options),resourceSpecCollector:"{resourceSpecCollector}",fetchKey:f.fetchKey}}};d.expander.deferredFetcher=function(k,i){var l=i.expander;var f=d.copy(l);var j=d.resolveEnvironment(l.resourceSpecCollector);delete f.type;delete f.resourceSpecCollector;delete f.fetchKey;var h=function(m){e.extend(k,m)};f.options.success=function(m){l.options.success(m,h)};var g=l.fetchKey||d.allocateGuid();j[g]=f;return k}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(b,a){a.XMLP=function(c){return a.XMLP.XMLPImpl(c)};a.XMLP.closedTags={abbr:true,br:true,col:true,img:true,input:true,link:true,meta:true,param:true,hr:true,area:true,embed:true};a.XMLP._NONE=0;a.XMLP._ELM_B=1;a.XMLP._ELM_E=2;a.XMLP._ELM_EMP=3;a.XMLP._ATT=4;a.XMLP._TEXT=5;a.XMLP._ENTITY=6;a.XMLP._PI=7;a.XMLP._CDATA=8;a.XMLP._COMMENT=9;a.XMLP._DTD=10;a.XMLP._ERROR=11;a.XMLP._CONT_XML=0;a.XMLP._CONT_ALT=1;a.XMLP._ATT_NAME=0;a.XMLP._ATT_VAL=1;a.XMLP._STATE_PROLOG=1;a.XMLP._STATE_DOCUMENT=2;a.XMLP._STATE_MISC=3;a.XMLP._errs=[];a.XMLP._errs[a.XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";a.XMLP._errs[a.XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";a.XMLP._errs[a.XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";a.XMLP._errs[a.XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";a.XMLP._errs[a.XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";a.XMLP._errs[a.XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";a.XMLP._errs[a.XMLP.ERR_PI_TARGET=6]="PI: target is required";a.XMLP._errs[a.XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";a.XMLP._errs[a.XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';a.XMLP._errs[a.XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';a.XMLP._errs[a.XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";a.XMLP._errs[a.XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';a.XMLP._errs[a.XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';a.XMLP._errs[a.XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";a.XMLP._errs[a.XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";a.XMLP._errs[a.XMLP.ERR_INFINITELOOP=15]="Infinite loop";a.XMLP._errs[a.XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";a.XMLP._errs[a.XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";a.XMLP._checkStructure=function(e,f){var c=e.m_stack;if(a.XMLP._STATE_PROLOG==e.m_iState){e.m_iState=a.XMLP._STATE_DOCUMENT}if(a.XMLP._STATE_DOCUMENT===e.m_iState){if((a.XMLP._ELM_B==f)||(a.XMLP._ELM_EMP==f)){e.m_stack[c.length]=e.getName()}if((a.XMLP._ELM_E==f)||(a.XMLP._ELM_EMP==f)){if(c.length===0){return a.XMLP._NONE}var d=c[c.length-1];e.m_stack.length--;if(d===null||d!==e.getName()){return e._setErr(e,a.XMLP.ERR_ELM_NESTING)}}}return f};a.XMLP._parseCDATA=function(d,c){var e=d.m_xml.indexOf("]]>",c);if(e==-1){return a.XMLP._setErr(d,a.XMLP.ERR_CLOSE_CDATA)}a.XMLP._setContent(d,a.XMLP._CONT_XML,c,e);d.m_iP=e+3;return a.XMLP._CDATA};a.XMLP._parseComment=function(d,c){var e=d.m_xml.indexOf("-->",c);if(e==-1){return a.XMLP._setErr(d,a.XMLP.ERR_CLOSE_COMMENT)}a.XMLP._setContent(d,a.XMLP._CONT_XML,c-4,e+3);d.m_iP=e+3;return a.XMLP._COMMENT};a.XMLP._parseDTD=function(g,d){var h,c,e,f;h=g.m_xml.indexOf(">",d);if(h==-1){return a.XMLP._setErr(g,a.XMLP.ERR_CLOSE_DTD)}e=g.m_xml.indexOf("[",d);c=((e!=-1)&&(e<h))?"]>":">";while(true){if(h==f){return a.XMLP._setErr(g,a.XMLP.ERR_INFINITELOOP)
}f=h;h=g.m_xml.indexOf(c,d);if(h==-1){return a.XMLP._setErr(g,a.XMLP.ERR_CLOSE_DTD)}if(g.m_xml.substring(h-1,h+2)!="]]>"){break}}g.m_iP=h+c.length;return a.XMLP._DTD};a.XMLP._parsePI=function(e,d){var h,c,g,i,f;h=e.m_xml.indexOf("?>",d);if(h==-1){return a.XMLP._setErr(e,a.XMLP.ERR_CLOSE_PI)}c=a.SAXStrings.indexOfNonWhitespace(e.m_xml,d,h);if(c==-1){return a.XMLP._setErr(e,a.XMLP.ERR_PI_TARGET)}g=a.SAXStrings.indexOfWhitespace(e.m_xml,c,h);if(g==-1){g=h}i=a.SAXStrings.indexOfNonWhitespace(e.m_xml,g,h);if(i==-1){i=h}f=a.SAXStrings.lastIndexOfNonWhitespace(e.m_xml,i,h);if(f==-1){f=h-1}e.m_name=e.m_xml.substring(c,g);a.XMLP._setContent(e,a.XMLP._CONT_XML,i,f+1);e.m_iP=h+2;return a.XMLP._PI};a.XMLP._parseText=function(d,c){var e=d.m_xml.indexOf("<",c);if(e==-1){e=d.m_xml.length}a.XMLP._setContent(d,a.XMLP._CONT_XML,c,e);d.m_iP=e;return a.XMLP._TEXT};a.XMLP._setContent=function(d,e){var c=arguments;if(a.XMLP._CONT_XML==e){d.m_cAlt=null;d.m_cB=c[2];d.m_cE=c[3]}else{d.m_cAlt=c[2];d.m_cB=0;d.m_cE=c[2].length}d.m_cSrc=e};a.XMLP._setErr=function(e,d){var c=a.XMLP._errs[d];e.m_cAlt=c;e.m_cB=0;e.m_cE=c.length;e.m_cSrc=a.XMLP._CONT_ALT;return a.XMLP._ERROR};a.XMLP._parseElement=function(o,p){var l,f,i;var q,g,c;f=l=o.m_xml.indexOf(">",p);if(l==-1){return o._setErr(o,a.XMLP.ERR_CLOSE_ELM)}if(o.m_xml.charAt(p)=="/"){q=a.XMLP._ELM_E;p++}else{q=a.XMLP._ELM_B}if(o.m_xml.charAt(l-1)=="/"){if(q==a.XMLP._ELM_E){return a.XMLP._setErr(o,a.XMLP.ERR_ELM_EMPTY)}q=a.XMLP._ELM_EMP;f--}o.nameRegex.lastIndex=p;var m=o.nameRegex.exec(o.m_xml);if(!m){return a.XMLP._setErr(o,a.XMLP.ERR_ELM_NAME)}g=m[1].toLowerCase();if("li"===g&&q!==a.XMLP._ELM_E&&o.m_stack.length>0&&o.m_stack[o.m_stack.length-1]==="li"&&!o.m_emitSynthetic){o.m_name="li";o.m_emitSynthetic=true;return a.XMLP._ELM_E}o.m_attributes={};o.m_cAlt="";if(o.nameRegex.lastIndex<f){o.m_iP=o.nameRegex.lastIndex;while(o.m_iP<f){o.attrStartRegex.lastIndex=o.m_iP;var e=o.attrStartRegex.exec(o.m_xml);if(!e){return a.XMLP._setErr(o,a.XMLP.ERR_ATT_VALUES)}var j=e[1].toLowerCase();var n;if(o.m_xml.charCodeAt(o.attrStartRegex.lastIndex)===61){var d=o.m_xml.charCodeAt(o.attrStartRegex.lastIndex+1)===34?o.attrValRegex:o.attrValIERegex;d.lastIndex=o.attrStartRegex.lastIndex+1;e=d.exec(o.m_xml);if(!e){return a.XMLP._setErr(o,a.XMLP.ERR_ATT_VALUES)}n=e[1]}else{n=j;d=o.attrStartRegex}if(!o.m_attributes[j]){o.m_attributes[j]=n}else{return a.XMLP._setErr(o,a.XMLP.ERR_ATT_DUP)}o.m_iP=d.lastIndex}}if(g.indexOf("<")!=-1){return a.XMLP._setErr(o,a.XMLP.ERR_ELM_LT_NAME)}o.m_name=g;o.m_iP=l+1;if(a.XMLP.closedTags[g]){o.closeRegex.lastIndex=l+1;var h=o.closeRegex.exec;if(h){var k=o.m_xml.indexOf(g,h.lastIndex);if(k===h.lastIndex){return q}else{return a.XMLP._ELM_EMP}}}o.m_emitSynthetic=false;return q};a.XMLP._parse=function(f){var g=f.m_iP;var d=f.m_xml;if(g===d.length){return a.XMLP._NONE}var h=d.charAt(g);if(h==="<"){var e=d.charAt(g+1);if(e==="?"){return a.XMLP._parsePI(f,g+2)}else{if(e==="!"){if(g===d.indexOf("<!DOCTYPE",g)){return a.XMLP._parseDTD(f,g+9)}else{if(g===d.indexOf("<!--",g)){return a.XMLP._parseComment(f,g+4)}else{if(g===d.indexOf("<![CDATA[",g)){return a.XMLP._parseCDATA(f,g+9)}}}}else{return a.XMLP._parseElement(f,g+1)}}}else{return a.XMLP._parseText(f,g)}};a.XMLP.XMLPImpl=function(d){var c={};c.m_xml=d;c.m_iP=0;c.m_iState=a.XMLP._STATE_PROLOG;c.m_stack=[];c.m_attributes={};c.m_emitSynthetic=false;c.getColumnNumber=function(){return a.SAXStrings.getColumnNumber(c.m_xml,c.m_iP)};c.getContent=function(){return(c.m_cSrc==a.XMLP._CONT_XML)?c.m_xml:c.m_cAlt};c.getContentBegin=function(){return c.m_cB};c.getContentEnd=function(){return c.m_cE};c.getLineNumber=function(){return a.SAXStrings.getLineNumber(c.m_xml,c.m_iP)};c.getName=function(){return c.m_name};c.next=function(){return a.XMLP._checkStructure(c,a.XMLP._parse(c))};c.nameRegex=/([^\s\/>]+)/g;c.attrStartRegex=/\s*([\w:_][\w:_\-\.]*)/gm;c.attrValRegex=/\"([^\"]*)\"\s*/gm;c.attrValIERegex=/([^\>\s]+)\s*/gm;c.closeRegex=/\s*<\//g;return c};a.SAXStrings={};a.SAXStrings.WHITESPACE=" \t\n\r";a.SAXStrings.QUOTES="\"'";a.SAXStrings.getColumnNumber=function(f,e){if(!f){return -1}e=e||f.length;var c=f.substring(0,e).split("\n");c.length--;var d=c.join("\n").length;return e-d};a.SAXStrings.getLineNumber=function(d,c){if(!d){return -1}c=c||d.length;return d.substring(0,c).split("\n").length};a.SAXStrings.indexOfNonWhitespace=function(h,d,f){if(!h){return -1}d=d||0;f=f||h.length;for(var e=d;e<f;++e){var g=h.charAt(e);if(g!==" "&&g!=="\t"&&g!=="\n"&&g!=="\r"){return e}}return -1};a.SAXStrings.indexOfWhitespace=function(f,c,e){if(!f){return -1}c=c||0;e=e||f.length;for(var d=c;d<e;d++){if(a.SAXStrings.WHITESPACE.indexOf(f.charAt(d))!=-1){return d}}return -1};a.SAXStrings.lastIndexOfNonWhitespace=function(f,c,e){if(!f){return -1}c=c||0;e=e||f.length;for(var d=e-1;d>=c;d--){if(a.SAXStrings.WHITESPACE.indexOf(f.charAt(d))==-1){return d}}return -1};a.SAXStrings.replace=function(g,c,f,e,d){if(!g){return""}c=c||0;f=f||g.length;return g.substring(c,f).split(e).join(d)}})(jQuery,fluid_1_3);fluid_1_3=fluid_1_3||{};(function(b,c){c.parseTemplate=function(n,P,l,j,E){E=E||{};if(!n){c.fail("empty template supplied to fluid.parseTemplate")}var L;var F;var T;var O=0;var D=0;var w=false;var p=-1;var o=-1;var J=E;var P;var U=false;var v=[];var m={};var s=[];XMLLump=function(V,t){return{nestingdepth:t,lumpindex:V,parent:L}};function H(t){return t.length===1&&t[0].predList.length===1&&t[0].predList[0].clazz}function Q(Z,V,Y){L.rootlump=XMLLump(0,-1);T=[L.rootlump];O=0;D=0;w=false;p=-1;o=-1;P=Z;U=V;if(Y){for(var X=0;X<Y.length;++X){var t=c.parseSelector(Y[X].selector);var W=H(t);if(W){m[W]=Y[X].id}else{s.push([]);v.push(b.extend({},Y[X],{tree:t}))}}}}function G(){for(var t=T.length-1;t>=0;--t){var V=T[t];if(V.rsfID!==undefined){return V}}return L.rootlump}function K(){var t=XMLLump(O,D);if(U){t.line=F.getLineNumber();t.column=F.getColumnNumber()}L.lumps[O]=t;++O;return t}function x(V,t,W){var X=V[t];if(!X){X=[];V[t]=X}X[X.length]=W}function r(t,V){if(t.indexOf("scr=contribute-")!==-1){var W=t.substring("scr=contribute-".length);x(L.collectmap,W,V)}}function N(t){return"<"+t.tagname+">"}function B(V,t){if(!t){return false}return(" "+t+" ").indexOf(" "+V+" ")!==-1}function A(X,Y,V){if(X.predList){for(var W=0;W<X.predList.length;++W){var t=X.predList[W];if(t.id&&Y.attributemap.id!==t.id){return false}if(t.clazz&&!B(t.clazz,V)){return false}if(t.tag&&Y.tagname!==t.tag){return false}}return true}}function M(ab){var V;var Z=ab.attributemap["class"];if(Z){var ac=Z.split(" ");for(var Y=0;Y<ac.length;++Y){var aa=m[b.trim(ac[Y])];if(aa){return aa}}}for(var Y=0;Y<v.length;++Y){var ad=v[Y];var ae=s[Y];var t=ae.length;if(t<ad.tree.length){var W=ad.tree[t];if(t>0){if(ad.tree[t-1].child&&ae[t-1]!==ab.nestingdepth-1){continue}}var X=A(W,ab,Z);if(X){ae[ae.length]=ab.nestingdepth;if(ae.length===ad.tree.length){if(V!==undefined){c.fail("Cutpoint specification error - node "+N(ab)+" has already matched with rsf:id of "+V)}if(ad.id===undefined||ad.id===null){c.fail("Error in cutpoints list - entry at position "+Y+" does not have an id set")}V=ad.id}}}}return V}function I(){if(v){for(var t=0;t<v.length;++t){var V=s[t];if(V.length>0&&V[V.length-1]===D){V.length--}}}}function k(ac,ag){++D;if(w){w=false;var Y=K();Y.nestingdepth--}if(L.firstdocumentindex===-1){L.firstdocumentindex=O}var ab=K();var t=T[T.length-1];ab.uplump=t;var ae=F.getName();ab.tagname=ae;var af=ab.attributemap=F.m_attributes;var ad=af[c.ID_ATTRIBUTE];if(ad===undefined){ad=M(ab)}for(var X in af){var aa=af[X];if(ad===undefined){if(/href|src|codebase|action/.test(X)){ad="scr=rewrite-url"}else{if(ad===undefined&&/for|headers/.test(X)){ad="scr=null"}}}}if(ad){if(ad.charCodeAt(0)===126){ad=ad.substring(1);ab.elide=true}r(ad,ab);ab.rsfID=ad;var W=G();if(!W.downmap){W.downmap={}}while(W){if(W.downmap){x(W.downmap,ad,ab)}W=W.uplump}x(L.globalmap,ad,ab);var V=ad.indexOf(":");if(V!==-1){var Z=ad.substring(0,V);if(!t.finallump){t.finallump={}}t.finallump[Z]=ab}}ab.text="<"+ae+c.dumpAttributes(af)+(ac&&!ad?"/>":">");T[T.length]=ab;if(ac){if(ad){y()}else{--D;T.length--}}}function y(){I();var t=K();--D;t.text="</"+F.getName()+">";var V=T[T.length-1];V.close_tag=L.lumps[O-1];T.length--;w=true}function u(){if(p!==-1){if(L.firstdocumentindex===-1){L.firstdocumentindex=O}var V=F.getContent().substr(p,o-p);w=false;var t=K();t.text=V;p=-1}}L=c.XMLViewTemplate();Q(P,E.debugMode,j);var R=n.indexOf(c.ID_ATTRIBUTE);if(l){var z=n.indexOf(">",R);F=c.XMLP(n.substring(z+1))}else{F=c.XMLP(n)}parseloop:while(true){var S=F.next();switch(S){case c.XMLP._ELM_B:u();k(false,"");break;case c.XMLP._ELM_E:u();y();break;case c.XMLP._ELM_EMP:u();k(true,"");break;case c.XMLP._PI:case c.XMLP._DTD:p=-1;continue;case c.XMLP._TEXT:case c.XMLP._ENTITY:case c.XMLP._CDATA:case c.XMLP._COMMENT:if(p===-1){p=F.m_cB}o=F.m_cE;break;case c.XMLP._ERROR:c.setLogging(true);var q="Error parsing template: "+F.m_cAlt+" at line "+F.getLineNumber();c.log(q);c.log("Just read: "+F.m_xml.substring(F.m_iP-30,F.m_iP));c.log("Still to read: "+F.m_xml.substring(F.m_iP,F.m_iP+30));c.fail(q);break parseloop;case c.XMLP._NONE:break parseloop}}u();var C=T.length-1;if(C){c.fail("Error parsing template - unclosed tag(s) of depth "+(C)+": "+c.transform(T.splice(1,C),function(t){return N(t)}).join(", "))}return L};c.debugLump=function(k){var j=k.text;j+=" at ";j+="lump line "+k.line+" column "+k.column+" index "+k.lumpindex;j+=k.parent.href===null?"":" in file "+k.parent.href;return j};c.ID_ATTRIBUTE="rsf:id";c.getPrefix=function(k){var j=k.indexOf(":");return j===-1?k:k.substring(0,j)};c.SplitID=function(l){var k={};var j=l.indexOf(":");if(j===-1){k.prefix=l}else{k.prefix=l.substring(0,j);k.suffix=l.substring(j+1)}return k};c.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}};c.XMLEncode=function(j){return j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};c.dumpAttributes=function(j){var l="";for(var m in j){var k=j[m];if(k!==null&&k!==undefined){l+=" "+m+'="'+k+'"'
}}return l};c.aggregateMMap=function(m,l){for(var j in l){var k=m[j];if(!k){m[j]=[]}m[j]=m[j].concat(l[j])}};c.parseTemplates=function(n,p,j){var l=[];j=j||{};l.globalmap={};for(var o=0;o<p.length;++o){var m=n[p[o]];var q=m.href.lastIndexOf("/");var k=q===-1?"":m.href.substring(0,q+1);var r=c.parseTemplate(m.resourceText,k,j.scanStart&&o===0,m.cutpoints,j);if(o===0){c.aggregateMMap(l.globalmap,r.globalmap)}r.href=m.href;r.baseURL=k;r.resourceKey=m.resourceKey;l[o]=r;c.aggregateMMap(l.globalmap,r.rootlump.downmap)}return l};var e="(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";var d=new RegExp("^>\\s*("+e+"+)");var a=new RegExp("^("+e+"+)(#)("+e+"+)");var h=new RegExp("^s*([#.]?)("+e+"*)");var f=new RegExp("([#.]?)("+e+"+)","g");var g=new RegExp("\\s*(>)?\\s*","g");var i=new RegExp("^\\w*$");c.parseSelector=function(p){var k=[];p=b.trim(p);f.lastIndex=0;var o=0;while(true){var m=[];while(true){var s=f.exec(p);if(!s||s.index!==o){break}var n={};var r=s[2];if(s[1]===""){n.tag=r}else{if(s[1]==="#"){n.id=r}else{if(s[1]==="."){n.clazz=r}}}m[m.length]=n;o=f.lastIndex}g.lastIndex=o;var j={predList:m};var l=g.exec(p);if(!l||l.index!==o){var q=p.substring(o);c.fail("Error in selector string - can not match child selector expression at "+q)}if(l[1]===">"){j.child=true}k[k.length]=j;if(g.lastIndex>=p.length){break}o=g.lastIndex;f.lastIndex=g.lastIndex}return k}})(jQuery,fluid_1_3);fluid_1_3=fluid_1_3||{};(function(h,j){function n(o){return"as child of "+(o.parent.fullID?"component with full ID "+o.parent.fullID:"root")}j.arrayToHash=function(p){var o={};j.each(p,function(q){o[q]=true});return o};function i(r){var t="";var p=r;if(r.children===undefined){t=r.ID+(r.localID!==undefined?r.localID:"");p=r.parent}while(p.parent){var s=p.parent;if(p.fullID!==undefined){t=p.fullID+t;return t}if(p.noID===undefined){var o=p.ID;if(o===undefined){j.fail("Error in component tree - component found with no ID "+n(s)+": please check structure")}var q=o.indexOf(":");var u=q===-1?o:o.substring(0,q);t=u+":"+(p.localID===undefined?"":p.localID)+":"+t}p=s}return t}var k={};k.isBoundPrimitive=function(o){return j.isPrimitive(o)||o instanceof Array&&(o.length===0||typeof(o[0])==="string")};function c(q,p){if(k.isBoundPrimitive(q)){return{componentType:"UIBound",value:q,ID:p}}else{var o=g(q);if(o.ID){return{ID:p,componentType:"UIContainer",children:[o]}}else{o.ID=p;return o}}}function f(q){if(!(q instanceof Array)){var r=[];for(var p in q){var s=q[p];if(s instanceof Array){for(var o=0;o<s.length;++o){var t=c(s[o],p);r[r.length]=t}}else{r[r.length]=c(s,p)}}return r}else{return q}}function d(o,q,p){if(o.value===undefined&&o.valuebinding!==undefined){if(!q){j.fail("Cannot perform value fixup for valuebinding "+o.valuebinding+" since no model was supplied to rendering")}o.value=j.get(q,o.valuebinding,p)}}function m(q,r,p,o){if(q[r]!==undefined){if(k.isBoundPrimitive(q[r])){q[r]={value:q[r]}}else{if(q[r].messagekey){q[r].componentType="UIMessage"}}}else{q[r]={value:null}}d(q[r],p,o)}k.duckMap={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};var b={UISelect:["selection","optionlist","optionnames"],UILink:["target","linktext"],UIVerbatim:["markup"],UIMessage:["messagekey"]};k.boundMap=j.transform(b,j.arrayToHash);k.inferComponentType=function(o){for(var p in k.duckMap){if(o[p]!==undefined){return k.duckMap[p]}}};k.applyComponentType=function(o){o.componentType=k.inferComponentType(o);if(o.componentType===undefined&&o.ID!==undefined){o.componentType="UIBound"}};function g(s,r,q){if(s){k.applyComponentType(s)}if(!s||s.componentType===undefined){var p=s.decorators;if(p){delete s.decorators}s={componentType:"UIContainer",children:s};s.decorators=p}var o=s.componentType;if(o==="UIContainer"){s.children=f(s.children)}else{map=k.boundMap[o];if(map){j.each(map,function(u,t){m(s,t,r,q)})}}return s}function l(y,v,q){if(y.componentType===undefined){y=g(y,v,q)}if(y.componentType!=="UIContainer"&&!y.parent){y={children:[y]}}if(y.children){y.childmap={};for(var u=0;u<y.children.length;++u){var p=y.children[u];if(p.componentType===undefined){p=g(p,v,q);y.children[u]=p}p.parent=y;if(p.ID===undefined){j.fail("Error in component tree: component found with no ID "+n(p))}y.childmap[p.ID]=p;var s=p.ID.indexOf(":");if(s===-1){}else{var w=p.ID.substring(0,s);var o=y.childmap[w];if(!o){o=[];y.childmap[w]=o}if(p.localID===undefined&&o.length!==0){p.localID=o.length}o[o.length]=p}p.fullID=i(p);var r=p.componentType;if(r=="UISelect"){p.selection.fullID=p.fullID+"-selection"}else{if(r=="UIInitBlock"){var x=p.functionname+"(";for(var t=0;t<p.arguments.length;++t){if(p.arguments[t] instanceof j.ComponentReference){p.arguments[t]=p.parent.fullID+p.arguments[t].reference}x+=JSON.stringify(p.arguments[t]);if(t<p.arguments.length-1){x+=", "}}p.markup={value:x+")\n"};p.componentType="UIVerbatim"}else{if(r=="UIBound"){d(p,v,q)}}}l(p,v,q)}}return y}j.NULL_STRING="\u25a9null\u25a9";var e={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};j.renderer=function(q,O,Y,s){Y=Y||{};O=O||{};debugMode=Y.debugMode;if(!Y.messageLocator&&Y.messageSource){Y.messageLocator=j.resolveMessageSource(Y.messageSource)}Y.document=Y.document||document;var F=s||{};var ac={};var au={};var an={};var P={};var Q={};var am="";var Z=Y;var aj=[];var H={};var ak={};function az(aD,aC,aE){return aD.resourceKey+aC.fullID+aE}function N(aH,aC,aE,aJ){var aI;var aG=aE?aE[aH]:null;if(aG){for(var aD=0;aD<aG.length;++aD){var aF=aG[aD];if(!aI&&aF.rsfID==aC){aI=aF}if(aF.rsfID==aH){return aF}}}return aI}function aw(aF,aH){var aG=aH.jointID?aH.jointID:aH.ID;var aE=j.SplitID(aG);var aC=aE.prefix+":";var aD=N(aG,aC,aF.downmap,aH);if(aD){return aD}if(aH.children){aD=N(aG,aC,ac,aH);if(aD){return aD}}return null}function L(aC){if(!P[aC.href]){j.aggregateMMap(Q,aC.collectmap);P[aC.href]=true}}function S(aH,aE){for(var aF=0;aF<aH.children.length;++aF){var aI=aH.children[aF];if(aI.children){var aK=aw(aE,aI);if(aK){au[aI.fullID]=aK;var aC=aK.attributemap.id;if(aC!==undefined){an[az(aE.parent,aH,aC)]=aI.fullID}L(aK.parent);S(aI,aK)}}}if(aE.downmap){for(var aC in aE.downmap){var aJ=aE.downmap[aC];for(var aF=0;aF<aJ.length;++aF){var aG=aJ[aF];var aL=aG.attributemap.id;if(aL!==undefined&&aG.rsfID!==undefined){var aK=ap(aH,aG.rsfID);if(aK!==null){var aD=aK.fullID;if(aK.componentType==="UISelect"){aD=aD+"-selection"}an[az(aE.parent,aH,aL)]=aD}}}}}}function M(aE,aD,aC){au={};an={};P={};Q={};ac=aE;au[aD.fullID]=aC;S(aD,aC)}function aa(aE,aC){if(aC.elide){return}var aD={};h.extend(true,aD,aC.attributemap);E(aD,aE);I(aE,aD);am+="<"+aC.tagname+" ";am+=j.dumpAttributes(aD);am+=">"}function D(aD,aF,aC){for(;aF<aC;++aF){var aE=aD[aF].text;if(aE){am+=aD[aF].text}}}function ab(aE,aH,aC,aG,aD){var aI=aH;while(true){if(aH===aE.length){break}var aF=aE[aH];if(aF.nestingdepth<aC){break}if(aF.rsfID!==undefined){if(!aD){break}if(aD&&aF.nestingdepth>aC+(aG?0:1)){j.log("Error in component tree - leaf component found to contain further components - at "+aF.toString())}else{break}}++aH}if(!aG&&(aH==aE.length||!aE[aH].rsfID)){--aH}D(aE,aI,aH);return aH}var J={};function x(){if(!J.iselide){am+="<"+J.uselump.tagname}}function av(){if(!J.iselide){am+="</"+J.uselump.tagname+">"}}function ae(){D(J.uselump.parent.lumps,J.uselump.lumpindex+1,J.close.lumpindex+(J.iselide?0:1))}function al(){if(!J.iselide){am+=j.dumpAttributes(J.attrcopy)}ai()}function T(){return J.endopen.lumpindex===J.close.lumpindex&&j.XMLP.closedTags[J.uselump.tagname]}function ar(){if(J.iselide){al()}else{am+=j.dumpAttributes(J.attrcopy);var aC=T();am+=aC?"/>":">";J.nextpos=aC?J.close.lumpindex+1:J.endopen.lumpindex}}function ai(){if(T()){if(!J.iselide){am+="/>"}}else{if(!J.iselide){am+=">"}D(J.uselump.parent.lumps,J.endopen.lumpindex,J.close.lumpindex+(J.iselide?0:1))}}function ag(aC){if(w(aC)){aA(aC)}else{al()}}function ay(aC){if(J.iselide){ag(J.value)}else{if(w(aC)){aA(aC)}else{ar()}}}function aA(aC){am+=j.dumpAttributes(J.attrcopy);if(!J.iselide){am+=">"}am+=j.XMLEncode(aC.toString());av()}function w(aC){return aC!==null&&aC!==undefined&&!v(aC)}function v(aC){return false}function o(aE,aC){if(Z.urlRewriter){var aF=Z.urlRewriter(aC);if(aF){return aF}}if(!Z.rebaseURLs){return aC}var aD=aC.indexOf(":/");if(aC.charAt(0)==="/"||aD!==-1&&aD<7){return aC}else{return Z.baseURL+aC}}function ax(aE){am+='<input type="hidden" ';var aD=aE.virtual;var aC={};aC[aD?"id":"name"]=aE.name;aC.value=aE.value;am+=j.dumpAttributes(aC);am+=" />\n"}function r(aC,aD){if(!aD){return}var aH=J.uselump.tagname;var aF=Z.applier;function aG(){j.applyChange(j.byId(aD),undefined,aF)}if(Z.autoBind&&/input|select|textarea/.test(aH)&&!H[aD]){var aE=[{jQuery:["change",aG]}];if(h.browser.msie&&aH==="input"&&/radio|checkbox/.test(J.attrcopy.type)){aE.push({jQuery:["click",aG]})}if(h.browser.safari&&aH==="input"&&J.attrcopy.type==="radio"){aE.push({jQuery:["keyup",aG]})}V(aC,aE,J.attrcopy,aD)}}function K(aD,aF){if(aD){var aE=aF?aF:aD;if(F&&aE.valuebinding){var aC=aE.submittingname||aD.finalID;F[aC]={name:aC,EL:aE.valuebinding,oldvalue:aE.value};r(aD,aD.finalID)}if(aD.fossilizedbinding){ax(aD.fossilizedbinding)}if(aD.fossilizedshaper){ax(aD.fossilizedshaper)}}}function C(aC){if(!H[aC.selection.fullID]){H[aC.selection.fullID]=true;K(aC.selection);K(aC.optionlist);K(aC.optionnames)}}function X(aC,aE){var aD=aC.selection;return aD.value&&typeof(aD.value)!=="string"&&typeof(aD.value.length)==="number"?h.inArray(aE,aD.value,aE)!==-1:aD.value===aE}function ao(aC,aD){aC=aC.parent;while(aD.indexOf("..::")===0){aD=aD.substring(4);aC=aC.parent}return aC.childmap[aD]}function E(aF,aE,aD,aH){if(!aD){delete aF["rsf:id"]}if(aE.finalID!==undefined){aF.id=aE.finalID}else{if(aH!==undefined){aF.id=aH}else{if(aF.id||aD){aF.id=aE.fullID}}}var aG=1;var aC=aF.id;while(Z.document.getElementById(aF.id)){aF.id=aC+"-"+(aG++)}aE.finalID=aF.id;return aF.id
}function B(aD,aC,aE){var aF=aE||aC;E(aD,aC,true,aC.fullID);if(aF.submittingname===undefined&&aF.willinput!==false){aF.submittingname=aF.finalID||aF.fullID}return aF.submittingname}function at(aD){var aF=[];if(aD.type){aF[0]=aD}else{for(var aE in aD){if(aE==="$"){aE="jQuery"}var aG=aD[aE];var aC={type:aE};if(aE==="jQuery"){aC.func=aG[0];aC.args=aG.slice(1)}else{if(aE==="addClass"||aE==="removeClass"){aC.classes=aG}else{if(aE==="attrs"){aC.attributes=aG}else{if(aE==="identify"){aC.key=aG}}}}aF[aF.length]=aC}}return aF}function V(aG,aK,aD,aI){Z.idMap=Z.idMap||{};for(var aF=0;aF<aK.length;++aF){var aE=aK[aF];var aH=aE.type;if(!aH){var aJ=at(aE);V(aG,aJ,aD,aI);continue}if(aH==="$"){aH=aE.type="jQuery"}if(aH==="jQuery"||aH==="event"||aH==="fluid"){var aC=E(aD,aG,true,aI);aE.id=aC;aj[aj.length]=aE}else{if(aH==="attrs"){h.extend(true,aD,aE.attributes)}else{if(aH==="addClass"||aH==="removeClass"){var aL={nodeType:1,className:aD["class"]||""};h(aL)[aH](aE.classes);aD["class"]=aL.className}else{if(aH==="identify"){var aC=E(aD,aG,true,aI);Z.idMap[aE.key]=aC}else{if(aH!=="null"){j.log("Unrecognised decorator of type "+aH+" found at component of ID "+aI)}}}}}}}function I(aC,aD){if(!aC.decorators){return}if(aC.decorators.length===undefined){aC.decorators=at(aC.decorators)}V(aC,aC.decorators,aD)}function af(aC){if(!aC){return aC}return j.transform(aC,function(aD,aE){m(aC,aE,Z.model,Z.resolverGetConfig);return aC[aE].value})}function aq(aD){if(aD.componentType==="UIMessage"){aD.componentType="UIBound";if(!Z.messageLocator){aD.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}else{m(aD,"messagekey",Z.model,Z.resolverGetConfig);var aC=af(aD.args);aD.value=Z.messageLocator(aD.messagekey.value,aC)}}}function R(aQ){var aH=J.attrcopy;var aC=J.uselump.parent.lumps;var aJ=J.uselump.lumpindex;aq(aQ);var aO=aQ.componentType;var aT=J.uselump.tagname;I(aQ,aH);function aE(aX,aY){j.fail("Error in component tree - UISelectChoice with id "+aX.fullID+aY)}if(aO==="UIBound"||aO==="UISelectChoice"){var aK;if(aQ.choiceindex!==undefined){if(aQ.parentRelativeID!==undefined){aK=ao(aQ,aQ.parentRelativeID);if(!aK){aE(aQ," has parentRelativeID of "+aQ.parentRelativeID+" which cannot be resolved")}}else{aE(aQ," does not have parentRelativeID set")}B(aH,aQ,aK.selection);C(aK)}var aG=aK?aK.selection.submittingname:aQ.submittingname;if(!aK&&aQ.valuebinding){aG=B(aH,aQ)}if(aT==="input"||aT==="textarea"){if(aG!==undefined){aH.name=aG}}K(aQ,aK?aK.selection:null);if(typeof(aQ.value)==="boolean"||aH.type==="radio"||aH.type==="checkbox"){var aI;var aS=aQ.value;if(aQ.choiceindex!==undefined){if(!aK.optionlist.value){j.fail("Error in component tree - selection control with full ID "+aK.fullID+" has no values")}aI=aK.optionlist.value[aQ.choiceindex];aS=X(aK,aI)}if(w(aS)){if(aS){aH.checked="checked"}else{delete aH.checked}}aH.value=aI?aI:"true";ag(null)}else{if(aQ.value instanceof Array){ae()}else{var aP=aK?aK[aT==="textarea"||aT==="input"?"optionlist":"optionnames"].value[aQ.choiceindex]:aQ.value;if(aT==="textarea"){if(v(aP)&&aQ.willinput){aP=""}ag(aP)}else{if(aT==="input"){if(aQ.willinput||w(aP)){aH.value=aP}ag(null)}else{delete aH.name;ay(aP)}}}}}else{if(aO==="UISelect"){var aW=aT==="select";var aF=false;if(aQ.selection.value instanceof Array){aF=true;if(aW){aH.multiple="multiple"}}var aL=aH.id;B(aH,aQ.selection);if(aL!==undefined){aH.id=aL}if(aW){if(aQ.selection.willinput!==false){aH.name=aQ.selection.submittingname}r(aQ,aH.id)}am+=j.dumpAttributes(aH);if(aW){am+=">";var aD=aQ.optionlist.value;var aN=aQ.optionnames===null||aQ.optionnames===undefined||!aQ.optionnames.value?aD:aQ.optionnames.value;if(!aN||!aN.length){j.fail("Error in component tree - UISelect component with fullID "+aQ.fullID+" does not have optionnames set")}for(var aR=0;aR<aN.length;++aR){am+='<option value="';var aP=aD[aR];if(aP===null){aP=j.NULL_STRING}am+=j.XMLEncode(aP);if(X(aQ,aP)){am+='" selected="selected'}am+='">';am+=j.XMLEncode(aN[aR]);am+="</option>\n"}av()}else{ai()}C(aQ)}else{if(aO==="UILink"){var aM=e[aT];if(aM){aq(aQ.target);var aV=aQ.target.value;if(!w(aV)){aV=aH[aM]}aV=o(J.uselump.parent,aV);aH[aM]=aV}var aP;if(aQ.linktext){aq(aQ.linktext);var aP=aQ.linktext.value}if(!w(aP)){ar()}else{ag(aP)}}else{if(aQ.markup!==undefined){aq(aQ.markup);var aU=aQ.markup.value;if(aU===null){am+=j.dumpAttributes(aH);am+=">";ae()}else{if(!J.iselide){am+=j.dumpAttributes(aH);am+=">"}am+=aU;av()}}else{}}}}}function u(aC){var aG;var aE=J.attrcopy["for"];if(aE!==undefined){aG="for"}else{aE=J.attrcopy.headers;if(aE!==undefined){aG="headers"}}if(!aG){return}var aF=J.uselump.tagname;if(aG==="for"&&aF!=="label"){return}if(aG==="headers"&&aF!=="td"&&aF!=="th"){return}var aD=an[az(J.uselump.parent,aC,aE)];if(aD!==undefined){J.attrcopy[aG]=aD}}function ah(aC){am+=("<!-- "+j.XMLEncode(aC)+"-->")}function y(aC){am+='<span style="background-color:#FF466B;color:white;padding:1px;">';am+=aC;am+="</span><br/>"}function W(aC){var aD=aC.fullID;return !aD?"component tree root":"full path "+aD}function G(aD,aM,aI){var aK=aI.lumpindex;var aQ=aI.parent.lumps;var aJ=-1;var aL=aQ[aK+1];var aC=aI.close_tag;aJ=aC.lumpindex+1;var aH=aI.downmap?aI.downmap["payload-component"]:null;var aP=aH?aH[0]:null;var aO=aI.rsfID.charCodeAt(0)===126;var aG=aL;var aR=aC;var aF=aI;var aE={};h.extend(true,aE,(aP===null?aI:aP).attributemap);J.attrcopy=aE;J.uselump=aF;J.endopen=aG;J.close=aR;J.nextpos=aJ;J.iselide=aO;u(aD);if(aM===null){if(aI.rsfID.indexOf("scr=")===(aO?1:0)){var aN=aI.rsfID.substring(4+(aO?1:0));if(aN==="ignore"){aJ=J.close.lumpindex+1}else{if(aN==="rewrite-url"){aM={componentType:"UILink",target:{}}}else{x();ar();aJ=J.endopen.lumpindex}}}}if(aM!==null){if(aP){J.endopen=aQ[aP.lumpindex+1];J.close=aP.close_tag;J.uselump=aP;D(aQ,aK,aP.lumpindex);aK=aP.lumpindex}E(aE,aM);x();R(aM);if(aP!==null){if(J.nextpos===aJ){D(aQ,J.close.lumpindex+1,aC.lumpindex+1)}}aJ=J.nextpos}return aJ}function A(aF,aC){var aE=aC.parent;var aD=aE.lumps[aC.lumpindex+1];if(aF.children!==undefined){aa(aF,aC)}else{G(aF.parent,aF,aC)}ad(aF,aC,aD)}function ap(aF,aG,aE){if(aG.indexOf("msg=")===0){var aC=aG.substring(4);return{componentType:"UIMessage",messagekey:aC}}while(aF){var aD=aF.childmap[aG];if(aD){return aD}aF=aF.parent}return null}function aB(aD,aE){var aC;while(aD){aC=aD.childmap[aE];if(aC){break}aD=aD.parent}return aC}function U(aE,aF){var aD=j.SplitID(aF.ID);var aC=aE.downmap[aF.ID];if(!aC){aC=aE.downmap[aD.prefix+":"]}return aC?aC[0]:null}function ad(aH,aW,aN){var aQ=aN.lumpindex;var aT=aW.nestingdepth;var aI=aW.parent;if(debugMode){var aU={}}while(true){aQ=ab(aI.lumps,aQ,aT,!aW.elide,false);if(aQ===aI.lumps.length){break}var aL=aI.lumps[aQ];var aM=aL.rsfID;if(aL.nestingdepth<aT||aM===undefined){break}if(aM.charCodeAt(0)===126){aM=aM.substring(1)}if(aM.indexOf(":")!==-1){var aO=j.getPrefix(aM);var aC=aB(aH,aO);var aE=aL.uplump.finallump[aO];var aF=aE.close_tag;if(aC){for(var aP=0;aP<aC.length;++aP){var aD=aC[aP];if(aD.children){if(debugMode){aU[aD.fullID]=true}var aR=au[aD.fullID];if(aR){if(debugMode){ah("Branching for "+aD.fullID+" from "+j.debugLump(aL)+" to "+j.debugLump(aR))}A(aD,aR);if(debugMode){ah("Branch returned for "+aD.fullID+j.debugLump(aL)+" to "+j.debugLump(aR))}}else{if(debugMode){y("No matching template branch found for branch container with full ID "+aD.fullID+" rendering from parent template branch "+j.debugLump(aN))}}}else{var aR=U(aW,aD);if(!aR){if(debugMode){y("Repetitive leaf with full ID "+aD.fullID+" could not be rendered from parent template branch "+j.debugLump(aN))}continue}var aS=G(aH,aD,aR);var aK=aS<aI.lumps.lengtn&&aI.lumps[aS].nestingdepth>=aR.nestingdepth;var aG=aD.children?aD:aH;if(aK){ad(aG,aR,aI.lumps[aS]);aS=aR.close_tag.lumpindex+1}if(aP!==aC.length-1){if(aS<aF.lumpindex){ab(aI.lumps,aS,aR.nestingdepth-1,false,false)}}else{ab(aI.lumps,aS,aR.nestingdepth,true,false)}}}}else{if(debugMode){y("No branch container with prefix "+aO+": found in container "+W(aH)+" rendering at template position "+j.debugLump(aN)+", skipping")}}aQ=aF.lumpindex+1;if(debugMode){ah("Stack returned from branch for ID "+aM+" to "+j.debugLump(aN)+": skipping from "+j.debugLump(aL)+" to "+j.debugLump(aF))}}else{var aJ;if(aM){aJ=ap(aH,aM,aL);if(debugMode&&aJ){aU[aJ.fullID]=true}}if(aJ&&aJ.children!==undefined){A(aJ);aQ=aL.close_tag.lumpindex+1}else{aQ=G(aH,aJ,aL)}}if(aQ===aI.lumps.length){break}}if(debugMode){var aC=aH.children;for(var aV=0;aV<aC.length;++aV){var aD=aC[aV];if(!aU[aD.fullID]){y("Component "+aD.componentType+" with full ID "+aD.fullID+" could not be found within template "+j.debugLump(aN))}}}}function t(aC){D(aC.parent.lumps,aC.lumpindex,aC.close_tag.lumpindex+1)}function p(){for(var aE in Q){var aC=Q[aE];for(var aD=0;aD<aC.length;++aD){t(aC[aD])}}}function z(){for(var aF=0;aF<aj.length;++aF){var aC=aj[aF];var aH=j.byId(aC.id,Z.document);if(!aH){j.fail("Error during rendering - component with id "+aC.id+" which has a queued decorator was not found in the output markup")}if(aC.type==="jQuery"){var aE=h(aH);aE[aC.func].apply(aE,h.makeArray(aC.args))}else{if(aC.type==="fluid"){var aD=aC.args;if(!aD){if(!aC.container){aC.container=aH}aD=[aC.container,aC.options]}var aG=j.invokeGlobalFunction(aC.func,aD);aC.that=aG}else{if(aC.type==="event"){aH[aC.event]=aC.handler}}}}}ak.renderTemplates=function(){O=l(O,Y.model,Y.resolverGetConfig);var aC=q[0];M(q.globalmap,O,aC.rootlump);H={};p();ad(O,aC.rootlump,aC.lumps[aC.firstdocumentindex]);return am};ak.processDecoratorQueue=function(){z()};return ak};jQuery.extend(true,j.renderer,k);j.ComponentReference=function(o){this.reference=o};j.explode=function(r,o){var q=[];for(var p in r){var s=o===undefined?p:o+"."+p;q[q.length]={ID:p,value:r[p],valuebinding:s}}return q};j.explodeSelectionToInputs=function(o,p){return j.transform(o,function(r,q){return{ID:p.rowID,children:[{ID:p.inputID,parentRelativeID:"..::"+p.selectID,choiceindex:q},{ID:p.labelID,parentRelativeID:"..::"+p.selectID,choiceindex:q}]}})};j.resolveMessageSource=function(o){if(o.type==="data"){if(o.url===undefined){return j.messageLocator(o.messages,o.resolveFunc)
}else{}}else{if(o.type==="resolver"){return o.resolver.resolve}}};j.renderTemplates=function(r,o,p,q){var s=j.renderer(r,o,p,q);var t=s.renderTemplates();return t};j.reRender=function(v,q,x,w){w=w||{};q=j.unwrap(q);var s=j.getLastFocusedElement?j.getLastFocusedElement():null;var o;if(s&&j.dom.isContainer(q,s)){o=s.id}if(h.browser.msie){h(q).empty()}else{q.innerHTML=""}var t=w.fossils||{};var u=j.renderer(v,x,w,t);var p=u.renderTemplates();if(w.renderRaw){p=j.XMLEncode(p);p=p.replace(/\n/g,"<br/>")}if(w.model){j.bindFossils(q,w.model,t)}if(h.browser.msie){h(q).html(p)}else{q.innerHTML=p}u.processDecoratorQueue();if(o){var r=j.byId(o);if(r){h(r).focus()}}return v};function a(o){var p=j.dom.iterateDom(o,function(r){return r.nodeType===8||r.nodeType===4?"stop":null},true);var q=p.nodeValue;if(q.indexOf("[CDATA[")===0){return q.substring(6,q.length-2)}else{return q}}j.extractTemplate=function(p,o){if(!o){return p.innerHTML}else{return a(p)}};j.render=function(t,u,o,q){q=q||{};var s=t;if(typeof(t)==="object"){s=j.extractTemplate(j.unwrap(t.node),t.armouring)}u=j.unwrap(u);var p={base:{resourceText:s,href:".",resourceKey:".",cutpoints:q.cutpoints}};var r=j.parseTemplates(p,["base"],q);return j.reRender(r,u,o,q)};j.selfRender=function(q,o,p){p=p||{};return j.render({node:q,armouring:p.armouring},q,o,p)}})(jQuery,fluid_1_3);fluid_1_3=fluid_1_3||{};(function(c,b){if(!b.renderer){b.fail("fluidRenderer.js is a necessary dependency of RendererUtilities")}b.registerNamespace("fluid.renderer.selection");b.expect=function(f,e,g){b.transform(c.makeArray(e),function(h){if(!g[h]){b.fail(f+" missing required parameter "+h)}})};b.iota=function(g,h){h=h||0;var f=[];for(var e=0;e<g;++e){f[f.length]=h++}return f};b.renderer.modeliseOptions=function(f,g,e){return c.extend({},g,f,e?{model:e}:null)};b.renderer.reverseMerge=function(g,e,f){f=b.makeArray(f);b.each(f,function(h){if(!g[h]){g[h]=e[h]}})};b.renderer.createRendererFunction=function(f,l,n,h,i){n=n||{};var e=n.templateSource?n.templateSource:{node:c(f)};var k=b.renderer.modeliseOptions(n.rendererOptions,null,h);k.fossils=i||{};var g=b.renderer.modeliseOptions(n.expanderOptions,{ELstyle:"${}"},h);b.renderer.reverseMerge(g,n,["resolverGetConfig","resolverSetConfig"]);var m=n.noexpand?null:b.renderer.makeProtoExpander(g);var j=null;return function(o){if(m){o=m(o)}var p=n.cutpointGenerator||"fluid.renderer.selectorsToCutpoints";k.cutpoints=k.cutpoints||b.invokeGlobalFunction(p,[l,n]);f=typeof(f)==="function"?f():c(f);if(j){b.clear(k.fossils);b.reRender(j,f,o,k)}else{if(typeof(e)==="function"){e=e()}j=b.render(e,f,o,k)}}};b.initRendererComponent=function(k,e,m){var i=b.initView(k,e,m);i.model=i.options.model||{};b.fetchResources(i.options.resources);var l=i.options.rendererOptions||{};var f;if(!l.messageSource&&i.options.strings){f=b.messageResolver({messageBase:i.options.strings,resolveFunc:i.options.messageResolverFunction,parents:b.makeArray(i.options.parentBundle)});l.messageSource={type:"resolver",resolver:f}}b.renderer.reverseMerge(l,i.options,["resolverGetConfig","resolverSetConfig"]);var j={fossils:{},boundPathForNode:function(n){return b.boundPathForNode(n,j.fossils)}};var g=c.extend({},i.options.rendererFnOptions,{rendererOptions:l,repeatingSelectors:i.options.repeatingSelectors,selectorsToIgnore:i.options.selectorsToIgnore});if(i.options.resources&&i.options.resources.template){g.templateSource=function(){return i.options.resources.template.resourceText}}if(i.options.produceTree){i.produceTree=i.options.produceTree}if(i.options.protoTree&&!i.produceTree){i.produceTree=function(){return i.options.protoTree}}b.renderer.reverseMerge(g,i.options,["resolverGetConfig","resolverSetConfig"]);if(g.rendererTargetSelector){e=function(){return i.dom.locate(g.rendererTargetSelector)}}var h=b.renderer.createRendererFunction(e,i.options.selectors,g,i.model,j.fossils);i.render=j.render=h;i.renderer=j;if(f){i.messageResolver=f}if(i.produceTree){i.refreshView=j.refreshView=function(){j.render(i.produceTree(i))}}return i};var a=function(e,f){b.each(b.makeArray(f),function(g){delete e[g]});return e};var d=function(f,e){if(e){b.each(e,function(g){if(f===g){f=f+":"}})}return f};b.renderer.selectorsToCutpoints=function(f,e){var g=[];e=e||{};f=b.copy(f);if(e.selectorsToIgnore){f=a(f,e.selectorsToIgnore)}for(var h in f){g.push({id:d(h,e.repeatingSelectors),selector:f[h]})}return g};b.renderer.mergeComponents=function(g,f){for(var e in f){g[e]=f[e]}return g};b.renderer.selection.inputs=function(g,e,h,f){b.expect("Selection to inputs expander",["selectID","inputID","labelID","rowID"],g);var i=f.expander(g.tree);var k=b.transform(i.optionlist.value,function(n,l){var o={};var m={parentRelativeID:"..::"+g.selectID,choiceindex:l};o[g.inputID]=m;o[g.labelID]=b.copy(m);return o});var j={};j[g.selectID]=i;j[g.rowID]={children:k};j=f.expander(j);return j};b.renderer.repeat=function(m,e,k,g){b.expect("Repetition expander",["controlledBy","tree"],m);var l=b.extractContextualPath(m.controlledBy,{ELstyle:"ALL"},b.threadLocal());var j=b.get(g.model,l,g.resolverGetConfig);var f={};if(!j||j.length===0){return m.ifEmpty?g.expander(m.ifEmpty):f}b.setLogging(true);b.log("fluid.repeat controlledBy "+m.controlledBy);b.log("Argument tree: "+JSON.stringify(m.tree));var i=b.transform(j,function(q,p){var r=b.model.composePath(l,p);var n={};if(m.pathAs){n[m.pathAs]=r}if(m.valueAs){n[m.valueAs]=b.get(g.model,r,g.resolverGetConfig)}var o=b.withEnvironment(n,function(){return g.expander(m.tree)});return b.isArrayable(o)?{children:o}:o});b.log("Expanded to "+JSON.stringify(i));var h=m.repeatID;if(h.indexOf(":")===-1){h=h+":"}b.each(i,function(n){n.ID=h});return i};b.renderer.makeProtoExpander=function(l){var r=c.extend({ELstyle:"${}"},l);var k=r.IDescape||"\\";function m(s){var t=b.threadLocal();return b.extractContextualPath(s,r,t)}function h(v,s){if(v.messagekey!==undefined){return{componentType:"UIMessage",messagekey:h(v.messagekey),args:i(v.args)}}var u;if(!b.isPrimitive(v)&&!b.isArrayable(v)){u=c.extend({},v);if(u.decorators){u.decorators=i(u.decorators)}v=u.value;delete u.value}else{u={}}var t=typeof(v)==="string"?m(v):null;if(t){u.valuebinding=t}else{u.value=v}if(r.model&&u.valuebinding&&u.value===undefined){u.value=b.get(r.model,u.valuebinding,r.resolverGetConfig)}if(s){u.componentType="UIBound"}return u}r.filter=b.expander.lightFilter;var i=function(s){return b.resolveEnvironment(s,r.model,r)};var n=function(t){var s=[];g(t,s);return{children:s}};var j=function(u){var s;var v=[];var t=function(w){s=w};o(u,v,t);return s||v};var p={model:r.model,resolverGetConfig:r.resolverGetConfig,resolverSetConfig:r.resolverSetConfig,expander:j};var q=function(s,t){var v={componentType:t};var w=b.renderer.boundMap[t]||{};for(var u in s){if(/decorators|args/.test(u)){v[u]=i(s[u]);continue}else{if(w[u]){v[u]=h(s[u])}else{v[u]=s[u]}}}return v};var f=function(x,w){var u=x.children;for(var t=0;t<u.length;++t){var y=[];var s={children:y};var z=u[t];var v=function(A){y[y.length]=A};o(z,y,v);if(s.children.length===1&&!s.children[0].ID){s=s.children[0]}w(s)}};function e(s){return b.find(s,function(u,t){return t==="decorators"})!==false}var o=function(u,v,t){var s=b.renderer.inferComponentType(u);if(!s&&(b.isPrimitive(u)||e(u))){s="UIBound"}if(s){t(s==="UIBound"?h(u,true):q(u,s))}else{if(!v){b.fail("Illegal cond->cond transition")}g(u,v)}};var g=function(w,x){for(var u in w){var v=w[u];if(u.charAt(0)===k){u=u.substring(1)}if(u==="expander"){var s=b.makeArray(v);b.each(s,function(A){var z=b.invokeGlobalFunction(A.type,[A,w,u,p]);b.each(z,function(B){x[x.length]=B})})}else{if(v){var y=function(z){z.ID=u;x[x.length]=z};var t;if(v.children){if(u.indexOf(":")===-1){u=u+":"}f(v,y)}else{if(b.renderer.isBoundPrimitive(v)){y(h(v,true))}else{o(v,null,y)}}}}}};return n}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(d,b){var f=function(h){var g=d("<a name='"+h.text()+"' />",h[0].ownerDocument);h.before(g)};var e=function(h){var g={ID:h,children:[]};return g};var a=function(k,j){var i=function(m,l,s){if(l.length===0){return}var p=l[0];if(s===p.level){m[m.length-1].push(p.leaf);l.shift();return i(m,l,s)}if(s<p.level){var q=s>-1?"level"+(s+1)+":":"";var r=s===-1?"s:":"s";var n=q+"level"+(s+2)+r;var o=e(n);m[m.length-1].push(o);m.push(o.children);return i(m,l,s+1)}if(s>p.level){m.pop();return i(m,l,s-1)}};var g={children:[]};var h=b.transform(k,function(l){var n=d.inArray(l.tagName,j);var m=d(l).text();return{level:n,leaf:{ID:"level"+(n+1)+":item",children:[{ID:"link",linktext:m,target:"#"+m}]}}});i([g.children],h,-1);return g};var c=function(g,k,h,j,l){k.each(function(m,n){f(d(n))});var i={toc:{href:j}};b.fetchResources(i,function(){var m=b.parseTemplates(i,["toc"],{});var n=d("<div></div>",g[0].ownerDocument);b.reRender(m,n,a(k,h),{});g.prepend(n);l.fire(n)})};b.tableOfContents=function(g,h){var i=b.initView("fluid.tableOfContents",g,h);i.events.afterRender.addListener(function(j){i.tocNode=d(j)});c(i.container,i.locate("headings"),i.options.levels,i.options.templateUrl,i.events.afterRender);i.hide=function(){if(i.tocNode){i.tocNode.hide()}};i.show=function(){if(i.tocNode){i.tocNode.show()}};return i};b.defaults("fluid.tableOfContents",{selectors:{headings:":header"},events:{afterRender:null},templateUrl:"../html/TableOfContents.html",levels:["H1","H2","H3","H4","H5","H6"]})})(jQuery,fluid_1_3);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}var fluid_1_3=fluid_1_3||{};(function(d,f){var j=function(q,p,s,r){r=r||"";d(p,q).andSelf().each(function(u){var t=(d.browser.msie===false)?"class":"className";if(this.getAttribute(t)){this.setAttribute(t,this.getAttribute(t).replace(s,r))}})};var n=function(r,q,t,u){var p=u[q]||{};var s=p[t];if(s){r.addClass(s)}};var o=function(p){return p&&(p===true||p==="true")};var h=function(p,q){if(o(q)){if(p.tableOfContents){p.tableOfContents.show()}else{p.tableOfContents=f.initSubcomponent(p,"tableOfContents",[p.container,f.COMPONENT_OPTIONS])}}else{if(p.tableOfContents){p.tableOfContents.hide()}}};var b=function(p,q){q=q&&q>0?q:1;p.css("line-height",q+"em")};var k=function(p,q){if(q&&q>0){p.css("font-size",q+"pt");j(p,"[class*=fl-font-size-]",/\bfl-font-size-[0-9]{1,2}\s+/g,"fl-font-size-100")}else{p.css("font-size","")}};var e=function(p,q,r){n(p,"textFont",q.textFont,r);n(p,"textSpacing",q.textSpacing,r);n(p,"theme",q.theme,r);n(p,"layout",q.layout,r)};var m=function(q,p,r){if(p){q.addClass(r)}else{q.removeClass(r)}};var a=function(p,r,s){var q=d("a",p);m(q,r.linksUnderline,s.linksUnderline);m(q,r.linksBold,s.linksBold);m(q,r.linksLarger,s.linksLarger)};var l=function(p,q,r){m(d("input",p),q.inputsLarger,r.inputsLarger)};var c=function(p){if(p.options.savedSettings){p.model=p.options.savedSettings;return}p.model=p.settingsStore.fetch()||f.copy(p.defaultSiteSettings)};var g=function(p,q){var s=["textFont","textSpacing","theme","layout"];var x="fl-noBackgroundImages";var v=".fl-noBackgroundImages";for(var w=0;w<s.length;w++){var t=q[s[w]];for(var r in t){var u=t[r];if(u){x=x+" "+u;v=v+",."+u}}}d(v,p).removeClass(x);return x};var i=function(p){p.settingsStore=f.initSubcomponent(p,"settingsStore",[f.COMPONENT_OPTIONS]);c(p);p.refreshView()};f.uiEnhancer=function(s,q){s=s||document;var r=f.initView("fluid.uiEnhancer",s,q);d(s).data("uiEnhancer",r);r.container=d("body",s);r.defaultSiteSettings=r.options.defaultSiteSettings;var p;r.refreshView=function(){r.container.removeClass(p);e(r.container,r.model,r.options.classnameMap);m(r.container,!o(r.model.backgroundImages),r.options.classnameMap.noBackgroundImages);k(r.container,r.model.textSize);b(r.container,r.model.lineSpacing);h(r,r.model.toc);a(r.container,r.model,r.options.classnameMap);l(r.container,r.model,r.options.classnameMap)};r.updateModel=function(t,u){r.events.modelChanged.fire(t,r.model,u);f.clear(r.model);f.model.copyModel(r.model,t);r.settingsStore.save(r.model);r.refreshView()};p=g(r.container,r.options.classnameMap);i(r);return r};f.defaults("fluid.uiEnhancer",{tableOfContents:{type:"fluid.tableOfContents",options:{templateUrl:"../../tableOfContents/html/TableOfContents.html"}},settingsStore:{type:"fluid.uiEnhancer.cookieStore"},events:{modelChanged:null},classnameMap:{textFont:{serif:"fl-font-serif",sansSerif:"fl-font-sans",arial:"fl-font-arial",verdana:"fl-font-verdana",monospace:"fl-font-monospace",courier:"fl-font-courier",times:"fl-font-times"},textSpacing:{"default":"",wide0:"fl-font-spacing-0",wide1:"fl-font-spacing-1",wide2:"fl-font-spacing-2",wide3:"fl-font-spacing-3",wide4:"fl-font-spacing-4",wide5:"fl-font-spacing-5",wide6:"fl-font-spacing-6"},theme:{mist:"fl-theme-mist",rust:"fl-theme-rust",highContrast:"fl-theme-hc",highContrastInverted:"fl-theme-hci",lowContrast:"fl-theme-slate",mediumContrast:"fl-theme-coal","default":""},layout:{simple:"fl-layout-linear","default":""},noBackgroundImages:"fl-noBackgroundImages",linksUnderline:"fl-text-underline",linksBold:"fl-text-bold",linksLarger:"fl-text-larger",inputsLarger:"fl-text-larger"},defaultSiteSettings:{textFont:"",textSpacing:"",theme:"default",layout:"default",textSize:"",lineSpacing:"",backgroundImages:true,toc:false,linksUnderline:false,linksBold:false,linksLarger:false,inputsLarger:false}});f.uiEnhancer.cookieStore=function(p){var q={};f.mergeComponentOptions(q,"fluid.uiEnhancer.cookieStore",p);q.fetch=function(){var s=document.cookie;var r=q.options.cookieName+"=";var u,v,t;if(s.length>0){v=s.indexOf(r);if(v>-1){v=v+r.length;t=s.indexOf(";",v);if(t<v){t=s.length}u=JSON.parse(decodeURIComponent(s.substring(v,t)))}}return u};q.save=function(r){document.cookie=q.options.cookieName+"="+encodeURIComponent(JSON.stringify(r))};return q};f.defaults("fluid.uiEnhancer.cookieStore",{cookieName:"fluid-ui-settings"});f.uiEnhancer.tempStore=function(p){var q={};q.model=null;q.fetch=function(){return q.model};q.save=function(r){q.model=r};return q}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(g,e){var h=function(i,k){var j={role:"slider","aria-valuenow":k.value,"aria-valuemin":k.min,"aria-valuemax":k.max};i.attr(j)};var f=function(j){var k=j.options.sliderOptions;k.value=j.model;k.min=j.min;k.max=j.max;var i=j.locate("slider").slider(k);h(j.locate("thumb"),k);return i};var a=function(k,j,i){i.bind("slide",function(m,l){j.val(l.value);k.updateModel(l.value,i)})};var c=function(k,j){var i=k.locate("textfield");i.val(k.model);return i};var b=function(k,j,i){j.change(function(){if(k.isValid(this.value)){if(!k.isInRange(this.value)){this.value=(this.value<k.min)?k.min:k.max}i.slider("value",this.value);k.updateModel(this.value,this)}else{this.value=k.model}});j.keypress(function(l){if(l.keyCode!==g.ui.keyCode.ENTER){return true}else{g(l.target).change();g(e.findForm(l.target)).submit();return false}})};var d=function(k){var j=f(k);var i=c(k,j);a(k,i,j);b(k,i,j)};e.textfieldSlider=function(i,j){var k=e.initView("fluid.textfieldSlider",i,j);k.model=k.options.value||k.locate("textfield").val();k.min=k.options.min;k.max=k.options.max;k.isInRange=function(l){return(l>=k.min&&l<=k.max)};k.isValid=function(l){return !(isNaN(parseInt(l,10))||isNaN(l))};k.updateModel=function(l,m){if(k.isInRange(l)){k.events.modelChanged.fire(l,k.model,m);k.model=l;k.locate("thumb").attr("aria-valuenow",k.model)}};d(k);return k};e.defaults("fluid.textfieldSlider",{selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider",thumb:".ui-slider-handle"},events:{modelChanged:null},sliderOptions:{orientation:"horizontal"},min:0,max:100,value:null})})(jQuery,fluid_1_3);(function(d,g){var j=function(p,m,n,o){return{ID:p,selection:{valuebinding:m},optionlist:{valuebinding:n},optionnames:{valuebinding:o}}};var a=function(n,m){return{ID:n,valuebinding:m}};var k=function(p,r){var o=[];o.push(j("text-font","selections.textFont","labelMap.textFont.values","labelMap.textFont.names"));o.push(j("text-spacing","selections.textSpacing","labelMap.textSpacing.values","labelMap.textSpacing.names"));o.push(j("theme","selections.theme","labelMap.theme.values","labelMap.theme.names"));var n={selectID:"background-images",rowID:"background-images-row:",inputID:"background-images-choice",labelID:"background-images-label"};o.push(j("background-images","selections.backgroundImages","labelMap.backgroundImages.values","labelMap.backgroundImages.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.backgroundImages,n));var q={selectID:"layout",rowID:"layout-row:",inputID:"layout-choice",labelID:"layout-label"};o.push(j("layout","selections.layout","labelMap.layout.values","labelMap.layout.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.layout,q));var m={selectID:"toc",rowID:"toc-row:",inputID:"toc-choice",labelID:"toc-label"};o.push(j("toc","selections.toc","labelMap.toc.values","labelMap.toc.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.layout,m));o.push(a("links-underline","selections.linksUnderline"));o.push(a("links-bold","selections.linksBold"));o.push(a("links-larger","selections.linksLarger"));o.push(a("inputs-larger","selections.inputsLarger"));return{children:o}};var h=function(n){var o=n.locate("save");o.click(n.save);n.locate("reset").click(n.reset);n.locate("cancel").click(n.cancel);var m=g.findForm(o);d(m).submit(function(){n.save()})};var i=function(m){var o=m.locate("previewFrame");var n;o.attr("src",m.options.previewTemplateUrl);m.events.modelChanged.addListener(function(p){setTimeout(function(){if(n){n.updateModel(p)}},0)});o.load(function(){var p=o.contents();var q={savedSettings:m.model,tableOfContents:m.uiEnhancer.options.tableOfContents,settingsStore:{type:"fluid.uiEnhancer.tempStore"}};n=g.uiEnhancer(p,q)})};var e=function(m){var o={};for(var n in m.controlValues){o[n]={names:m.strings[n],values:m.controlValues[n]}}return o};var c=function(n){n.model.toc=String(n.model.toc);n.model.backgroundImages=String(n.model.backgroundImages);var m=g.assembleModel({selections:{model:n.model,applier:n.applier},labelMap:{model:e(n.options)}});return{model:m.model,applier:m.applier,autoBind:true}};var f=function(o){var n=function(p){return{listeners:{modelChanged:function(q){o.applier.requestChange(p,q)}},value:o.model[p]}};var m=n("textSize");g.merge(null,m,o.options.textMinSize.options);g.initSubcomponents(o,"textMinSize",[o.options.selectors.textMinSizeCtrl,m]);
m=n("lineSpacing");g.merge(null,m,o.options.lineSpacing.options);g.initSubcomponents(o,"lineSpacing",[o.options.selectors.lineSpacingCtrl,m])};var b=function(o,s){for(var p in o.controlValues){var q=String(s[p]);var m=o.controlValues[p];if(q){var n=d.inArray(q,m);if(n===-1){var r=d.inArray("default",m);if(r===-1){m.push(q)}else{m[r]=q}}}}};var l=function(n){n.applier.modelChanged.addListener("*",function(p,r,q){n.events.modelChanged.fire(p,r,q.source)});b(n.options,n.uiEnhancer.defaultSiteSettings);n.events.afterRender.addListener(function(){f(n);h(n);i(n)});var o=c(n);var m=g.selfRender(n.container,k(n,o.model),o);n.events.afterRender.fire();return m};g.uiOptions=function(m,o){var q=g.initView("fluid.uiOptions",m,o);q.uiEnhancer=d(document).data("uiEnhancer");q.model=g.copy(q.uiEnhancer.model);q.applier=g.makeChangeApplier(q.model);var n=q.uiEnhancer.model;var p;q.save=function(){q.events.onSave.fire(q.model);n=g.copy(q.model);q.uiEnhancer.updateModel(n)};q.reset=function(){q.events.onReset.fire();q.updateModel(g.copy(q.uiEnhancer.defaultSiteSettings),q);q.refreshView()};q.cancel=function(){q.events.onCancel.fire();q.updateModel(g.copy(n),q);q.refreshView()};q.refreshView=function(){var r=c(q);g.reRender(p,q.container,k(q,r.model),r);q.events.afterRender.fire()};q.updateModel=function(r,s){q.events.modelChanged.fire(r,q.model,s);g.clear(q.model);g.model.copyModel(q.model,r)};p=l(q);return q};g.defaults("fluid.uiOptions",{textMinSize:{type:"fluid.textfieldSlider",options:{min:6,max:30}},lineSpacing:{type:"fluid.textfieldSlider",options:{min:1,max:10}},selectors:{controls:".flc-uiOptions-control",textMinSizeCtrl:".flc-uiOptions-min-text-size",lineSpacingCtrl:".flc-uiOptions-line-spacing",cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{modelChanged:null,onSave:null,onCancel:null,onReset:null,afterRender:null},strings:{textFont:["Serif","Sans-Serif","Arial","Verdana","Courier","Times"],textSpacing:["Regular","Wide","Wider","Widest"],theme:["Low Contrast","Medium Contrast","Medium Contrast Grey Scale","High Contrast","High Contrast Inverted"],backgroundImages:["Yes","No"],layout:["Yes","No"],toc:["Yes","No"]},controlValues:{textFont:["serif","sansSerif","arial","verdana","courier","times"],textSpacing:["default","wide1","wide2","wide3"],theme:["lowContrast","default","mediumContrast","highContrast","highContrastInverted"],backgroundImages:["true","false"],layout:["simple","default"],toc:["true","false"]},previewTemplateUrl:"UIOptionsPreview.html"})})(jQuery,fluid_1_3);
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return
}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)){return a}var c=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var b=window.location.pathname.lastIndexOf("/");if(b<=0){path="/"}else{path=window.location.pathname.substr(0,b)+"/"}return path+a};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)
}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();
if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};var fluid_1_3=fluid_1_3||{};(function(f,g){var e=function(r,q,p){q=(q)?q:p;r.animate(q.params,q.duration,q.callback)};var l=function(r,p,q){r.queue("fx",[]);r.animate({width:p,queue:false},q)};var i=function(p,q){if(q===false){p.displayElement.show()}else{e(p.displayElement,q,p.options.showAnimation)}};var a=function(r,q,s){q=(q===null||isNaN(q))?r.options.delay:q;if(q){var p=setTimeout(function(){a(r,0,s)},q)}else{if(s===false){r.displayElement.hide()}else{e(r.displayElement,s,r.options.hideAnimation)}}};var o=function(r,q,t){t=t||false;var p=r.indicator.width();var s=r.options.animate;if((q>p)&&(s==="both"||s==="forward")&&!t){l(r.indicator,q,r.options.speed)}else{if((q<p)&&(s==="both"||s==="backward")&&!t){l(r.indicator,q,r.options.speed)}else{r.indicator.width(q)}}};var j=function(q,p){return Math.round((Math.min(p,100)*q.progressBar.width())/100)};var n=function(p){var q=Math.max(j(p,parseFloat(p.storedPercent)),p.options.minWidth);o(p,q,true)};var k=function(p,q){p.attr("role","progressbar");p.attr("aria-valuemin","0");p.attr("aria-valuemax","100");p.attr("aria-valuenow","0");if(q){p.attr("aria-valuetext","")}p.attr("aria-busy","false")};var h=function(s,r){var t=s.options.strings;var q=r<100&&r>0;s.ariaElement.attr("aria-busy",q);s.ariaElement.attr("aria-valuenow",r);if(t.ariaBusyText){if(q){var p=g.stringTemplate(t.ariaBusyText,{percentComplete:r});s.ariaElement.attr("aria-valuetext",p)}else{if(r===100){s.ariaElement.attr("aria-valuetext",t.ariaDoneText)}}}};var d=function(p,q){p.html(q)};var m=function(p){p.indicator.css("top",p.progressBar.position().top).css("left",0).height(p.progressBar.height());n(p)};var b=function(r,q,p,t){i(r,t);if(q!==null){r.storedPercent=q;var s=Math.max(j(r,parseFloat(q)),r.options.minWidth);o(r,s)}if(p!==null){d(r.label,p)}if(r.ariaElement){h(r,q)}};var c=function(p){p.displayElement=p.locate("displayElement");if(p.options.initiallyHidden){p.displayElement.hide()}p.progressBar=p.locate("progressBar");p.label=p.locate("label");p.indicator=p.locate("indicator");p.ariaElement=p.locate("ariaElement");p.indicator.width(p.options.minWidth);p.storedPercent=0;if(p.ariaElement){k(p.ariaElement,p.options.strings.ariaBusyText)}if(p.options.hideAnimation.callback){p.events.afterProgressHidden.addListener(p.options.hideAnimation.callback)}p.options.hideAnimation.callback=p.events.afterProgressHidden.fire;if(p.options.showAnimation.callback){p.events.onProgressBegin.addListener(p.options.showAnimation.callback)}p.options.showAnimation.callback=p.events.onProgressBegin.fire};g.progress=function(p,q){var r=g.initView("fluid.progress",p,q);c(r);r.show=function(s){i(r,s)};r.hide=function(s,t){a(r,s,t)};r.update=function(s,t,u){b(r,s,t,u)};r.refreshView=function(){m(r)};return r};g.defaults("fluid.progress",{selectors:{displayElement:".flc-progress",progressBar:".flc-progress-bar",indicator:".flc-progress-indicator",label:".flc-progress-label",ariaElement:".flc-progress-bar"},strings:{ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},events:{onProgressBegin:null,afterProgressHidden:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:true,updatePosition:false})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(c,b){b.browser=b.browser||{};b.browser.binaryXHR=function(){var d=window.FormData||(window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary);return d?b.typeTag("fluid.browser.supportsBinaryXHR"):undefined};b.browser.formData=function(){return window.FormData?b.typeTag("fluid.browser.supportsFormData"):undefined};b.browser.flash=function(){var d=(typeof(swfobject)!=="undefined")&&(swfobject.getFlashPlayerVersion().major>8);return d?b.typeTag("fluid.browser.supportsFlash"):undefined};b.progressiveChecker=function(g){var f=g.checks?c.makeArray(g.checks):[];for(var d=0;d<f.length;d++){var e=f[d];if(e.feature){return b.typeTag(e.contextName)}}return g.defaultTypeTag};b.defaults("fluid.progressiveChecker",{checks:[],defaultTypeTag:undefined});c("head").append("<style type='text/css'>.fl-progEnhance-basic, .fl-ProgEnhance-basic { display: none; }</style>");var a={supportsBinaryXHR:b.browser.binaryXHR(),supportsFormData:b.browser.formData(),supportsFlash:b.browser.flash()};b.merge(null,b.staticEnvironment,a)})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(i,l){var n=function(y,z){return(z===1)?y.options.strings.progress.singleFile:y.options.strings.progress.pluralFiles};var t=function(y,z){z.removeAttr("disabled");z.removeClass(y.options.styles.dim)};var o=function(y,z){z.attr("disabled","disabled");z.addClass(y.options.styles.dim)};var a=function(y,z){z.removeClass(y.options.styles.hidden)};var g=function(y,z){z.addClass(y.options.styles.hidden)};var v=function(A,z){z=z||false;var y=A.totalProgress.indicator;y.toggleClass(A.options.styles.totalProgress,!z);y.toggleClass(A.options.styles.totalProgressError,z)};var h=function(y){o(y,y.locate("uploadButton"));if(y.queue.files.length===0){y.locate("browseButtonText").text(y.options.strings.buttons.browse);y.locate("browseButton").removeClass(y.options.styles.browseButton);a(y,y.locate("instructions"))}};var d=function(y){o(y,y.locate("uploadButton"));t(y,y.locate("browseButton"));y.strategy.local.enableBrowseButton();g(y,y.locate("pauseButton"));a(y,y.locate("uploadButton"))};var m=function(y){y.locate("browseButtonText").text(y.options.strings.buttons.addMore);y.locate("browseButton").addClass(y.options.styles.browseButton);g(y,y.locate("pauseButton"));a(y,y.locate("uploadButton"));t(y,y.locate("uploadButton"));t(y,y.locate("browseButton"));y.strategy.local.enableBrowseButton();g(y,y.locate("instructions"));y.totalProgress.hide()};var e=function(y){y.totalProgress.hide(false,false);v(y);g(y,y.locate("uploadButton"));o(y,y.locate("browseButton"));y.strategy.local.disableBrowseButton();t(y,y.locate("pauseButton"));a(y,y.locate("pauseButton"));y.locate(y.options.focusWithEvent.afterUploadStart).focus()};var u=function(B){var z=B.queue.getReadyFiles().length;var C=B.queue.sizeOfReadyFiles();var y=n(B,z);var A=l.stringTemplate(B.options.strings.progress.toUploadLabel,{fileCount:z,fileLabel:y,totalBytes:l.uploader.formatFileSize(C)});B.locate("totalFileStatusText").html(A)};var c=function(D){var B=D.queue.currentBatch;var y=l.uploader.derivePercent(B.totalBytesUploaded,B.totalBytes);var A=B.files.length;var C=n(D,A);var z=l.stringTemplate(D.options.strings.progress.totalProgressLabel,{curFileN:B.fileIdx+1,totalFilesN:A,fileLabel:C,currBytes:l.uploader.formatFileSize(B.totalBytesUploaded),totalBytes:l.uploader.formatFileSize(B.totalBytes)});D.totalProgress.update(y,z)};var r=function(C){var E=C.queue.getErroredFiles().length;var D=C.queue.files.length;var A=n(C,D);var B="";if(E>0){var z=(E===1)?C.options.strings.progress.singleError:C.options.strings.progress.pluralErrors;
v(C,true);B=l.stringTemplate(C.options.strings.progress.numberOfErrors,{errorsN:E,errorLabel:z})}var y=l.stringTemplate(C.options.strings.progress.completedLabel,{curFileN:C.queue.getUploadedFiles().length,totalFilesN:D,errorString:B,fileLabel:A,totalCurrBytes:l.uploader.formatFileSize(C.queue.sizeOfUploadedFiles())});C.totalProgress.update(100,y)};var w=function(A){var y=A.locate("fileQueue");if(A.queue.files.length===0){y.attr("summary",A.options.strings.queue.emptyQueue)}else{var z=l.stringTemplate(A.options.strings.queue.queueSummary,{totalUploaded:A.queue.getUploadedFiles().length,totalInUploadQueue:A.queue.files.length-A.queue.getUploadedFiles().length});y.attr("summary",z)}};var s=function(y){y.locate("uploadButton").click(function(){y.start()});y.locate("pauseButton").click(function(){y.stop()})};var x=function(y){if(y.queue.getReadyFiles().length>0){m(y);u(y);y.locate(y.options.focusWithEvent.afterFileDialog).focus();w(y)}};var j=function(y){if(y.queue.getReadyFiles().length===0){h(y)}u(y);w(y)};var p=function(y){if(y.queue.getReadyFiles().length===0){d(y)}else{m(y)}r(y);w(y)};var b=function(y){y.events.afterFileDialog.addListener(function(){x(y)});y.events.afterFileQueued.addListener(function(z){y.queue.addFile(z)});y.events.onFileRemoved.addListener(function(z){y.removeFile(z)});y.events.afterFileRemoved.addListener(function(){j(y)});y.events.onUploadStart.addListener(function(){e(y)});y.events.onUploadStop.addListener(function(){y.locate(y.options.focusWithEvent.afterUploadStop).focus()});y.events.onFileStart.addListener(function(z){z.filestatus=l.uploader.fileStatusConstants.IN_PROGRESS;y.queue.startFile()});y.events.onFileProgress.addListener(function(z,B,A){y.queue.updateBatchStatus(B);c(y)});y.events.onFileComplete.addListener(function(z){y.queue.finishFile(z);y.events.afterFileComplete.fire(z);if(y.queue.shouldUploadNextFile()){y.strategy.remote.start()}else{if(y.queue.shouldStop){y.strategy.remote.stop()}y.events.afterUploadComplete.fire(y.queue.currentBatch.files);y.queue.clearCurrentBatch()}});y.events.onFileSuccess.addListener(function(z){z.filestatus=l.uploader.fileStatusConstants.COMPLETE;if(y.queue.currentBatch.bytesUploadedForFile===0){y.queue.currentBatch.totalBytesUploaded+=z.size}c(y)});y.events.onFileError.addListener(function(A,z){A.filestatus=l.uploader.fileStatusConstants.ERROR;if(z===l.uploader.errorConstants.UPLOAD_STOPPED){y.queue.isUploading=false}else{if(y.queue.isUploading){y.queue.currentBatch.totalBytesUploaded+=A.size;y.queue.currentBatch.numFilesErrored++}}});y.events.afterUploadComplete.addListener(function(){y.queue.isUploading=false;p(y)})};var k=function(y){if(y.options.demo){y.demo=l.typeTag("fluid.uploader.demo")}l.initDependents(y);o(y,y.locate("uploadButton"));s(y);b(y);w(y);y.statusUpdater();y.container.attr("role","application")};l.uploader=function(y,z){var A=l.typeTag("fluid.uploader");if(l.progressiveChecker){l.staticEnvironment.uploaderContext=l.invoke("fluid.progressiveChecker",null,A)}return l.invoke("fluid.uploader.impl",[y,z],A)};l.demands("fluid.progressiveChecker","fluid.uploader",{funcName:"fluid.progressiveChecker",args:[{checks:[{feature:"{fluid.browser.supportsBinaryXHR}",contextName:"fluid.uploader.html5"},{feature:"{fluid.browser.supportsFlash}",contextName:"fluid.uploader.swfUpload"}],defaultTypeTag:l.typeTag("fluid.uploader.singleFile")}]});l.progressiveEnhanceableUploader=function(y,A,z){return l.uploader(y,z)};l.uploader.multiFileUploader=function(y,z){var A=l.initView("fluid.uploader.multiFileUploader",y,z);A.queue=l.uploader.fileQueue();A.browse=function(){if(!A.queue.isUploading){A.strategy.local.browse()}};A.removeFile=function(B){A.queue.removeFile(B);A.strategy.local.removeFile(B);A.events.afterFileRemoved.fire(B)};A.start=function(){A.queue.start();A.events.onUploadStart.fire(A.queue.currentBatch.files);A.strategy.remote.start()};A.stop=function(){A.queue.shouldStop=true;A.events.onUploadStop.fire()};k(A);return A};l.defaults("fluid.uploader.multiFileUploader",{components:{strategy:{type:"fluid.uploader.progressiveStrategy"},fileQueueView:{type:"fluid.uploader.fileQueueView",options:{model:"{multiFileUploader}.queue.files",uploaderContainer:"{multiFileUploader}.container",events:"{multiFileUploader}.events"}},totalProgress:{type:"fluid.uploader.totalProgressBar",options:{selectors:{progressBar:".flc-uploader-queue-footer",displayElement:".flc-uploader-total-progress",label:".flc-uploader-total-progress-text",indicator:".flc-uploader-total-progress",ariaElement:".flc-uploader-total-progress"}}}},invokers:{statusUpdater:"fluid.uploader.ariaLiveRegionUpdater"},queueSettings:{uploadURL:"",postParams:{},fileSizeLimit:"20480",fileTypes:"*",fileTypesDescription:null,fileUploadLimit:0,fileQueueLimit:0},demo:false,selectors:{fileQueue:".flc-uploader-queue",browseButton:".flc-uploader-button-browse",browseButtonText:".flc-uploader-button-browse-text",uploadButton:".flc-uploader-button-upload",pauseButton:".flc-uploader-button-pause",totalFileStatusText:".flc-uploader-total-progress-text",instructions:".flc-uploader-browse-instructions",statusRegion:".flc-uploader-status-region"},focusWithEvent:{afterFileDialog:"uploadButton",afterUploadStart:"pauseButton",afterUploadStop:"uploadButton"},styles:{disabled:"fl-uploader-disabled",hidden:"fl-uploader-hidden",dim:"fl-uploader-dim",totalProgress:"fl-uploader-total-progress-okay",totalProgressError:"fl-uploader-total-progress-errored",browseButton:"fl-uploader-browseMore"},events:{afterReady:null,onFileDialog:null,afterFileQueued:null,onFileRemoved:null,afterFileRemoved:null,onQueueError:null,afterFileDialog:null,onUploadStart:null,onUploadStop:null,onFileStart:null,onFileProgress:null,onFileError:null,onFileSuccess:null,onFileComplete:null,afterFileComplete:null,afterUploadComplete:null},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",totalProgressLabel:"Uploading: %curFileN of %totalFilesN %fileLabel (%currBytes of %totalBytes)",completedLabel:"Uploaded: %curFileN of %totalFilesN %fileLabel (%totalCurrBytes)%errorString",numberOfErrors:", %errorsN %errorLabel",singleFile:"file",pluralFiles:"files",singleError:"error",pluralErrors:"errors"},buttons:{browse:"Browse Files",addMore:"Add More",stopUpload:"Stop Upload",cancelRemaning:"Cancel remaining Uploads",resumeUpload:"Resume Upload"},queue:{emptyQueue:"File list: No files waiting to be uploaded.",queueSummary:"File list:  %totalUploaded files uploaded, %totalInUploadQueue file waiting to be uploaded."}},mergePolicy:{model:"preserve"}});l.demands("fluid.uploader.impl","fluid.uploader",{funcName:"fluid.uploader.multiFileUploader"});l.demands("fluid.uploader.totalProgressBar","fluid.uploader.multiFileUploader",{funcName:"fluid.progress",args:["{multiFileUploader}.container",l.COMPONENT_OPTIONS]});l.uploader.formatFileSize=function(y){if(typeof(y)==="number"){if(y===0){return"0.0 KB"}else{if(y>0){if(y<1048576){return(Math.ceil(y/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(y/1048576*10)/10).toFixed(1)+" MB"}}}}return""};l.uploader.derivePercent=function(y,z){return Math.round((y*100)/z)};l.uploader.ariaLiveRegionUpdater=function(y,B,z){y.attr("role","log");y.attr("aria-live","assertive");y.attr("aria-relevant","text");y.attr("aria-atomic","true");var A=function(){y.text(B.text())};z.afterFileDialog.addListener(A);z.afterFileRemoved.addListener(A);z.afterUploadComplete.addListener(A)};l.demands("fluid.uploader.ariaLiveRegionUpdater","fluid.uploader.multiFileUploader",{funcName:"fluid.uploader.ariaLiveRegionUpdater",args:["{multiFileUploader}.dom.statusRegion","{multiFileUploader}.dom.totalFileStatusText","{multiFileUploader}.events"]});l.uploader.errorConstants={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};l.uploader.fileStatusConstants={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};var f=function(y,z){if(window.opera){y.show().removeClass("hideUploaderForOpera");z.show().addClass("hideUploaderForOpera")}else{y.show();z.hide()}};var q=function(y){var z=l.defaults("fluid.uploader.singleFileStrategy");return(y&&y.container)?y.container:z.container};l.uploader.singleFileUploader=function(y,z){var A=l.initView("fluid.uploader.singleFileUploader",y,z);f(i(A.options.selectors.basicUpload),A.container);return A};l.defaults("fluid.uploader.singleFileUploader",{selectors:{basicUpload:".fl-progEnhance-basic"}});l.demands("fluid.uploader.impl",["fluid.uploader","fluid.uploader.singleFile"],{funcName:"fluid.uploader.singleFileUploader"})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(b,a){a.uploader=a.uploader||{};var c=function(g,h){var d=[];for(var f=0;f<g.length;f++){var e=g[f];if(h(e)===true){d.push(e)}}return d};a.uploader.fileQueue=function(){var d={};d.files=[];d.isUploading=false;d.start=function(){d.setupCurrentBatch();d.isUploading=true;d.shouldStop=false};d.startFile=function(){d.currentBatch.fileIdx++;d.currentBatch.bytesUploadedForFile=0;d.currentBatch.previousBytesUploadedForFile=0};d.finishFile=function(e){d.currentBatch.numFilesCompleted++};d.shouldUploadNextFile=function(){return !d.shouldStop&&d.isUploading&&d.currentBatch.numFilesCompleted<d.currentBatch.files.length};d.addFile=function(e){d.files.push(e)};d.removeFile=function(f){var e=b.inArray(f,d.files);d.files.splice(e,1)};d.totalBytes=function(){return a.uploader.fileQueue.sizeOfFiles(d.files)};d.getReadyFiles=function(){return c(d.files,function(e){return(e.filestatus===a.uploader.fileStatusConstants.QUEUED||e.filestatus===a.uploader.fileStatusConstants.CANCELLED)})};d.getErroredFiles=function(){return c(d.files,function(e){return(e.filestatus===a.uploader.fileStatusConstants.ERROR)})};d.sizeOfReadyFiles=function(){return a.uploader.fileQueue.sizeOfFiles(d.getReadyFiles())};d.getUploadedFiles=function(){return c(d.files,function(e){return(e.filestatus===a.uploader.fileStatusConstants.COMPLETE)
})};d.sizeOfUploadedFiles=function(){return a.uploader.fileQueue.sizeOfFiles(d.getUploadedFiles())};d.setupCurrentBatch=function(){d.clearCurrentBatch();d.updateCurrentBatch()};d.clearCurrentBatch=function(){d.currentBatch={fileIdx:-1,files:[],totalBytes:0,numFilesCompleted:0,numFilesErrored:0,bytesUploadedForFile:0,previousBytesUploadedForFile:0,totalBytesUploaded:0}};d.updateCurrentBatch=function(){var e=d.getReadyFiles();d.currentBatch.files=e;d.currentBatch.totalBytes=a.uploader.fileQueue.sizeOfFiles(e)};d.updateBatchStatus=function(f){var e=f-d.currentBatch.previousBytesUploadedForFile;d.currentBatch.totalBytesUploaded+=e;d.currentBatch.bytesUploadedForFile+=e;d.currentBatch.previousBytesUploadedForFile=f};return d};a.uploader.fileQueue.sizeOfFiles=function(f){var g=0;for(var e=0;e<f.length;e++){var d=f[e];g+=d.size}return g}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(f,d){var a=function(i){var h=i.options.maxHeight;var j=(i.scrollingElm.children().eq(0).height()>h);var g=(j)?h:"";i.scrollingElm.height(g)};var e=function(g){g.scrollingElm[0].scrollTop=g.scrollingElm[0].scrollHeight};var c=function(k,j){if(!j||j.length<1){return}var l=0;var h=0;var p=j[0].offsetTop;var i=j.height();var m=k.scrollingElm[0].scrollTop;var o=k.scrollingElm.height();if(k.options.padScroll){var g=j.prev().height();l=(g+i<=o)?g:0;var n=j.next().height();h=(n+i<=o)?n:0}if((p-l)<m){k.scrollingElm[0].scrollTop=p-l}if(((p+i)+h)>(m+o)){i=(i<o)?i:o;k.scrollingElm[0].scrollTop=(p-o+i+h)}};var b=function(g){g.scrollingElm=g.container.parents(g.options.selectors.wrapper);if(!g.scrollingElm.length){d.fail({name:"Missing Scroller",message:"The scroller wrapper element was not found."})}if(!f.browser.msie||f.browser.version>6){g.scrollingElm.css("max-height",g.options.maxHeight)}};d.scroller=function(g,h){var i=d.initView("fluid.scroller",g,h);b(i);i.scrollTo=function(j){c(i,j)};i.scrollBottom=function(){e(i)};i.refreshView=function(){if(f.browser.msie&&f.browser.version<7){a(i)}};i.refreshView();return i};d.defaults("fluid.scroller",{selectors:{wrapper:".flc-scroller"},maxHeight:180,padScroll:true})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(g,i){var D=function(G,F){return G.locate("fileQueue").find("#"+F.id)};var f=function(G,F){return g("#"+F.id+"_error",G.container)};var e=function(I,J){var H=I.model;for(var G=0;G<H.length;G++){var F=H[G];if(F.id.toString()===J.attr("id")){return F}}return null};var u=function(G,F){var H=F.id+"_progress";return G.fileProgressors[H]};var A=function(H,F){var G=D(H,F);H.scroller.scrollTo(G);var I=u(H,F);I.refreshView();I.show()};var r=function(I,G,H,F){var J=i.uploader.derivePercent(H,F);var K=J+"%";u(I,G).update(J,K)};var n=function(H,F){var G=D(H,F);u(H,F).hide();if(F.filestatus===i.uploader.fileStatusConstants.COMPLETE){H.locate("fileIconBtn",G).removeClass(H.options.styles.dim)}};var c=function(H,G){var I=u(H,G);if(!I){return}var F=I.displayElement;F.remove()};var B=function(F,G){G.fadeOut("fast",function(){G.remove();F.refreshView()})};var E=function(G,F){if(F.filestatus===i.uploader.fileStatusConstants.ERROR){B(G,f(G,F))}};var b=function(G,F,H){c(G,F);E(G,F);G.events.onFileRemoved.fire(F);B(G,H)};var l=function(G,H){var F=e(G,H);if(!F||F.filestatus===i.uploader.fileStatusConstants.COMPLETE){return}b(G,F,H)};var w=function(G,F){var H=D(G,F);b(G,F,H)};var k=function(I,G){var H=function(){if(I.hasClass(G.ready)&&!I.hasClass(G.uploading)){I.addClass(G.hover)}};var F=function(){if(I.hasClass(G.ready)&&!I.hasClass(G.uploading)){I.removeClass(G.hover)}};I.hover(H,F)};var j=function(F,H){var G=function(){l(F,H)};i.activatable(H,null,{additionalBindings:[{key:g.ui.keyCode.DELETE,activateHandler:G}]})};var m=function(F,G){if(g.browser.msie&&g.browser.version<7){k(G,F.options.styles)}F.locate("fileIconBtn",G).click(function(){l(F,G)});j(F,G)};var q=function(H,G){var I=H.rowTemplate.clone(),J=G.name,F=i.uploader.formatFileSize(G.size);I.removeClass(H.options.styles.hiddenTemplate);H.locate("fileName",I).text(J);H.locate("fileSize",I).text(F);H.locate("fileIconBtn",I).addClass(H.options.styles.remove);I.attr("id",G.id);I.addClass(H.options.styles.ready);m(H,I);i.updateAriaLabel(I,J+" "+F);return I};var s=function(G,J){var F=G.rowProgressorTemplate.clone();var H=J.attr("id");var I=H+"_progress";F.attr("id",I);F.css("top",J.position().top);F.height(J.height()).width(5);G.container.after(F);G.fileProgressors[I]=i.progress(G.options.uploaderContainer,{selectors:{progressBar:"#"+H,displayElement:"#"+I,label:"#"+I+" .fl-uploader-file-progress-text",indicator:"#"+I}})};var v=function(G,F){var H=q(G,F);if(!(g.browser.msie&&(g.browser.version>=8))){H.hide()}G.container.append(H);H.attr("title",G.options.strings.status.remove);H.fadeIn("slow");G.scroller.scrollBottom();s(G,H);G.refreshView()};var z=function(F){var G=F.locate("fileIconBtn",F.locate("fileRows"));G.attr("disabled","disabled");G.addClass(F.options.styles.dim)};var h=function(F){var G=F.locate("fileIconBtn",F.locate("fileRows"));G.removeAttr("disabled");G.removeClass(F.options.styles.dim)};var p=function(F,H,G){H.removeClass(F.options.styles.ready).removeClass(F.options.styles.error).addClass(G)};var a=function(H,G){var I=D(H,G);p(H,I,H.options.styles.uploaded);I.attr("title",H.options.strings.status.success);i.enabled(I,false);var F=H.locate("fileIconBtn",I);F.unbind("click");F.removeClass(H.options.styles.remove);F.attr("title",H.options.strings.status.success)};var x=function(I,K,F){var H=I.errorInfoRowTemplate.clone();H.attr("id",K.attr("id")+"_error");var J=i.keyForValue(i.uploader.errorConstants,F);var G=I.options.strings.errors[J];I.locate("errorText",H).text(G);K.after(H);I.scroller.scrollTo(H)};var C=function(I,G,F){n(I,G);if(G.filestatus===i.uploader.fileStatusConstants.ERROR){var H=D(I,G);p(I,H,I.options.styles.error);x(I,H,F)}};var t=function(F){F.returnedOptions={listeners:{afterFileQueued:F.addFile,onUploadStart:F.prepareForUpload,onFileStart:F.showFileProgress,onFileProgress:F.updateFileProgress,onFileSuccess:F.markFileComplete,onFileError:F.showErrorForFile,afterFileComplete:F.hideFileProgress,afterUploadComplete:F.refreshAfterUpload}}};var y=function(F){i.tabbable(F.container);F.selectableContext=i.selectable(F.container,{selectableSelector:F.options.selectors.fileRows,onSelect:function(G){g(G).addClass(F.options.styles.selected)},onUnselect:function(G){g(G).removeClass(F.options.styles.selected)}})};var o=function(F){F.rowTemplate=F.locate("rowTemplate").remove();F.errorInfoRowTemplate=F.locate("errorInfoRowTemplate").remove();F.errorInfoRowTemplate.removeClass(F.options.styles.hiddenTemplate);F.rowProgressorTemplate=F.locate("rowProgressorTemplate",F.options.uploaderContainer).remove()};var d=function(F){i.initDependents(F);o(F);y(F);t(F)};i.uploader.fileQueueView=function(F,H,G){var I=i.initView("fluid.uploader.fileQueueView",F,G);I.fileProgressors={};I.model=I.options.model;I.events=H;I.addFile=function(J){v(I,J)};I.removeFile=function(J){w(I,J)};I.prepareForUpload=function(){z(I)};I.refreshAfterUpload=function(){h(I)};I.showFileProgress=function(J){A(I,J)};I.updateFileProgress=function(K,L,J){r(I,K,L,J)};I.markFileComplete=function(J){u(I,J).update(100,"100%");a(I,J)};I.showErrorForFile=function(K,J){C(I,K,J)};I.hideFileProgress=function(J){n(I,J)};I.refreshView=function(){I.scroller.refreshView();I.selectableContext.refresh()};d(I);return I};i.demands("fluid.uploader.fileQueueView","fluid.uploader.multiFileUploader",{funcName:"fluid.uploader.fileQueueView",args:["{multiFileUploader}.dom.fileQueue",{onFileRemoved:"{multiFileUploader}.events.onFileRemoved"},i.COMPONENT_OPTIONS]});i.demands("fluid.scroller","fluid.uploader.fileQueueView",{funcName:"fluid.scroller",args:["{fileQueueView}.container"]});i.defaults("fluid.uploader.fileQueueView",{components:{scroller:{type:"fluid.scroller"}},selectors:{fileRows:".flc-uploader-file",fileName:".flc-uploader-file-name",fileSize:".flc-uploader-file-size",fileIconBtn:".flc-uploader-file-action",errorText:".flc-uploader-file-error",rowTemplate:".flc-uploader-file-tmplt",errorInfoRowTemplate:".flc-uploader-file-error-tmplt",rowProgressorTemplate:".flc-uploader-file-progressor-tmplt"},styles:{hover:"fl-uploader-file-hover",selected:"fl-uploader-file-focus",ready:"fl-uploader-file-state-ready",uploading:"fl-uploader-file-state-uploading",uploaded:"fl-uploader-file-state-uploaded",error:"fl-uploader-file-state-error",remove:"fl-uploader-file-action-remove",dim:"fl-uploader-dim",hiddenTemplate:"fl-uploader-hidden-templates"},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",singleFile:"file",pluralFiles:"files"},status:{success:"File Uploaded",error:"File Upload Error",remove:"Press Delete key to remove file"},errors:{HTTP_ERROR:"File upload error: a network error occured or the file was rejected (reason unknown).",IO_ERROR:"File upload error: a network error occured.",UPLOAD_LIMIT_EXCEEDED:"File upload error: you have uploaded as many files as you are allowed during this session",UPLOAD_FAILED:"File upload error: the upload failed for an unknown reason.",QUEUE_LIMIT_EXCEEDED:"You have as many files in the queue as can be added at one time. Removing files from the queue may allow you to add different files.",FILE_EXCEEDS_SIZE_LIMIT:"One or more of the files that you attempted to add to the queue exceeded the limit of %fileSizeLimit.",ZERO_BYTE_FILE:"One or more of the files that you attempted to add contained no data.",INVALID_FILETYPE:"One or more files were not added to the queue because they were of the wrong type."}},mergePolicy:{model:"preserve",events:"preserve"}})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(f,d){d.uploader=d.uploader||{};d.demands("fluid.uploader.impl",["fluid.uploader","fluid.uploader.swfUpload"],{funcName:"fluid.uploader.multiFileUploader"});d.uploader.swfUploadStrategy=function(h){var i=d.initLittleComponent("fluid.uploader.swfUploadStrategy",h);d.initDependents(i);return i};d.defaults("fluid.uploader.swfUploadStrategy",{components:{engine:{type:"fluid.uploader.swfUploadStrategy.engine",options:{queueSettings:"{multiFileUploader}.options.queueSettings",flashMovieSettings:"{swfUploadStrategy}.options.flashMovieSettings"}},local:{type:"fluid.uploader.swfUploadStrategy.local"},remote:{type:"fluid.uploader.remote"}},flashMovieSettings:{flashURL:"../../../lib/swfupload/flash/swfupload.swf",flashButtonPeerId:"",flashButtonAlwaysVisible:false,flashButtonTransparentEvenInIE:true,flashButtonImageURL:"../images/browse.png",flashButtonCursorEffect:SWFUpload.CURSOR.HAND,debug:false},styles:{browseButtonOverlay:"fl-uploader-browse-overlay",flash9Container:"fl-uploader-flash9-container",uploaderWrapperFlash10:"fl-uploader-flash10-wrapper"}});
d.demands("fluid.uploader.swfUploadStrategy","fluid.uploader.multiFileUploader",{funcName:"fluid.uploader.swfUploadStrategy",args:[d.COMPONENT_OPTIONS]});d.demands("fluid.uploader.progressiveStrategy","fluid.uploader.swfUpload",{funcName:"fluid.uploader.swfUploadStrategy",args:[d.COMPONENT_OPTIONS]});d.uploader.swfUploadStrategy.remote=function(h,i){var j=d.initLittleComponent("fluid.uploader.swfUploadStrategy.remote",i);j.swfUpload=h;j.start=function(){j.swfUpload.startUpload()};j.stop=function(){j.swfUpload.stopUpload()};return j};d.demands("fluid.uploader.remote","fluid.uploader.swfUploadStrategy",{funcName:"fluid.uploader.swfUploadStrategy.remote",args:["{engine}.swfUpload",d.COMPONENT_OPTIONS]});d.uploader.swfUploadStrategy.local=function(h,i){var j=d.initLittleComponent("fluid.uploader.swfUploadStrategy.local",i);j.swfUpload=h;j.browse=function(){if(j.options.file_queue_limit===1){j.swfUpload.selectFile()}else{j.swfUpload.selectFiles()}};j.removeFile=function(k){j.swfUpload.cancelUpload(k.id)};j.enableBrowseButton=function(){j.swfUpload.setButtonDisabled(false)};j.disableBrowseButton=function(){j.swfUpload.setButtonDisabled(true)};return j};d.demands("fluid.uploader.swfUploadStrategy.local","fluid.uploader.multiFileUploader",{funcName:"fluid.uploader.swfUploadStrategy.local",args:["{engine}.swfUpload",d.COMPONENT_OPTIONS]});d.uploader.swfUploadStrategy.engine=function(i){var j=d.initLittleComponent("fluid.uploader.swfUploadStrategy.engine",i);var h=swfobject.getFlashPlayerVersion().major;j.flashVersionContext=d.typeTag("fluid.uploader.flash."+h);j.config=f.extend({},j.options.queueSettings,j.options.flashMovieSettings);d.initDependents(j);j.flashContainer=j.setupDOM();j.swfUploadConfig=j.setupConfig();j.swfUpload=new SWFUpload(j.swfUploadConfig);j.bindEvents();return j};d.defaults("fluid.uploader.swfUploadStrategy.engine",{invokers:{setupDOM:"fluid.uploader.swfUploadStrategy.setupDOM",setupConfig:"fluid.uploader.swfUploadStrategy.setupConfig",bindEvents:"fluid.uploader.swfUploadStrategy.eventBinder"}});d.demands("fluid.uploader.swfUploadStrategy.engine","fluid.uploader.swfUploadStrategy",{funcName:"fluid.uploader.swfUploadStrategy.engine",args:[d.COMPONENT_OPTIONS]});d.uploader.swfUploadStrategy.flash10SetupDOM=function(i,h,j){i.wrap("<div class='"+j.uploaderWrapperFlash10+"'></div>");var k=f("<div><span></span></div>");k.addClass(j.browseButtonOverlay);i.after(k);h.attr("tabindex",-1);return k};d.demands("fluid.uploader.swfUploadStrategy.setupDOM",["fluid.uploader.swfUploadStrategy.engine","fluid.uploader.flash.10"],{funcName:"fluid.uploader.swfUploadStrategy.flash10SetupDOM",args:["{multiFileUploader}.container","{multiFileUploader}.dom.browseButton","{swfUploadStrategy}.options.styles"]});var c={uploadURL:"upload_url",flashURL:"flash_url",postParams:"post_params",fileSizeLimit:"file_size_limit",fileTypes:"file_types",fileUploadLimit:"file_upload_limit",fileQueueLimit:"file_queue_limit",flashButtonPeerId:"button_placeholder_id",flashButtonImageURL:"button_image_url",flashButtonHeight:"button_height",flashButtonWidth:"button_width",flashButtonWindowMode:"button_window_mode",flashButtonCursorEffect:"button_cursor",debug:"debug"};var a={afterReady:"swfupload_loaded_handler",onFileDialog:"file_dialog_start_handler",afterFileQueued:"file_queued_handler",onQueueError:"file_queue_error_handler",afterFileDialog:"file_dialog_complete_handler",onFileStart:"upload_start_handler",onFileProgress:"upload_progress_handler",onFileComplete:"upload_complete_handler",onFileError:"upload_error_handler",onFileSuccess:"upload_success_handler"};var b=function(m,k,l){var h=l||{};for(var i in k){var j=m[i];if(j){h[j]=k[i]}}return h};var e=function(n,k,m){var i=m||{};for(var j in k){var h=k[j].fire;var l=n[j];if(l){i[l]=h}}return i};d.uploader.swfUploadStrategy.convertConfigForSWFUpload=function(k,h,i){h.flashButtonPeerId=d.allocateSimpleId(k.children().eq(0));var j=b(c,h);return e(a,i,j)};d.uploader.swfUploadStrategy.flash10SetupConfig=function(i,k,l,h){var j=i.flashButtonAlwaysVisible?false:(!f.browser.msie||i.flashButtonTransparentEvenInIE);i.flashButtonImageURL=j?undefined:i.flashButtonImageURL;i.flashButtonHeight=i.flashButtonHeight||h.outerHeight();i.flashButtonWidth=i.flashButtonWidth||h.outerWidth();i.flashButtonWindowMode=j?SWFUpload.WINDOW_MODE.TRANSPARENT:SWFUpload.WINDOW_MODE.OPAQUE;return d.uploader.swfUploadStrategy.convertConfigForSWFUpload(l,i,k)};d.demands("fluid.uploader.swfUploadStrategy.setupConfig",["fluid.uploader.swfUploadStrategy.engine","fluid.uploader.flash.10"],{funcName:"fluid.uploader.swfUploadStrategy.flash10SetupConfig",args:["{engine}.config","{multiFileUploader}.events","{engine}.flashContainer","{multiFileUploader}.dom.browseButton"]});var g=function(){var h=function(){};SWFUpload.prototype.selectFile=h;SWFUpload.prototype.selectFiles=h};d.uploader.swfUploadStrategy.bindFileEventListeners=function(h,i){var j=function(k){d.find(h,function(l){if(l.id===k.id){l.filestatus=k.filestatus;return true}})};i.onFileStart.addListener(j);i.onFileProgress.addListener(j);i.onFileError.addListener(j);i.onFileSuccess.addListener(j)};d.uploader.swfUploadStrategy.flash10EventBinder=function(h,j,i){g();j.onUploadStart.addListener(function(){i.disableBrowseButton()});j.afterUploadComplete.addListener(function(){i.enableBrowseButton()});d.uploader.swfUploadStrategy.bindFileEventListeners(h,j)};d.demands("fluid.uploader.swfUploadStrategy.eventBinder",["fluid.uploader.swfUploadStrategy.engine","fluid.uploader.flash.10"],{funcName:"fluid.uploader.swfUploadStrategy.flash10EventBinder",args:["{multiFileUploader}.queue.files","{multiFileUploader}.events","{swfUploadStrategy}.local"]})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(b,a){a.uploader=a.uploader||{};a.uploader.swfUploadStrategy=a.uploader.swfUploadStrategy||{};a.uploader.swfUploadStrategy.flash9SetupDOM=function(d){var c=b("<div><span></span></div>");c.addClass(d.flash9Container);b("body").append(c);return c};a.demands("fluid.uploader.swfUploadStrategy.setupDOM",["fluid.uploader.swfUploadStrategy.engine","fluid.uploader.flash.9"],{funcName:"fluid.uploader.swfUploadStrategy.flash9SetupDOM",args:["{swfUploadStrategy}.options.styles"]});a.uploader.swfUploadStrategy.flash9SetupConfig=function(e,c,d){return a.uploader.swfUploadStrategy.convertConfigForSWFUpload(e,c,d)};a.demands("fluid.uploader.swfUploadStrategy.setupConfig",["fluid.uploader.swfUploadStrategy.engine","fluid.uploader.flash.9"],{funcName:"fluid.uploader.swfUploadStrategy.flash9SetupConfig",args:["{engine}.flashContainer","{engine}.config","{multiFileUploader}.events"]});a.uploader.swfUploadStrategy.flash9EventBinder=function(d,f,e,c){c.click(function(g){e.browse();g.preventDefault()});a.uploader.swfUploadStrategy.bindFileEventListeners(d,f)};a.demands("fluid.uploader.swfUploadStrategy.eventBinder",["fluid.uploader.swfUploadStrategy.engine","fluid.uploader.flash.9"],{funcName:"fluid.uploader.swfUploadStrategy.flash9EventBinder",args:["{multiFileUploader}.queue.files","{multiFileUploader}.events","{local}","{multiFileUploader}.dom.browseButton"]})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(a,c){c.uploader=c.uploader||{};c.demands("fluid.uploader.impl",["fluid.uploader","fluid.uploader.html5"],{funcName:"fluid.uploader.multiFileUploader"});c.uploader.html5Strategy=function(k){var l=c.initLittleComponent("fluid.uploader.html5Strategy",k);c.initDependents(l);return l};c.defaults("fluid.uploader.html5Strategy",{components:{local:{type:"fluid.uploader.html5Strategy.local",options:{queueSettings:"{multiFileUploader}.options.queueSettings",browseButton:"{multiFileUploader}.dom.browseButton",events:"{multiFileUploader}.events"}},remote:{type:"fluid.uploader.remote",options:{queueSettings:"{multiFileUploader}.options.queueSettings",events:"{multiFileUploader}.events"}}},legacyBrowserFileLimit:100,mergePolicy:{events:"preserve",browseButton:"preserve"}});c.demands("fluid.uploader.html5Strategy","fluid.multiFileUploader",{funcName:"fluid.uploader.html5Strategy",args:[c.COMPONENT_OPTIONS]});c.demands("fluid.uploader.progressiveStrategy","fluid.uploader.html5",{funcName:"fluid.uploader.html5Strategy",args:[c.COMPONENT_OPTIONS]});c.uploader.html5Strategy.fileSuccessHandler=function(l,k){k.onFileSuccess.fire(l);k.onFileComplete.fire(l)};c.uploader.html5Strategy.fileErrorHandler=function(l,k){l.filestatus=c.uploader.fileStatusConstants.ERROR;k.onFileError.fire(l,c.uploader.errorConstants.UPLOAD_FAILED);k.onFileComplete.fire(l)};c.uploader.html5Strategy.progressTracker=function(){var k={previousBytesLoaded:0};k.getChunkSize=function(l){var m=l-k.previousBytesLoaded;k.previousBytesLoaded=l;return m};return k};var j=function(m,l){var n=new XMLHttpRequest();n.onreadystatechange=function(){if(n.readyState===4){if(n.status===200){c.uploader.html5Strategy.fileSuccessHandler(m,l)}else{c.uploader.html5Strategy.fileErrorHandler(m,l)}}};var k=c.uploader.html5Strategy.progressTracker();n.upload.onprogress=function(o){l.onFileProgress.fire(m,k.getChunkSize(o.loaded),o.total)};return n};var b=function(k,l){a.each(l,function(m,n){k.append(m,n)})};c.uploader.html5Strategy.remote=function(k,l){var m=c.initLittleComponent("fluid.uploader.html5Strategy.remote",l);m.queue=k;m.queueSettings=m.options.queueSettings;m.events=m.options.events;m.start=function(){var p=m.queue.currentBatch.files;for(var o=0;o<p.length;o++){var n=p[o];m.uploadFile(n)}m.events.afterUploadComplete.fire(p)};m.uploadFile=function(n){m.events.onFileStart.fire(n);m.currentXHR=j(n,m.events);m.doUpload(n,m.queueSettings,m.currentXHR)};m.stop=function(){var n=m.queue.currentBatch,o=m.queue.files[n.fileIdx];o.filestatus=c.uploader.fileStatusConstants.CANCELLED;m.queue.shouldStop=true;m.currentXHR.abort();m.events.onUploadStop.fire()};c.initDependents(m);m.events.afterReady.fire();return m};c.defaults("fluid.uploader.html5Strategy.remote",{invokers:{doUpload:"fluid.uploader.html5Strategy.doUpload"}});c.demands("fluid.uploader.remote","fluid.uploader.html5Strategy",{funcName:"fluid.uploader.html5Strategy.remote",args:["{multiFileUploader}.queue",c.COMPONENT_OPTIONS]});
var i="\r\n";c.uploader.html5Strategy.doFormDataUpload=function(k,l,n){var m=new FormData();m.append("file",k);b(m,l.postParams);n.open("POST",l.uploadURL,true);n.send(m)};var d=function(){var k="---------------------------";k+=Math.floor(Math.random()*32768);k+=Math.floor(Math.random()*32768);k+=Math.floor(Math.random()*32768);return k};c.uploader.html5Strategy.generateMultiPartContent=function(m,l){var k="";k+="--"+m+i;k+='Content-Disposition: form-data; name="fileData"; filename="'+l.name+'"'+i;k+="Content-Type: "+l.type+i+i;k+=l.getAsBinary();k+=i+"--"+m+"--"+i;return k};c.uploader.html5Strategy.doManualMultipartUpload=function(l,m,n){var o=d();var k=c.uploader.html5Strategy.generateMultiPartContent(o,l);n.open("POST",m.uploadURL,true);n.setRequestHeader("Content-Type","multipart/form-data; boundary="+o);n.sendAsBinary(k)};c.demands("fluid.uploader.html5Strategy.doUpload","fluid.uploader.html5Strategy.remote",{funcName:"fluid.uploader.html5Strategy.doManualMultipartUpload",args:["@0","@1","@2"]});c.demands("fluid.uploader.html5Strategy.doUpload",["fluid.uploader.html5Strategy.remote","fluid.browser.supportsFormData"],{funcName:"fluid.uploader.html5Strategy.doFormDataUpload",args:["@0","@1","@2"]});var h=function(l){var k=l.children();return k.eq(k.length-1)};c.uploader.html5Strategy.local=function(k,m,l){var n=c.initLittleComponent("fluid.uploader.html5Strategy.local",l);n.queue=k;n.events=n.options.events;n.queueSettings=n.options.queueSettings;n.addFiles=function(u){var t=u.length;var o=(m?m:n.queueSettings.fileSizeLimit)*1000000;var p=n.queueSettings.fileUploadLimit;var v=n.queueSettings.fileQueueLimit;var q=n.queue.files.length-n.queue.getUploadedFiles().length;if(v!==0&&(t+q)>v){t=v-q}for(var s=0;s<t;s++){var r=u[s];if(r.size<o&&(p===0||n.queue.currentBatch.numFilesCompleted<p)){r.id="file-"+c.allocateGuid();r.filestatus=c.uploader.fileStatusConstants.QUEUED;n.events.afterFileQueued.fire(r)}else{r.filestatus=c.uploader.fileStatusConstants.ERROR;n.events.onQueueError.fire(r,c.uploader.errorConstants.UPLOAD_LIMIT_EXCEEDED)}}n.events.afterFileDialog.fire(u.length)};n.removeFile=function(o){};n.enableBrowseButton=function(){var o=h(n.options.browseButton);o.removeAttr("disabled")};n.disableBrowseButton=function(){var o=h(n.options.browseButton);o.attr("disabled","disabled")};c.initDependents(n);return n};c.defaults("fluid.uploader.html5Strategy.local",{components:{browseHandler:{type:"fluid.uploader.html5Strategy.browseHandler",options:{browseButton:"{multiFileUploader}.dom.browseButton",queueSettings:"{multiFileUploader}.options.queueSettings",events:"{multiFileUploader}.events",addFilesFn:"{local}.addFiles"}}},mergePolicy:{browseButton:"preserve",events:"preserve",addFilesFn:"preserve"}});c.demands("fluid.uploader.html5Strategy.local","fluid.uploader.html5Strategy",{funcName:"fluid.uploader.html5Strategy.local",args:["{multiFileUploader}.queue","{html5Strategy}.options.legacyBrowserFileLimit",c.COMPONENT_OPTIONS]});c.demands("fluid.uploader.html5Strategy.local",["fluid.uploader.html5Strategy","fluid.browser.supportsFormData"],{funcName:"fluid.uploader.html5Strategy.local",args:["{multiFileUploader}.queue",undefined,c.COMPONENT_OPTIONS]});var f=function(l,k){k.click(function(){l.events.onFileDialog.fire()});k.change(function(){var m=k[0].files;l.options.addFilesFn.apply(null,[m]);l.renderFreshMultiFileInput()});k.focus(function(){l.options.browseButton.addClass("focus")});k.blur(function(){l.options.browseButton.removeClass("focus")})};var e=function(k){var m=a(k.options.multiFileInputMarkup);var l=(k.options.queueSettings.fileTypes).replace(/\;/g,",");m.attr("accept",l);k.inputs.push(m);f(k,m);return m};var g=function(k){var l=e(k);k.options.browseButton.append(l);k.options.browseButton.attr("tabindex",-1)};c.uploader.html5Strategy.browseHandler=function(k){var l=c.initLittleComponent("fluid.uploader.html5Strategy.browseHandler",k);l.inputs=[];l.events=l.options.events;l.renderFreshMultiFileInput=function(){var n=l.inputs[l.inputs.length-1];n.hide();n.attr("tabindex",-1);var m=e(l);n.after(m)};g(l);return l};c.defaults("fluid.uploader.html5Strategy.browseHandler",{multiFileInputMarkup:"<input type='file' multiple='' class='fl-hidden'/>"});c.demands("fluid.uploader.html5Strategy.browseHandler","fluid.uploader.html5Strategy.local",{funcName:"fluid.uploader.html5Strategy.browseHandler",args:[c.COMPONENT_OPTIONS]})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(e,f){f.uploader=f.uploader||{};f.uploader.swfUploadStrategy=f.uploader.swfUploadStrategy||{};var h;var b=function(m,l,n,j){if(!j){return}var k=Math.min(n.chunkSize,m.size);n.bytesUploaded=Math.min(n.bytesUploaded+k,m.size);l.onFileProgress.fire(m,n.bytesUploaded,m.size)};var d=function(k,j){k.queue.finishFile(j);k.events.afterFileComplete.fire(j);if(k.queue.shouldUploadNextFile()){h(k)}else{k.events.afterUploadComplete.fire(k.queue.currentBatch.files);k.queue.clearCurrentBatch()}};var c=function(k){if(!k.queue.isUploading){return}var j=k.demoState.currentFile;k.events.onFileSuccess.fire(j);k.demoState.fileIdx++;d(k,j)};var g=function(k){if(!k.queue.isUploading){return}var j=k.demoState.currentFile;if(k.demoState.bytesUploaded<j.size){f.invokeAfterRandomDelay(function(){b(j,k.events,k.demoState,k.queue.isUploading);g(k)})}else{c(k)}};h=function(j){j.demoState.currentFile=j.queue.files[j.demoState.fileIdx];j.demoState.chunksForCurrentFile=Math.ceil(j.demoState.currentFile/j.demoState.chunkSize);j.demoState.bytesUploaded=0;j.queue.isUploading=true;j.events.onFileStart.fire(j.demoState.currentFile);g(j)};var i=function(k){var j=k.demoState.currentFile;j.filestatus=f.uploader.fileStatusConstants.CANCELLED;k.queue.shouldStop=true;k.events.onFileError.fire(j,f.uploader.errorConstants.UPLOAD_STOPPED,"The demo upload was paused by the user.");d(k,j);k.events.onUploadStop.fire()};var a=function(j){if(j.simulateDelay===undefined||j.simulateDelay===null){j.simulateDelay=true}j.demoState={fileIdx:0,chunkSize:200000};return j};f.uploader.demoRemote=function(j,l,k){var m=f.initLittleComponent("fluid.uploader.demoRemote",k);m.queue=j;m.events=l;m.start=function(){h(m)};m.stop=function(){i(m)};a(m);return m};f.invokeAfterRandomDelay=function(k){var j=Math.floor(Math.random()*1000+100);setTimeout(k,j)};f.demands("fluid.uploader.remote",["fluid.uploader.multiFileUploader","fluid.uploader.demo"],{funcName:"fluid.uploader.demoRemote",args:["{multiFileUploader}.queue","{multiFileUploader}.events",f.COMPONENT_OPTIONS]})})(jQuery,fluid_1_3);(function(b){var a=0;b.widget("ui.tooltip",{options:{items:"[title]",content:function(){return b(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_create:function(){var c=this;this.tooltip=b("<div></div>").attr("id","ui-tooltip-"+a++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content").appendTo(document.body).hide();this.tooltipContent=b("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseover.tooltip",function(d){c.open(d)}).bind("blur.tooltip mouseout.tooltip",function(d){c.close(d)})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.tooltip.remove();b.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.element.pushStack(this.tooltip.get())},open:function(e){var f=b(e&&e.target||this.element).closest(this.options.items);if(this.current&&this.current[0]==f[0]){return}var c=this;this.current=f;this.currentTitle=f.attr("title");var d=this.options.content.call(f[0],function(g){setTimeout(function(){if(c.current==f){c._show(e,f,g)}},13)});if(d){c._show(e,f,d)}},_show:function(d,e,c){if(!c){return}e.attr("title","");if(this.options.disabled){return}this.tooltipContent.html(c);this.tooltip.css({top:0,left:0}).show().position(b.extend({of:e},this.options.position)).hide();this.tooltip.attr("aria-hidden","false");e.attr("aria-describedby",this.tooltip.attr("id"));this.tooltip.stop(false,true).fadeIn();this._trigger("open",d)},close:function(c){if(!this.current){return}var d=this.current.attr("title",this.currentTitle);this.current=null;if(this.options.disabled){return}d.removeAttr("aria-describedby");this.tooltip.attr("aria-hidden","true");this.tooltip.stop(false,true).fadeOut();this._trigger("close",c)}})})(jQuery);var fluid_1_3=fluid_1_3||{};(function(d,c){var b=function(e){return typeof e==="function"?e:function(){return e}};var a=function(e){e.container.tooltip({content:b(e.options.content),position:e.options.position,items:e.options.items,open:function(g){var f=d(g.target).tooltip("widget");f.stop(false,true);f.hide();if(e.options.delay){f.delay(e.options.delay).fadeIn("default",e.events.afterOpen.fire())}else{f.show();e.events.afterOpen.fire()}},close:function(g){var f=d(g.target).tooltip("widget");f.stop(false,true);f.hide();f.clearQueue();e.events.afterClose.fire()}});e.elm=e.container.tooltip("widget");e.elm.addClass(e.options.styles.tooltip)};c.tooltip=function(e,f){var g=c.initView("fluid.tooltip",e,f);g.updateContent=function(h){g.container.tooltip("option","content",b(h))};g.destroy=function(){g.container.tooltip("destroy")};g.open=function(){g.container.tooltip("open")};g.close=function(){g.container.tooltip("close")};a(g);return g};c.defaults("fluid.tooltip",{styles:{tooltip:""},events:{afterOpen:null,afterClose:null},content:"",position:{my:"left top",at:"left bottom",offset:"0 5"},items:"*",delay:300})})(jQuery,fluid_1_3);(function(a){a.fn.bgIframe=a.fn.bgiframe=function(c){if(a.browser.msie&&parseInt(a.browser.version)<=6){c=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},c||{});var d=function(e){return e&&e.constructor==Number?e+"px":e},b='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+c.src+'"style="display:block;position:absolute;z-index:-1;'+(c.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(c.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":d(c.top))+";left:"+(c.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":d(c.left))+";width:"+(c.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":d(c.width))+";height:"+(c.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":d(c.height))+';"/>';
return this.each(function(){if(a("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(b),this.firstChild)}})}return this};if(!a.browser.version){a.browser.version=navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)[1]}})(jQuery);var fluid_1_3=fluid_1_3||{};(function(h,f){var d="state_initial",c="state_changed",b="state_reverted";function g(l,j){var m=l.options.strings;var i="<span class='flc-undo'><a href='#' class='flc-undo-undoControl'>"+m.undo+"</a><a href='#' class='flc-undo-redoControl'>"+m.redo+"</a></span>";var k=h(i).attr({role:"region","aria-live":"polite","aria-relevant":"all"});j.append(k);return k}function a(i){if(i.state===d){i.locate("undoContainer").hide();i.locate("redoContainer").hide()}else{if(i.state===c){i.locate("undoContainer").show();i.locate("redoContainer").hide()}else{if(i.state===b){i.locate("undoContainer").hide();i.locate("redoContainer").show()}}}}var e=function(i){i.locate("undoControl").click(function(){if(i.state!==b){f.model.copyModel(i.extremalModel,i.component.model);i.component.updateModel(i.initialModel,i);i.state=b;a(i);i.locate("redoControl").focus()}return false});i.locate("redoControl").click(function(){if(i.state!==c){i.component.updateModel(i.extremalModel,i);i.state=c;a(i);i.locate("undoControl").focus()}return false});return{modelChanged:function(j,l,k){if(k!==i){i.state=c;f.model.copyModel(i.initialModel,l);a(i)}}}};f.undoDecorator=function(i,l){var k=f.initLittleComponent("undo",l);k.container=k.options.renderer(k,i.container);f.initDomBinder(k);f.tabindex(k.locate("undoControl"),0);f.tabindex(k.locate("redoControl"),0);k.component=i;k.initialModel={};k.extremalModel={};f.model.copyModel(k.initialModel,i.model);f.model.copyModel(k.extremalModel,i.model);k.state=d;a(k);var j=e(k);k.returnedOptions={listeners:j};return k};f.defaults("undo",{selectors:{undoContainer:".flc-undo-undoControl",undoControl:".flc-undo-undoControl",redoContainer:".flc-undo-redoControl",redoControl:".flc-undo-redoControl"},strings:{undo:"undo edit",redo:"redo edit"},renderer:g})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(e,h){function j(B,A,x,z){var y=document.createEvent("KeyEvents");y.initKeyEvent(A,1,1,null,0,0,0,0,x,z);B.dispatchEvent(y)}h.setCaretToEnd=function(A,y){var B=y?y.length:0;try{A.focus();if(A.setSelectionRange){A.setSelectionRange(B,B);if(e.browser.mozilla&&B>0){j(A,"keypress",92,92);j(A,"keydown",8,0);j(A,"keypress",8,0)}}else{if(A.createTextRange){var x=A.createTextRange();x.move("character",B);x.select()}}}catch(z){}};var i=function(x){x.editContainer.hide();x.displayModeRenderer.show()};var c=function(x){if(x.isEditing()){setTimeout(function(){x.editView.value(x.model.value)},1);i(x);x.events.afterFinishEdit.fire(x.model.value,x.model.value,x.editField[0],x.viewEl[0])}};var n=function(B){var C=B.editView.value();var z=B.model.value;var x=B.viewEl[0];var A=B.editField[0];var y=B.events.onFinishEdit.fire(C,z,A,x);if(y===false){return}B.updateModelValue(C);B.events.afterFinishEdit.fire(C,z,A,x);i(B)};var q=function(z){if(z.options.submitOnEnter===undefined){z.options.submitOnEnter="textarea"!==h.unwrap(z.editField).nodeName.toLowerCase()}function A(B){return B.keyCode?B.keyCode:(B.which?B.which:0)}var x=function(B){var C=A(B);if(C===e.ui.keyCode.ESCAPE){z.textEditButton.focus(0);c(z);return false}};var y=function(B){var C=A(B);if(C!==e.ui.keyCode.ENTER){z.textEditButton.blur();return true}else{n(z);z.textEditButton.focus(0)}return false};if(z.options.submitOnEnter){z.editContainer.keypress(y)}z.editContainer.keydown(x)};var d=function(x){if(x.options.blurHandlerBinder){x.options.blurHandlerBinder(x)}else{var y=function(z){if(x.isEditing()){n(x)}return false};x.editField.blur(y)}};var s=function(y,x){if(!y.editInitialized){h.inlineEdit.renderEditContainer(y,!y.options.lazyEditView||!x);if(!y.options.lazyEditView||!x){y.editView=h.initSubcomponent(y,"editView",y.editField);e.extend(true,y.editView,h.initSubcomponent(y,"editAccessor",y.editField));q(y);d(y);y.editView.refreshView(y);y.editInitialized=true}}};var l=function(y){s(y,false);var x=y.viewEl;var z=y.displayView.value();y.updateModelValue(y.model.value===""?"":z);if(y.options.applyEditPadding){y.editField.width(Math.max(x.width()+y.options.paddings.edit,y.options.paddings.minimumEdit))}y.displayModeRenderer.hide();y.editContainer.show();setTimeout(function(){h.setCaretToEnd(y.editField[0],y.editView.value());if(y.options.selectOnEdit){y.editField[0].select()}},0);y.events.afterBeginEdit.fire()};var u=function(x,z,y){x.removeClass(z.defaultViewStyle);x.css("padding-right",y);x.removeClass(z.emptyDefaultViewText)};var p=function(x){x.displayView.value(x.options.defaultViewText);x.viewEl.css("padding-right",x.existingPadding);x.viewEl.addClass(x.options.styles.defaultViewStyle)};var r=function(x){x.displayView.value("");if(e.browser.msie){if(x.viewEl.css("display")==="inline"){x.viewEl.css("display","inline-block")}}};var k=function(x){x.displayView.value(x.model.value);u(x.viewEl,x.options.styles,x.existingPadding)};var o=function(x,y){x.displayView.refreshView(x,y);if(x.editView){x.editView.refreshView(x,y)}};var t=function(x,y){x.model.value=y;x.refreshView()};var a=function(y,A,z){var x=y.options.modelComparator;var B=x?x(y.model.value,A):y.model.value===A;if(!B){var C=e.extend(true,{},y.model);y.model.value=A;y.events.modelChanged.fire(y.model,C,z);y.refreshView(z)}};var m=function(y){var x=false;y.events.onBeginEdit.addListener(function(){x=true});y.events.afterFinishEdit.addListener(function(){x=false});return function(){return x}};var w=function(x){return function(){var y=x.events.onBeginEdit.fire();if(y===false){return false}l(x);return true}};var v=function(y){var x={content:y.options.tooltipText,position:{my:"left top",at:"left bottom",offset:"0 5"},target:"*",delay:y.options.tooltipDelay,styles:{tooltip:y.options.styles.tooltip}};h.tooltip(y.viewEl,x);if(y.textEditButton){h.tooltip(y.textEditButton,x)}};var g=function(x){var y=x.css("padding-right");return y?parseFloat(y):0};var b=function(x,y){if(y.editContainer){y.editContainer.hide()}if(y.tooltipEnabled()){v(y)}y.decorators=h.initSubcomponents(y,"componentDecorators",[y,h.COMPONENT_OPTIONS])};var f=function(z,x){var y=[];z.each(function(A,B){y.push(h.inlineEdit(e(B),x))});return y};h.inlineEdit=function(x,z){var y=h.initView("inlineEdit",x,z);y.viewEl=h.inlineEdit.setupDisplayText(y);y.displayView=h.initSubcomponent(y,"displayView",y.viewEl);e.extend(true,y.displayView,h.initSubcomponent(y,"displayAccessor",y.viewEl));y.model={value:""};y.edit=w(y);y.isEditing=m(y);y.finish=function(){n(y)};y.cancel=function(){c(y)};y.tooltipEnabled=function(){return y.options.useTooltip&&e.fn.tooltip};y.refreshView=function(A){o(y,A)};y.updateModelValue=function(B,A){a(y,B,A)};y.updateModel=function(A,B){a(y,A.value,B)};y.existingPadding=g(y.viewEl);t(y,y.displayView.value());y.displayModeRenderer=y.options.displayModeRenderer(y);s(y,true);b(x,y);return y};h.inlineEdit.setupEditField=function(x,z){var y=e(z);y=y.length?y:e("<input type='text' class='flc-inlineEdit-edit'/>");y.addClass(x);return y};h.inlineEdit.setupEditContainer=function(A,x,z){var y=e(z);y=y.length?y:e("<span></span>");A.after(y);y.append(x);return y};h.inlineEdit.defaultEditModeRenderer=function(y){var x=h.inlineEdit.setupEditField(y.options.styles.edit,y.editField);var z=h.inlineEdit.setupEditContainer(y.displayModeRenderer,x,y.editContainer);var A=h.inlineEdit.setupEditModeInstruction(y.options.styles.editModeInstruction,y.options.strings.editModeInstruction);var B=h.allocateSimpleId(A);x.attr("aria-describedby",B);h.inlineEdit.positionEditModeInstruction(A,z,x);return{container:z,field:x}};h.inlineEdit.renderEditContainer=function(z,y){z.editContainer=z.locate("editContainer");z.editField=z.locate("edit");if(z.editContainer.length!==1){if(z.editContainer.length>1){h.fail("InlineEdit did not find a unique container for selector "+z.options.selectors.editContainer+": "+h.dumpEl(z.editContainer))}}if(!y){return}var x=z.options.editModeRenderer(z);if(x){z.editContainer=x.container;z.editField=x.field}};h.inlineEdit.setupEditModeInstruction=function(x,y){var z=e("<p></p>");z.addClass(x);z.text(y);return z};h.inlineEdit.positionEditModeInstruction=function(z,y,x){y.append(z);x.focus(function(){z.show();var A=x.offset();z.css({left:A.left});z.css({top:A.top+x.height()+5})})};h.inlineEdit.setupDisplayModeContainer=function(x,y){var z=e(y);z=z.length?z:e("<span></span>");z.addClass(x.displayView);return z};h.inlineEdit.setupDisplayText=function(y){var x=y.locate("text");x.attr("tabindex","-1");x.addClass(y.options.styles.text);return x};h.inlineEdit.setupTextEditButton=function(A){var z=A.options;var x=A.locate("textEditButton");if(x.length===0){var y=e("<a href='#_' class='flc-inlineEdit-textEditButton'></a>");y.addClass(z.styles.textEditButton);y.text(z.tooltipText);h.inlineEdit.updateTextEditButton(y,A.model.value||z.defaultViewText,z.strings.textEditButton);A.events.modelChanged.addListener(function(){h.inlineEdit.updateTextEditButton(y,A.model.value||z.defaultViewText,z.strings.textEditButton)});A.locate("text").after(y);x=A.locate("textEditButton")}return x};h.inlineEdit.updateTextEditButton=function(x,z,A){var y=h.stringTemplate(A,{text:z});x.text(y)};h.inlineEdit.bindHoverHandlers=function(A,z){var y=function(B){A.addClass(z)};var x=function(B){A.removeClass(z)};A.hover(y,x)};h.inlineEdit.bindHighlightHandler=function(y,B,z){y=e(y);var A=function(){B.addClass(z.focus);B.addClass(z.invitation)};var x=function(){B.removeClass(z.focus);B.removeClass(z.invitation)};y.focus(A);y.blur(x)};h.inlineEdit.bindMouseHandlers=function(x,y){x=e(x);var z=h.inlineEdit.makeEditTriggerGuard(x,y);x.click(function(A){z(A);return false})};h.inlineEdit.bindKeyboardHandlers=function(x,z){x=e(x);x.attr("role","button");var y=h.inlineEdit.makeEditTriggerGuard(x,z);h.activatable(x,function(A){return y(A)})};h.inlineEdit.makeEditTriggerGuard=function(y,z){var x=h.unwrap(y);
return function(B){var A=h.findAncestor(B.target,function(C){if(/input|select|textarea|button|a/i.test(C.nodeName)||C===x){return true}});if(A===x){z();return false}}};h.inlineEdit.defaultDisplayModeRenderer=function(y){var x=y.options.styles;var z=h.inlineEdit.setupDisplayModeContainer(x);var A=y.viewEl.wrap(z).parent();y.textEditButton=h.inlineEdit.setupTextEditButton(y);A.append(y.textEditButton);h.inlineEdit.bindHoverHandlers(A,x.invitation);h.inlineEdit.bindMouseHandlers(y.viewEl,y.edit);h.inlineEdit.bindMouseHandlers(y.textEditButton,y.edit);h.inlineEdit.bindKeyboardHandlers(y.textEditButton,y.edit);h.inlineEdit.bindHighlightHandler(y.viewEl,A,x);h.inlineEdit.bindHighlightHandler(y.textEditButton,A,x);return A};h.inlineEdit.standardAccessor=function(x){var z=x.nodeName.toLowerCase();var y="input"===z||"textarea"===z?"val":"text";return{value:function(A){return e(x)[y](A)}}};h.inlineEdit.standardDisplayView=function(y){var x={refreshView:function(z,A){if(z.model.value){k(z)}else{if(z.options.defaultViewText){p(z)}else{r(z)}}if(e.trim(z.viewEl.text()).length===0){z.viewEl.addClass(z.options.styles.emptyDefaultViewText);if(z.existingPadding<z.options.paddings.minimumView){z.viewEl.css("padding-right",z.options.paddings.minimumView)}}}};return x};h.inlineEdit.standardEditView=function(x){var y={refreshView:function(z,A){if(!A||z.editField&&z.editField.index(A)===-1){z.editView.value(z.model.value)}}};e.extend(true,y,h.inlineEdit.standardAccessor(x));return y};h.inlineEdits=function(y,z){z=z||{};var A=e.extend({},h.defaults("inlineEdits").selectors,z.selectors);var x=h.container(y);var B=e(A.editables,x);return f(B,z)};h.defaults("inlineEdit",{selectors:{text:".flc-inlineEdit-text",editContainer:".flc-inlineEdit-editContainer",edit:".flc-inlineEdit-edit",textEditButton:".flc-inlineEdit-textEditButton"},styles:{text:"fl-inlineEdit-text",edit:"fl-inlineEdit-edit",invitation:"fl-inlineEdit-invitation",defaultViewStyle:"fl-inlineEdit-emptyText-invitation",emptyDefaultViewText:"fl-inlineEdit-emptyDefaultViewText",focus:"fl-inlineEdit-focus",tooltip:"fl-inlineEdit-tooltip",editModeInstruction:"fl-inlineEdit-editModeInstruction",displayView:"fl-inlineEdit-simple-editableText fl-inlineEdit-textContainer",textEditButton:"fl-offScreen-hidden"},events:{modelChanged:null,onBeginEdit:"preventable",afterBeginEdit:null,onFinishEdit:"preventable",afterFinishEdit:null,afterInitEdit:null},strings:{textEditButton:"Edit text %text",editModeInstruction:"Escape to cancel, Enter or Tab when finished"},paddings:{edit:10,minimumEdit:80,minimumView:60},applyEditPadding:true,blurHandlerBinder:null,submitOnEnter:undefined,modelComparator:null,displayAccessor:{type:"fluid.inlineEdit.standardAccessor"},displayView:{type:"fluid.inlineEdit.standardDisplayView"},editAccessor:{type:"fluid.inlineEdit.standardAccessor"},editView:{type:"fluid.inlineEdit.standardEditView"},displayModeRenderer:h.inlineEdit.defaultDisplayModeRenderer,editModeRenderer:h.inlineEdit.defaultEditModeRenderer,lazyEditView:false,defaultViewText:"Click here to edit",useTooltip:true,tooltipText:"Select or press Enter to edit",tooltipDelay:1000,selectOnEdit:false});h.defaults("inlineEdits",{selectors:{editables:".flc-inlineEditable"}})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(d,c){c.inlineEdit.makeViewAccessor=function(g,h,i){return function(j){return{value:function(l){var k=g(j);if(!k){if(l){d(j).val(l)}return""}if(l){h(j,k,l)}else{return i(k)}}}}};c.inlineEdit.richTextViewAccessor=function(g){return{value:function(h){return d(g).html(h)}}};var a=function(k,g,h){var j=c.defaults(k);var i=c.merge(j?j.mergePolicy:null,{},j,h);return c.inlineEdit(g,i)};c.inlineEdit.normalizeHTML=function(h){var g=d.trim(h.replace(/\s+/g," "));g=g.replace(/\s+<\//g,"</");g=g.replace(/\<(\S+)[^\>\s]*\>/g,function(i){return i.toLowerCase()});return g};c.inlineEdit.htmlComparator=function(h,g){return c.inlineEdit.normalizeHTML(h)===c.inlineEdit.normalizeHTML(g)};c.inlineEdit.bindRichTextHighlightHandler=function(h,k,i){h=d(h);var j=function(){k.addClass(i)};var g=function(){k.removeClass(i)};h.focus(j);h.blur(g)};c.inlineEdit.setupRichTextEditButton=function(j){var i=j.options;var g=j.locate("textEditButton");if(g.length===0){var h=d("<a href='#_' class='flc-inlineEdit-textEditButton'></a>");h.text(i.strings.textEditButton);j.locate("text").after(h);g=j.locate("textEditButton")}return g};c.inlineEdit.richTextDisplayModeRenderer=function(h){var g=h.options.styles;var i=c.inlineEdit.setupDisplayModeContainer(g);var j=h.viewEl.wrap(i).parent();h.textEditButton=c.inlineEdit.setupRichTextEditButton(h);j.append(h.textEditButton);j.addClass(g.focus);c.inlineEdit.bindHoverHandlers(j,g.invitation);c.inlineEdit.bindMouseHandlers(h.textEditButton,h.edit);c.inlineEdit.bindKeyboardHandlers(h.textEditButton,h.edit);c.inlineEdit.bindRichTextHighlightHandler(h.viewEl,j,g.invitation);c.inlineEdit.bindRichTextHighlightHandler(h.textEditButton,j,g.invitation);return j};c.inlineEdit.tinyMCE=function(g,h){var i=a("fluid.inlineEdit.tinyMCE",g,h);tinyMCE.init(i.options.tinyMCE);return i};c.inlineEdit.tinyMCE.getEditor=function(g){return tinyMCE.get(g.id)};c.inlineEdit.tinyMCE.setValue=function(g,h,i){d(g).val(i);h.setContent(i,{format:"raw"})};c.inlineEdit.tinyMCE.getValue=function(g){return g.getContent()};var f=c.inlineEdit.tinyMCE;f.viewAccessor=c.inlineEdit.makeViewAccessor(f.getEditor,f.setValue,f.getValue);c.inlineEdit.tinyMCE.blurHandlerBinder=function(g){function h(i){setTimeout(function(){tinyMCE.execCommand("mceFocus",false,g.editField[0].id);if(d.browser.mozilla&&d.browser.version.substring(0,3)==="1.8"){return}i.selection.select(i.getBody(),1);i.selection.collapse(0)},10)}g.events.afterInitEdit.addListener(function(i){h(i);var j=i.getBody();c.deadMansBlur(g.editField,{exclusions:{body:d(j)},handler:function(){g.cancel()}})});g.events.afterBeginEdit.addListener(function(){var i=tinyMCE.get(g.editField[0].id);if(i){h(i)}})};c.inlineEdit.tinyMCE.editModeRenderer=function(i){var h=i.options.tinyMCE;h.elements=c.allocateSimpleId(i.editField);var g=h.init_instance_callback;h.init_instance_callback=function(j){i.events.afterInitEdit.fire(j);if(g){g()}};tinyMCE.init(h)};c.defaults("fluid.inlineEdit.tinyMCE",{tinyMCE:{mode:"exact",theme:"simple"},useTooltip:true,selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation",displayView:"fl-inlineEdit-textContainer",text:""},strings:{textEditButton:"Edit"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.tinyMCE.viewAccessor"},lazyEditView:true,defaultViewText:"Click Edit",modelComparator:c.inlineEdit.htmlComparator,blurHandlerBinder:c.inlineEdit.tinyMCE.blurHandlerBinder,displayModeRenderer:c.inlineEdit.richTextDisplayModeRenderer,editModeRenderer:c.inlineEdit.tinyMCE.editModeRenderer});c.inlineEdit.FCKEditor=function(g,h){return a("fluid.inlineEdit.FCKEditor",g,h)};c.inlineEdit.FCKEditor.getEditor=function(g){var h=typeof(FCKeditorAPI)==="undefined"?null:FCKeditorAPI.GetInstance(g.id);return h};c.inlineEdit.FCKEditor.complete=c.event.getEventFirer();c.inlineEdit.FCKEditor.complete.addListener(function(h){var g=h.LinkedField;var i=d.data(g,"fluid.inlineEdit.FCKEditor");if(i&&i.events){i.events.afterInitEdit.fire(h)}});c.inlineEdit.FCKEditor.blurHandlerBinder=function(g){function h(i){i.Focus()}g.events.afterInitEdit.addListener(function(i){h(i)});g.events.afterBeginEdit.addListener(function(){var i=c.inlineEdit.FCKEditor.getEditor(g.editField[0]);if(i){h(i)}})};c.inlineEdit.FCKEditor.editModeRenderer=function(i){var j=c.allocateSimpleId(i.editField);d.data(c.unwrap(i.editField),"fluid.inlineEdit.FCKEditor",i);var h=new FCKeditor(j);var g=c.copy(i.options.FCKEditor);g.BasePath=g.BasePath+"editor/";d.extend(true,h.Config,g);d.extend(true,h,i.options.FCKEditor);h.Config.fluidInstance=i;h.ReplaceTextarea()};c.inlineEdit.FCKEditor.setValue=function(g,h,i){h.SetHTML(i)};c.inlineEdit.FCKEditor.getValue=function(g){return g.GetHTML()};var e=c.inlineEdit.FCKEditor;e.viewAccessor=c.inlineEdit.makeViewAccessor(e.getEditor,e.setValue,e.getValue);c.defaults("fluid.inlineEdit.FCKEditor",{selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation",displayView:"fl-inlineEdit-textContainer",text:""},strings:{textEditButton:"Edit"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.FCKEditor.viewAccessor"},lazyEditView:true,defaultViewText:"Click Edit",modelComparator:c.inlineEdit.htmlComparator,blurHandlerBinder:c.inlineEdit.FCKEditor.blurHandlerBinder,displayModeRenderer:c.inlineEdit.richTextDisplayModeRenderer,editModeRenderer:c.inlineEdit.FCKEditor.editModeRenderer,FCKEditor:{BasePath:"fckeditor/"}});c.inlineEdit.CKEditor=function(g,h){return a("fluid.inlineEdit.CKEditor",g,h)};c.inlineEdit.CKEditor.getEditor=function(g){return CKEDITOR.instances[g.id]};c.inlineEdit.CKEditor.setValue=function(g,h,i){h.setData(i)};c.inlineEdit.CKEditor.getValue=function(g){return g.getData()};var b=c.inlineEdit.CKEditor;b.viewAccessor=c.inlineEdit.makeViewAccessor(b.getEditor,b.setValue,b.getValue);c.inlineEdit.CKEditor.focus=function(g){setTimeout(function(){g.focus()},0)};c.inlineEdit.CKEditor.normalizeHTML=function(i){var h=c.inlineEdit.normalizeHTML(i);var g=h.indexOf(">");if(g!==-1&&g<h.length-1){if(h.charAt(g+1)!==" "){h=h.substring(0,g+1)+" "+h.substring(g+1)}}return h};c.inlineEdit.CKEditor.htmlComparator=function(h,g){return c.inlineEdit.CKEditor.normalizeHTML(h)===c.inlineEdit.CKEditor.normalizeHTML(g)};c.inlineEdit.CKEditor.blurHandlerBinder=function(g){g.events.afterInitEdit.addListener(c.inlineEdit.CKEditor.focus);g.events.afterBeginEdit.addListener(function(){var h=c.inlineEdit.CKEditor.getEditor(g.editField[0]);if(h){c.inlineEdit.CKEditor.focus(h)}})};c.inlineEdit.CKEditor.editModeRenderer=function(h){var i=c.allocateSimpleId(h.editField);d.data(c.unwrap(h.editField),"fluid.inlineEdit.CKEditor",h);var g=CKEDITOR.replace(i,h.options.CKEditor);
g.on("instanceReady",function(j){c.inlineEdit.CKEditor.focus(j.editor);h.events.afterInitEdit.fire(j.editor)})};c.defaults("fluid.inlineEdit.CKEditor",{selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation",displayView:"fl-inlineEdit-textContainer",text:""},strings:{textEditButton:"Edit"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.CKEditor.viewAccessor"},lazyEditView:true,defaultViewText:"Click Edit",modelComparator:c.inlineEdit.CKEditor.htmlComparator,blurHandlerBinder:c.inlineEdit.CKEditor.blurHandlerBinder,displayModeRenderer:c.inlineEdit.richTextDisplayModeRenderer,editModeRenderer:c.inlineEdit.CKEditor.editModeRenderer,CKEditor:{}});c.inlineEdit.dropdown=function(g,h){return a("fluid.inlineEdit.dropdown",g,h)};c.inlineEdit.dropdown.editModeRenderer=function(g){var h=c.allocateSimpleId(g.editField);g.editField.selectbox({finishHandler:function(){g.finish()}});return{container:g.editContainer,field:d("input.selectbox",g.editContainer)}};c.inlineEdit.dropdown.blurHandlerBinder=function(g){c.deadMansBlur(g.editField,{exclusions:{selectBox:d("div.selectbox-wrapper",g.editContainer)},handler:function(){g.cancel()}})};c.defaults("fluid.inlineEdit.dropdown",{applyEditPadding:false,blurHandlerBinder:c.inlineEdit.dropdown.blurHandlerBinder,editModeRenderer:c.inlineEdit.dropdown.editModeRenderer})})(jQuery,fluid_1_3);function FCKeditor_OnComplete(a){fluid.inlineEdit.FCKEditor.complete.fire(a)}var fluid_1_3=fluid_1_3||{};(function(b,a){a.dom.computeAbsolutePosition=function(c){var e=0,d=0;if(c.offsetParent){do{e+=c.offsetLeft;d+=c.offsetTop;c=c.offsetParent}while(c);return[e,d]}};a.dom.cleanseScripts=function(c){var d=b.data(c,a.dom.cleanseScripts.MARKER);if(!d){a.dom.iterateDom(c,function(e){return e.tagName.toLowerCase()==="script"?"delete":null});b.data(c,a.dom.cleanseScripts.MARKER,true)}};a.dom.cleanseScripts.MARKER="fluid-scripts-cleansed";a.dom.insertAfter=function(c,d){var e=d.nextSibling;if(!e){d.parentNode.appendChild(c)}else{d.parentNode.insertBefore(c,e)}};a.dom.isWhitespaceNode=function(c){return !(/[^\t\n\r ]/.test(c.data))};a.dom.isIgnorableNode=function(c){return(c.nodeType===8)||((c.nodeType===3)&&a.dom.isWhitespaceNode(c))}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(f,g){g.orientation={HORIZONTAL:4,VERTICAL:1};g.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};g.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};g.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};g.directionSign=function(k){return k===g.direction.UP||k===g.direction.LEFT?g.direction.PREVIOUS:g.direction.NEXT};g.directionAxis=function(k){return k===g.direction.LEFT||k===g.direction.RIGHT?0:1};g.directionOrientation=function(k){return g.directionAxis(k)?g.orientation.VERTICAL:g.orientation.HORIZONTAL};g.keycodeDirection={up:g.direction.UP,down:g.direction.DOWN,left:g.direction.LEFT,right:g.direction.RIGHT};g.moveDom=function(m,n,k){m=g.unwrap(m);n=g.unwrap(n);var l;if(k===g.position.INSIDE){n.appendChild(m)}else{if(k===g.position.BEFORE){for(l=n.previousSibling;;l=l.previousSibling){if(!l||!g.dom.isIgnorableNode(l)){if(l!==m){g.dom.cleanseScripts(m);n.parentNode.insertBefore(m,n)}break}}}else{if(k===g.position.AFTER){for(l=n.nextSibling;;l=l.nextSibling){if(!l||!g.dom.isIgnorableNode(l)){if(l!==m){g.dom.cleanseScripts(m);g.dom.insertAfter(m,n)}break}}}else{g.fail("Unrecognised position supplied to fluid.moveDom: "+k)}}}};g.normalisePosition=function(l,n,k,m){if(l===g.position.REPLACE){l=n&&k>=m?g.position.AFTER:g.position.BEFORE}return l};g.permuteDom=function(n,r,q,l,o){n=g.unwrap(n);r=g.unwrap(r);var p=f.inArray(n,l);if(p===-1){g.fail("Error in permuteDom: source element "+g.dumpEl(n)+" not found in source list "+g.dumpEl(l))}var v=f.inArray(r,o);if(v===-1){g.fail("Error in permuteDom: target element "+g.dumpEl(r)+" not found in source list "+g.dumpEl(o))}var k=l===o;q=g.normalisePosition(q,k,v,p);var u={};u[g.position.AFTER]=n.nextSibling;u[g.position.BEFORE]=n.previousSibling;g.moveDom(l[p],o[v],q);var t=k?v-1:l.length-2;var m;if(q===g.position.BEFORE&&k){t--}if(!k||v>p){for(m=t;m>p;--m){g.moveDom(l[m+1],l[m],g.position.AFTER)}if(p+1<l.length){g.moveDom(l[p+1],u[g.position.AFTER],g.position.BEFORE)}}var s=k?p-1:o.length-1;if(q===g.position.AFTER){v++}if(!k||v<p){for(m=v;m<s;++m){g.moveDom(o[m],o[m+1],g.position.BEFORE)}if(s>=0&&s<o.length-1){g.moveDom(o[s],u[g.position.BEFORE],g.position.AFTER)}}};var b=function(k,l){return window.getComputedStyle?window.getComputedStyle(k,null).getPropertyValue(l):k.currentStyle[l]};var h=function(k){while(k&&k.nodeName){if(k.nodeName==="BODY"){return true}k=k.parentNode}return false};var j=function(k){return"hidden"===k.type||b(k,"display")==="none"||b(k,"visibility")==="hidden"||!h(k)};var e=function(m,l,q){var o={};o.element=m;o.orientation=l;if(q===g.position.INSIDE){o.position=q}if(j(m)){o.clazz="hidden"}var p=g.dom.computeAbsolutePosition(m)||[0,0];var n=m.offsetWidth;var k=m.offsetHeight;o.rect={left:p[0],top:p[1]};o.rect.right=p[0]+n;o.rect.bottom=p[1]+k;return o};var c=10000;function d(k){return"Rect top: "+k.top+" left: "+k.left+" bottom: "+k.bottom+" right: "+k.right}function i(k){if(!k||!k.rect){return"null"}else{return d(k.rect)+" position: "+k.position+" for "+g.dumpEl(k.element)}}g.dropManager=function(){var l=[];var n={};var p={};var k;var m;var r,q;p.updateGeometry=function(B){m=B;l=[];n={};var s=B.elementMapper;for(var A=0;A<B.extents.length;++A){var w=B.extents[A];var t=w.orientation;var u=g.rectSides[t];var v=function(G,D,J,K,F){var E=e(G,t,K);E.owner=w;if(E.clazz!=="hidden"&&s){E.clazz=s(G)}n[g.dropManager.cacheKey(G)]=E;var H=g.dropManager.getRelativeClass(w.elements,F,g.position.BEFORE,E.clazz,s);var I=g.dropManager.getRelativeClass(w.elements,F,g.position.AFTER,E.clazz,s);if(K===g.position.INSIDE){l[l.length]=E}else{g.dropManager.splitElement(l,u,E,K,H,I)}if(D&&B.sentinelize){g.dropManager.sentinelizeElement(l,u,E,1,K,H)}if(J&&B.sentinelize){g.dropManager.sentinelizeElement(l,u,E,0,K,I)}return E};var C=true;for(var x=0;x<w.elements.length;++x){var z=w.elements[x];var y=v(z,x===0,x===w.elements.length-1,g.position.INTERLEAVED,x);if(y.clazz!=="hidden"){C=false}}if(C&&w.parentElement){v(w.parentElement,true,true,g.position.INSIDE)}}};p.startDrag=function(x,w,u,v){var z=w[0]+u/2;var y=w[1]+v/2;var t=z-x.pageX;var s=y-x.pageY;p.updateGeometry(m);k=null;r=t;q=s;f("body").bind("mousemove.fluid-dropManager",p.mouseMove)};p.lastPosition=function(){return k};p.endDrag=function(){f("body").unbind("mousemove.fluid-dropManager")};p.mouseMove=function(t){var s=t.pageX+r;var v=t.pageY+q;var u=p.closestTarget(s,v,k);if(u&&u!==g.dropManager.NO_CHANGE){k=u;p.dropChangeFirer.fire(u)}};p.dropChangeFirer=g.event.getEventFirer();var o={element:null};p.closestTarget=function(D,B,w){var v=Number.MAX_VALUE;var t=o;var s=Number.MAX_VALUE;var C=o;for(var A=0;A<l.length;++A){var z=l[A];if(z.clazz==="hidden"){continue}var u=g.geom.minPointRectangle(D,B,z.rect);if(z.clazz==="locked"){if(u<s){s=u;C=z}}else{if(u<v){v=u;t=z}if(u===0){break}}}if(!t){return t}if(s>=v){C=o}if(w&&w.position===t.position&&g.unwrap(w.element)===g.unwrap(t.element)&&g.unwrap(w.lockedelem)===g.unwrap(C.element)){return g.dropManager.NO_CHANGE}return{position:t.position,element:t.element,lockedelem:C.element}};p.shuffleProjectFrom=function(t,w,v,s){var u=p.projectFrom(t,w,v,s);if(u){u.position=g.position.REPLACE}return u};p.projectFrom=function(w,y,x,v){p.updateGeometry(m);var u=n[g.dropManager.cacheKey(w)];var t=g.geom.projectFrom(u.rect,y,l,x,v);if(!t.cacheelem){return null}var s=t.cacheelem.position;return{element:t.cacheelem.element,position:s?s:g.position.BEFORE}};p.logicalFrom=function(u,w,v,t){var s=p.getOwningSpan(u,g.position.INTERLEAVED,v);return{element:g.dropManager.getRelativeElement(u,w,s,t),position:g.position.REPLACE}};p.lockedWrapFrom=function(v,z,y,u){var x=p.logicalFrom(v,z,y,u);var s=p.getOwningSpan(v,g.position.INTERLEAVED,y);var w=n[g.dropManager.cacheKey(v)].owner.elements;if(y||s[0]===w[0]){return x}var t=g.dropManager.getRelativeElement(v,z,w,u);if(m.elementMapper(t)==="locked"){x.element=null;x.clazz="locked"}return x};p.getOwningSpan=function(u,t,w){var s=n[g.dropManager.cacheKey(u)].owner;var v=t===g.position.INSIDE?[s.parentElement]:s.elements;if(!w&&m.elementMapper){v=f.makeArray(v);g.remove_if(v,function(x){return m.elementMapper(x)==="locked"})}return v};p.geometricMove=function(v,w,s){var t=p.getOwningSpan(v,null,true);var u=p.getOwningSpan(w,s,true);g.permuteDom(v,w,s,t,u)};return p};g.dropManager.NO_CHANGE="no change";g.dropManager.cacheKey=function(k){return g.allocateSimpleId(k)};g.dropManager.sentinelizeElement=function(k,p,n,o,q,m){var l=f.extend(true,{},n);l.rect[p[o]]=l.rect[p[1-o]]+(o?1:-1);l.rect[p[1-o]]=(o?-1:1)*c;l.position=q===g.position.INSIDE?q:(o?g.position.BEFORE:g.position.AFTER);l.clazz=m;k[k.length]=l};g.dropManager.splitElement=function(n,l,m,k,p,o){var s=f.extend(true,{},m);var q=f.extend(true,{},m);var r=(s.rect[l[0]]+s.rect[l[1]])/2;s.rect[l[1]]=r;s.position=g.position.BEFORE;q.rect[l[0]]=r;q.position=g.position.AFTER;s.clazz=p;q.clazz=o;n[n.length]=s;n[n.length]=q};g.dropManager.getRelativeClass=function(m,l,n,k,o){l+=n;if(l<0&&k==="locked"){return"locked"}if(l>=m.length||o===null){return null}else{n=m[l];return o(n)==="locked"&&k==="locked"?"locked":null}};g.dropManager.getRelativeElement=function(m,o,n,l){var p=g.directionSign(o);var k=f(n).index(m)+p;if(k<0){k+=n.length}if(l){if(k===n.length||k===(n.length+p)){return m}}k%=n.length;return n[k]};g.geom=g.geom||{};g.geom.minPointRectangle=function(k,o,n){var m=k<n.left?(n.left-k):(k>n.right?(k-n.right):0);var l=o<n.top?(n.top-o):(o>n.bottom?(o-n.bottom):0);return m*m+l*l};g.geom.minRectRect=function(n,l){var m=n.right<l.left?l.left-n.right:l.right<n.left?n.left-l.right:0;var k=n.bottom<l.top?l.top-n.bottom:l.bottom<n.top?n.top-l.bottom:0;return m*m+k*k};var a=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}
};g.geom.projectFrom=function(o,B,C,v,q){var m=g.directionAxis(B);var y=g.rectSides[B];var w=g.rectSides[m*15+5-B];var s=g.directionSign(B);var k={left:(7*o.left+1*o.right)/8,right:(5*o.left+3*o.right)/8,top:(7*o.top+1*o.bottom)/8,bottom:(5*o.top+3*o.bottom)/8};k[y]=s*c;k[w]=-k[y];function D(H,F,I){var G=F.rect;var J=g.geom.minRectRect(k,G);var E=-s*I*(o[I===1?y:w]-G[I===1?w:y]);if(J<=H.mindist&&E>=0){if(J===H.mindist&&E*I>H.minrdist){return}H.minrdist=E*I;H.mindist=J;H.minelem=F}}var t=a();var x=a();var n=a();for(var z=0;z<C.length;++z){var A=C[z];var l=A.owner&&A.element===A.owner.parentElement;if(A.clazz==="hidden"||v&&l){continue}else{if(!v&&A.clazz==="locked"){D(n,A,1)}else{D(t,A,1);D(x,A,-1)}}}var r=!t.minelem||x.mindist<t.mindist;r=r&&!q;var u=r?x:t;var p={wrapped:r,cacheelem:u.minelem};if(n.mindist<u.mindist){p.lockedelem=n.minelem}return p}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(g,f){var a=function(m,j,k){f.dom.cleanseScripts(f.unwrap(m));var l=g(m).clone();f.dom.iterateDom(l.get(0),function(n){n.removeAttribute("id");if(n.tagName.toLowerCase()==="input"){n.setAttribute("disabled","disabled")}});l.removeAttr("id");l.removeClass("ui-droppable");l.addClass(j);if(k){var i=g(document.createElement("div"));i.append(l);i.append(k);l=i}g("body").append(l);if(!g.browser.safari){l.css("display","block").width(m.offsetWidth).height(m.offsetHeight)}if(g.browser.opera){l.hide()}return l};function c(j,l,m,i){var k=l;var n=false;if(g.browser.opera){j.keypress(function(o){if(n){n=false;o.preventDefault();return false}});k=function(p){var o=l(p);if(o===false){n=true}}}j.keydown(k);j.keyup(m)}function d(i){i.container.attr("role",i.options.containerRole.container);i.container.attr("aria-multiselectable","false");i.container.attr("aria-readonly","false");i.container.attr("aria-disabled","false")}function h(i){return i+"_avatar"}var e=function(i){if(i.keysets&&!(i.keysets instanceof Array)){i.keysets=[i.keysets]}};f.reorderer=function(x,k){if(!x){f.fail("Reorderer initialised with no container")}var y=f.initView("fluid.reorderer",x,k);k=y.options;var r=f.dropManager();y.layoutHandler=f.initSubcomponent(y,"layoutHandler",[y.container,k,r,y.dom]);y.activeItem=undefined;e(k);var i=y.locate("dropWarning");var v;if(i){v=i.clone()}var A=function(D){var F=k.keysets;for(var E=0;E<F.length;E++){if(F[E].modifier(D)){return true}}return false};var j=function(){return g.inArray(y.activeItem,y.dom.fastLocate("movables"))>=0};var l=function(D){y.dom.fastLocate("dropTargets").attr("aria-dropeffect",D)};var s=k.styles;var t=function(D){return(!D.ctrlKey&&!D.altKey&&!D.shiftKey&&!D.metaKey)};var B=function(K){var M=y.activeItem;if(!M){return true}var D=k.keysets;for(var G=0;G<D.length;G++){var F=D[G];var J=f.keyForValue(F,K.keyCode);if(!J){continue}var L=F.modifier(K);var E=f.keycodeDirection[J];var H=y.layoutHandler.getRelativePosition(M,E,!L);if(!H){continue}if(L){var I=y.events.onBeginMove.fire(M);if(I===false){return false}if(i.length>0){if(H.clazz==="locked"){y.events.onShowKeyboardDropWarning.fire(M,i);i.show()}else{i.hide()}}if(H.element){y.requestMovement(H,M)}}else{if(t(K)){M.blur();g(H.element).focus()}}return false}return true};y.handleKeyDown=function(D){if(!y.activeItem||y.activeItem!==D.target){return true}var E=g(y.activeItem);if(!E.hasClass(s.dragging)&&A(D)){if(j()){E.removeClass(s.selected);E.addClass(s.dragging);E.attr("aria-grabbed","true");l("move")}return false}return B(D)};y.handleKeyUp=function(D){if(!y.activeItem||y.activeItem!==D.target){return true}var E=g(y.activeItem);if(E.hasClass(s.dragging)&&!A(D)){if(i){i.hide()}E.removeClass(s.dragging);E.addClass(s.selected);E.attr("aria-grabbed","false");l("none");return false}return false};var m;var n=function(E){var D=g(document.createElement(E));D.addClass(k.styles.dropMarker);D.hide();return D};y.requestMovement=function(E,D){D=f.unwrap(D);if(!E||f.unwrap(E.element)===D){return}var F=g(y.activeItem);F.unbind("blur.fluid.reorderer");y.events.onMove.fire(D,E);r.geometricMove(D,E.element,E.position);F.focus();y.refresh();r.updateGeometry(y.layoutHandler.getGeometricInfo());y.events.afterMove.fire(D,E,y.dom.fastLocate("movables"))};var w=function(D,E){y.dom.fastLocate("grabHandle",D)[E?"addClass":"removeClass"](s.hover)};function q(F){var E=k.styles;F.attr("aria-grabbed","false");F.mouseover(function(){y.events.onHover.fire(F,true)});F.mouseout(function(){y.events.onHover.fire(F,false)});var D;y.dom.fastLocate("grabHandle",F).draggable({refreshPositions:false,scroll:true,helper:function(){var G;if(v){G=v[0]}D=g(k.avatarCreator(F[0],E.avatar,G));D.attr("id",h(y.container.id));return D},start:function(M,L){var H=y.events.onBeginMove.fire(F);if(H===false){return false}var K=y.dom.fastLocate("grabHandle",F)[0];var J=f.dom.computeAbsolutePosition(K);var G=K.offsetWidth;var I=K.offsetHeight;F.focus();F.removeClass(k.styles.selected);F.addClass(k.styles.mouseDrag);F.attr("aria-grabbed","true");l("move");r.startDrag(M,J,G,I);D.show()},stop:function(I,H){F.removeClass(k.styles.mouseDrag);F.addClass(k.styles.selected);g(y.activeItem).attr("aria-grabbed","false");var G=f.unwrap(m);if(G.parentNode){G.parentNode.removeChild(G)}D.hide();H.helper=null;l("none");r.endDrag();y.requestMovement(r.lastPosition(),F);y.activeItem.focus()},handle:y.dom.fastLocate("grabHandle",F)})}function C(D,E){D.removeClass(E.selected);D.removeClass(E.dragging);D.addClass(E.defaultStyle);D.attr("aria-selected","false")}var p=function(F){y.events.onSelect.fire(F);var E=k.styles;if(y.activeItem&&y.activeItem!==F){C(g(y.activeItem),E)}y.activeItem=F;var D=g(F);D.removeClass(E.defaultStyle);D.addClass(E.selected);D.attr("aria-selected","true")};var z=function(){var G=function(I){C(g(this),k.styles);return I.stopPropagation()};var H=function(I){p(this);return I.stopPropagation()};var D=y.dom.fastLocate("selectables");for(var F=0;F<D.length;++F){var E=g(D[F]);if(!g.data(E[0],"fluid.reorderer.selectable-initialised")){E.addClass(s.defaultStyle);E.bind("blur.fluid.reorderer",G);E.focus(H);E.click(function(I){var J=f.unwrap(y.dom.fastLocate("grabHandle",this));if(f.dom.isContainer(J,I.target)){g(this).focus()}});E.attr("role",k.containerRole.item);E.attr("aria-selected","false");E.attr("aria-disabled","false");g.data(E[0],"fluid.reorderer.selectable-initialised",true)}}if(!y.selectableContext){y.selectableContext=f.selectable(y.container,{selectableElements:D,selectablesTabindex:y.options.selectablesTabindex,direction:null})}};var u=function(D){f.moveDom(m,D.element,D.position);m.css("display","");if(v){if(D.lockedelem){v.show()}else{v.hide()}}};var o=function(){var G=y.dom.fastLocate("movables");var F=y.dom.fastLocate("dropTargets");z();for(var D=0;D<G.length;D++){var E=G[D];if(!g.data(E,"fluid.reorderer.movable-initialised")){q(g(E));g.data(E,"fluid.reorderer.movable-initialised",true)}}if(G.length>0&&!m){m=n(G[0].tagName)}r.updateGeometry(y.layoutHandler.getGeometricInfo());r.dropChangeFirer.addListener(u,"fluid.Reorderer");F.attr("aria-dropeffect","none")};if(y.container){c(y.container,y.handleKeyDown,y.handleKeyUp);d(y);f.tabbable(y.container);o()}if(k.afterMoveCallbackUrl){y.events.afterMove.addListener(function(){var D=y.layoutHandler;var E=D.getModel?D.getModel():k.acquireModel(y);g.post(k.afterMoveCallbackUrl,JSON.stringify(E))},"postModel")}y.events.onHover.addListener(w,"style");y.refresh=function(){y.dom.refresh("movables");y.dom.refresh("selectables");y.dom.refresh("grabHandle",y.dom.fastLocate("movables"));y.dom.refresh("stylisticOffset",y.dom.fastLocate("movables"));y.dom.refresh("dropTargets");y.events.onRefresh.fire();o();y.selectableContext.selectables=y.dom.fastLocate("selectables");y.selectableContext.selectablesUpdated(y.activeItem)};f.initDependents(y);y.refresh();return y};f.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};f.reorderer.defaultKeysets=[{modifier:function(i){return i.ctrlKey},up:f.reorderer.keys.UP,down:f.reorderer.keys.DOWN,right:f.reorderer.keys.RIGHT,left:f.reorderer.keys.LEFT},{modifier:function(i){return i.ctrlKey},up:f.reorderer.keys.i,down:f.reorderer.keys.m,right:f.reorderer.keys.k,left:f.reorderer.keys.j}];f.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var b=function(i,j,k){k=k||{};k.layoutHandler=j;return f.reorderer(i,k)};f.reorderList=function(i,j){return b(i,"fluid.listLayoutHandler",j)};f.reorderGrid=function(i,j){return b(i,"fluid.gridLayoutHandler",j)};f.reorderer.SHUFFLE_GEOMETRIC_STRATEGY="shuffleProjectFrom";f.reorderer.GEOMETRIC_STRATEGY="projectFrom";f.reorderer.LOGICAL_STRATEGY="logicalFrom";f.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";f.reorderer.NO_STRATEGY=null;f.reorderer.relativeInfoGetter=function(j,m,k,i,n,l){return function(p,r,o){var q=f.directionOrientation(r);var s=q===j?m:k;return s!==null?i[s](p,r,o,l):null}};f.defaults("fluid.reorderer",{styles:{defaultStyle:"fl-reorderer-movable-default",selected:"fl-reorderer-movable-selected",dragging:"fl-reorderer-movable-dragging",mouseDrag:"fl-reorderer-movable-dragging",hover:"fl-reorderer-movable-hover",dropMarker:"fl-reorderer-dropMarker",avatar:"fl-reorderer-avatar"},selectors:{dropWarning:".flc-reorderer-dropWarning",movables:".flc-reorderer-movable",grabHandle:"",stylisticOffset:""},avatarCreator:a,keysets:f.reorderer.defaultKeysets,layoutHandler:{type:"fluid.listLayoutHandler"},events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null,onRefresh:null},mergePolicy:{keysets:"replace","selectors.labelSource":"selectors.grabHandle","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"},components:{labeller:{type:"fluid.reorderer.labeller",options:{dom:"{reorderer}.dom",getGeometricInfo:"{reorderer}.layoutHandler.getGeometricInfo",orientation:"{reorderer}.options.orientation",layoutType:"{reorderer}.options.layoutHandler"}}},disableWrap:false});
f.reorderer.makeGeometricInfoGetter=function(i,k,j){return function(){var l={sentinelize:k,extents:[{orientation:i,elements:j.fastLocate("dropTargets")}],elementMapper:function(m){return g.inArray(m,j.fastLocate("movables"))===-1?"locked":null},elementIndexer:function(n){var m=j.fastLocate("selectables");return{elementClass:l.elementMapper(n),index:g.inArray(n,m),length:m.length}}};return l}};f.defaults(true,"fluid.listLayoutHandler",{orientation:f.orientation.VERTICAL,containerRole:f.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});f.listLayoutHandler=function(j,k,i,m){var l={};l.getRelativePosition=f.reorderer.relativeInfoGetter(k.orientation,f.reorderer.LOGICAL_STRATEGY,null,i,m,k.disableWrap);l.getGeometricInfo=f.reorderer.makeGeometricInfoGetter(k.orientation,k.sentinelize,m);return l};f.defaults(true,"fluid.gridLayoutHandler",{orientation:f.orientation.HORIZONTAL,containerRole:f.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});f.gridLayoutHandler=function(j,k,i,m){var l={};l.getRelativePosition=f.reorderer.relativeInfoGetter(k.orientation,k.disableWrap?f.reorderer.SHUFFLE_GEOMETRIC_STRATEGY:f.reorderer.LOGICAL_STRATEGY,f.reorderer.SHUFFLE_GEOMETRIC_STRATEGY,i,m,k.disableWrap);l.getGeometricInfo=f.reorderer.makeGeometricInfoGetter(k.orientation,k.sentinelize,m);return l};f.defaults("fluid.reorderer.labeller",{strings:{overallTemplate:"%recentStatus %item %position %movable",position:"%index of %length",position_moduleLayoutHandler:"%index of %length in %moduleCell %moduleIndex of %moduleLength",moduleCell_0:"row",moduleCell_1:"column",movable:"movable",fixed:"fixed",recentStatus:"moved from position %position"},components:{resolver:{type:"fluid.messageResolver",options:{messageBase:"{labeller}.options.strings"}}},invokers:{renderLabel:{funcName:"fluid.reorderer.labeller.renderLabel",args:["{labeller}","@0","@1"]}}});f.reorderer.indexRebaser=function(i){i.index++;if(i.moduleIndex!==undefined){i.moduleIndex++}return i};f.reorderer.labeller=function(i){var l=f.initLittleComponent("fluid.reorderer.labeller",i);f.initDependents(l);l.dom=l.options.dom;l.moduleCell=l.resolver.resolve("moduleCell_"+l.options.orientation);var k=f.computeNickName(l.options.layoutType);l.positionTemplate=l.resolver.lookup(["position_"+k,"position"]);var j={};l.returnedOptions={listeners:{onRefresh:function(){var m=l.dom.locate("selectables");f.each(m,function(q){var n={};var s=f.allocateSimpleId(q);var r=j[s];var p=l.renderLabel(q);var o=p;if(r){r.newRender=o;p=l.renderLabel(q,r.oldRender.position);g(q).one("focusout",function(){if(j[s]){var t=j[s].newRender.label;delete j[s];f.updateAriaLabel(q,t)}});n.dynamicLabel=true}f.updateAriaLabel(q,p.label,n)})},onMove:function(o,n){f.clear(j);var m=f.allocateSimpleId(o);j[m]={oldRender:l.renderLabel(o)}}}};return l};f.reorderer.labeller.renderLabel=function(i,m,k){var l=i.options.getGeometricInfo();var q=f.reorderer.indexRebaser(l.elementIndexer(m));q.moduleCell=i.moduleCell;var r=l.elementMapper(m);var o=i.dom.locate("labelSource",m);var j;if(k){j=i.resolver.resolve("recentStatus",{position:k})}var s={item:typeof(o)==="string"?o:f.dom.getElementText(f.unwrap(o)),position:i.positionTemplate.resolveFunc(i.positionTemplate.template,q),movable:i.resolver.resolve(r==="locked"?"fixed":"movable"),recentStatus:j||""};var p=i.resolver.lookup(["overallTemplate"]);var n=p.resolveFunc(p.template,s);return{position:s.position,label:n}}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(d,f){var k=function(l,m){return l+"lightbox-cell:"+m+":"};var j=function(l){var m=function(n){if(n.which===f.reorderer.keys.ENTER){var o=d("a",n.target);document.location=o.attr("href")}};l.keypress(m)};var b=function(p,r,n){var l=p.getElementsByTagName(r);var q=[];for(var o=0;o<l.length;o+=1){var m=l[o];var s=m.id;if(s&&s.match(n)){q.push(m)}}return q};var h=function(l,m){l=f.unwrap(l);var n="^"+k(m,"[0-9]+")+"$";return function(){return b(l,"div",n)}};var a=function(l){return f.findAncestor(l,function(m){return d(m).is("form")})};var e=function(l,m){return b(m,"input","^"+k(l.attr("id"),"[^:]*")+"reorder-index$")};var c=function(m,q){var l=e(m,q);for(var p=0;p<l.length;p++){var n=l[p];var o=n.name;n.name=o||n.id}};var i=function(l){var m=a(l);c(l,m);return function(){var o,p;o=e(l,m);for(p=0;p<o.length;p+=1){o[p].value=p}if(m&&m.action){var n=d(m).serialize();d.post(m.action,n,function(r,s,q){})}}};var g=function(p,o,n){var m=f.get(p,o);var l=m||n;f.set(p,o,l)};f.reorderImages=function(l,n){var o=f.initView("fluid.reorderImages",l,n);g(o,"options.listeners.afterMove",o.options.afterMoveCallback||i(o.container));g(o,"options.selectors.movables",h(o.container,o.container.attr("id")));var m=f.reorderer(o.container,o.options);f.tabindex(d("a",o.container),-1);j(o.container);return m};f.lightbox=f.reorderImages;f.defaults("fluid.reorderImages",{layoutHandler:"fluid.gridLayoutHandler",selectors:{labelSource:".flc-reorderer-imageTitle"}})})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(b,a){a.registerNamespace("fluid.moduleLayout");a.moduleLayout.findColumnAndItemIndices=function(e,d){return a.find(d.columns,function(h,g){var f=b.inArray(e,h.elements);return f===-1?undefined:{columnIndex:g,itemIndex:f}},{columnIndex:-1,itemIndex:-1})};a.moduleLayout.findColIndex=function(e,d){return a.find(d.columns,function(g,f){return e===g.container?f:undefined},-1)};a.moduleLayout.updateLayout=function(g,i,e,f){g=a.unwrap(g);i=a.unwrap(i);var d=a.moduleLayout.findColumnAndItemIndices(g,f);f.columns[d.columnIndex].elements.splice(d.itemIndex,1);var k;if(e===a.position.INSIDE){k=f.columns[a.moduleLayout.findColIndex(i,f)].elements;k.splice(k.length,0,g)}else{var j=a.moduleLayout.findColumnAndItemIndices(i,f);k=f.columns[j.columnIndex].elements;e=a.normalisePosition(e,d.columnIndex===j.columnIndex,j.itemIndex,d.itemIndex);var h=e===a.position.BEFORE?0:1;k.splice(j.itemIndex+h,0,g)}};a.moduleLayout.layoutFromFlat=function(d,f,e){var g={};g.container=d;g.columns=a.transform(f,function(h){return{container:h,elements:b.makeArray(e.filter(function(){return a.dom.isContainer(h,this)}))}});return g};a.moduleLayout.layoutFromIds=function(d){return{container:a.byId(d.id),columns:a.transform(d.columns,function(e){return{container:a.byId(e.id),elements:a.transform(e.children,a.byId)}})}};a.moduleLayout.layoutToIds=function(d){return{id:a.getId(d.container),columns:a.transform(d.columns,function(e){return{id:a.getId(e.container),children:a.transform(e.elements,a.getId)}})}};var c=function(e,d){if(d){var f=b(e).offset();d=b(d);d.css("position","absolute");d.css("top",f.top);d.css("left",f.left)}};a.defaults(true,"fluid.moduleLayoutHandler",{orientation:a.orientation.VERTICAL,containerRole:a.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});a.moduleLayoutHandler=function(e,l,h,f){var i={};function k(){var n;if(l.selectors.modules){n=a.moduleLayout.layoutFromFlat(e,f.locate("columns"),f.locate("modules"))}if(!n){var m=a.get(l,"moduleLayout.layout");a.moduleLayout.layoutFromIds(m)}return n}var g=k();i.layout=g;function d(m){var n=l.selectors.lockedModules?f.fastLocate("lockedModules"):[];return b.inArray(m,n)!==-1}i.getRelativePosition=a.reorderer.relativeInfoGetter(l.orientation,a.reorderer.WRAP_LOCKED_STRATEGY,a.reorderer.GEOMETRIC_STRATEGY,h,f,l.disableWrap);i.getGeometricInfo=function(){var q=[];var p={extents:q,sentinelize:l.sentinelize};p.elementMapper=function(r){return d(r)?"locked":null};p.elementIndexer=function(r){var s=a.moduleLayout.findColumnAndItemIndices(r,i.layout);return{index:s.itemIndex,length:g.columns[s.columnIndex].elements.length,moduleIndex:s.columnIndex,moduleLength:g.columns.length}};for(var m=0;m<g.columns.length;m++){var o=g.columns[m];var n={orientation:l.orientation,elements:b.makeArray(o.elements),parentElement:o.container};q.push(n)}return p};function j(m){return function(){var n=a.accumulate(g.columns,function(o,p){return p.concat(o.elements)},[]);if(!m){a.remove_if(n,d)}return n}}i.returnedOptions={selectors:{movables:j(false),dropTargets:j(false),selectables:j(true)},listeners:{onMove:{priority:"last",listener:function(m,n){a.moduleLayout.updateLayout(m,n.element,n.position,g)}},onRefresh:function(){g=k();i.layout=g},"onShowKeyboardDropWarning.setPosition":c}};i.getModel=function(){return a.moduleLayout.layoutToIds(g)};return i}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(b,a){a.reorderLayout=function(c,f){var e={layoutHandler:"fluid.moduleLayoutHandler",selectors:{columns:".flc-reorderer-column",modules:".flc-reorderer-module"}};var d=b.extend(true,e,f);return a.reorderer(c,d)}})(jQuery,fluid_1_3);var fluid_1_3=fluid_1_3||{};(function(d,h){function r(x,y,A){if(!x.pageLinks){return}if(A.pageIndex!==undefined){var z=x.pageLinks.eq(A.pageIndex);z.removeClass(x.options.styles.currentPage)}var w=x.pageLinks.eq(y.pageIndex);w.addClass(x.options.styles.currentPage)}function j(x,w,y){x.unbind("click.fluid.pager");x.bind("click.fluid.pager",function(){w.initiatePageChange.fire(y)})}function b(w){w.pageCount=Math.max(1,Math.floor((w.totalRange-1)/w.pageSize)+1)}h.pager=function(){return h.pagerImpl.apply(null,arguments)};h.pager.computePageLimit=function(w){return Math.min(w.totalRange,(w.pageIndex+1)*w.pageSize)};h.pager.directPageList=function(w,A,y){var B=h.initView("fluid.pager.directPageList",w,y);B.pageLinks=B.locate("pageLinks");for(var z=0;z<B.pageLinks.length;++z){var x=B.pageLinks.eq(z);j(x,A,{pageIndex:z})}A.onModelChange.addListener(function(C,D){r(B,C,D)});B.defaultModel={pageIndex:undefined,pageSize:1,totalRange:B.pageLinks.length};return B};h.iota=function(y,z){z=z||0;var x=[];for(var w=0;w<y;++w){x[x.length]=z++}return x};h.pager.everyPageStrategy=h.iota;h.pager.gappedPageStrategy=function(w,x){if(!w){w=3}if(!x){x=w}return function(D,E,z){var C=[];var y=0;var B=false;for(var A=0;A<D;++A){if(A<w||(D-A-1)<w||(A>=z-x&&A<=z+x)){C[y++]=A;B=false}else{if(!B){C[y++]=-1;B=true}}}return C}};h.pager.renderedPageList=function(w,G,y,H,E){H=d.extend(true,y,H);
var A=h.initView("fluid.pager.renderedPageList",w,H);H=A.options;var F={};var x={cutpoints:[{id:"page-link:link",selector:y.selectors.pageLinks},{id:"page-link:skip",selector:y.selectors.pageLinkSkip}],idMap:F};if(H.linkBody){x.cutpoints[x.cutpoints.length]={id:"payload-component",selector:H.linkBody}}var B=function(J,I){var K={ID:"page-link:link",localID:J+1,value:J+1,pageIndex:J,decorators:[{type:"jQuery",func:"click",args:function(L){G.initiatePageChange.fire({pageIndex:J});L.preventDefault()}}]};if(I){K.current=true;K.decorators=K.decorators.concat([{type:"addClass",classes:A.options.styles.currentPage},{type:"jQuery",func:"attr",args:["aria-label",A.options.strings.currentPageIndexMsg]}])}return K};function z(I){return function(J){return J===-1?{ID:"page-link:skip"}:B(J,J===I)}}var C=A.locate("root");h.expectFilledSelector(C,"Error finding root template for fluid.pager.renderedPageList");var D=h.selfRender(C,{},x);G.onModelChange.addListener(function(J,L){var I=A.options.pageStrategy(J.pageCount,0,J.pageIndex);var K=h.transform(I,z(J.pageIndex));if(K.length>1){K[K.length-1].value=K[K.length-1].value+E.last}G.onRenderPageLinks.fire(K,J);d.each(F,function(N,O){var M=h.jById(O);if(M.tooltip){M.tooltip("destroy")}});h.reRender(D,C,K,x);r(A,J,L)});return A};h.defaults("fluid.pager.renderedPageList",{selectors:{root:".flc-pager-links"},linkBody:"a",pageStrategy:h.pager.everyPageStrategy});var k=function(y,w,x){if(x.pageIndex===0){y.previous.addClass(w.styles.disabled)}else{y.previous.removeClass(w.styles.disabled)}if(x.pageIndex===x.pageCount-1){y.next.addClass(w.styles.disabled)}else{y.next.removeClass(w.styles.disabled)}};h.pager.previousNext=function(w,y,x){var z=h.initView("fluid.pager.previousNext",w,x);z.previous=z.locate("previous");j(z.previous,y,{relativePage:-1});z.next=z.locate("next");j(z.next,y,{relativePage:+1});y.onModelChange.addListener(function(A,C,B){k(z,x,A)});return z};h.pager.pagerBar=function(z,x,y,w){var A=h.initView("fluid.pager.pagerBar",x,y);A.pageList=h.initSubcomponent(A,"pageList",[x,z,A.options,h.COMPONENT_OPTIONS,w]);A.previousNext=h.initSubcomponent(A,"previousNext",[x,z,A.options,h.COMPONENT_OPTIONS,w]);return A};h.defaults("fluid.pager.pagerBar",{previousNext:{type:"fluid.pager.previousNext"},pageList:{type:"fluid.pager.directPageList"},selectors:{pageLinks:".flc-pager-pageLink",pageLinkSkip:".flc-pager-pageLink-skip",previous:".flc-pager-previous",next:".flc-pager-next"},styles:{currentPage:"fl-pager-currentPage",disabled:"fl-pager-disabled"},strings:{currentPageIndexMsg:"Current page"}});function a(w){return w.options.columnDefs}h.pager.findColumnDef=function(y,x){var w=d.grep(y,function(z){return z.key===x})[0];return w};function q(z,y,w){var x=(y.options.dataOffset?y.options.dataOffset+".":"");z.shortRoot=w;z.longRoot=x+z.shortRoot}function e(x,y,w){if(x.charAt(0)==="*"){return w+x.substring(1)}else{return x.replace("*",y)}}h.pager.fetchValue=function(z,y,x,B,w){q(w,z,x);var A=e(B,w.shortRoot,w.longRoot);return h.get(y,A)};h.pager.basicSorter=function(E,y){var C=E.options.dataModel;var D={};var z=a(E);var A=h.pager.findColumnDef(z,y.sortKey);var w=[];for(var x=0;x<y.totalRange;++x){w[x]={index:x,value:h.pager.fetchValue(E,C,x,A.valuebinding,D)}}function B(I,H){var G=I.value;var F=H.value;return G===F?0:(G>F?y.sortDir:-y.sortDir)}w.sort(B);return h.transform(w,function(F){return F.index})};h.pager.directModelFilter=function(z,y,B){var C=[];var w=h.pager.computePageLimit(y);for(var A=y.pageIndex*y.pageSize;A<w;++A){var x=B?B[A]:A;C[C.length]={index:x,row:z[x]}}return C};function c(C,B){var A="";var x=0;while(true){var y=C.indexOf("${",x);if(y===-1){A+=C.substring(x);break}else{A+=C.substring(x,y);var w=C.indexOf("}",y+2);var z=C.substring(y+2,w);if(z==="VALUE"){z=B.EL}else{z=e(z,B.shortRoot,B.longRoot)}var D=h.get(B.dataModel,z);A+=D;x=w+1}}return A}function t(z,w,y){for(var x in w){var A=w[x];if(A===h.VALUE){if(x==="valuebinding"){z[x]=y.EL}else{z[x]={valuebinding:y.EL}}}else{if(x==="valuebinding"){z[x]=e(w[x],y)}else{if(typeof(A)==="object"){z[x]=A.length!==undefined?[]:{};t(z[x],A,y)}else{if(typeof(A)==="string"){z[x]=c(A,y)}else{z[x]=w[x]}}}}}return z}function o(y,C){var z=C.options;var B=y.valuebinding;var A=y.key;if(!B){h.fail("Error in definition for column with key "+A+": valuebinding is not set")}C.EL=e(B,C.shortRoot,C.longRoot);if(!A){var x=h.model.parseEL(B);A=x[x.length-1]}var w=(z.keyPrefix?z.keyPrefix:"")+A;return w}function l(x,y){var w=h.transform(y.columnDefs,function(A){var z=o(A,y);var B;if(!A.components){return{ID:z,valuebinding:y.EL}}else{if(typeof A.components==="function"){B=A.components(x.row,x.index)}else{B=A.components}}B=t({},B,y);B.ID=z;return B});return w}function v(w){return h.get(w.options.dataModel,w.options.dataOffset)}function p(w,y){var B=y.options.renderOptions.idMap["header:"+w];var z=h.jById(B);if(z.length===0){return null}var A=y.overallOptions.selectors.headerSortStylisticOffset;var x=h.findAncestor(z,function(C){return d(C).is(A)});return x}function m(y,x,w){x=d(x);x.removeClass(y.ascendingHeader);x.removeClass(y.descendingHeader);if(w!==0){x.addClass(w===1?y.ascendingHeader:y.descendingHeader);x.attr("aria-sort",w===1?"ascending":"descending")}}function s(y,x){var w=x.sortKey?h.pager.findColumnDef(y,x.sortKey):null;return w?w.sortable:false}function u(x,z){var y=z.overallOptions.styles;var w=s(z.columnDefs,x)?x.sortDir:0;m(y,p(x.sortKey,z),w)}function n(z,y,x){b(y);if(y.pageIndex>=y.pageCount){y.pageIndex=y.pageCount-1}if(x||y.pageIndex!==z.model.pageIndex||y.pageSize!==z.model.pageSize||y.sortKey!==z.model.sortKey||y.sortDir!==z.model.sortDir){var w=s(a(z),y)?z.options.sorter(z,y):null;z.permutation=w;z.events.onModelChange.fire(y,z.model,z);h.model.copyModel(z.model,y)}}function g(y,w,x){return function(){if(w.sortable===true){var z=y.model;var B=h.copy(z);var C=y.options.styles;var D=z.sortKey;if(w.key!==z.sortKey){B.sortKey=w.key;B.sortDir=1;var A=p(D,x);if(A){m(C,A,0)}}else{if(B.sortKey===w.key){B.sortDir=-1*B.sortDir}else{return false}}B.pageIndex=0;n(y,B,true);u(B,x)}return false}}function f(x,w){return x[w.sortable?"sortableHeader":"unsortableHeader"]}function i(z,x,A,y){var w=y.options.strings.sortableColumnText;if(x.sortDir===1){w=y.options.strings.sortableColumnTextAsc}else{if(x.sortDir===-1){w=y.options.strings.sortableColumnTextDesc}}return{children:h.transform(A,function(B){return{ID:o(B,y),value:B.label,decorators:[{jQuery:["click",g(z,B,y)]},{identify:"header:"+B.key},{type:"attrs",attributes:{title:(B.key===x.sortKey)?w:y.options.strings.sortableColumnText}}].concat(f(y.overallOptions.decorators,B))}})}}h.pager.selfRender=function(E,x){var z=h.initView("fluid.pager.selfRender",E.container,x);var F=z.options;F.renderOptions.idMap=F.renderOptions.idMap||{};var D=F.renderOptions.idMap;var A=z.locate("root");var C=h.selfRender(A,{},F.renderOptions);A.addClass(F.styles.root);var y=a(E);var w={options:F,columnDefs:y,overallOptions:E.options,dataModel:E.options.dataModel,idMap:D};var B=v(E);return{returnedOptions:{listeners:{onModelChange:function(I,K){var H=E.options.modelFilter(B,I,E.permutation);var G=h.transform(H,function(L){q(w,E,L.index);if(y==="explode"){return h.explode(L.row,w.longRoot)}else{if(y.length){return l(L,w)}}});var J={};J[F.row]=G;if(typeof(y)==="object"){J[F.header]=i(E,I,y,w)}F.renderOptions=F.renderOptions||{};F.renderOptions.model=w.dataModel;h.reRender(C,A,J,F.renderOptions);u(I,w)}}}}};h.defaults("fluid.pager.selfRender",{selectors:{root:".flc-pager-body-template"},styles:{root:"fl-pager"},keyStrategy:"id",keyPrefix:"",row:"row:",header:"header:",strings:{sortableColumnText:"Select to sort",sortableColumnTextDesc:"Select to sort in ascending, currently in descending order.",sortableColumnTextAsc:"Select to sort in descending, currently in ascending order."},renderOptions:{}});h.pager.summaryAria=function(w){w.attr({"aria-relevant":"all","aria-atomic":"false","aria-live":"assertive",role:"status"})};h.pager.summary=function(y,w){var x=y.locate("summary");h.pager.summaryAria(x);return{returnedOptions:{listeners:{onModelChange:function(z,B){var A=h.stringTemplate(w.message,{first:z.pageIndex*z.pageSize+1,last:h.pager.computePageLimit(z),total:z.totalRange,currentPage:z.pageIndex+1});if(x.length>0){x.text(A)}}}}}};h.pager.directPageSize=function(x){var w=x.locate("pageSize");if(w.length>0){x.events.onModelChange.addListener(function(y,z){if(w.val()!==y.pageSize){w.val(y.pageSize)}});w.change(function(){x.events.initiatePageSizeChange.fire(w.val())})}};h.pager.rangeAnnotator=function(y,x){var w={};y.events.onRenderPageLinks.addListener(function(z,C){var E=y.options.annotateColumnRange;var B=y.options.dataModel;var G=a(y);if(!E||!B||!G){return}var A=h.pager.findColumnDef(G,E);function F(H){H=y.permutation?y.permutation[H]:H;return h.pager.fetchValue(y,B,H,A.valuebinding,w)}var D={};h.model.copyModel(D,C);h.transform(z,function(H){if(H.ID==="page-link:link"){var M=H.pageIndex;var O=M*D.pageSize;D.pageIndex=M;var I=h.pager.computePageLimit(D);var N=F(O);var L=F(I-1);var K=h.copy(y.options.tooltip.options)||{};if(!K.content){K.content=function(){return h.stringTemplate(y.options.markup.rangeAnnotation,{first:N,last:L})}}if(!H.current){var J=[{type:"fluid",func:y.options.tooltip.type,options:K},{identify:M}];H.decorators=H.decorators.concat(J)}}})})};h.pagerImpl=function(w,x){var z=h.initView("fluid.pager",w,x);z.container.attr("role","application");z.events.initiatePageChange.addListener(function(C){var D=h.copy(z.model);if(C.relativePage!==undefined){D.pageIndex=z.model.pageIndex+C.relativePage}else{D.pageIndex=C.pageIndex}if(D.pageIndex===undefined||D.pageIndex<0){D.pageIndex=0}n(z,D,C.forceUpdate)});z.events.initiatePageSizeChange.addListener(function(C){var D=h.copy(z.model);D.pageSize=C;n(z,D)});var A=z.locate("pagerBar");if(A.length>0){z.pagerBar=h.initSubcomponent(z,"pagerBar",[z.events,A,h.COMPONENT_OPTIONS,z.options.strings])}var B=z.locate("pagerBarSecondary");if(B.length>0){z.pagerBarSecondary=h.initSubcomponent(z,"pagerBar",[z.events,B,h.COMPONENT_OPTIONS,z.options.strings])
}z.bodyRenderer=h.initSubcomponent(z,"bodyRenderer",[z,h.COMPONENT_OPTIONS]);z.summary=h.initSubcomponent(z,"summary",[z.dom,h.COMPONENT_OPTIONS]);z.pageSize=h.initSubcomponent(z,"pageSize",[z]);z.rangeAnnotator=h.initSubcomponent(z,"rangeAnnotator",[z,h.COMPONENT_OPTIONS]);z.model=h.copy(z.options.model);var y=v(z);if(y){z.model.totalRange=y.length}if(z.model.totalRange===undefined){if(!z.pagerBar){h.fail("Error in Pager configuration - cannot determine total range,  since not configured in model.totalRange and no PagerBar is configured")}z.model=z.pagerBar.pageList.defaultModel}z.applier=h.makeChangeApplier(z.model);z.events.initiatePageChange.fire({pageIndex:z.model.pageIndex?z.model.pageIndex:0,forceUpdate:true});return z};h.defaults("fluid.pager",{mergePolicy:{dataModel:"preserve",model:"preserve"},pagerBar:{type:"fluid.pager.pagerBar",options:null},summary:{type:"fluid.pager.summary",options:{message:"Viewing page %currentPage. Showing records %first - %last of %total items."}},pageSize:{type:"fluid.pager.directPageSize"},modelFilter:h.pager.directModelFilter,sorter:h.pager.basicSorter,bodyRenderer:{type:"fluid.emptySubcomponent"},model:{pageIndex:undefined,pageSize:10,totalRange:undefined},dataModel:undefined,dataOffset:"",columnDefs:"explode",annotateColumnRange:undefined,tooltip:{type:"fluid.tooltip"},rangeAnnotator:{type:"fluid.pager.rangeAnnotator"},selectors:{pagerBar:".flc-pager-top",pagerBarSecondary:".flc-pager-bottom",summary:".flc-pager-summary",pageSize:".flc-pager-page-size",headerSortStylisticOffset:".flc-pager-sort-header"},styles:{ascendingHeader:"fl-pager-asc",descendingHeader:"fl-pager-desc"},decorators:{sortableHeader:[],unsortableHeader:[]},strings:{last:" (last)"},events:{initiatePageChange:null,initiatePageSizeChange:null,onModelChange:null,onRenderPageLinks:null},markup:{rangeAnnotation:"<b> %first </b><br/>&mdash;<br/><b> %last </b>"}})})(jQuery,fluid_1_3);