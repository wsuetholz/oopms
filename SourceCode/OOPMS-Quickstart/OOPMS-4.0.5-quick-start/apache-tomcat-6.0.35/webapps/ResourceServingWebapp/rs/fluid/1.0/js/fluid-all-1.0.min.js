var fluid_1_0=fluid_1_0||{};var fluid=fluid||fluid_1_0;(function(f,e){e.version="Infusion 1.0";e.fail=function(h){e.setLogging(true);e.log(h.message?h.message:h);throw new Error(h)};e.wrap=function(h){return((!h||h.jquery)?h:f(h))};e.unwrap=function(h){return h&&h.jquery&&h.length===1?h[0]:h};e.keyForValue=function(j,i){for(var h in j){if(j[h]===i){return h}}return null};e.findKeyInObject=e.keyForValue;e.clear=function(j){if(j instanceof Array){j.length=0}else{for(var h in j){delete j[h]}}};e.container=function(i){var h=i;if(typeof i==="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9)){h=f(i)}if(!h||!h.jquery||h.length!==1){if(typeof(i)!=="string"){i=h.selector}e.fail({name:"NotOne",message:"A single container element was not found for selector "+i})}return h};var c={};var b={};e.defaults=function(){var k=0;var i=c;if(typeof arguments[0]==="boolean"){i=b;k=1}var h=arguments[k];var j=arguments[k+1];if(j!==undefined){i[h]=j;return j}return i[h]};e.createDomBinder=function(i,k){var j={},l={};function m(o,n){return f.data(e.unwrap(n))+"-"+o}function h(p,o,n){j[m(p,o)]=n}l.locate=function(p,r){var n,o,q;n=k[p];o=r?r:i;if(!o){e.fail("DOM binder invoked for selector "+p+" without container")}if(!n){return o}if(typeof(n)==="function"){q=f(n.call(null,e.unwrap(o)))}else{q=f(n,o)}if(q.get(0)===document){q=[]}if(!q.selector){q.selector=n;q.context=o}q.selectorName=p;h(p,o,q);return q};l.fastLocate=function(o,r){var n=r?r:i;var p=m(o,n);var q=j[p];return q?q:l.locate(o,r)};l.clear=function(){j={}};l.refresh=function(q,r){var o=r?r:i;if(typeof q==="string"){q=[q]}if(o.length===undefined){o=[o]}for(var p=0;p<q.length;++p){for(var n=0;n<o.length;++n){l.locate(q[p],o[n])}}};return l};e.mergeListeners=function(k,n){if(n){for(var j in n){var o=n[j];var p=j.indexOf(".");var m;if(p!==-1){m=j.substring(p+1);j=j.substring(0,p)}if(!k[j]){k[j]=e.event.getEventFirer()}var l=k[j];if(typeof(o)==="function"){l.addListener(o,m)}else{if(o&&typeof o.length==="number"){for(var h=0;h<o.length;++h){l.addListener(o[h],m)}}}}}};e.instantiateFirers=function(k,h){k.events={};if(h.events){for(var j in h.events){var i=h.events[j];k.events[j]=e.event.getEventFirer(i==="unicast",i==="preventable")}}e.mergeListeners(k.events,h.listeners)};e.mergeComponentOptions=function(i,h,k){var j=e.defaults(h);i.options=e.merge(j?j.mergePolicy:null,{},j,k)};e.expectFilledSelector=function(h,i){if(h&&h.length===0&&h.jquery){e.fail(i+': selector "'+h.selector+'" with name '+h.selectorName+" returned no results in context "+e.dumpEl(h.context))}};e.initView=function(i,h,k){var j={};e.expectFilledSelector(h,'Error instantiating component with name "'+i);e.mergeComponentOptions(j,i,k);if(h){j.container=e.container(h);e.initDomBinder(j)}e.instantiateFirers(j,j.options);return j};e.COMPONENT_OPTIONS={};e.VALUE={};e.emptySubcomponent=function(h){var k={};h=f.makeArray(h);for(var j=0;j<h.length;++j){k[h[j]]=function(){}}return k};e.initSubcomponent=function(j,i,h){return e.initSubcomponents(j,i,h)[0]};e.initSubcomponents=function(o,p,q){var r=o.options[p];if(!r){return}var n=f.makeArray(r);var s=-1;var k=[];q=f.makeArray(q);for(var m=0;m<q.length;++m){if(q[m]===e.COMPONENT_OPTIONS){s=m}}for(m=0;m<n.length;++m){r=n[m];if(s!==-1&&r.options){q[s]=r.options}if(typeof(r)!=="function"){var l=typeof(r)==="string"?r:r.type;var h=e.defaults(true,l);e.merge("reverse",o.options,h);k[m]=l==="fluid.emptySubcomponent"?e.emptySubcomponent(r.options):e.invokeGlobalFunction(l,q,{fluid:e})}else{k[m]=r.apply(null,q)}var j=k[m]?k[m].returnedOptions:null;if(j){e.merge(o.options.mergePolicy,o.options,j);if(j.listeners){e.mergeListeners(o.events,j.listeners)}}}return k};e.initDomBinder=function(h){h.dom=e.createDomBinder(h.container,h.options.selectors);h.locate=h.dom.locate};e.isPrimitive=function(h){var i=typeof(h);return !h||i==="string"||i==="boolean"||i==="number"};function g(m,o,l,h){var p=m&&typeof(m)!=="string"?m[o]:m;if(typeof(p)==="function"){p.apply(null,l,h);return l}if(p==="replace"){e.clear(l)}for(var j in h){var q=(o?o+".":"")+j;var n=l[j];var k=h[j];var i=e.isPrimitive(n);if(k!==undefined){if(k!==null&&typeof k==="object"&&!k.nodeType&&!k.jquery&&k!==e.VALUE){if(i){l[j]=n=k instanceof Array?[]:{}}g(m,q,n,k)}else{if(n===null||n===undefined||p!=="reverse"){l[j]=k}}}}return l}e.merge=function(m,l){var q="";for(var k=2;k<arguments.length;++k){var h=arguments[k];if(h!==null&&h!==undefined){g(m,q,l,h)}}if(m&&typeof(m)!=="string"){for(var o in m){var p=m[o];if(typeof(p)==="string"&&p!=="replace"){var j=e.model.getBeanValue(l,o);if(j===null||j===undefined){var n=e.model.getBeanValue(l,p);e.model.setBeanValue(l,o,n)}}}}return l};e.copy=function(h){return f.extend(true,{},h)};e.invokeGlobalFunction=function(i,j,h){var k=e.model.getBeanValue(window,i,h);if(!k){e.fail("Error invoking global function: "+i+" could not be located")}else{return k.apply(null,j)}};e.event={};var a=1;e.event.getEventFirer=function(j,k){var i=e.log;var h={};return{addListener:function(n,m,l){if(!n){return}if(j){m="unicast"}if(!m){if(!n.$$guid){n.$$guid=a++}m=n.$$guid}h[m]={listener:n,predicate:l}},removeListener:function(l){if(typeof(l)==="string"){delete h[l]}else{if(typeof(l)==="object"&&l.$$guid){delete h[l.$$guid]}}},fire:function(){for(var n in h){var l=h[n];var o=l.listener;if(l.predicate&&!l.predicate(o,arguments)){continue}try{var m=o.apply(null,arguments);if(k&&m===false){return false}}catch(p){i("FireEvent received exception "+p.message+" e "+p+" firing to listener "+n);throw (p)}}}}};e.model={};e.model.copyModel=function(i,h){e.clear(i);f.extend(true,i,h)};e.model.parseEL=function(h){return h.toString().split(".")};e.model.composePath=function(h,i){return h===""?i:h+"."+i};e.model.setBeanValue=function(j,l,m){var h=e.model.parseEL(l);for(var k=0;k<h.length-1;k+=1){if(!j[h[k]]){j[h[k]]={}}j=j[h[k]]}j[h[h.length-1]]=m};e.model.getBeanValue=function(k,n,h){if(n===""||n===null||n===undefined){return k}var j=e.model.parseEL(n);for(var l=0;l<j.length;++l){if(!k){return k}var m=j[l];if(h&&h[m]){k=h[m];h=null}else{k=k[m]}}return k};var d;e.setLogging=function(h){if(typeof h==="boolean"){d=h}else{d=false}};e.log=function(h){if(d){h=new Date().toTimeString()+":  "+h;if(typeof(console)!=="undefined"){if(console.debug){console.debug(h)}else{console.log(h)}}else{if(typeof(YAHOO)!=="undefined"){YAHOO.log(h)}else{if(typeof(opera)!=="undefined"){opera.postError(h)}}}}};e.dumpEl=function(j){var k;if(!j){return"null"}if(j.nodeType===3||j.nodeType===8){return"[data: "+j.data+"]"}if(j.nodeType===9){return"[document: location "+j.location+"]"}if(typeof j.length==="number"){k="[";for(var h=0;h<j.length;++h){k+=e.dumpEl(j[h]);if(h<j.length-1){k+=", "}}return k+"]"}j=f(j);k=j.get(0).tagName;if(j.attr("id")){k+="#"+j.attr("id")}if(j.attr("class")){k+="."+j.attr("class")}return k};e.findAncestor=function(h,i){h=e.unwrap(h);while(h){if(i(h)){return h}h=h.parentNode}};e.jById=function(k,j){j=j&&j.nodeType===9?j:document;var h=e.byId(k,j);var i=h?f(h):[];i.selector="#"+k;i.context=j;return i};e.byId=function(j,i){i=i&&i.nodeType===9?i:document;var h=i.getElementById(j);if(h){if(h.getAttribute("id")!==j){e.fail("Problem in document structure - picked up element "+e.dumpEl(h)+" for id "+j+" without this id - most likely the element has a name which conflicts with this id")}return h}else{return null}};e.getId=function(h){return e.unwrap(h).getAttribute("id")};e.allocateSimpleId=function(h){h=e.unwrap(h);if(!h.id){h.id="fluid-id-"+(a++)}return h.id};e.transform=function(n){var m=[];for(var l=0;l<n.length;++l){var h=n[l];for(var k=0;k<arguments.length-1;++k){h=arguments[k+1](h,l)}m[m.length]=h}return m};e.find=function(l,k,m){for(var j=0;j<l.length;++j){var h=k(l[j],j);if(h!==null&&h!==undefined){return h}}return m};e.accumulate=function(l,k,h){for(var j=0;j<l.length;++j){h=k(l[j],h,j)}return h};e.remove_if=function(k,j){for(var h=0;h<k.length;++h){if(j(k[h],h)){k.splice(h,1);--h}}return k};e.formatMessage=function(k,h){if(!h){return k}if(typeof(h)==="string"){h=[h]}for(var j=0;j<h.length;++j){k=k.replace("{"+j+"}",h[j])}return k};e.messageLocator=function(h){return function(j,k){if(typeof(j)==="string"){j=[j]}for(var l=0;l<j.length;++l){var n=j[l];var m=h[n];if(m===undefined){continue}return e.formatMessage(m,k)}return"[Message string for key "+j[0]+" not found]"}};e.stringTemplate=function(l,i){var k=l;for(var j in i){if(i.hasOwnProperty(j)){var h="%"+j;k=k.replace(h,i[j])}}return k}})(jQuery,fluid_1_0);var fluid_1_0=fluid_1_0||{};(function(c,b){b.dom=b.dom||{};var a=function(d){if(d.node.firstChild){d.node=d.node.firstChild;d.depth+=1;return d}while(d.node){if(d.node.nextSibling){d.node=d.node.nextSibling;return d}d.node=d.node.parentNode;d.depth-=1}return d};b.dom.iterateDom=function(h,g){var f={node:h,depth:0};var e=h;while(f.node!==null&&f.depth>=0&&f.depth<b.dom.iterateDom.DOM_BAIL_DEPTH){var d=false;if(f.node.nodeType===1){d=g(f.node,f.depth)}if(d){f.node.parentNode.removeChild(f.node);f.node=e}e=f.node;f=a(f)}};b.dom.iterateDom.DOM_BAIL_DEPTH=256;b.dom.computeAbsolutePosition=function(d){var f=0,e=0;if(d.offsetParent){do{f+=d.offsetLeft;e+=d.offsetTop;d=d.offsetParent}while(d);return[f,e]}};b.dom.isContainer=function(d,e){for(;e;e=e.parentNode){if(d===e){return true}}return false};b.dom.insertAfter=function(d,e){var f=e.nextSibling;if(!f){e.parentNode.appendChild(d)}else{e.parentNode.insertBefore(d,f)}};b.dom.isWhitespaceNode=function(d){return !(/[^\t\n\r ]/.test(d.data))};b.dom.isIgnorableNode=function(d){return(d.nodeType===8)||((d.nodeType===3)&&b.dom.isWhitespaceNode(d))};b.dom.getElementText=function(f){var d=f.childNodes;var g="";for(var e=0;e<d.length;++e){var h=d[e];if(h.nodeType==3){g=g+h.nodeValue}}return g};b.dom.cleanseScripts=function(d){var e=c.data(d,b.dom.cleanseScripts.MARKER);if(!e){b.dom.iterateDom(d,function(f){return(f.tagName.toLowerCase()==="script")});c.data(d,b.dom.cleanseScripts.MARKER,true)}};b.dom.cleanseScripts.MARKER="fluid-scripts-cleansed"})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(d,c){c.VALUE={};
c.BINDING_ROOT_KEY="fluid-binding-root";c.findData=function(h,g){while(h){var i=d.data(h,g);if(i){return i}h=h.parentNode}};c.bindFossils=function(h,i,g){d.data(h,c.BINDING_ROOT_KEY,{data:i,fossils:g})};c.findForm=function(g){return c.findAncestor(g,function(h){return h.nodeName.toLowerCase()==="form"})};c.value=function(l,i){var j=c.unwrap(l);var o=false;if(j.nodeType===undefined&&j.length>1){j=j[0];o=true}var k=d(j);if("input"!==j.nodeName.toLowerCase()||!/radio|checkbox/.test(j.type)){return d(j).val(i)}var h=j.name;if(h===undefined){c.fail("Cannot acquire value from node "+c.dumpEl(j)+" which does not have name attribute set")}var g;if(o){g=l}else{var g=document.getElementsByName(h);var n=c.findForm(j);g=d.grep(g,function(p){if(p.name!==h){return false}return !n||c.dom.isContainer(n,p)})}if(i!==undefined){if(typeof(i)==="boolean"){i=(i?"true":"false")}d.each(g,function(){this.checked=(i instanceof Array?d.inArray(this.value,i)!==-1:i===this.value)})}else{var m=d.map(g,function(p){return p.checked?p.value:null});return j.type==="radio"?m[0]:m}};c.applyChange=function(l,m,i){l=c.unwrap(l);if(m===undefined){m=c.value(l)}if(l.nodeType===undefined&&l.length>0){l=l[0]}var g=c.findData(l,c.BINDING_ROOT_KEY);if(!g){c.fail("Bound data could not be discovered in any node above "+c.dumpEl(l))}var h=l.name;var j=g.fossils[h];if(!j){c.fail("No fossil discovered for name "+h+" in fossil record above "+c.dumpEl(l))}if(typeof(j.oldvalue)==="boolean"){m=m[0]?true:false}var k=g.fossils[h].EL;if(i){i.fireChangeRequest({path:k,value:m,source:l.id})}else{c.model.setBeanValue(g.data,k,m)}};c.pathUtil={};var f=function(j,m,h){var k=null;if(j){k=""}var l=false;var g=m.length;for(;h<g;++h){var n=m.charAt(h);if(!l){if(n==="."){break}else{if(n==="\\"){l=true}else{if(k!==null){k+=n}}}}else{l=false;if(k!==null){j+=n}}}if(k!==null){j[0]=k}return h};var a=[];c.pathUtil.getPathSegment=function(h,g){f(a,h,g);return a[0]};c.pathUtil.getHeadPath=function(g){return c.pathUtil.getPathSegment(g,0)};c.pathUtil.getFromHeadPath=function(h){var g=f(null,h,0);return g===h.length?null:h.substring(g+1)};function e(g){return g.lastIndexOf(".")}c.pathUtil.getToTailPath=function(h){var g=e(h);return g==-1?null:h.substring(0,g)};c.pathUtil.getTailPath=function(h){var g=e(h);return c.pathUtil.getPathSegment(h,g+1)};var b=function(j,h){for(var g=0;g<h.length;++g){var k=h.charAt(g);if(k==="."||k==="\\"||k==="}"){j+="\\"}j+=k}return j};c.pathUtil.composePath=function(g,h){if(g.length!==0){g+="."}return b(g,h)};c.pathUtil.matchPath=function(g,j){var i="";while(true){if(!g){break}if(!j){return null}var h=c.pathUtil.getHeadPath(g);var k=c.pathUtil.getHeadPath(j);if(h!=="*"&&h!==k){return null}i=c.pathUtil.composePath(i,k);g=c.pathUtil.getFromHeadPath(g);j=c.pathUtil.getFromHeadPath(j)}return i};c.model.applyChangeRequest=function(h,k){if(k.type==="ADD"){c.model.setBeanValue(h,k.path,k.value)}else{if(k.type==="DELETE"){var i=c.pathUtil.getToTailPath(k.path);var g=c.pathUtil.getTailPath(k.path);var j=c.model.getBeanValue(h,j);delete j[g]}}};c.makeChangeApplier=function(h){var i={guards:c.event.getEventFirer(false,true),modelChanged:c.event.getEventFirer(false,false)};var j={model:h};function k(l,m){return function(p,n){var o=n[m];return c.pathUtil.matchPath(p[l],o.path)}}function g(o,n,m,p){var l=k(m,p);o[n]={addListener:function(q,s,r){s[m]=q;i[n].addListener(s,r,l)},removeListener:function(q){i[n].removeListener(q)}}}g(j,"guards","guardedPathSpec",1);g(j,"modelChanged","triggerPathSpec",2);j.fireChangeRequest=function(m){if(!m.type){m.type="ADD"}var l=i.guards.fire(h,m);if(l===false){return}var n={};c.model.copyModel(n,h);c.model.applyChangeRequest(h,m);i.modelChanged.fire(h,n,m)};j.requestChange=function(o,n,l){var m={path:o,value:n,type:l};j.fireChangeRequest(m)};return j};c.makeSuperApplier=function(){var h=[];var g={};g.addSubApplier=function(i,j){h.push({path:i,subApplier:j})};g.fireChangeRequest=function(m){for(var l=0;l<h.length;++l){var n=h[l].path;if(m.path.indexOf(n)===0){var k=m.path.substring(n.length+1);var j=c.copy(m);j.path=k;h[l].subApplier.fireChangeRequest(j)}}};return g};c.attachModel=function(g,n,l){var j=c.model.parseEL(n);for(var m=0;m<j.length-1;++m){var h=j[m];var k=g[h];if(!k){g[h]=k={}}g=k}g[j[j.length-1]]=l};c.assembleModel=function(g){var h={};var j=c.makeSuperApplier();var i={model:h,applier:j};for(path in g){var k=g[path];c.attachModel(h,path,k.model);if(k.applier){j.addSubApplier(path,k.applier)}}return i}})(jQuery,fluid_1_0);var fluid_1_0=fluid_1_0||{};var fluid=fluid||fluid_1_0;(function(t,p){p.thatistBridge=function(M,O){var N=function(P){var R=P.split(".");var Q=O;for(var U=0;U<R.length;++U){Q=Q[R[U]]}var T=[this];if(arguments.length===2){T=T.concat(t.makeArray(arguments[1]))}var S=Q.apply(null,T);this.that=function(){return S};var V=typeof(S);return !S||V==="string"||V==="number"||V==="boolean"||S&&S.length!==undefined?S:this};t.fn[M]=N;return N};p.thatistBridge("fluid",p);p.thatistBridge("fluid_1_0",fluid_1_0);var K="fluid-keyboard-a11y";var k=function(O,M){var N=t(O).data(K);return N?N[M]:undefined};var m=function(O,M,N){t(O).each(function(){var P=t.data(this,K)||{};P[M]=N;t.data(this,K,P)})};var J=function(){return t.browser.msie?"tabIndex":"tabindex"};var v=function(M){if(M.length<=0){return false}return t(M[0]).is("a, input, button, select, area, textarea, object")};var y=function(N){if(N.length<=0){return undefined}if(!p.tabindex.hasAttr(N)){return v(N)?Number(0):undefined}var M=N.attr(J());return Number(M)};var w=function(M,N){return M.each(function(O,P){t(P).attr(J(),N)})};p.tabindex=function(N,M){N=t(N);if(M!==null&&M!==undefined){return w(N,M)}else{return y(N)}};p.tabindex.remove=function(M){M=t(M);return M.each(function(N,O){t(O).removeAttr(J())})};p.tabindex.hasAttr=function(N){N=t(N);if(N.length<=0){return false}var M=N.map(function(){var O=this.getAttributeNode(J());return O?O.specified:false});return M.length===1?M[0]:M};p.tabindex.has=function(M){M=t(M);return p.tabindex.hasAttr(M)||v(M)};var h="enablement";p.enabled=function(N,M){N=t(N);if(M===undefined){return k(N,h)!==false}else{t("*",N).each(function(){if(k(this,h)!==undefined){m(this,h,M)}else{if(/select|textarea|input/i.test(this.nodeName)){t(this).attr("disabled",!M)}}});m(N,h,M)}};p.a11y=t.a11y||{};p.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var e={next:t.ui.keyCode.DOWN,previous:t.ui.keyCode.UP};var q={next:t.ui.keyCode.RIGHT,previous:t.ui.keyCode.LEFT};var c=function(M){return M.jquery?M[0]:M};var n=function(M){M.each(function(N,O){O=t(O);if(!O.fluid("tabindex.has")||O.fluid("tabindex")<0){O.fluid("tabindex",0)}})};p.tabbable=function(M){M=t(M);n(M)};var E="selectionContext";var C=-32768;var l=function(M){if(M.onLeaveContainer){M.onLeaveContainer(M.selectables[M.activeItemIndex])}else{if(M.onUnselect){M.onUnselect(M.selectables[M.activeItemIndex])}}if(!M.options.rememberSelectionState){M.activeItemIndex=C}};var g=function(M,N){if(N){N(M)}};var x=function(N,M){if(M&&N){M(N)}};var j=function(N,M){x(N,M.options.onUnselect)};var s=function(M,N){j(N.selectedElement(),N);M=c(M);var O=N.selectables.index(M);if(O===-1){return}N.activeItemIndex=O;g(M,N.options.onSelect)};var G=function(M){return function(N){s(N.target,M);return N.stopPropagation()}};var r=function(M){return function(N){j(N.target,M);return N.stopPropagation()}};var L=function(M){var N=M.selectables;if(M.activeItemIndex>=N.length){M.activeItemIndex=0}if(M.activeItemIndex<0&&M.activeItemIndex!==C){M.activeItemIndex=N.length-1}if(M.activeItemIndex>=0){t(N[M.activeItemIndex]).focus()}};var d=function(M){j(M.selectedElement(),M);if(M.activeItemIndex===C){M.activeItemIndex=-1}};var o=function(M){d(M);++M.activeItemIndex;L(M)};var f=function(M){d(M);--M.activeItemIndex;L(M)};var A=function(M,O,N){return function(P){if(P.which===O.next){o(M);P.preventDefault()}else{if(P.which===O.previous){f(M);P.preventDefault()}}}};var F=function(M){var N;if(M===p.a11y.orientation.HORIZONTAL){N=q}else{if(M===p.a11y.orientation.VERTICAL){N=e}}return N};var I=function(M){return function(N){if(N.which!==t.ui.keyCode.TAB){return}l(M);if(N.shiftKey){M.focusIsLeavingContainer=true}}};var z=function(M){return function(N){var P=M.options.autoSelectFirstItem;var O=typeof(P)==="function"?P():P;if(M.focusIsLeavingContainer){O=false}if(O&&N.target===M.container.get(0)){if(M.activeItemIndex===C){M.activeItemIndex=0}t(M.selectables[M.activeItemIndex]).focus()}return N.stopPropagation()}};var b=function(M){return function(N){M.focusIsLeavingContainer=false;return N.stopPropagation()}};var B=function(N,Q,R){var O=t.extend(true,{},Q,R);var S=F(O.direction);var M=O.selectableElements?O.selectableElements:N.find(O.selectableSelector);var P={container:N,activeItemIndex:C,selectables:M,focusIsLeavingContainer:false,options:O};P.selectablesUpdated=function(T){if(typeof(P.options.selectablesTabindex)==="number"){P.selectables.fluid("tabindex",P.options.selectablesTabindex)}P.selectables.unbind("focus."+K);P.selectables.unbind("blur."+K);P.selectables.bind("focus."+K,G(P));P.selectables.bind("blur."+K,r(P));if(T){s(T,P)}else{L(P)}};P.refresh=function(){if(!P.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}P.selectables=N.find(O.selectableSelector);P.selectablesUpdated()};P.selectedElement=function(){return P.activeItemIndex<0?null:P.selectables[P.activeItemIndex]};if(S){N.keydown(A(P,S))}N.keydown(I(P));N.focus(z(P));N.blur(b(P));P.selectablesUpdated();return P};p.selectable=function(O,M){O=t(O);var N=B(O,p.selectable.defaults,M);m(O,E,N);return N};p.selectable.select=function(N,M){t(M).focus()};p.selectable.selectNext=function(M){M=t(M);o(k(M,E))};p.selectable.selectPrevious=function(M){M=t(M);f(k(M,E))};p.selectable.currentSelection=function(N){N=t(N);var M=k(N,E);return t(M.selectedElement())};p.selectable.defaults={direction:p.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null};
var i=function(R,N){if(!R.modifier){return true}var O=R.modifier;var P=O&&N.ctrlKey;var M=O&&N.altKey;var Q=O&&N.shiftKey;return P||M||Q};var H=function(M){return function(N){var Q=N.target;if(!p.enabled(N.target)){return}var P=N.which?N.which:N.keyCode;if(P===M.key&&M.activateHandler&&i(M,N)){var O=M.activateHandler(N.target,N);if(O===false){N.preventDefault()}}}};var u=function(N,M){return function(O){if(!M){return}O=c(O);if(N.index(O)===-1){return}M(O)}};var i=function(R,N){if(!R.modifier){return true}var O=R.modifier;var P=O&&N.ctrlKey;var M=O&&N.altKey;var Q=O&&N.shiftKey;return P||M||Q};var D=function(P,S,M,N){var R=[];t(M).each(function(T,U){R.push({modifier:null,key:U,activateHandler:S})});if(N&&N.additionalBindings){R=R.concat(N.additionalBindings)}m(P,h,true);for(var O=0;O<R.length;++O){var Q=R[O];P.keydown(H(Q))}};var a="defaultActivate";p.activatable=function(O,N,M){O=t(O);D(O,N,p.activatable.defaults.keys,M);m(O,a,u(O,N))};p.activate=function(N){N=t(N);var M=k(N,a);M(N)};p.activatable.defaults={keys:[t.ui.keyCode.ENTER,t.ui.keyCode.SPACE]}})(jQuery,fluid_1_0);
/*! SWFObject v2.1 <http://code.google.com/p/swfobject/>
	Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
	This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
			ie = true;
			@if (@_win32)
				windows = true;
			@elif (@_mac)
				mac = true;
			@end
		@*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el
}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return}var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 Beta 5 2008-01-29";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id);if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")
};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");
for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(a,b){this.queueEvent("file_dialog_complete_handler",[a,b])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};fluid_1_0=fluid_1_0||{};(function(f,g){var e=function(r,q,p){q=(q)?q:p;r.animate(q.params,q.duration,q.callback)};var l=function(r,p,q){r.queue("fx",[]);r.animate({width:p,queue:false},q)};var i=function(p,q){if(q===false){p.displayElement.show()}else{e(p.displayElement,q,p.options.showAnimation)}};var a=function(r,q,s){q=(q===null||isNaN(q))?r.options.delay:q;if(q){var p=setTimeout(function(){a(r,0,s)},q)}else{if(s===false){r.displayElement.hide()}else{e(r.displayElement,s,r.options.hideAnimation)}}};var o=function(r,q,t){t=t||false;var p=r.indicator.width();var s=r.options.animate;if((q>p)&&(s==="both"||s==="forward")&&!t){l(r.indicator,q,r.options.speed)}else{if((q<p)&&(s==="both"||s==="backward")&&!t){l(r.indicator,q,r.options.speed)}else{r.indicator.width(q)}}};var j=function(q,p){return Math.round((Math.min(p,100)*q.progressBar.width())/100)};var n=function(p){var q=Math.max(j(p,parseFloat(p.storedPercent)),p.options.minWidth);o(p,q,true)};var k=function(p){p.attr("role","progressbar");p.attr("aria-valuemin","0");p.attr("aria-valuemax","100");p.attr("aria-live","assertive");p.attr("aria-busy","false");p.attr("aria-valuenow","0");p.attr("aria-valuetext","")};var h=function(s,r){var q=r<100&&r>0;s.ariaElement.attr("aria-busy",q);s.ariaElement.attr("aria-valuenow",r);if(q){var p=g.stringTemplate(s.options.ariaBusyText,{percentComplete:r});s.ariaElement.attr("aria-valuetext",p)}else{if(r===100){s.ariaElement.attr("aria-valuetext",s.options.ariaDoneText)}}};var d=function(p,q){p.html(q)};var m=function(p){p.indicator.css("top",p.progressBar.position().top).css("left",0).height(p.progressBar.height());n(p)};var b=function(r,q,p,t){i(r,t);if(q!==null){r.storedPercent=q;var s=Math.max(j(r,parseFloat(q)),r.options.minWidth);o(r,s)}if(p!==null){d(r.label,p)}if(r.ariaElement){h(r,q)}};var c=function(p){p.displayElement=p.locate("displayElement");if(p.options.initiallyHidden){p.displayElement.hide()}p.progressBar=p.locate("progressBar");p.label=p.locate("label");p.indicator=p.locate("indicator");p.ariaElement=p.locate("ariaElement");p.indicator.width(p.options.minWidth);p.storedPercent=0;if(p.ariaElement){k(p.ariaElement)}};g.progress=function(p,q){var r=g.initView("fluid.progress",p,q);c(r);r.show=function(s){i(r,s)};r.hide=function(s,t){a(r,s,t)};r.update=function(s,t,u){b(r,s,t,u)};r.refreshView=function(){m(r)};return r};g.defaults("fluid.progress",{selectors:{displayElement:".flc-progress",progressBar:".flc-progress-bar",indicator:".flc-progress-indicator",label:".flc-progress-label",ariaElement:".flc-progress-bar"},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:true,updatePosition:false,ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."})})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(e,f){var a=function(n,m,o,k){if(!k){return}var l=Math.min(o.chunkSize,n.size);o.bytesUploaded=Math.min(o.bytesUploaded+l,n.size);m.onFileProgress.fire(n,o.bytesUploaded,n.size)};var h=function(l,k){if(l.swfUploadSettings){l.swfUploadSettings.upload_complete_handler(k)}else{l.events.afterFileComplete.fire(k)}};var d=function(l,k){l.queueManager.finishFile(k);if(l.queueManager.shouldUploadNextFile()){i(l)}else{l.queueManager.complete()}};var c=function(l){if(!l.queue.isUploading){return}var k=l.demoState.currentFile;k.filestatus=f.uploader.fileStatusConstants.COMPLETE;l.events.onFileSuccess.fire(k);l.demoState.fileIdx++;d(l,k)};var g=function(l){if(!l.queue.isUploading){return}var k=l.demoState.currentFile;if(l.demoState.bytesUploaded<k.size){l.invokeAfterRandomDelay(function(){a(k,l.events,l.demoState,l.queue.isUploading);g(l)})}else{c(l)}};var i=function(k){k.demoState.currentFile=k.queue.files[k.demoState.fileIdx];k.demoState.chunksForCurrentFile=Math.ceil(k.demoState.currentFile/k.demoState.chunkSize);k.demoState.bytesUploaded=0;k.queue.isUploading=true;k.events.onFileStart.fire(k.demoState.currentFile);k.demoState.currentFile.filestatus=f.uploader.fileStatusConstants.IN_PROGRESS;g(k)};var j=function(l){var k=l.demoState.currentFile;k.filestatus=f.uploader.fileStatusConstants.CANCELLED;l.queue.shouldStop=true;l.events.onFileError.fire(k,f.uploader.errorConstants.UPLOAD_STOPPED,"The demo upload was paused by the user.");d(l,k);l.events.onUploadStop.fire()};var b=function(k){if(k.options.simulateDelay===undefined||k.options.simulateDelay===null){k.options.simulateDelay=true}k.demoState={fileIdx:0,chunkSize:200000};return k};f.demoUploadManager=function(k){var l=k;l.start=function(){l.queueManager.start();i(l)};l.stop=function(){j(l)};l.invokeAfterRandomDelay=function(n){var m;if(l.options.simulateDelay){m=Math.floor(Math.random()*1000+100);setTimeout(n,m)}else{n()}};b(l);return l}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(e,f){var h=function(n,o){var k=[];for(var m=0;m<n.length;m++){var l=n[m];if(o(l)===true){k.push(l)}}return k};var c=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.COMPLETE)})};var i=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.QUEUED||l.filestatus===f.uploader.fileStatusConstants.CANCELLED)})};var j=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.ERROR)})};var b=function(m,l){var k=e.inArray(l,m.files);m.files.splice(k,1)};var g=function(k){k.currentBatch={fileIdx:-1,files:[],totalBytes:0,numFilesCompleted:0,numFilesErrored:0,bytesUploadedForFile:0,previousBytesUploadedForFile:0,totalBytesUploaded:0}};var a=function(k){var l=k.getReadyFiles();k.currentBatch.files=l;k.currentBatch.totalBytes=f.fileQueue.sizeOfFiles(l)};var d=function(k){g(k);a(k)};f.fileQueue=function(){var k={};k.files=[];k.isUploading=false;k.addFile=function(l){k.files.push(l)};k.removeFile=function(l){b(k,l)};k.totalBytes=function(){return f.fileQueue.sizeOfFiles(k.files)};k.getReadyFiles=function(){return i(k)};k.getErroredFiles=function(){return j(k)};k.sizeOfReadyFiles=function(){return f.fileQueue.sizeOfFiles(k.getReadyFiles())};k.getUploadedFiles=function(){return c(k)};k.sizeOfUploadedFiles=function(){return f.fileQueue.sizeOfFiles(k.getUploadedFiles())};k.setupCurrentBatch=function(){d(k)};k.clearCurrentBatch=function(){g(k)};k.updateCurrentBatch=function(){a(k)};return k};f.fileQueue.sizeOfFiles=function(m){var n=0;for(var l=0;l<m.length;l++){var k=m[l];n+=k.size}return n};f.fileQueue.manager=function(k,l){var m={};m.queue=k;m.events=l;m.start=function(){m.queue.setupCurrentBatch();m.queue.isUploading=true;m.queue.shouldStop=false;m.events.onUploadStart.fire(m.queue.currentBatch.files)};m.startFile=function(){m.queue.currentBatch.fileIdx++;m.queue.currentBatch.bytesUploadedForFile=0;m.queue.currentBatch.previousBytesUploadedForFile=0};m.finishFile=function(o){var n=m.queue.currentBatch;n.numFilesCompleted++;m.events.afterFileComplete.fire(o)};m.shouldUploadNextFile=function(){return !m.queue.shouldStop&&m.queue.isUploading&&m.queue.currentBatch.numFilesCompleted<m.queue.currentBatch.files.length};m.complete=function(){m.events.afterUploadComplete.fire(m.queue.currentBatch.files);m.queue.clearCurrentBatch()};return m}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(f,d){var a=function(i){var h=i.options.maxHeight;
var j=(i.scrollingElm.children().eq(0).height()>h);var g=(j)?h:"";i.scrollingElm.height(g)};var e=function(g){g.scrollingElm[0].scrollTop=g.scrollingElm[0].scrollHeight};var c=function(k,j){if(!j||j.length<1){return}var l=0;var h=0;var p=j[0].offsetTop;var i=j.height();var m=k.scrollingElm[0].scrollTop;var o=k.scrollingElm.height();if(k.options.padScroll){var g=j.prev().height();l=(g+i<=o)?g:0;var n=j.next().height();h=(n+i<=o)?n:0}if((p-l)<m){k.scrollingElm[0].scrollTop=p-l}if(((p+i)+h)>(m+o)){i=(i<o)?i:o;k.scrollingElm[0].scrollTop=(p-o+i+h)}};var b=function(g){g.scrollingElm=g.container.parents(g.options.selectors.wrapper);if(!g.scrollingElm.length){d.fail({name:"Missing Scroller",message:"The scroller wrapper element was not found."})}if(!f.browser.msie||f.browser.version>6){g.scrollingElm.css("max-height",g.options.maxHeight)}};d.scroller=function(g,h){var i=d.initView("fluid.scroller",g,h);b(i);i.scrollTo=function(j){c(i,j)};i.scrollBottom=function(){e(i)};i.refreshView=function(){if(f.browser.msie&&f.browser.version<7){a(i)}};i.refreshView();return i};d.defaults("fluid.scroller",{selectors:{wrapper:".flc-scroller"},maxHeight:180,padScroll:true})})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(g,m){var k=function(){var t=function(){};SWFUpload.prototype.selectFile=t;SWFUpload.prototype.selectFiles=t};var e=function(t,u){t.returnedOptions={uploadManager:{type:u.options.uploadManager.type||u.options.uploadManager}}};var d=function(t,u){return function(){var w=g("#"+u.uploadManager.swfUploader.movieName,u.container);var v=u.locate("browseButton");m.tabindex(w,0);w.attr("role","button");w.attr("alt","Browse files button");if(t.isTransparent){w.addClass(t.options.styles.browseButtonOverlay);w.css("top",v.position().top);w.css("left",v.position().left)}}};var h=function(){var t=g("<div class='fl-uploader-flash9-container'></div>");var v=g("<span></span>");var u=m.allocateSimpleId(v);t.append(v);g("body").append(t);return u};var i=function(t,u){t.returnedOptions.uploadManager.options={flashURL:t.options.flash9URL||undefined,flashButtonPeerId:h()}};var o=function(){var t=g("<span></span>");m.allocateSimpleId(t);return t};var j=function(u){var v=g("<span></span>");var t=m.allocateSimpleId(v);u.before(v);k();return t};var r=function(v,w){var u=w.locate("browseButton");m.tabindex(u,-1);v.isTransparent=v.options.flashButtonAlwaysVisible?false:(!g.browser.msie||v.options.transparentEvenInIE);var t=v.isTransparent?j(u):m.allocateSimpleId(u);v.returnedOptions.uploadManager.options={flashURL:v.options.flash10URL||undefined,flashButtonImageURL:v.isTransparent?undefined:v.options.flashButtonImageURL,flashButtonPeerId:t,flashButtonHeight:v.isTransparent?u.outerHeight():v.options.flashButtonHeight,flashButtonWidth:v.isTransparent?u.outerWidth():v.options.flashButtonWidth,flashButtonWindowMode:v.isTransparent?SWFUpload.WINDOW_MODE.TRANSPARENT:SWFUpload.WINDOW_MODE.WINDOW,flashButtonCursorEffect:SWFUpload.CURSOR.HAND,listeners:{afterReady:d(v,w),onUploadStart:function(){w.uploadManager.swfUploader.setButtonDisabled(true)},afterUploadComplete:function(){w.uploadManager.swfUploader.setButtonDisabled(false)}}}};m.swfUploadSetupDecorator=function(v,t){var u={};m.mergeComponentOptions(u,"fluid.swfUploadSetupDecorator",t);u.flashVersion=swfobject.getFlashPlayerVersion().major;e(u,v);if(u.flashVersion===9){i(u,v)}else{r(u,v)}return u};m.defaults("fluid.swfUploadSetupDecorator",{flashButtonAlwaysVisible:true,transparentEvenInIE:false,flashButtonImageURL:"../images/browse.png",flashButtonHeight:22,flashButtonWidth:106,styles:{browseButtonOverlay:"fl-uploader-browse-overlay"}});var f={uploadURL:"upload_url",flashURL:"flash_url",postParams:"post_params",fileSizeLimit:"file_size_limit",fileTypes:"file_types",fileTypesDescription:"file_types_description",fileUploadLimit:"file_upload_limit",fileQueueLimit:"file_queue_limit",flashButtonPeerId:"button_placeholder_id",flashButtonImageURL:"button_image_url",flashButtonHeight:"button_height",flashButtonWidth:"button_width",flashButtonWindowMode:"button_window_mode",flashButtonCursorEffect:"button_cursor",debug:"debug"};var b={afterReady:"swfupload_loaded_handler",onFileDialog:"file_dialog_start_handler",afterFileQueued:"file_queued_handler",onQueueError:"file_queue_error_handler",afterFileDialog:"file_dialog_complete_handler",onFileStart:"upload_start_handler",onFileProgress:"upload_progress_handler",onFileError:"upload_error_handler",onFileSuccess:"upload_success_handler"};var q=function(y,w,x){var t=x||{};for(var u in w){var v=y[u];if(v){t[v]=w[u]}}return t};var c=function(x,z,y){var u=y||{};for(var v in x.events){var t=x.events[v].fire;var w=z[v];if(w){u[w]=t}}u.upload_complete_handler=function(A){x.queueManager.finishFile(A);if(x.queueManager.shouldUploadNextFile()){x.swfUploader.startUpload()}else{if(x.queueManager.queue.shouldStop){x.swfUploader.stopUpload()}x.queueManager.complete()}};return u};var p=function(t){if(t.queue.isUploading){return}if(t.options.fileQueueLimit===1){t.swfUploader.selectFile()}else{t.swfUploader.selectFiles()}};var l=function(t){t.queue.shouldStop=true;t.events.onUploadStop.fire()};var a=function(t){var u=function(v){m.find(t.queue.files,function(w){if(w.id===v.id){w.filestatus=v.filestatus;return true}})};t.events.afterFileQueued.addListener(function(v){t.queue.addFile(v)});t.events.onFileStart.addListener(function(v){t.queueManager.startFile();u(v)});t.events.onFileProgress.addListener(function(w,z,x){var v=t.queue.currentBatch;var y=z-v.previousBytesUploadedForFile;v.totalBytesUploaded+=y;v.bytesUploadedForFile+=y;v.previousBytesUploadedForFile=z;u(w)});t.events.onFileError.addListener(function(w,v){if(v===m.uploader.errorConstants.UPLOAD_STOPPED){t.queue.isUploading=false}else{if(t.queue.isUploading){t.queue.currentBatch.totalBytesUploaded+=w.size;t.queue.currentBatch.numFilesErrored++}}u(w)});t.events.onFileSuccess.addListener(function(v){if(t.queue.currentBatch.bytesUploadedForFile===0){t.queue.currentBatch.totalBytesUploaded+=v.size}u(v)});t.events.afterUploadComplete.addListener(function(){t.queue.isUploading=false})};var s=function(u,t){u.queue.removeFile(t);u.swfUploader.cancelUpload(t.id);u.events.afterFileRemoved.fire(t)};var n=function(u,t){u.events=t;u.queue=m.fileQueue();u.queueManager=m.fileQueue.manager(u.queue,u.events);u.swfUploadSettings=q(f,u.options);c(u,b,u.swfUploadSettings);u.swfUploader=new SWFUpload(u.swfUploadSettings);a(u)};m.swfUploadManager=function(u,t){var v={};m.mergeComponentOptions(v,"fluid.swfUploadManager",t);m.mergeListeners(u,v.options.listeners);v.browseForFiles=function(){p(v)};v.removeFile=function(w){s(v,w)};v.start=function(){v.queueManager.start();v.swfUploader.startUpload()};v.stop=function(){l(v)};n(v,u);return v};m.defaults("fluid.swfUploadManager",{uploadURL:"",flashURL:"../../../lib/swfupload/flash/swfupload.swf",flashButtonPeerId:"",postParams:{},fileSizeLimit:"20480",fileTypes:"*.*",fileTypesDescription:null,fileUploadLimit:0,fileQueueLimit:0,debug:false})})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(g,i){var D=function(G,F){return G.locate("fileQueue").find("#"+F.id)};var f=function(G,F){return g("#"+F.id+"_error",G.container)};var e=function(I,J){var H=I.uploadManager.queue.files;for(var G=0;G<H.length;G++){var F=H[G];if(F.id.toString()===J.attr("id")){return F}}return null};var u=function(G,F){var H=F.id+"_progress";return G.fileProgressors[H]};var A=function(H,F){var G=D(H,F);H.scroller.scrollTo(G);var I=u(H,F);I.refreshView();I.show()};var r=function(I,G,H,F){var J=i.uploader.derivePercent(H,F);var K=J+"%";u(I,G).update(J,K)};var n=function(H,F){var G=D(H,F);u(H,F).hide();if(F.filestatus===i.uploader.fileStatusConstants.COMPLETE){H.locate("fileIconBtn",G).removeClass(H.options.styles.dim)}};var c=function(H,G){var I=u(H,G);if(!I){return}var F=I.displayElement;F.remove()};var B=function(F,G){G.fadeOut("fast",function(){G.remove();F.refreshView()})};var E=function(G,F){if(F.filestatus===i.uploader.fileStatusConstants.ERROR){B(G,f(G,F))}};var b=function(G,F,H){c(G,F);E(G,F);G.uploadManager.removeFile(F);B(G,H)};var l=function(G,H){var F=e(G,H);if(!F||F.filestatus===i.uploader.fileStatusConstants.COMPLETE){return}b(G,F,H)};var w=function(G,F){var H=D(G,F);b(G,F,H)};var k=function(I,G){var H=function(){if(I.hasClass(G.ready)&&!I.hasClass(G.uploading)){I.addClass(G.hover)}};var F=function(){if(I.hasClass(G.ready)&&!I.hasClass(G.uploading)){I.removeClass(G.hover)}};I.hover(H,F)};var j=function(F,H){var G=function(){l(F,H)};i.activatable(H,null,{additionalBindings:[{key:g.ui.keyCode.DELETE,activateHandler:G}]})};var m=function(F,G){if(g.browser.msie&&g.browser.version<7){k(G,F.options.styles)}F.locate("fileIconBtn",G).click(function(){l(F,G)});j(F,G)};var q=function(G,F){var H=G.rowTemplate.clone();G.locate("fileName",H).text(F.name);G.locate("fileSize",H).text(i.uploader.formatFileSize(F.size));G.locate("fileIconBtn",H).addClass(G.options.styles.remove);H.attr("id",F.id);H.addClass(G.options.styles.ready);m(G,H);return H};var s=function(G,J){var F=G.rowProgressorTemplate.clone();var H=J.attr("id");var I=H+"_progress";F.attr("id",I);F.css("top",J.position().top);F.height(J.height()).width(5);G.container.after(F);G.fileProgressors[I]=i.progress(G.uploadContainer,{selectors:{progressBar:"#"+H,displayElement:"#"+I,label:"#"+I+" .fl-uploader-file-progress-text",indicator:"#"+I}})};var v=function(G,F){var H=q(G,F);H.hide();G.container.append(H);H.fadeIn("slow");G.scroller.scrollBottom();s(G,H);G.refreshView()};var z=function(F){var G=F.locate("fileIconBtn",F.locate("fileRows"));G.attr("disabled","disabled");G.addClass(F.options.styles.dim)};var h=function(F){var G=F.locate("fileIconBtn",F.locate("fileRows"));G.removeAttr("disabled");G.removeClass(F.options.styles.dim)};var p=function(F,H,G){H.removeClass(F.options.styles.ready).removeClass(F.options.styles.error).addClass(G)};var a=function(H,G){var I=D(H,G);p(H,I,H.options.styles.uploaded);I.attr("title",H.options.strings.status.success);i.enabled(I,false);
var F=H.locate("fileIconBtn",I);F.unbind("click");F.removeClass(H.options.styles.remove);F.attr("title",H.options.strings.status.success)};var x=function(I,K,F){var H=I.errorInfoRowTemplate.clone();H.attr("id",K.attr("id")+"_error");var J=i.keyForValue(i.uploader.errorConstants,F);var G=I.options.strings.errors[J];I.locate("errorText",H).text(G);K.after(H);I.scroller.scrollTo(H)};var C=function(I,G,F){n(I,G);if(G.filestatus===i.uploader.fileStatusConstants.ERROR){var H=D(I,G);p(I,H,I.options.styles.error);x(I,H,F)}};var t=function(F){F.returnedOptions={listeners:{afterFileQueued:F.addFile,onUploadStart:F.prepareForUpload,onFileStart:F.showFileProgress,onFileProgress:F.updateFileProgress,onFileSuccess:F.markFileComplete,onFileError:F.showErrorForFile,afterFileComplete:F.hideFileProgress,afterUploadComplete:F.refreshAfterUpload}}};var y=function(F){i.tabbable(F.container);F.selectableContext=i.selectable(F.container,{selectableSelector:F.options.selectors.fileRows,onSelect:function(G){g(G).addClass(F.options.styles.selected)},onUnselect:function(G){g(G).removeClass(F.options.styles.selected)}})};var o=function(F){F.rowTemplate=F.locate("rowTemplate").remove();F.errorInfoRowTemplate=F.locate("errorInfoRowTemplate").remove();F.errorInfoRowTemplate.removeClass(F.options.styles.hiddenTemplate);F.rowProgressorTemplate=F.locate("rowProgressorTemplate",F.uploadContainer).remove()};var d=function(G,F){G.uploadManager=F;G.scroller=i.scroller(G.container);o(G);y(G);t(G)};i.fileQueueView=function(G,J,F,H){var I=i.initView("fluid.fileQueueView",G,H);I.uploadContainer=J;I.fileProgressors={};I.addFile=function(K){v(I,K)};I.removeFile=function(K){w(I,K)};I.prepareForUpload=function(){z(I)};I.refreshAfterUpload=function(){h(I)};I.showFileProgress=function(K){A(I,K)};I.updateFileProgress=function(L,M,K){r(I,L,M,K)};I.markFileComplete=function(K){u(I,K).update(100,"100%");a(I,K)};I.showErrorForFile=function(L,K){C(I,L,K)};I.hideFileProgress=function(K){n(I,K)};I.refreshView=function(){I.scroller.refreshView();I.selectableContext.refresh()};d(I,F);return I};i.defaults("fluid.fileQueueView",{selectors:{fileRows:".flc-uploader-file",fileName:".flc-uploader-file-name",fileSize:".flc-uploader-file-size",fileIconBtn:".flc-uploader-file-action",errorText:".flc-uploader-file-error",rowTemplate:".flc-uploader-file-tmplt",errorInfoRowTemplate:".flc-uploader-file-error-tmplt",rowProgressorTemplate:".flc-uploader-file-progressor-tmplt"},styles:{hover:"fl-uploader-file-hover",selected:"fl-uploader-file-focus",ready:"fl-uploader-file-state-ready",uploading:"fl-uploader-file-state-uploading",uploaded:"fl-uploader-file-state-uploaded",error:"fl-uploader-file-state-error",remove:"fl-uploader-file-action-remove",dim:"fl-uploader-dim",hiddenTemplate:"fl-uploader-hidden-templates"},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",singleFile:"file",pluralFiles:"files"},status:{success:"File Uploaded",error:"File Upload Error"},errors:{HTTP_ERROR:"File upload error: a network error occured or the file was rejected (reason unknown).",IO_ERROR:"File upload error: a network error occured.",UPLOAD_LIMIT_EXCEEDED:"File upload error: you have uploaded as many files as you are allowed during this session",UPLOAD_FAILED:"File upload error: the upload failed for an unknown reason.",QUEUE_LIMIT_EXCEEDED:"You have as many files in the queue as can be added at one time. Removing files from the queue may allow you to add different files.",FILE_EXCEEDS_SIZE_LIMIT:"One or more of the files that you attempted to add to the queue exceeded the limit of %fileSizeLimit.",ZERO_BYTE_FILE:"One or more of the files that you attempted to add contained no data.",INVALID_FILETYPE:"One or more files were not added to the queue because they were of the wrong type."}}})})(jQuery,fluid_1_0);(function(g,k){var m=function(x,y){return(y===1)?x.options.strings.progress.singleFile:x.options.strings.progress.pluralFiles};var r=function(x,y){y.removeAttr("disabled");y.removeClass(x.options.styles.dim)};var n=function(x,y){y.attr("disabled","disabled");y.addClass(x.options.styles.dim)};var a=function(x,y){y.removeClass(x.options.styles.hidden)};var e=function(x,y){y.addClass(x.options.styles.hidden)};var v=function(z,y){y=y||false;var x=z.totalProgress.indicator;x.toggleClass(z.options.styles.totalProgress,!y);x.toggleClass(z.options.styles.totalProgressError,y)};var f=function(x){n(x,x.locate("uploadButton"));if(x.uploadManager.queue.files.length===0){x.locate("browseButton").text(x.options.strings.buttons.browse);a(x,x.locate("instructions"))}};var c=function(x){n(x,x.locate("uploadButton"));r(x,x.locate("browseButton"));e(x,x.locate("pauseButton"));a(x,x.locate("uploadButton"))};var l=function(x){x.locate("browseButton").text(x.options.strings.buttons.addMore);e(x,x.locate("pauseButton"));a(x,x.locate("uploadButton"));r(x,x.locate("uploadButton"));r(x,x.locate("browseButton"));e(x,x.locate("instructions"));x.totalProgress.hide()};var d=function(x){x.totalProgress.hide(false,false);v(x);e(x,x.locate("uploadButton"));n(x,x.locate("browseButton"));r(x,x.locate("pauseButton"));a(x,x.locate("pauseButton"));x.locate(x.options.focusWithEvent.afterUploadStart).focus()};var t=function(A){var y=A.uploadManager.queue.getReadyFiles().length;var B=A.uploadManager.queue.sizeOfReadyFiles();var x=m(A,y);var z=k.stringTemplate(A.options.strings.progress.toUploadLabel,{fileCount:y,fileLabel:x,totalBytes:k.uploader.formatFileSize(B)});A.locate("totalFileStatusText").html(z)};var b=function(C){var A=C.uploadManager.queue.currentBatch;var x=k.uploader.derivePercent(A.totalBytesUploaded,A.totalBytes);var z=A.files.length;var B=m(C,z);var y=k.stringTemplate(C.options.strings.progress.totalProgressLabel,{curFileN:A.fileIdx+1,totalFilesN:z,fileLabel:B,currBytes:k.uploader.formatFileSize(A.totalBytesUploaded),totalBytes:k.uploader.formatFileSize(A.totalBytes)});C.totalProgress.update(x,y)};var p=function(B){var D=B.uploadManager.queue.getErroredFiles().length;var C=B.uploadManager.queue.files.length;var z=m(B,C);var A="";if(D>0){var y=(D===1)?B.options.strings.progress.singleError:B.options.strings.progress.pluralErrors;v(B,true);A=k.stringTemplate(B.options.strings.progress.numberOfErrors,{errorsN:D,errorLabel:y})}var x=k.stringTemplate(B.options.strings.progress.completedLabel,{curFileN:B.uploadManager.queue.getUploadedFiles().length,totalFilesN:C,errorString:A,fileLabel:z,totalCurrBytes:k.uploader.formatFileSize(B.uploadManager.queue.sizeOfUploadedFiles())});B.totalProgress.update(100,x)};var q=function(x){x.locate("browseButton").click(function(y){x.uploadManager.browseForFiles();y.preventDefault()});x.locate("uploadButton").click(function(){x.uploadManager.start()});x.locate("pauseButton").click(function(){x.uploadManager.stop()})};var w=function(x){if(x.uploadManager.queue.getReadyFiles().length>0){l(x);t(x);x.locate(x.options.focusWithEvent.afterFileDialog).focus()}};var h=function(x){if(x.uploadManager.queue.getReadyFiles().length===0){f(x)}t(x)};var i=function(x){};var o=function(y){var x=y.uploadManager.queue.shouldStop;if(y.uploadManager.queue.getReadyFiles().length===0){c(y)}else{l(y)}p(y)};var s=function(x){x.events.afterFileDialog.addListener(function(){w(x)});x.events.afterFileRemoved.addListener(function(){h(x)});x.events.onUploadStart.addListener(function(){d(x)});x.events.onUploadStop.addListener(function(){x.locate(x.options.focusWithEvent.afterUploadStop).focus()});x.events.onFileProgress.addListener(function(){b(x)});x.events.onFileSuccess.addListener(function(){b(x)});x.events.onFileError.addListener(function(z,y,A){if(y===k.uploader.errorConstants.UPLOAD_STOPPED){i(x)}});x.events.afterUploadComplete.addListener(function(){o(x)})};var u=function(y){var x=k.initSubcomponent(y,"uploadManager",[y.events,k.COMPONENT_OPTIONS]);return y.options.demo?k.demoUploadManager(x):x};var j=function(x){x.decorators=k.initSubcomponents(x,"decorators",[x,k.COMPONENT_OPTIONS]);x.uploadManager=u(x);x.fileQueueView=k.initSubcomponent(x,"fileQueueView",[x.locate("fileQueue"),x.container,x.uploadManager,k.COMPONENT_OPTIONS]);x.totalProgress=k.initSubcomponent(x,"totalProgressBar",[x.container,k.COMPONENT_OPTIONS]);n(x,x.locate("uploadButton"));q(x);s(x)};k.uploader=function(x,y){var z=k.initView("fluid.uploader",x,y);j(z);return z};k.progressiveEnhanceableUploader=function(x,z,y){z=k.container(z);x=k.container(x);if(swfobject.getFlashPlayerVersion().major<9){z.show()}else{x.show();return k.uploader(x,y)}};k.uploader.formatFileSize=function(x){if(typeof x==="number"){if(x===0){return"0.0 KB"}else{if(x>0){if(x<1048576){return(Math.ceil(x/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(x/1048576*10)/10).toFixed(1)+" MB"}}}}return""};k.uploader.derivePercent=function(x,y){return Math.round((x*100)/y)};k.defaults("fluid.uploader",{demo:false,decorators:{type:"fluid.swfUploadSetupDecorator"},uploadManager:{type:"fluid.swfUploadManager"},fileQueueView:{type:"fluid.fileQueueView"},totalProgressBar:{type:"fluid.progress",options:{selectors:{progressBar:".flc-uploader-scroller-footer",displayElement:".flc-uploader-total-progress",label:".flc-uploader-total-progress-text",indicator:".flc-uploader-total-progress",ariaElement:".flc-uploader-total-progress"}}},selectors:{fileQueue:".flc-uploader-queue",browseButton:".flc-uploader-button-browse",uploadButton:".flc-uploader-button-upload",pauseButton:".flc-uploader-button-pause",totalFileStatusText:".flc-uploader-total-progress-text",instructions:".flc-uploader-browse-instructions"},focusWithEvent:{afterFileDialog:"uploadButton",afterUploadStart:"pauseButton",afterUploadStop:"uploadButton"},styles:{disabled:"fl-uploader-disabled",hidden:"fl-uploader-hidden",dim:"fl-uploader-dim",totalProgress:"fl-uploader-total-progress-okay",totalProgressError:"fl-uploader-total-progress-errored"},events:{afterReady:null,onFileDialog:null,afterFileQueued:null,afterFileRemoved:null,onQueueError:null,afterFileDialog:null,onUploadStart:null,onUploadStop:null,onFileStart:null,onFileProgress:null,onFileError:null,onFileSuccess:null,afterFileComplete:null,afterUploadComplete:null},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",totalProgressLabel:"Uploading: %curFileN of %totalFilesN %fileLabel (%currBytes of %totalBytes)",completedLabel:"Uploaded: %curFileN of %totalFilesN %fileLabel (%totalCurrBytes)%errorString",numberOfErrors:", %errorsN %errorLabel",singleFile:"file",pluralFiles:"files",singleError:"error",pluralErrors:"errors"},buttons:{browse:"Browse Files",addMore:"Add More",stopUpload:"Stop Upload",cancelRemaning:"Cancel remaining Uploads",resumeUpload:"Resume Upload"}}});
k.uploader.errorConstants={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};k.uploader.fileStatusConstants={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5}})(jQuery,fluid_1_0);var fluid_1_0=fluid_1_0||{};(function(f,g){g.orientation={HORIZONTAL:4,VERTICAL:1};g.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};g.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};g.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};g.directionSign=function(k){return k===g.direction.UP||k===g.direction.LEFT?g.direction.PREVIOUS:g.direction.NEXT};g.directionAxis=function(k){return k===g.direction.LEFT||k===g.direction.RIGHT?0:1};g.directionOrientation=function(k){return g.directionAxis(k)?g.orientation.VERTICAL:g.orientation.HORIZONTAL};g.keycodeDirection={up:g.direction.UP,down:g.direction.DOWN,left:g.direction.LEFT,right:g.direction.RIGHT};g.moveDom=function(m,n,k){m=g.unwrap(m);n=g.unwrap(n);var l;if(k===g.position.INSIDE){n.appendChild(m)}else{if(k===g.position.BEFORE){for(l=n.previousSibling;;l=l.previousSibling){if(!l||!g.dom.isIgnorableNode(l)){if(l!==m){g.dom.cleanseScripts(m);n.parentNode.insertBefore(m,n)}break}}}else{if(k===g.position.AFTER){for(l=n.nextSibling;;l=l.nextSibling){if(!l||!g.dom.isIgnorableNode(l)){if(l!==m){g.dom.cleanseScripts(m);g.dom.insertAfter(m,n)}break}}}else{g.fail("Unrecognised position supplied to fluid.moveDom: "+k)}}}};g.normalisePosition=function(l,n,k,m){if(l===g.position.REPLACE){l=n&&k>=m?g.position.AFTER:g.position.BEFORE}return l};g.permuteDom=function(n,r,q,l,o){n=g.unwrap(n);r=g.unwrap(r);var p=f.inArray(n,l);if(p===-1){g.fail("Error in permuteDom: source element "+g.dumpEl(n)+" not found in source list "+g.dumpEl(l))}var v=f.inArray(r,o);if(v===-1){g.fail("Error in permuteDom: target element "+g.dumpEl(r)+" not found in source list "+g.dumpEl(o))}var k=l===o;q=g.normalisePosition(q,k,v,p);var u={};u[g.position.AFTER]=n.nextSibling;u[g.position.BEFORE]=n.previousSibling;g.moveDom(l[p],o[v],q);var t=k?v-1:l.length-2;var m;if(!k||v>p){for(m=t;m>p;--m){g.moveDom(l[m+1],l[m],g.position.AFTER)}if(p+1<l.length){g.moveDom(l[p+1],u[g.position.AFTER],g.position.BEFORE)}}var s=k?p-1:o.length-1;if(q===g.position.AFTER){v++}if(!k||v<p){for(m=v;m<s;++m){g.moveDom(o[m],o[m+1],g.position.BEFORE)}if(s>=0&&s<o.length-1){g.moveDom(o[s],u[g.position.BEFORE],g.position.AFTER)}}};var b=function(k,l){return window.getComputedStyle?window.getComputedStyle(k,null).getPropertyValue(l):k.currentStyle[l]};var h=function(k){while(k){if(k.tagName.toLowerCase()==="body"){return true}k=k.parentNode}return false};var j=function(k){return"hidden"===k.type||b(k,"display")==="none"||b(k,"visibility")==="hidden"||!h(k)};var e=function(m,l,q){var o={};o.element=m;o.orientation=l;if(q===g.position.INSIDE){o.position=q}if(j(m)){o.clazz="hidden"}var p=g.dom.computeAbsolutePosition(m)||[0,0];var n=m.offsetWidth;var k=m.offsetHeight;o.rect={left:p[0],top:p[1]};o.rect.right=p[0]+n;o.rect.bottom=p[1]+k;return o};var c=10000;function d(k){return"Rect top: "+k.top+" left: "+k.left+" bottom: "+k.bottom+" right: "+k.right}function i(k){if(!k||!k.rect){return"null"}else{return d(k.rect)+" position: "+k.position+" for "+g.dumpEl(k.element)}}g.dropManager=function(){var s=[];var l={};var r={};var n;function t(x){return f(x).data("")}function u(x,C,A,B,D,z){var y=f.extend(true,{},A);y.rect[C[B]]=y.rect[C[1-B]]+(B?1:-1);y.rect[C[1-B]]=(B?-1:1)*c;y.position=D===g.position.INSIDE?D:(B?g.position.BEFORE:g.position.AFTER);y.clazz=z;x[x.length]=y}function q(A,y,z,x,C,B){var F=f.extend(true,{},z);var D=f.extend(true,{},z);var E=(F.rect[y[0]]+F.rect[y[1]])/2;F.rect[y[1]]=E;F.position=g.position.BEFORE;D.rect[y[0]]=E;D.position=g.position.AFTER;F.clazz=C;D.clazz=B;A[A.length]=F;A[A.length]=D}function p(z,y,A,x,B){y+=A;if(y<0&&x==="locked"){return"locked"}if(y>=z.length||B===null){return null}else{A=z[y];return B(A)==="locked"&&x==="locked"?"locked":null}}var o;var m,k;r.updateGeometry=function(G){o=G;s=[];l={};var x=G.elementMapper;for(var F=0;F<G.extents.length;++F){var B=G.extents[F];var y=B.orientation;var z=g.rectSides[y];var A=function(L,I,O,P,K){var J=e(L,y,P);J.owner=B;if(J.clazz!=="hidden"&&x){J.clazz=x(L)}l[f.data(L)]=J;var M=p(B.elements,K,g.position.BEFORE,J.clazz,x);var N=p(B.elements,K,g.position.AFTER,J.clazz,x);if(P===g.position.INSIDE){s[s.length]=J}else{q(s,z,J,P,M,N)}if(I&&G.sentinelize){u(s,z,J,1,P,M)}if(O&&G.sentinelize){u(s,z,J,0,P,N)}return J};var H=true;for(var C=0;C<B.elements.length;++C){var E=B.elements[C];var D=A(E,C===0,C===B.elements.length-1,g.position.INTERLEAVED,C);if(D.clazz!=="hidden"){H=false}}if(H&&B.parentElement){A(B.parentElement,true,true,g.position.INSIDE)}}};r.startDrag=function(C,B,z,A){var E=B[0]+z/2;var D=B[1]+A/2;var y=E-C.pageX;var x=D-C.pageY;r.updateGeometry(o);n=null;m=y;k=x;f("").bind("mousemove.fluid-dropManager",r.mouseMove)};r.lastPosition=function(){return n};r.endDrag=function(){f("").unbind("mousemove.fluid-dropManager")};r.mouseMove=function(A){var z=A.pageX+m;var C=A.pageY+k;var B=r.closestTarget(z,C,n);if(B&&B!==g.dropManager.NO_CHANGE){n=B;r.dropChangeFirer.fire(B)}};r.dropChangeFirer=g.event.getEventFirer();var v={element:null};r.closestTarget=function(I,G,D){var C=Number.MAX_VALUE;var A=v;var z=Number.MAX_VALUE;var H=v;for(var F=0;F<s.length;++F){var E=s[F];if(E.clazz==="hidden"){continue}var B=g.geom.minPointRectangle(I,G,E.rect);if(E.clazz==="locked"){if(B<z){z=B;H=E}}else{if(B<C){C=B;A=E}if(B===0){break}}}if(!A){return A}if(z>=C){H=v}if(D&&D.position===A.position&&g.unwrap(D.element)===g.unwrap(A.element)&&g.unwrap(D.lockedelem)===g.unwrap(H.element)){return g.dropManager.NO_CHANGE}return{position:A.position,element:A.element,lockedelem:H.element}};r.projectFrom=function(A,C,B){r.updateGeometry(o);var z=l[t(A)];var y=g.geom.projectFrom(z.rect,C,s,B);if(!y.cacheelem){return null}var x=y.cacheelem.position;return{element:y.cacheelem.element,position:x?x:g.position.BEFORE}};function w(y,A,z){var B=g.directionSign(A);var x=f(z).index(y)+B;if(x<0){x+=z.length}x%=z.length;return z[x]}r.logicalFrom=function(y,A,z){var x=r.getOwningSpan(y,g.position.INTERLEAVED,z);return{element:w(y,A,x),position:g.position.REPLACE}};r.lockedWrapFrom=function(z,D,C){var B=r.logicalFrom(z,D,C);var x=r.getOwningSpan(z,g.position.INTERLEAVED,C);var A=l[t(z)].owner.elements;if(C||x[0]===A[0]){return B}var y=w(z,D,A);if(o.elementMapper(y)==="locked"){B.element=null;B.clazz="locked"}return B};r.getOwningSpan=function(z,y,B){var x=l[t(z)].owner;var A=y===g.position.INSIDE?[x.parentElement]:x.elements;if(!B&&o.elementMapper){A=f.makeArray(A);g.remove_if(A,function(C){return o.elementMapper(C)==="locked"})}return A};r.geometricMove=function(A,B,x){var y=r.getOwningSpan(A,null,true);var z=r.getOwningSpan(B,x,true);g.permuteDom(A,B,x,y,z)};return r};g.dropManager.NO_CHANGE="no change";g.geom=g.geom||{};g.geom.minPointRectangle=function(k,o,n){var m=k<n.left?(n.left-k):(k>n.right?(k-n.right):0);var l=o<n.top?(n.top-o):(o>n.bottom?(o-n.bottom):0);return m*m+l*l};g.geom.minRectRect=function(n,l){var m=n.right<l.left?l.left-n.right:l.right<n.left?n.left-l.right:0;var k=n.bottom<l.top?l.top-n.bottom:l.bottom<n.top?n.top-l.bottom:0;return m*m+k*k};var a=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}};g.geom.projectFrom=function(o,A,B,u){var m=g.directionAxis(A);var x=g.rectSides[A];var v=g.rectSides[m*15+5-A];var r=g.directionSign(A);var k={left:(7*o.left+1*o.right)/8,right:(5*o.left+3*o.right)/8,top:(7*o.top+1*o.bottom)/8,bottom:(5*o.top+3*o.bottom)/8};k[x]=r*c;k[v]=-k[x];function C(G,E,H){var F=E.rect;var I=g.geom.minRectRect(k,F);var D=-r*H*(o[H===1?x:v]-F[H===1?v:x]);if(I<=G.mindist&&D>=0){if(I===G.mindist&&D*H>G.minrdist){return}G.minrdist=D*H;G.mindist=I;G.minelem=E}}var s=a();var w=a();var n=a();for(var y=0;y<B.length;++y){var z=B[y];var l=z.owner&&z.element===z.owner.parentElement;if(z.clazz==="hidden"||u&&l){continue}else{if(!u&&z.clazz==="locked"){C(n,z,1)}else{C(s,z,1);C(w,z,-1)}}}var q=!s.minelem||w.mindist<s.mindist;var t=q?w:s;var p={wrapped:q,cacheelem:t.minelem};if(n.mindist<t.mindist){p.lockedelem=n.minelem}return p}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(c,d){var b=function(o,l,m){var n=c(o).clone();d.dom.iterateDom(n.get(0),function(p){if(p.tagName.toLowerCase()==="script"){return true}p.removeAttribute("id");if(p.tagName.toLowerCase()==="input"){p.setAttribute("disabled","disabled")}});n.removeAttr("id");n.removeClass("ui-droppable");n.addClass(l);if(m){var k=c(document.createElement("div"));k.append(n);k.append(m);n=k}c("body").append(n);if(!c.browser.safari){n.css("display","block").width(o.offsetWidth).height(o.offsetHeight)}if(c.browser.opera){n.hide()}return n};function f(l){var k=l.dom.fastLocate("selectables");if(k.length<=0){return null}return k[0]}function g(l,n,o,k){var m=n;var p=false;if(c.browser.msie){l[0].ondrag=function(){return false};l[0].onselectstart=function(){return false}}if(c.browser.opera){l.keypress(function(q){if(p){p=false;q.preventDefault();return false}});m=function(r){var q=n(r);if(q===false){p=true}}}l.keydown(m);l.keyup(o)}function j(k){var l=k.dom.fastLocate("selectables")[0];k.container.attr("role",k.options.containerRole.container);k.container.attr("aria-multiselectable","false");k.container.attr("aria-readonly","false");k.container.attr("aria-disabled","false")}function a(k){return k+"_avatar"}var i=function(k){if(k.keysets&&!(k.keysets instanceof Array)){k.keysets=[k.keysets]}};d.reorderer=function(z,m){if(!z){d.fail("Reorderer initialised with no container")}var A=d.initView("fluid.reorderer",z,m);m=A.options;var t=d.dropManager();A.layoutHandler=d.initSubcomponent(A,"layoutHandler",[z,m,t,A.dom]);A.activeItem=undefined;i(m);var k=A.locate("dropWarning");var x;if(k){x=k.clone()}var C=function(F){var H=m.keysets;
for(var G=0;G<H.length;G++){if(H[G].modifier(F)){return true}}return false};var l=function(){return c.inArray(A.activeItem,A.dom.fastLocate("movables"))>=0};var n=function(F){A.dom.fastLocate("dropTargets").attr("aria-dropeffect",F)};var u=m.styles;var v=function(F){return(!F.ctrlKey&&!F.altKey&&!F.shiftKey&&!F.metaKey)};var D=function(M){var O=A.activeItem;if(!O){return true}var F=m.keysets;for(var I=0;I<F.length;I++){var H=F[I];var P=false;var L=d.keyForValue(H,M.keyCode);if(!L){continue}var N=H.modifier(M);var G=d.keycodeDirection[L];var J=A.layoutHandler.getRelativePosition(O,G,!N);if(!J){continue}if(N){var K=A.events.onBeginMove.fire(O);if(K===false){return false}if(k.length>0){if(J.clazz==="locked"){A.events.onShowKeyboardDropWarning.fire(O,k);k.show()}else{k.hide()}}if(J.element){A.requestMovement(J,O)}}else{if(v(M)){c(J.element).focus()}}return false}return true};A.handleKeyDown=function(F){if(!A.activeItem||A.activeItem!==F.target){return true}var G=c(A.activeItem);if(!G.hasClass(u.dragging)&&C(F)){if(l()){G.removeClass(u.selected);G.addClass(u.dragging);G.attr("aria-grabbed","true");n("move")}return false}return D(F)};A.handleKeyUp=function(F){if(!A.activeItem||A.activeItem!==F.target){return true}var G=c(A.activeItem);if(G.hasClass(u.dragging)&&!C(F)){if(k){k.hide()}G.removeClass(u.dragging);G.addClass(u.selected);G.attr("aria-grabbed","false");n("none");return false}return false};var o;var p=function(G){var F=c(document.createElement(G));F.addClass(m.styles.dropMarker);F.hide();return F};d.logEnabled=true;A.requestMovement=function(G,F){if(!G||d.unwrap(G.element)===d.unwrap(F)){return}A.events.onMove.fire(F,G);t.geometricMove(F,G.element,G.position);c(A.activeItem).focus();A.refresh();t.updateGeometry(A.layoutHandler.getGeometricInfo());A.events.afterMove.fire(F,G,A.dom.fastLocate("movables"))};var y=function(F,G){A.dom.fastLocate("grabHandle",F)[G?"addClass":"removeClass"](u.hover)};function s(H){var G=m.styles;H.attr("aria-grabbed","false");H.mouseover(function(){A.events.onHover.fire(H,true)});H.mouseout(function(){A.events.onHover.fire(H,false)});var F;A.dom.fastLocate("grabHandle",H).draggable({refreshPositions:false,scroll:true,helper:function(){var I;if(x){I=x[0]}F=c(m.avatarCreator(H[0],G.avatar,I));F.attr("id",a(A.container.id));return F},start:function(O,N){var J=A.events.onBeginMove.fire(H);if(J===false){return false}var M=A.dom.fastLocate("grabHandle",H)[0];var L=d.dom.computeAbsolutePosition(M);var I=M.offsetWidth;var K=M.offsetHeight;H.focus();H.removeClass(m.styles.selected);H.addClass(m.styles.mouseDrag);H.attr("aria-grabbed","true");n("move");t.startDrag(O,L,I,K);F.show()},stop:function(K,J){H.removeClass(m.styles.mouseDrag);H.addClass(m.styles.selected);c(A.activeItem).attr("aria-grabbed","false");var I=d.unwrap(o);if(I.parentNode){I.parentNode.removeChild(I)}F.hide();J.helper=null;n("none");t.endDrag();A.requestMovement(t.lastPosition(),H);A.activeItem.focus()},handle:A.dom.fastLocate("grabHandle",H)})}function E(F,G){F.removeClass(G.selected);F.removeClass(G.dragging);F.addClass(G.defaultStyle);F.attr("aria-selected","false")}var r=function(H){A.events.onSelect.fire(H);var G=m.styles;if(A.activeItem&&A.activeItem!==H){E(c(A.activeItem),G)}A.activeItem=H;var F=c(H);F.removeClass(G.defaultStyle);F.addClass(G.selected);F.attr("aria-selected","true")};var B=function(){var I=function(K){E(c(this),m.styles);return K.stopPropagation()};var J=function(K){r(this);return K.stopPropagation()};var F=A.dom.fastLocate("selectables");for(var H=0;H<F.length;++H){var G=c(F[H]);if(!c.data(G[0],"fluid.reorderer.selectable-initialised")){G.addClass(u.defaultStyle);F.blur(I);F.focus(J);F.click(function(K){var L=d.unwrap(A.dom.fastLocate("grabHandle",this));if(d.dom.isContainer(L,K.target)){c(this).focus()}});F.attr("role",m.containerRole.item);F.attr("aria-selected","false");F.attr("aria-disabled","false");c.data(G[0],"fluid.reorderer.selectable-initialised",true)}}if(!A.selectableContext){A.selectableContext=d.selectable(A.container,{selectableElements:F,selectablesTabindex:A.options.selectablesTabindex,direction:null})}};var w=function(F){d.moveDom(o,F.element,F.position);o.css("display","");if(x){if(F.lockedelem){x.show()}else{x.hide()}}};var q=function(){var I=A.dom.fastLocate("movables");var H=A.dom.fastLocate("dropTargets");B();for(var F=0;F<I.length;F++){var G=I[F];if(!c.data(G,"fluid.reorderer.movable-initialised")){s(c(G));c.data(G,"fluid.reorderer.movable-initialised",true)}}if(I.length>0&&!o){o=p(I[0].tagName)}t.updateGeometry(A.layoutHandler.getGeometricInfo());t.dropChangeFirer.addListener(w,"fluid.Reorderer");H.attr("aria-dropeffect","none")};if(A.container){g(A.container,A.handleKeyDown,A.handleKeyUp);j(A);d.tabbable(A.container);q()}if(m.afterMoveCallbackUrl){A.events.afterMove.addListener(function(){var F=A.layoutHandler;var G=F.getModel?F.getModel():m.acquireModel(A);c.post(m.afterMoveCallbackUrl,JSON.stringify(G))},"postModel")}A.events.onHover.addListener(y,"style");A.refresh=function(){A.dom.refresh("movables");A.dom.refresh("selectables");A.dom.refresh("grabHandle",A.dom.fastLocate("movables"));A.dom.refresh("stylisticOffset",A.dom.fastLocate("movables"));A.dom.refresh("dropTargets");A.events.onRefresh.fire();q();A.selectableContext.selectables=A.dom.fastLocate("selectables");A.selectableContext.selectablesUpdated(A.activeItem)};A.refresh();return A};d.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};d.reorderer.defaultKeysets=[{modifier:function(k){return k.ctrlKey},up:d.reorderer.keys.UP,down:d.reorderer.keys.DOWN,right:d.reorderer.keys.RIGHT,left:d.reorderer.keys.LEFT},{modifier:function(k){return k.ctrlKey},up:d.reorderer.keys.i,down:d.reorderer.keys.m,right:d.reorderer.keys.k,left:d.reorderer.keys.j}];d.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var e=function(k,l,m){m=m||{};m.layoutHandler=l;return d.reorderer(k,m)};d.reorderList=function(k,l){return e(k,"fluid.listLayoutHandler",l)};d.reorderGrid=function(k,l){return e(k,"fluid.gridLayoutHandler",l)};d.reorderer.GEOMETRIC_STRATEGY="projectFrom";d.reorderer.LOGICAL_STRATEGY="logicalFrom";d.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";d.reorderer.NO_STRATEGY=null;d.reorderer.relativeInfoGetter=function(l,n,m,k,o){return function(q,s,p){var r=d.directionOrientation(s);var t=r===l?n:m;return t!==null?k[t](q,s,p):null}};d.defaults("fluid.reorderer",{styles:{defaultStyle:"fl-reorderer-movable-default",selected:"fl-reorderer-movable-selected",dragging:"fl-reorderer-movable-dragging",mouseDrag:"fl-reorderer-movable-dragging",hover:"fl-reorderer-movable-hover",dropMarker:"fl-reorderer-dropMarker",avatar:"fl-reorderer-avatar"},selectors:{dropWarning:".flc-reorderer-dropWarning",movables:".flc-reorderer-movable",grabHandle:"",stylisticOffset:""},avatarCreator:b,keysets:d.reorderer.defaultKeysets,layoutHandler:{type:"fluid.listLayoutHandler"},events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null,onRefresh:null},mergePolicy:{keysets:"replace","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function h(k,m,l){return function(){return{sentinelize:m,extents:[{orientation:k,elements:l.fastLocate("dropTargets")}],elementMapper:function(n){return c.inArray(n,l.fastLocate("movables"))===-1?"locked":null}}}}d.defaults(true,"fluid.listLayoutHandler",{orientation:d.orientation.VERTICAL,containerRole:d.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});d.listLayoutHandler=function(l,m,k,o){var n={};n.getRelativePosition=d.reorderer.relativeInfoGetter(m.orientation,d.reorderer.LOGICAL_STRATEGY,null,k,o);n.getGeometricInfo=h(m.orientation,m.sentinelize,o);return n};d.defaults(true,"fluid.gridLayoutHandler",{orientation:d.orientation.HORIZONTAL,containerRole:d.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});d.gridLayoutHandler=function(l,m,k,o){var n={};n.getRelativePosition=d.reorderer.relativeInfoGetter(m.orientation,d.reorderer.LOGICAL_STRATEGY,d.reorderer.GEOMETRIC_STRATEGY,k,o);n.getGeometricInfo=h(m.orientation,m.sentinelize,o);return n}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(e,d){var a=function(i,j){return i+"lightbox-cell:"+j+":"};var h=function(j){var i=function(k){if(k.which===d.reorderer.keys.ENTER){var l=e("a",k.target);document.location=l.attr("href")}};e(j).keypress(i)};var c=function(n,p,l){var j=n.getElementsByTagName(p);var o=[];for(var m=0;m<j.length;m+=1){var k=j[m];var q=k.id;if(q&&q.match(l)){o.push(k)}}return o};var f=function(i,j){var k="^"+a(j,"[0-9]+")+"$";return function(){return c(i,"div",k)}};var b=function(i){while(i){if(i.nodeName.toLowerCase()==="form"){return i}i=i.parentNode}};var g=function(j){var i=b(j);return function(){var k,l;k=c(i,"input","^"+a(j.id,"[^:]*")+"reorder-index$");for(l=0;l<k.length;l+=1){k[l].value=l}if(i&&i.action){e.post(i.action,e(i).serialize(),function(n,o,m){})}}};d.defaults("fluid.reorderImages",{layoutHandler:"fluid.gridLayoutHandler",selectors:{imageTitle:".fl-reorderer-imageTitle"}});d.reorderImages=function(i,k){var l=d.initView("fluid.reorderImages",i,k);var m=d.unwrap(l.container);if(!l.options.afterMoveCallback){l.options.afterMoveCallback=g(m)}if(!l.options.selectors.movables){l.options.selectors.movables=f(m,m.id)}var j=d.reorderer(i,l.options);var n=j.locate("movables");d.transform(n,function(o){d.reorderImages.addAriaRoles(l.options.selectors.imageTitle,o)});d.tabindex(e("a",i),-1);h(i);return j};d.reorderImages.addAriaRoles=function(j,i){i=e(i);i.attr("role","img");var m=e(j,i);if(m[0]===i[0]||m[0]===document){d.fail("Could not locate cell title using selector "+j+" in context "+d.dumpEl(i))}var k=d.allocateSimpleId(m);i.attr("aria-labelledby",k);var l=e("img",i);l.attr("role","presentation");l.attr("alt","")};d.lightbox=d.reorderImages})(jQuery,fluid_1_0);
fluid_1_0=fluid_1_0||{};fluid.moduleLayout=fluid.moduleLayout||{};(function(c,b){var e=function(g,f){return b.find(f.columns,function(j,i){var h=c.inArray(g,j.elements);return h===-1?null:{columnIndex:i,itemIndex:h}},{columnIndex:-1,itemIndex:-1})};var a=function(g,f){return b.find(f.columns,function(i,h){return g===i.container?h:null},-1)};b.moduleLayout.updateLayout=function(i,k,g,h){i=b.unwrap(i);k=b.unwrap(k);var f=e(i,h);h.columns[f.columnIndex].elements.splice(f.itemIndex,1);var m;if(g===b.position.INSIDE){m=h.columns[a(k,h)].elements;m.splice(m.length,0,i)}else{var l=e(k,h);m=h.columns[l.columnIndex].elements;g=b.normalisePosition(g,f.columnIndex===l.columnIndex,l.itemIndex,f.itemIndex);var j=g===b.position.BEFORE?0:1;m.splice(l.itemIndex+j,0,i)}};b.moduleLayout.layoutFromFlat=function(f,h,g){var i={};i.container=f;i.columns=b.transform(h,function(j){return{container:j,elements:c.makeArray(g.filter(function(){return b.dom.isContainer(j,this)}))}});return i};b.moduleLayout.layoutFromIds=function(f){return{container:b.byId(f.id),columns:b.transform(f.columns,function(g){return{container:b.byId(g.id),elements:b.transform(g.children,b.byId)}})}};b.moduleLayout.layoutToIds=function(f){return{id:b.getId(f.container),columns:b.transform(f.columns,function(g){return{id:b.getId(g.container),children:b.transform(g.elements,b.getId)}})}};var d=function(g,f){if(f){var h=c(g).offset();f=c(f);f.css("position","absolute");f.css("top",h.top);f.css("left",h.left)}};b.defaults(true,"fluid.moduleLayoutHandler",{orientation:b.orientation.VERTICAL,containerRole:b.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});b.moduleLayoutHandler=function(g,n,j,h){var k={};function m(){var p;if(n.selectors.modules){p=b.moduleLayout.layoutFromFlat(g,h.locate("columns"),h.locate("modules"))}if(!p){var o=b.model.getBeanValue(n,"moduleLayout.layout");b.moduleLayout.layoutFromIds(o)}return p}var i=m();k.layout=i;function f(o){var p=n.selectors.lockedModules?h.fastLocate("lockedModules"):[];return c.inArray(o,p)!==-1}k.getRelativePosition=b.reorderer.relativeInfoGetter(n.orientation,b.reorderer.WRAP_LOCKED_STRATEGY,b.reorderer.GEOMETRIC_STRATEGY,j,h);k.getGeometricInfo=function(){var s=[];var r={extents:s,sentinelize:n.sentinelize};r.elementMapper=function(t){return f(t)?"locked":null};for(var o=0;o<i.columns.length;o++){var q=i.columns[o];var p={orientation:n.orientation,elements:c.makeArray(q.elements),parentElement:q.container};s.push(p)}return r};function l(o){return function(){var p=b.accumulate(i.columns,function(q,r){return r.concat(q.elements)},[]);if(!o){b.remove_if(p,f)}return p}}k.returnedOptions={selectors:{movables:l(false),dropTargets:l(false),selectables:l(true)},listeners:{onMove:function(o,p){b.moduleLayout.updateLayout(o,p.element,p.position,i)},onRefresh:function(){i=m();k.layout=i},"onShowKeyboardDropWarning.setPosition":d}};k.getModel=function(){return b.moduleLayout.layoutToIds(i)};return k}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(b,a){a.reorderLayout=function(c,f){var e={layoutHandler:"fluid.moduleLayoutHandler",selectors:{columns:".flc-reorderer-column",modules:".flc-reorderer-module"}};var d=b.extend(true,e,f);return a.reorderer(c,d)}})(jQuery,fluid_1_0);var whitespace="\n\r\t ";var closedTags={abbr:true,br:true,col:true,img:true,input:true,link:true,meta:true,param:true,hr:true,area:true,embed:true};XMLP=function(a){this.m_xml=a;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=[];this.m_attributes={};this.m_emitSynthetic=false};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infinite loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._checkStructure=function(c){var a=this.m_stack;if(XMLP._STATE_PROLOG==this.m_iState){this.m_iState=XMLP._STATE_DOCUMENT}if(XMLP._STATE_DOCUMENT===this.m_iState){if((XMLP._ELM_B==c)||(XMLP._ELM_EMP==c)){this.m_stack[a.length]=this.getName()}if((XMLP._ELM_E==c)||(XMLP._ELM_EMP==c)){if(a.length===0){return XMLP._NONE}var b=a[a.length-1];this.m_stack.length--;if(b===null||b!==this.getName()){return this._setErr(XMLP.ERR_ELM_NESTING)}}}return c};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){var d=this.m_iP;var a=this.m_xml;if(d===a.length){return XMLP._NONE}var e=a.charAt(d);if(e==="<"){var b=a.charAt(d+1);if(b==="?"){return this._parsePI(d+2)}else{if(b==="!"){if(d===a.indexOf("<!DOCTYPE",d)){return this._parseDTD(d+9)}else{if(d===a.indexOf("<!--",d)){return this._parseComment(d+4)}else{if(d===a.indexOf("<![CDATA[",d)){return this._parseCDATA(d+9)}}}}else{return this._parseElement(d+1)}}}else{return this._parseText(d)}};var nameRegex=/([^\s>]+)/g;var attrStartRegex=/\s*([\w:]+)/gm;var attrValRegex=/\"([^\"]*)\"\s*/gm;var attrValIERegex=/([^\>\s]+)\s*/gm;var closeRegex=/\s*<\//g;XMLP.prototype._parseElement=function(m){var j,d,g;var n,e,a;d=j=this.m_xml.indexOf(">",m);if(j==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(m)=="/"){n=XMLP._ELM_E;m++}else{n=XMLP._ELM_B}if(this.m_xml.charAt(j-1)=="/"){if(n==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}n=XMLP._ELM_EMP;d--}nameRegex.lastIndex=m;var k=nameRegex.exec(this.m_xml);if(!k){return this._setErr(XMLP.ERR_ELM_NAME)}e=k[1].toLowerCase();if("li"===e&&n!==XMLP._ELM_E&&this.m_stack.length>0&&this.m_stack[this.m_stack.length-1]==="li"&&!this.m_emitSynthetic){this.m_name="li";this.m_emitSynthetic=true;return XMLP._ELM_E}this.m_attributes={};this.m_cAlt="";if(nameRegex.lastIndex<d){this.m_iP=nameRegex.lastIndex;while(this.m_iP<d){attrStartRegex.lastIndex=this.m_iP;var c=attrStartRegex.exec(this.m_xml);if(!c){return this._setErr(XMLP.ERR_ATT_VALUES)}var h=c[1].toLowerCase();var l;if(this.m_xml.charCodeAt(attrStartRegex.lastIndex)===61){var b=this.m_xml.charCodeAt(attrStartRegex.lastIndex+1)===34?attrValRegex:attrValIERegex;b.lastIndex=attrStartRegex.lastIndex+1;c=b.exec(this.m_xml);if(!c){return this._setErr(XMLP.ERR_ATT_VALUES)}l=c[1]}else{l=h;b=attrStartRegex}if(!this.m_attributes[h]){this.m_attributes[h]=l}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=b.lastIndex}}if(e.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=e;this.m_iP=j+1;if(closedTags[e]){closeRegex.lastIndex=j+1;var f=closeRegex.exec;if(f){var i=this.m_xml.indexOf(e,f.lastIndex);if(i===f.lastIndex){return n}else{return XMLP._ELM_EMP}}}this.m_emitSynthetic=false;return n};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]>",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("-->",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,a-4,b+3);this.m_iP=b+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(b){var e,a,c,d;e=this.m_xml.indexOf(">",b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}c=this.m_xml.indexOf("[",b);a=((c!=-1)&&(c<e))?"]>":">";while(true){if(e==d){return this._setErr(XMLP.ERR_INFINITELOOP)}d=e;e=this.m_xml.indexOf(a,b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(e-1,e+2)!="]]>"){break}}this.m_iP=e+a.length;return XMLP._DTD};XMLP.prototype._parsePI=function(b){var e,a,d,f,c;e=this.m_xml.indexOf("?>",b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}a=SAXStrings.indexOfNonWhitespace(this.m_xml,b,e);if(a==-1){return this._setErr(XMLP.ERR_PI_TARGET)}d=SAXStrings.indexOfWhitespace(this.m_xml,a,e);if(d==-1){d=e}f=SAXStrings.indexOfNonWhitespace(this.m_xml,d,e);if(f==-1){f=e}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,f,e);if(c==-1){c=e-1}this.m_name=this.m_xml.substring(a,d);this._setContent(XMLP._CONT_XML,f,c+1);this.m_iP=e+2;return XMLP._PI};XMLP.prototype._parseText=function(a){var b=this.m_xml.indexOf("<",a);if(b==-1){b=this.m_xml.length}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b;return XMLP._TEXT};XMLP.prototype._setContent=function(b){var a=arguments;if(XMLP._CONT_XML==b){this.m_cAlt=null;
this.m_cB=a[1];this.m_cE=a[2]}else{this.m_cAlt=a[1];this.m_cB=0;this.m_cE=a[1].length}this.m_cSrc=b};XMLP.prototype._setErr=function(b){var a=XMLP._errs[b];this.m_cAlt=a;this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXStrings={};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(d,c){if(!d){return -1}c=c||d.length;var a=d.substring(0,c).split("\n");a.length--;var b=a.join("\n").length;return c-b};SAXStrings.getLineNumber=function(b,a){if(!b){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};SAXStrings.indexOfNonWhitespace=function(f,a,d){if(!f){return -1}a=a||0;d=d||f.length;for(var b=a;b<d;++b){var e=f.charAt(b);if(e!==" "&&e!=="\t"&&e!=="\n"&&e!=="\r"){return b}}return -1};SAXStrings.indexOfWhitespace=function(d,a,c){if(!d){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};SAXStrings.lastIndexOfNonWhitespace=function(d,a,c){if(!d){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.replace=function(e,a,d,c,b){if(!e){return""}a=a||0;d=d||e.length;return e.substring(a,d).split(c).join(b)};function __unescapeString(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}function __escapeString(e){var f=/&/g;var c=/</g;var a=/>/g;var b=/"/g;var d=/'/g;e=e.replace(f,"&amp;");e=e.replace(c,"&lt;");e=e.replace(a,"&gt;");e=e.replace(b,"&quot;");e=e.replace(d,"&apos;");return e}fluid_1_0=fluid_1_0||{};(function(w,s){var C;var u;var K;var G=0;var r=0;var m=false;var f=-1;var e=-1;var H;var M=false;var k=[];var h=[];function I(P,t,O){C.rootlump=s.XMLLump(0,-1);K=[C.rootlump];G=0;r=0;m=false;f=-1;e=-1;H=P;M=t;k=O;if(k){for(var N=0;N<k.length;++N){h[N]=[];k[N].tree=s.parseSelector(k[N].selector)}}}function v(){for(var t=K.length-1;t>=0;--t){var N=K[t];if(N.rsfID!==undefined){return N}}return C.rootlump}function A(){var t=s.XMLLump(G,r);if(M){t.line=u.getLineNumber();t.column=u.getColumnNumber()}C.lumps[G]=t;++G;return t}function n(N,t,O){var P=N[t];if(!P){P=[];N[t]=P}P[P.length]=O}function g(t,N){if(t.indexOf("scr=contribute-")!==-1){var O=t.substring("scr=contribute-".length);n(C.collectmap,O,N)}}var z=function(P){var Q=z.options,O=Q.parser[Q.strictMode?"strict":"loose"].exec(P);for(var t=0,N={};t<14;t++){N[Q.key[t]]=O[t]||""}N[Q.q.name]={};N[Q.key[12]].replace(Q.q.parser,function(S,R,T){if(R){N[Q.q.name][R]=T}});return N};z.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function c(N){var t=z(N);if(t.protocol||N.charAt(0)==="/"){return N}else{return H+N}}s.debugLump=function(N){var t=N.text;t+=" at ";t+="lump line "+N.line+" column "+N.column+" index "+N.lumpindex;t+=parent.href==null?"":" in file "+parent.href;return t};function F(t){return"<"+t.tagname+">"}function q(N,t){if(!t){return false}return(" "+t+" ").indexOf(" "+N+" ")!==-1}function p(O,P){if(O.predList){for(var N=0;N<O.predList.length;++N){var t=O.predList[N];if(t.id&&P.attributemap.id!==t.id){return false}if(t.clazz&&!q(t.clazz,P.attributemap["class"])){return false}if(t.tag&&P.tagname!==t.tag){return false}}return true}}function E(T){var Q=undefined;if(k){for(var O=0;O<k.length;++O){var R=k[O];var S=h[O];var t=S.length;if(t<R.tree.length){var N=R.tree[t];if(t>0){if(R.tree[t-1].child&&S[t-1]!==T.nestingdepth-1){continue}}var P=p(N,T);if(P){S[S.length]=T.nestingdepth;if(S.length===R.tree.length){if(Q!==undefined){s.fail("Cutpoint specification error - node "+F(T)+" has already matched with rsf:id of "+Q)}if(R.id===undefined||R.id===null){s.fail("Error in cutpoints list - entry at position "+O+" does not have an id set")}Q=R.id}}}}}return Q}function y(){if(k){for(var t=0;t<k.length;++t){var N=h[t];if(N.length>0&&N[N.length-1]===r){N.length--}}}}function a(U,Y){++r;if(m){m=false;var Q=A();Q.nestingdepth--}if(C.firstdocumentindex===-1){C.firstdocumentindex=G}var T=A();var t=K[K.length-1];T.uplump=t;var W=u.getName();T.tagname=W;var X=T.attributemap=u.m_attributes;var V=X[s.ID_ATTRIBUTE];if(V===undefined){V=E(T)}for(var P in X){var S=X[P];if(/href|src|codebase|action/.test(P)){S=c(S);X[P]=S}else{if(V===undefined&&/for|headers/.test(P)){V=X[s.ID_ATTRIBUTE]="scr=null"}}}if(V){g(V,T);T.rsfID=V;var O=v();if(!O.downmap){O.downmap={}}n(O.downmap,V,T);n(C.globalmap,V,T);var N=V.indexOf(":");if(N!==-1){var R=V.substring(0,N);if(!t.finallump){t.finallump={}}t.finallump[R]=T}}T.text="<"+W+s.dumpAttributes(X)+">";K[K.length]=T;if(U){o()}}function o(){y();var t=A();--r;t.text="</"+u.getName()+">";var N=K[K.length-1];N.close_tag=C.lumps[G-1];K.length--;m=true}function i(){if(f!==-1){if(C.firstdocumentindex===-1){C.firstdocumentindex=G}var N=u.getContent().substr(f,e-f);m=false;var t=A();t.text=N;f=-1}}s.ID_ATTRIBUTE="rsf:id";s.getPrefix=function(N){var t=N.indexOf(":");return t===-1?N:N.substring(0,t)};s.SplitID=function(O){var N={};var t=O.indexOf(":");if(t===-1){N.prefix=O}else{N.prefix=O.substring(0,t);N.suffix=O.substring(t+1)}return N};s.XMLLump=function(N,t){return{nestingdepth:t,lumpindex:N,parent:C}};s.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}};s.fetchResources=function(P,T){var N=function(U){return{success:function(V){U.resourceText=V;U.resourceKey=U.href;U.queued=false;s.fetchResources(P,T)},error:function(V,X,W){U.fetchError={status:V.status,textStatus:X,errorThrown:W}}}};var t=true;for(var Q in P){var O=P[Q];if(O.href&&!O.resourceText){if(!O.queued){var S=N(O);w.ajax({url:O.href,success:S.success,error:S.error});O.queued=true}t=false}else{if(O.nodeId&&!O.resourceText){var R=document.getElementById(O.nodeId);O.resourceText=s.dom.getElementText(R);O.resourceKey=O.nodeId}}}if(t){T(P)}};s.XMLEncode=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};s.dumpAttributes=function(t){var N="";for(var O in t){N+=" "+O+'="'+t[O]+'"'}return N};s.aggregateMMap=function(P,O){for(var t in O){var N=P[t];if(!N){P[t]=[]}P[t]=P[t].concat(O[t])}};var D=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;s.unescapeProperties=function(N){N=N.replace(D,function(R){var S=R.substring(2);var Q=parseInt(S,16);return String.fromCharCode(Q)});var P=0;while(true){var t=N.indexOf("\\",P);if(t===-1){break}if(t===N.length-1){return[N.substring(0,N.length-1),true]}var O=N.charAt(t+1);if(O==="n"){O="\n"}if(O==="r"){O="\r"}if(O==="t"){O="\t"}N=N.substring(0,t)+O+N.substring(t+2);P=t+1}return[N,false]};var B=/[^\\][\s:=]/;s.parseJavaProperties=function(S){var N={};S=S.replace(/\r\n/g,"\n");S=S.replace(/\r/g,"\n");lines=S.split("\n");var T,R,t,V,Q;for(var O=0;O<lines.length;++O){var U=w.trim(lines[O]);if(!U||U.charAt(0)==="#"||U.charAt(0)==="!"){continue}if(!T){t="";var P=U.search(B);if(P===-1){R=U;V=""}else{R=w.trim(U.substring(0,P+1));V=w.trim(U.substring(P+2));if(V.charAt(0)===":"||V.charAt(0)==="="){V=w.trim(V.substring(1))}}R=s.unescapeProperties(R)[0];Q=s.unescapeProperties(V)}else{Q=s.unescapeProperties(U)}T=Q[1];if(!Q[1]){N[R]=t+Q[0]}else{t+=Q[0]}}return N};s.parseTemplates=function(Q,S,t){var O=[];O.globalmap={};for(var R=0;R<S.length;++R){var P=Q[S[R]];var T=P.href.lastIndexOf("/");var N=T===-1?"":P.href.substring(0,T+1);var U=s.parseTemplate(P.resourceText,N,t.scanStart&&R===0,P.cutpoints,t);if(R===0){s.aggregateMMap(O.globalmap,U.globalmap)}U.href=P.href;U.baseURL=N;U.resourceKey=P.resourceKey;O[R]=U;s.aggregateMMap(O.globalmap,U.rootlump.downmap)}return O};s.parseTemplate=function(T,P,R,Q,t){C=s.XMLViewTemplate();t=t||{};I(P,t.debugMode,Q);var S=T.indexOf(s.ID_ATTRIBUTE);if(R){var N=T.indexOf(">",S);u=new XMLP(T.substring(N+1))}else{u=new XMLP(T)}parseloop:while(true){var O=u.next();switch(O){case XMLP._ELM_B:i();a(false,"");break;case XMLP._ELM_E:i();o();break;case XMLP._ELM_EMP:i();a(true,"");break;case XMLP._PI:case XMLP._DTD:f=-1;continue;case XMLP._TEXT:case XMLP._ENTITY:case XMLP._CDATA:case XMLP._COMMENT:if(f===-1){f=u.m_cB}e=u.m_cE;break;case XMLP._ERROR:s.setLogging(true);var U="Error parsing template: "+u.m_cAlt+" at line "+u.getLineNumber();s.log(U);s.log("Just read: "+u.m_xml.substring(u.m_iP-30,u.m_iP));s.log("Still to read: "+u.m_xml.substring(u.m_iP,u.m_iP+30));s.fail(U);break parseloop;case XMLP._NONE:break parseloop}}return C};var L="(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";var J=new RegExp("^>\\s*("+L+"+)");var x=new RegExp("^("+L+"+)(#)("+L+"+)");var l=new RegExp("^s*([#.]?)("+L+"*)");var b=new RegExp("([#.]?)("+L+"+)","g");var d=new RegExp("\\s*(>)?\\s*","g");var j=new RegExp("^\\w*$");s.parseSelector=function(S){var N=[];S=w.trim(S);b.lastIndex=0;var R=0;while(true){var P=[];while(true){var V=b.exec(S);if(!V||V.index!==R){break}var Q={};var U=V[2];if(V[1]===""){Q.tag=U}else{if(V[1]==="#"){Q.id=U}else{if(V[1]==="."){Q.clazz=U}}}P[P.length]=Q;R=b.lastIndex}d.lastIndex=R;var t={predList:P};var O=d.exec(S);if(!O||O.index!==R){var T=S.substring(R);s.fail("Error in selector string - can not match child selector expression at "+T)}if(O[1]===">"){t.child=true}N[N.length]=t;if(d.lastIndex>=S.length){break}R=d.lastIndex;b.lastIndex=d.lastIndex}return N}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(O,L){function X(au){return"as child of "+(au.parent.fullID?"component with full ID "+au.parent.fullID:"root")}function Q(ax){var az="";var av=ax;if(ax.children===undefined){az=ax.ID+(ax.localID!==undefined?ax.localID:"");av=ax.parent}while(av.parent){var ay=av.parent;if(av.fullID!==undefined){az=av.fullID+az;
return az}if(av.noID===undefined){var au=av.ID;if(au===undefined){L.fail("Error in component tree - component found with no ID "+X(ay)+": please check structure")}var aw=au.indexOf(":");var aA=aw===-1?au:au.substring(0,aw);az=aA+":"+(av.localID===undefined?"":av.localID)+":"+az}av=ay}return az}function U(au){return L.isPrimitive(au)||au instanceof Array&&(au.length===0||typeof(au[0])==="string")}function ab(aw,av){if(U(aw)){return{componentType:"UIBound",value:aw,ID:av}}else{var au=K(aw);if(au.ID){return{ID:av,componentType:"UIContainer",children:[au]}}else{au.ID=av;return au}}}function u(aw){if(!(aw instanceof Array)){var ax=[];for(var av in aw){var ay=aw[av];if(ay instanceof Array){for(var au=0;au<ay.length;++au){var az=ab(ay[au],av);ax[ax.length]=az}}else{ax[ax.length]=ab(ay,av)}}return ax}else{return aw}}function ao(au,av){if(au.value===undefined&&au.valuebinding!==undefined){if(!av){L.fail("Cannot perform value fixup for valuebinding "+au.valuebinding+" since no model was supplied to rendering")}au.value=L.model.getBeanValue(av,au.valuebinding)}}function ak(av,aw,au){if(av[aw]!==undefined){if(U(av[aw])){av[aw]={value:av[aw]}}}else{av[aw]={value:null}}ao(av[aw],au)}var V={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};function K(ax,aw){if(ax){for(var ay in V){if(ax[ay]!==undefined){ax.componentType=V[ay];break}}if(ax.componentType===undefined&&ax.ID!==undefined){ax.componentType="UIBound"}}if(!ax||ax.componentType===undefined){var av=ax.decorators;if(av){delete ax.decorators}ax={componentType:"UIContainer",children:ax};ax.decorators=av}var au=ax.componentType;if(au==="UIContainer"){ax.children=u(ax.children)}else{if(au==="UISelect"){ak(ax,"selection",aw);ak(ax,"optionlist",aw);ak(ax,"optionnames",aw)}else{if(au==="UILink"){ak(ax,"target",aw);ak(ax,"linktext",aw)}}}return ax}function k(av,au){if(av.submittingname===undefined&&av.willinput!==false){av.submittingname=au?au:av.fullID}return av.submittingname}function aq(aD,aA){if(aD.componentType===undefined){aD=K(aD,aA)}if(aD.componentType!=="UIContainer"&&!aD.parent){aD={children:[aD]}}if(aD.children){aD.childmap={};for(var az=0;az<aD.children.length;++az){var av=aD.children[az];if(av.componentType===undefined){av=K(av,aA);aD.children[az]=av}av.parent=aD;if(av.ID===undefined){L.fail("Error in component tree: component found with no ID "+X(av))}aD.childmap[av.ID]=av;var ax=av.ID.indexOf(":");if(ax===-1){}else{var aB=av.ID.substring(0,ax);var au=aD.childmap[aB];if(!au){au=[];aD.childmap[aB]=au}if(av.localID===undefined&&au.length!==0){av.localID=au.length}au[au.length]=av}av.fullID=Q(av);var aw=av.componentType;if(aw=="UISelect"){av.selection.fullID=av.fullID+"-selection"}else{if(aw=="UIInitBlock"){var aC=av.functionname+"(";for(var ay=0;ay<av.arguments.length;++ay){if(av.arguments[ay] instanceof L.ComponentReference){av.arguments[ay]=av.parent.fullID+av.arguments[ay].reference}aC+='"'+av.arguments[ay]+'"';if(ay<av.arguments.length-1){aC+=", "}}av.markup=aC+")\n";av.componentType="UIVerbatim"}else{if(aw=="UIBound"){ao(av,aA)}}}aq(av,aA)}}return aD}var J={};var ai={};var aa={};var y={};var z={};var Z="";var at=false;var o={};var G={};var T=[];var q={};function an(av,au,aw){return av.resourceKey+au.fullID+aw}function x(az,au,aw,aB){var aA;var ay=aw?aw[az]:null;if(ay){for(var av=0;av<ay.length;++av){var ax=ay[av];if(!aA&&ax.rsfID==au){aA=ax}if(ax.rsfID==az){return ax}}}return aA}function aj(ax,az){var ay=az.jointID?az.jointID:az.ID;var aw=L.SplitID(ay);var au=aw.prefix+":";var av=x(ay,au,ax.downmap,az);if(av){return av}if(az.children){av=x(ay,au,J,az);if(av){return av}}return null}function v(au){if(!y[au.href]){L.aggregateMMap(z,au.collectmap);y[au.href]=true}}function B(az,aw){for(var ax=0;ax<az.children.length;++ax){var aA=az.children[ax];if(aA.children){var aC=aj(aw,aA);if(aC){ai[aA.fullID]=aC;var au=aC.attributemap.id;if(au!==undefined){aa[an(aw.parent,az,au)]=aA.fullID}v(aC.parent);B(aA,aC)}}}if(aw.downmap){for(var au in aw.downmap){var aB=aw.downmap[au];for(var ax=0;ax<aB.length;++ax){var ay=aB[ax];var aD=ay.attributemap.id;if(aD!==undefined&&ay.rsfID!==undefined){var aC=ae(az,ay.rsfID);if(aC!==null){var av=aC.fullID;if(aC.componentType==="UISelect"){av=av+"-selection"}aa[an(aw.parent,az,aD)]=av}}}}}}function w(aw,av,au){ai={};aa={};y={};z={};J=aw;ai[av.fullID]=au;B(av,au)}function H(aw,au){var av={};O.extend(true,av,au.attributemap);n(av,aw);r(aw,av);Z+="<"+au.tagname+" ";Z+=L.dumpAttributes(av);Z+=">"}function m(av,ax,au){for(;ax<au;++ax){var aw=av[ax].text;if(aw){Z+=av[ax].text}}}function I(aw,az,au,ay,av){var aA=az;while(true){if(az===aw.length){break}var ax=aw[az];if(ax.nestingdepth<au){break}if(ax.rsfID!==undefined){if(!av){break}if(av&&ax.nestingdepth>au+(ay?0:1)){L.log("Error in component tree - leaf component found to contain further components - at "+ax.toString())}else{break}}++az}if(!ay&&(az==aw.length||!aw[az].rsfID)){--az}m(aw,aA,az);return az}var s={};function g(){if(!s.iselide){Z+="<"+s.uselump.tagname}}function ah(){if(!s.iselide){Z+="</"+s.uselump.tagname+">"}}function N(){m(s.uselump.parent.lumps,s.uselump.lumpindex+1,s.close.lumpindex+(s.iselide?0:1))}function W(){if(!s.iselide){Z+=L.dumpAttributes(s.attrcopy)}S()}function af(){if(s.iselide){W()}else{Z+=L.dumpAttributes(s.attrcopy);Z+=">";s.nextpos=s.endopen.lumpindex}}function S(){if(s.endopen.lumpindex===s.close.lumpindex){if(!s.iselide){Z+="/>"}}else{if(!s.iselide){Z+=">"}m(s.uselump.parent.lumps,s.endopen.lumpindex,s.close.lumpindex+(s.iselide?0:1))}}function P(au){if(f(au)){ap(au)}else{W()}}function am(au){if(s.iselide){P(s.value)}else{if(f(au)){ap(au)}else{af()}}}function ap(au){Z+=L.dumpAttributes(s.attrcopy);if(!s.iselide){Z+=">"}Z+=L.XMLEncode(au.toString());ah()}function f(au){return au!==null&&au!==undefined&&!e(au)}function e(au){return false}function ad(av,au){return au}function al(aw){Z+='<input type="hidden" ';var av=aw.virtual;var au={};au[av?"id":"name"]=aw.name;au.value=aw.value;Z+=L.dumpAttributes(au);Z+=" />\n"}function b(au,av){var az=s.uselump.tagname;var ax=G.applier;function ay(){L.applyChange(L.byId(av),undefined,ax)}if(G.autoBind&&(az==="input"||az==="select")&&!q[av]){var aw=[{jQuery:["change",ay]}];if(O.browser.msie&&az==="input"&&/radio|checkbox/.test(s.attrcopy.type)){aw.push({jQuery:["click",ay]})}D(au,aw,s.attrcopy,av)}}function t(au,aw){if(au){var av=aw?aw:au;if(o&&av.submittingname&&av.valuebinding){o[av.submittingname]={name:av.submittingname,EL:av.valuebinding,oldvalue:av.value};b(au,au.fullID)}if(au.fossilizedbinding){al(au.fossilizedbinding)}if(au.fossilizedshaper){al(au.fossilizedshaper)}}}function l(au){if(!q[au.selection.fullID]){q[au.selection.fullID]=true;t(au.selection);t(au.optionlist);t(au.optionnames)}}L.NULL_STRING="\u25a9null\u25a9";var Y={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};function F(au,aw){var av=au.selection;return av.value&&typeof(av.value)!=="string"&&typeof(av.value.length)==="number"?O.inArray(aw,av.value,aw)!==-1:av.value===aw}function ac(au,av){au=au.parent;if(av.indexOf("..::")===0){av=av.substring(4);au=au.parent}return au.childmap[av]}function ag(av){var ax=[];for(var aw in av){if(aw==="$"){aw="jQuery"}var ay=av[aw];var au={type:aw};if(aw==="jQuery"){au.func=ay[0];au.args=ay.slice(1)}else{if(aw==="addClass"){au.classes=ay}else{if(aw==="attrs"){au.attributes=ay}else{if(aw==="identify"){au.key=ay}}}}ax[ax.length]=au}return ax}function D(ay,aD,av,aA){G.idMap=G.idMap||{};for(var ax=0;ax<aD.length;++ax){var aw=aD[ax];var az=aw.type;if(!az){var aB=ag(aw);D(ay,aB,av,aA);continue}if(az==="$"){az=aw.type="jQuery"}if(az==="jQuery"||az==="event"){var au=n(av,ay,true,aA);var aC=O.extend(true,{id:au},aw);T[T.length]=aC}else{if(az==="attrs"){O.extend(true,av,aw.attributes)}else{if(az==="addClass"){var aE={nodeType:1,className:av["class"]||""};O(aE).addClass(aw.classes);av["class"]=aE.className}else{if(az==="identify"){var au=n(av,ay,true,aA);G.idMap[aw.key]=au}}}}}}function r(au,av){if(!au.decorators){return}if(au.decorators.length===undefined){au.decorators=ag(au.decorators)}D(au,au.decorators,av)}function A(aH){var az=s.attrcopy;var au=s.uselump.parent.lumps;var aB=s.uselump.lumpindex;var aF=aH.componentType;var aK=s.uselump.tagname;r(aH,az);if(aF==="UIMessage"){aF="UIBound";if(!G.messageLocator){aH.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}else{aH.value=G.messageLocator(aH.messagekey,aH.args)}}function aw(aO,aP){L.fail("Error in component tree - UISelectChoice with id "+aO.fullID+aP)}if(aF==="UIBound"||aF==="UISelectChoice"){var aC;if(aH.choiceindex!==undefined){if(aH.parentFullID){aC=getAbsoluteComponent(view,aH.parentFullID);if(!aC){aw(aH," has parentFullID of "+aH.parentFullID+" which cannot be resolved")}}else{if(aH.parentRelativeID!==undefined){aC=ac(aH,aH.parentRelativeID);if(!aC){aw(aH," has parentRelativeID of "+aH.parentRelativeID+" which cannot be resolved")}}else{aw(aH," does not have either parentFullID or parentRelativeID set")}}k(aC.selection);l(aC)}var ay=aC?aC.selection.submittingname:aH.submittingname;if(aK==="input"||aK==="textarea"){if(!aC){ay=k(aH)}if(ay!==undefined){az.name=ay}}t(aH,aC?aC.selection:null);if(typeof(aH.value)==="boolean"||az.type==="radio"||az.type==="checkbox"){var aA;var aJ=aH.value;if(aH.choiceindex!==undefined){if(!aC.optionlist.value){L.fail("Error in component tree - selection control with full ID "+aC.fullID+" has no values")}aA=aC.optionlist.value[aH.choiceindex];aJ=F(aC,aA)}if(f(aJ)){if(aJ){az.checked="checked"}else{delete az.checked}}az.value=aA?aA:"true";P(null)}else{if(aH.value instanceof Array){N()}else{var aG=aC?aC[aK==="textarea"||aK==="input"?"optionlist":"optionnames"].value[aH.choiceindex]:aH.value;if(aK==="textarea"){if(e(aG)&&aH.willinput){aG=""}P(aG)}else{if(aK==="input"){if(aH.willinput||f(aG)){az.value=aG
}P(null)}else{delete az.name;am(aG)}}}}}else{if(aF==="UISelect"){b(aH,aH.selection.fullID);var aN=aK==="select";var ax=false;if(aH.selection.value instanceof Array){ax=true;if(aN){az.multiple="multiple"}}k(aH.selection,az.id);if(aN){if(aH.selection.willinput!==false){az.name=aH.selection.submittingname}}Z+=L.dumpAttributes(az);if(aN){Z+=">";var av=aH.optionlist.value;var aE=aH.optionnames===null||aH.optionnames===undefined||!aH.optionnames.value?av:aH.optionnames.value;if(!aE||!aE.length){L.fail("Error in component tree - UISelect component with fullID "+aH.fullID+" does not have optionnames set")}for(var aI=0;aI<aE.length;++aI){Z+='<option value="';var aG=av[aI];if(aG===null){aG=L.NULL_STRING}Z+=L.XMLEncode(aG);if(F(aH,aG)){Z+='" selected="selected'}Z+='">';Z+=L.XMLEncode(aE[aI]);Z+="</option>\n"}ah()}else{S()}l(aH)}else{if(aF==="UILink"){var aD=Y[aK];if(aD){var aM=aH.target.value;if(!f(aM)){aM=az[attname]}else{aM=ad(s.uselump.parent,aM)}az[aD]=aM}var aG=aH.linktext.value;if(!f(aG)){af()}else{P(aG)}}else{if(aH.markup!==undefined){var aL=aH.markup;if(aL===null){Z+=L.dumpAttributes(az);Z+=">";N()}else{if(!s.iselide){Z+=L.dumpAttributes(az);Z+=">"}Z+=aL;ah()}}else{}}}}}function n(ax,aw,av,az){if(!av){delete ax["rsf:id"]}if(az!==undefined){ax.id=az}else{if(ax.id||av){ax.id=aw.fullID}}var ay=1;var au=ax.id;while(G.document.getElementById(ax.id)){ax.id=au+"-"+(ay++)}return ax.id}function d(au){var ay;var aw=s.attrcopy["for"];if(aw!==undefined){ay="for"}else{aw=s.attrcopy.headers;if(aw!==undefined){ay="headers"}}if(!ay){return}var ax=s.uselump.tagname;if(ay==="for"&&ax!=="label"){return}if(ay==="headers"&&ax!=="td"&&ax!=="th"){return}var av=aa[an(s.uselump.parent,au,aw)];if(av!==undefined){s.attrcopy[ay]=av}}function R(au){Z+=("<!-- "+L.XMLEncode(au)+"-->")}function h(au){Z+='<span style="background-color:#FF466B;color:white;padding:1px;">';Z+=au;Z+="</span><br/>"}function E(au){var av=au.fullID;return !av?"component tree root":"full path "+av}function p(av,aE,aA){var aC=aA.lumpindex;var aI=aA.parent.lumps;var aB=-1;var aD=aI[aC+1];var au=aA.close_tag;aB=au.lumpindex+1;var az=aA.downmap?aA.downmap["payload-component"]:null;var aH=az?az[0]:null;var aG=aA.rsfID.charCodeAt(0)===126;var ay=aD;var aJ=au;var ax=aA;var aw={};O.extend(true,aw,(aH===null?aA:aH).attributemap);s.attrcopy=aw;s.uselump=ax;s.endopen=ay;s.close=aJ;s.nextpos=aB;s.iselide=aG;d(av);if(aE===null){if(aA.rsfID.indexOf("scr=")===(aG?1:0)){var aF=aA.rsfID.substring(4+(aG?1:0));if(aF==="ignore"){aB=s.close.lumpindex+1}else{g();af();aB=s.endopen.lumpindex}}}else{if(aH){s.endopen=aI[aH.lumpindex+1];s.close=aH.close_tag;s.uselump=aH;m(aI,aC,aH.lumpindex);aC=aH.lumpindex}n(aw,aE);g();A(aE);if(aH!==null){if(s.nextpos===aB){m(aI,s.close.lumpindex+1,au.lumpindex+1)}}aB=s.nextpos}return aB}function j(ax,au){var aw=au.parent;var av=aw.lumps[au.lumpindex+1];if(ax.children!==undefined){H(ax,au)}else{p(ax.parent,ax,au)}M(ax,au,av)}function ae(ax,ay,aw){if(ay.indexOf("msg=")===0){var au=ay.substring(4);return{componentType:"UIMessage",messagekey:au}}while(ax){var av=ax.childmap[ay];if(av){return av}ax=ax.parent}return null}function ar(av,aw){var au;while(av){au=av.childmap[aw];if(au){break}av=av.parent}return au}function C(aw,ax){var av=L.SplitID(ax.ID);var au=aw.downmap[ax.ID];if(au===null){au=aw.downmap[av.prefix+":"]}return au===null?null:au[0]}function M(az,aO,aF){var aI=aF.lumpindex;var aL=aO.nestingdepth;var aA=aO.parent;if(at){var aM={}}while(true){aI=I(aA.lumps,aI,aL,true,false);if(aI===aA.lumps.length){break}var aD=aA.lumps[aI];if(aD.nestingdepth<aL){break}var aE=aD.rsfID;if(aE.charCodeAt(0)===126){aE=aE.substring(1)}if(aE.indexOf(":")!==-1){var aG=L.getPrefix(aE);var au=ar(az,aG);var aw=aD.uplump.finallump[aG];var ax=aw.close_tag;if(au){for(var aH=0;aH<au.length;++aH){var av=au[aH];if(av.children){var aJ=ai[av.fullID];if(aJ){if(at){R("Branching for "+av.fullID+" from "+L.debugLump(aD)+" to "+L.debugLump(aJ))}j(av,aJ);if(at){R("Branch returned for "+av.fullID+L.debugLump(aD)+" to "+L.debugLump(aJ))}}else{if(at){h("No matching template branch found for branch container with full ID "+av.fullID+" rendering from parent template branch "+L.debugLump(aF))}}}else{var aJ=C(aO,av);if(!aJ){if(at){h("Repetitive leaf with full ID "+av.fullID+" could not be rendered from parent template branch "+L.debugLump(aF))}continue}var aK=p(az,av,aJ);var aC=aK<aA.lumps.lengtn&&aA.lumps[aK].nestingdepth>=aJ.nestingdepth;var ay=av.children?av:az;if(aC){M(ay,aJ,aA.lumps[aK]);aK=aJ.close_tag.lumpindex+1}if(aH!==au.length-1){if(aK<ax.lumpindex){I(aA.lumps,aK,aJ.nestingdepth-1,false,false)}}else{I(aA.lumps,aK,aJ.nestingdepth,true,false)}}}}else{if(at){h("No branch container with prefix "+aG+": found in container "+E(az)+" rendering at template position "+L.debugLump(aF)+", skipping")}}aI=ax.lumpindex+1;if(at){R("Stack returned from branch for ID "+aE+" to "+L.debugLump(aF)+": skipping from "+L.debugLump(aD)+" to "+L.debugLump(ax))}}else{var aB;if(aE){if(at){aM[aE]=true}aB=ae(az,aE,aD)}if(aB&&aB.children!==undefined){j(aB);aI=aD.close_tag.lumpindex+1}else{aI=p(az,aB,aD)}}if(aI===aA.lumps.length){break}}if(at){var au=az.children;for(var aN=0;aN<au.length;++aN){var av=au[aN];if(!(av.ID.indexOf(":")!==-1)&&!aM[av.ID]){h("Leaf child component "+av.componentType+" with full ID "+av.fullID+" could not be found within template "+L.debugLump(aF))}}}}function c(au){m(au.parent.lumps,au.lumpindex,au.close_tag.lumpindex+1)}function a(){for(var aw in z){var au=z[aw];for(var av=0;av<au.length;++av){c(au[av])}}}function i(){for(var aw=0;aw<T.length;++aw){var au=T[aw];var ax=L.byId(au.id);if(!ax){L.fail("Error during rendering - component with id "+au.id+" which has a queued decorator was not found in the output markup")}if(au.type==="jQuery"){var av=O(ax);av[au.func].apply(av,O.makeArray(au.args))}else{if(au.type==="event"){ax[au.event]=au.handler}}}}L.ComponentReference=function(au){this.reference=au};L.explode=function(ax,au){var aw=[];for(var av in ax){var ay=au===undefined?av:au+"."+av;aw[aw.length]={ID:av,value:ax[av],valuebinding:ay}}return aw};L.explodeSelectionToInputs=function(au,av){return L.transform(au,function(ax,aw){return{ID:av.rowID,children:[{ID:av.inputID,parentRelativeID:"..::"+av.selectID,choiceindex:aw},{ID:av.labelID,parentRelativeID:"..::"+av.selectID,choiceindex:aw}]}})};L.resolveMessageSource=function(au){if(au.type==="data"){if(au.url===undefined){return L.messageLocator(au.messages)}else{}}};L.makeBranches=function(){var ax;var av;for(var au=0;au<arguments.length;++au){var aw=arguments[au];var ay;if(typeof(aw)==="string"){ay={ID:aw}}else{if(aw instanceof Array){ay={ID:aw[0],jointID:aw[1]}}else{O.extend(true,av,aw);ay=av}}if(av&&ay!==av){if(!av.children){av.children=[]}av.children[av.children.length]=ay}av=ay;if(!ax){ax=ay}}return ax};L.renderTemplates=function(ax,au,av,aw){av=av||{};au=au||{};at=av.debugMode;if(!av.messageLocator&&av.messageSource){av.messageLocator=L.resolveMessageSource(av.messageSource)}av.document=av.document||document;o=aw;T=[];au=aq(au,av.model);var ay=ax[0];w(ax.globalmap,au,ay.rootlump);Z="";q={};G=av;a();M(au,ay.rootlump,ay.lumps[ay.firstdocumentindex]);return Z};L.reRender=function(aw,ay,au,av){av=av||{};ay=L.unwrap(ay);if(O.browser.msie){O(ay).empty()}else{ay.innerHTML=""}var ax={};var az=L.renderTemplates(aw,au,av,ax);if(av.renderRaw){az=L.XMLEncode(az);az=az.replace(/\n/g,"<br/>")}if(av.model){L.bindFossils(ay,av.model,ax)}if(O.browser.msie){O(ay).html(az)}else{ay.innerHTML=az}i();return aw};L.selfRender=function(ay,au,aw){aw=aw||{};ay=L.unwrap(ay);var av={base:{resourceText:ay.innerHTML,href:".",resourceKey:".",cutpoints:aw.cutpoints}};var ax=L.parseTemplates(av,["base"],aw);return L.reRender(ax,ay,au,aw)}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(d,b){var f=function(h){var g=d("<a name='"+h.text()+"' />",h[0].ownerDocument);h.before(g)};var e=function(h){var g={ID:h,children:[]};return g};var a=function(k,j){var i=function(m,l,s){if(l.length===0){return}var p=l[0];if(s===p.level){m[m.length-1].push(p.leaf);l.shift();return i(m,l,s)}if(s<p.level){var q=s>-1?"level"+(s+1)+":":"";var r=s===-1?"s:":"s";var n=q+"level"+(s+2)+r;var o=e(n);m[m.length-1].push(o);m.push(o.children);return i(m,l,s+1)}if(s>p.level){m.pop();return i(m,l,s-1)}};var g={children:[]};var h=b.transform(k,function(l){var n=d.inArray(l.tagName,j);var m=d(l).text();return{level:n,leaf:{ID:"level"+(n+1)+":item",children:[{ID:"link",linktext:m,target:"#"+m}]}}});i([g.children],h,-1);return g};var c=function(g,k,h,j,l){k.each(function(m,n){f(d(n))});var i={toc:{href:j}};b.fetchResources(i,function(){var m=b.parseTemplates(i,["toc"],{});var n=d("<div></div>",g[0].ownerDocument);b.reRender(m,n,a(k,h),{});g.prepend(n);l.fire(n)})};b.tableOfContents=function(g,h){var i=b.initView("fluid.tableOfContents",g,h);i.events.afterRender.addListener(function(j){i.tocNode=d(j)});c(i.container,i.locate("headings"),i.options.levels,i.options.templateUrl,i.events.afterRender);i.hide=function(){if(i.tocNode){i.tocNode.hide()}};i.show=function(){if(i.tocNode){i.tocNode.show()}};return i};b.defaults("fluid.tableOfContents",{selectors:{headings:":header"},events:{afterRender:null},templateUrl:"../html/TableOfContents.html",levels:["H1","H2","H3","H4","H5","H6"]})})(jQuery,fluid_1_0);(function(e){var b={},k,m,o,j=e.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),a=false;e.tooltip={blocked:false,defaults:{delay:200,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){e.tooltip.blocked=!e.tooltip.blocked}};e.fn.extend({tooltip:function(p){p=e.extend({},e.tooltip.defaults,p);h(p);return this.each(function(){e.data(this,"tooltip-settings",p);this.tooltipText=this.title;e(this).removeAttr("title");this.alt=""}).hover(l,f).click(f)},fixPNG:j?function(){return this.each(function(){var p=e(this).css("backgroundImage");if(p.match(/^url\(["']?(.*\.png)["']?\)$/i)){p=RegExp.$1;e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+p+"')"}).each(function(){var q=e(this).css("position");
if(q!="absolute"&&q!="relative"){e(this).css("position","relative")}})}})}:function(){return this},unfixPNG:j?function(){return this.each(function(){e(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){e(this)[e(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function h(p){if(b.parent){return}b.parent=e('<div id="'+p.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(e.fn.bgiframe){b.parent.bgiframe()}b.title=e("h3",b.parent);b.body=e("div.body",b.parent);b.url=e("div.url",b.parent)}function c(p){return e.data(p,"tooltip-settings")}function g(p){if(c(this).delay){o=setTimeout(n,c(this).delay)}else{n()}a=!!c(this).track;e(document.body).bind("mousemove",d);d(p)}function l(){if(e.tooltip.blocked||this==k||(!this.tooltipText&&!c(this).bodyHandler)){return}k=this;m=this.tooltipText;if(c(this).bodyHandler){b.title.hide();var s=c(this).bodyHandler.call(this);if(s.nodeType||s.jquery){b.body.empty().append(s)}else{b.body.html(s)}b.body.show()}else{if(c(this).showBody){var r=m.split(c(this).showBody);b.title.html(r.shift()).show();b.body.empty();for(var q=0,p;p=r[q];q++){if(q>0){b.body.append("<br/>")}b.body.append(p)}b.body.hideWhenEmpty()}else{b.title.html(m).show();b.body.hide()}}if(c(this).showURL&&e(this).url()){b.url.html(e(this).url().replace("http://","")).show()}else{b.url.hide()}b.parent.addClass(c(this).extraClass);if(c(this).fixPNG){b.parent.fixPNG()}g.apply(this,arguments)}function n(){o=null;b.parent.show();d()}function d(r){if(e.tooltip.blocked){return}if(!a&&b.parent.is(":visible")){e(document.body).unbind("mousemove",d)}if(k==null||!c(k)){return}b.parent.removeClass("viewport-right").removeClass("viewport-bottom");var t=b.parent[0].offsetLeft;var s=b.parent[0].offsetTop;if(r){t=r.pageX+c(k).left;s=r.pageY+c(k).top;b.parent.css({left:t+"px",top:s+"px"})}var p=i(),q=b.parent[0];if(p.x+p.cx<q.offsetLeft+q.offsetWidth){t-=q.offsetWidth+20+c(k).left;b.parent.css({left:t+"px"}).addClass("viewport-right")}if(p.y+p.cy<q.offsetTop+q.offsetHeight){s-=q.offsetHeight+20+c(k).top;b.parent.css({top:s+"px"}).addClass("viewport-bottom")}}function i(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function f(p){if(e.tooltip.blocked){return}if(o){clearTimeout(o)}k=null;b.parent.hide().removeClass(c(this).extraClass);if(c(this).fixPNG){b.parent.unfixPNG()}}e.fn.Tooltip=e.fn.tooltip})(jQuery);fluid_1_0=fluid_1_0||{};(function(h,f){var d="state_initial",c="state_changed",b="state_reverted";function g(l,j){var i="<span class='flc-undo'><span class='flc-undo-undoContainer'>[<a href='#' class='flc-undo-undoControl'>undo</a>]</span><span class='flc-undo-redoContainer'>[<a href='#' class='flc-undo-redoControl'>redo</a>]</span></span>";var k=h(i);j.append(k);return k}function a(i){if(i.state===d){i.locate("undoContainer").hide();i.locate("redoContainer").hide()}else{if(i.state===c){i.locate("undoContainer").show();i.locate("redoContainer").hide()}else{if(i.state===b){i.locate("undoContainer").hide();i.locate("redoContainer").show()}}}}var e=function(i){i.locate("undoControl").click(function(){if(i.state!==b){f.model.copyModel(i.extremalModel,i.component.model);i.component.updateModel(i.initialModel,i);i.state=b;a(i);i.locate("redoControl").focus()}return false});i.locate("redoControl").click(function(){if(i.state!==c){i.component.updateModel(i.extremalModel,i);i.state=c;a(i);i.locate("undoControl").focus()}return false});return{modelChanged:function(j,l,k){if(k!==i){i.state=c;f.model.copyModel(i.initialModel,l);a(i)}}}};f.undoDecorator=function(i,l){var k=f.initView("undo",null,l);k.container=k.options.renderer(k,i.container);f.initDomBinder(k);f.tabindex(k.locate("undoControl"),0);f.tabindex(k.locate("redoControl"),0);k.component=i;k.initialModel={};k.extremalModel={};f.model.copyModel(k.initialModel,i.model);f.model.copyModel(k.extremalModel,i.model);k.state=d;a(k);var j=e(k);k.returnedOptions={listeners:j};return k};f.defaults("undo",{selectors:{undoContainer:".flc-undo-undoContainer",undoControl:".flc-undo-undoControl",redoContainer:".flc-undo-redoContainer",redoControl:".flc-undo-redoControl"},renderer:g})})(jQuery,fluid_1_0);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}fluid_1_0=fluid_1_0||{};(function(d,f){var j=function(q,p,s,r){r=r||"";d(p,q).andSelf().each(function(u){var t=(d.browser.msie===false)?"class":"className";if(this.getAttribute(t)){this.setAttribute(t,this.getAttribute(t).replace(s,r))}})};var n=function(r,q,t,u){var p=u[q]||{};var s=p[t];if(s){r.addClass(s)}};var o=function(p){return p&&(p===true||p==="true")};var h=function(p,q){if(o(q)){if(p.tableOfContents){p.tableOfContents.show()}else{p.tableOfContents=f.initSubcomponent(p,"tableOfContents",[p.container,f.COMPONENT_OPTIONS])}}else{if(p.tableOfContents){p.tableOfContents.hide()}}};var b=function(p,q){q=q&&q>0?q:1;p.css("line-height",q+"em")};var k=function(p,q){if(q&&q>0){p.css("font-size",q+"pt");j(p,"[class*=fl-font-size-]",/\bfl-font-size-[0-9]{1,2}\s+/g,"fl-font-size-100")}else{p.css("font-size","")}};var e=function(p,q,r){n(p,"textFont",q.textFont,r);n(p,"textSpacing",q.textSpacing,r);n(p,"theme",q.theme,r);n(p,"layout",q.layout,r)};var m=function(q,p,r){if(p){q.addClass(r)}else{q.removeClass(r)}};var a=function(p,r,s){var q=d("a",p);m(q,r.linksUnderline,s.linksUnderline);m(q,r.linksBold,s.linksBold);m(q,r.linksLarger,s.linksLarger)};var l=function(p,q,r){m(d("input",p),q.inputsLarger,r.inputsLarger)};var c=function(p){if(p.options.savedSettings){p.model=p.options.savedSettings;return}p.model=p.settingsStore.fetch()||p.defaultSiteSettings};var g=function(p,q){var s=["textFont","textSpacing","theme","layout"];var x="fl-no-background-images";var v=".fl-no-background-images";for(var w=0;w<s.length;w++){var t=q[s[w]];for(var r in t){var u=t[r];if(u){x=x+" "+u;v=v+",."+u}}}d(v,p).removeClass(x);return x};var i=function(p){p.settingsStore=f.initSubcomponent(p,"settingsStore",[f.COMPONENT_OPTIONS]);c(p);p.refreshView()};f.uiEnhancer=function(s,q){s=s||document;var r=f.initView("fluid.uiEnhancer",s,q);d(s).data("uiEnhancer",r);r.container=d("body",s);r.defaultSiteSettings=r.options.defaultSiteSettings;var p;r.refreshView=function(){r.container.removeClass(p);e(r.container,r.model,r.options.classnameMap);m(r.container,!o(r.model.backgroundImages),r.options.classnameMap.noBackgroundImages);k(r.container,r.model.textSize);b(r.container,r.model.lineSpacing);h(r,r.model.toc);a(r.container,r.model,r.options.classnameMap);l(r.container,r.model,r.options.classnameMap)};r.updateModel=function(t,u){r.events.modelChanged.fire(t,r.model,u);f.clear(r.model);f.model.copyModel(r.model,t);r.settingsStore.save(r.model);r.refreshView()};p=g(r.container,r.options.classnameMap);i(r);return r};f.defaults("fluid.uiEnhancer",{tableOfContents:{type:"fluid.tableOfContents",options:{templateUrl:"../../tableOfContents/html/TableOfContents.html"}},settingsStore:{type:"fluid.uiEnhancer.cookieStore"},events:{modelChanged:null},classnameMap:{textFont:{serif:"fl-font-serif",sansSerif:"fl-font-sans",arial:"fl-font-arial",verdana:"fl-font-verdana",monospace:"fl-font-monospace",courier:"fl-font-courier",times:"fl-font-times"},textSpacing:{"default":"",wide0:"fl-font-spacing-0",wide1:"fl-font-spacing-1",wide2:"fl-font-spacing-2",wide3:"fl-font-spacing-3",wide4:"fl-font-spacing-4",wide5:"fl-font-spacing-5",wide6:"fl-font-spacing-6"},theme:{mist:"fl-theme-mist",rust:"fl-theme-rust",highContrast:"fl-theme-hc",highContrastInverted:"fl-theme-hci",lowContrast:"fl-theme-slate",mediumContrast:"fl-theme-coal","default":""},layout:{simple:"fl-layout-linear","default":""},noBackgroundImages:"fl-no-background-images",linksUnderline:"fl-text-underline",linksBold:"fl-text-bold",linksLarger:"fl-text-larger",inputsLarger:"fl-text-larger"},defaultSiteSettings:{textFont:"",textSpacing:"",theme:"default",layout:"default",textSize:"",lineSpacing:"",backgroundImages:true,toc:false,linksUnderline:false,linksBold:false,linksLarger:false,inputsLarger:false}});f.uiEnhancer.cookieStore=function(p){var q={};f.mergeComponentOptions(q,"fluid.uiEnhancer.cookieStore",p);
q.fetch=function(){var s=document.cookie;var r=q.options.cookieName+"=";var u,v,t;if(s.length>0){v=s.indexOf(r);if(v>-1){v=v+r.length;t=s.indexOf(";",v);if(t<v){t=s.length}u=JSON.parse(decodeURIComponent(s.substring(v,t)))}}return u};q.save=function(r){document.cookie=q.options.cookieName+"="+encodeURIComponent(JSON.stringify(r))};return q};f.defaults("fluid.uiEnhancer.cookieStore",{cookieName:"fluid-ui-settings"});f.uiEnhancer.tempStore=function(p){var q={};q.model=null;q.fetch=function(){return q.model};q.save=function(r){q.model=r};return q}})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(c,b){var a=function(f){var e=f.locate("textfield");e.val(f.model);var g=f.options.sliderOptions;g.value=f.model;g.min=f.options.min;g.max=f.options.max;var d=f.locate("slider").slider(g);e.change(function(){if(this.value<f.min){this.value=f.min}else{if(this.value>f.max){this.value=f.max}}if(f.isInRange(this.value)){d.slider("value",this.value);f.updateModel(this.value,this)}else{this.value=f.model}});e.keypress(function(h){if(h.keyCode!==c.ui.keyCode.ENTER){return true}return false});d.bind("slide",function(i,h){e.val(h.value);f.updateModel(h.value,d)})};b.textfieldSlider=function(d,e){var f=b.initView("fluid.textfieldSlider",d,e);f.model=f.options.value||f.locate("textfield").val();f.min=f.options.min;f.max=f.options.max;a(f);f.isInRange=function(g){return(g>=f.min&&g<=f.max)};f.updateModel=function(g,h){if(f.isInRange(g)){f.events.modelChanged.fire(g,f.model,h);f.model=g}else{}};return f};b.defaults("fluid.textfieldSlider",{selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider"},events:{modelChanged:null},sliderOptions:{orientation:"horizontal"},min:0,max:100,value:null})})(jQuery,fluid_1_0);(function(d,g){var j=function(p,m,n,o){return{ID:p,selection:{valuebinding:m},optionlist:{valuebinding:n},optionnames:{valuebinding:o}}};var a=function(n,m){return{ID:n,valuebinding:m}};var k=function(p,r){var o=[];o.push(j("text-font","selections.textFont","labelMap.textFont.values","labelMap.textFont.names"));o.push(j("text-spacing","selections.textSpacing","labelMap.textSpacing.values","labelMap.textSpacing.names"));o.push(j("theme","selections.theme","labelMap.theme.values","labelMap.theme.names"));var n={selectID:"background-images",rowID:"background-images-row:",inputID:"background-images-choice",labelID:"background-images-label"};o.push(j("background-images","selections.backgroundImages","labelMap.backgroundImages.values","labelMap.backgroundImages.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.backgroundImages,n));var q={selectID:"layout",rowID:"layout-row:",inputID:"layout-choice",labelID:"layout-label"};o.push(j("layout","selections.layout","labelMap.layout.values","labelMap.layout.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.layout,q));var m={selectID:"toc",rowID:"toc-row:",inputID:"toc-choice",labelID:"toc-label"};o.push(j("toc","selections.toc","labelMap.toc.values","labelMap.toc.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.layout,m));o.push(a("links-underline","selections.linksUnderline"));o.push(a("links-bold","selections.linksBold"));o.push(a("links-larger","selections.linksLarger"));o.push(a("inputs-larger","selections.inputsLarger"));return{children:o}};var h=function(m){m.locate("save").click(m.save);m.locate("reset").click(m.reset);m.locate("cancel").click(m.cancel)};var i=function(m){var o=m.locate("previewFrame");var n;m.events.modelChanged.addListener(function(p){setTimeout(function(){if(n){n.updateModel(p)}},0)});o.load(function(){var p=o.contents();var q={savedSettings:m.model,tableOfContents:m.uiEnhancer.options.tableOfContents,settingsStore:{type:"fluid.uiEnhancer.tempStore"}};n=g.uiEnhancer(p,q)})};var e=function(m){var o={};for(var n in m.controlValues){o[n]={names:m.strings[n],values:m.controlValues[n]}}return o};var c=function(n){n.model.toc=String(n.model.toc);n.model.backgroundImages=String(n.model.backgroundImages);var m=g.assembleModel({selections:{model:n.model,applier:n.applier},labelMap:{model:e(n.options)}});return{model:m.model,applier:m.applier,autoBind:true}};var f=function(o){var n=function(p){return{listeners:{modelChanged:function(q){o.applier.requestChange(p,q)}},value:o.model[p]}};var m=n("textSize");g.merge(null,m,o.options.textMinSize.options);g.initSubcomponents(o,"textMinSize",[o.options.selectors.textMinSizeCtrl,m]);m=n("lineSpacing");g.merge(null,m,o.options.lineSpacing.options);g.initSubcomponents(o,"lineSpacing",[o.options.selectors.lineSpacingCtrl,m])};var b=function(o,s){for(var p in o.controlValues){var q=String(s[p]);var m=o.controlValues[p];if(q){var n=d.inArray(q,m);if(n===-1){var r=d.inArray("default",m);if(r===-1){m.push(q)}else{m[r]=q}}}}};var l=function(n){n.applier.modelChanged.addListener("*",function(p,r,q){n.events.modelChanged.fire(p,r,q.source)});b(n.options,n.uiEnhancer.defaultSiteSettings);n.events.afterRender.addListener(function(){f(n);h(n);i(n)});var o=c(n);var m=g.selfRender(n.container,k(n,o.model),o);n.events.afterRender.fire();return m};g.uiOptions=function(m,o){var q=g.initView("fluid.uiOptions",m,o);q.uiEnhancer=d(document).data("uiEnhancer");q.model=g.copy(q.uiEnhancer.model);q.applier=g.makeChangeApplier(q.model);var n=q.uiEnhancer.model;var p;q.save=function(){q.events.onSave.fire(q.model);n=g.copy(q.model);q.uiEnhancer.updateModel(n)};q.reset=function(){q.events.onReset.fire();q.updateModel(g.copy(q.uiEnhancer.defaultSiteSettings),q);q.refreshView()};q.cancel=function(){q.events.onCancel.fire();q.updateModel(g.copy(n),q);q.refreshView()};q.refreshView=function(){var r=c(q);g.reRender(p,q.container,k(q,r.model),r);q.events.afterRender.fire()};q.updateModel=function(r,s){q.events.modelChanged.fire(r,q.model,s);g.clear(q.model);g.model.copyModel(q.model,r)};p=l(q);return q};g.defaults("fluid.uiOptions",{textMinSize:{type:"fluid.textfieldSlider",options:{min:6,max:30}},lineSpacing:{type:"fluid.textfieldSlider",options:{min:1,max:10}},selectors:{controls:".flc-uiOptions-control",textMinSizeCtrl:".flc-uiOptions-min-text-size",lineSpacingCtrl:".flc-uiOptions-line-spacing",cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{modelChanged:null,onSave:null,onCancel:null,onReset:null,afterRender:null},strings:{textFont:["Serif","Sans-Serif","Arial","Verdana","Courier","Times"],textSpacing:["Regular","Wide","Wider","Widest"],theme:["Low Contrast","Medium Contrast","Medium Contrast Grey Scale","High Contrast","High Contrast Inverted"],backgroundImages:["Yes","No"],layout:["Yes","No"],toc:["Yes","No"]},controlValues:{textFont:["serif","sansSerif","arial","verdana","courier","times"],textSpacing:["default","wide1","wide2","wide3"],theme:["lowContrast","default","mediumContrast","highContrast","highContrastInverted"],backgroundImages:["true","false"],layout:["simple","default"],toc:["true","false"]}})})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(d,g){function r(v,w,y){if(!v.pageLinks){return}if(y.pageIndex!==undefined){var x=v.pageLinks.eq(y.pageIndex);x.removeClass(v.options.styles.currentPage)}var u=v.pageLinks.eq(w.pageIndex);u.addClass(v.options.styles.currentPage)}function i(v,u,w){v.unbind("click.fluid.pager");v.bind("click.fluid.pager",function(){u.initiatePageChange.fire(w)})}function b(u){u.pageCount=Math.max(1,Math.floor((u.totalRange-1)/u.pageSize)+1)}function k(u){return Math.min(u.totalRange,(u.pageIndex+1)*u.pageSize)}g.pager=function(){return g.pagerImpl.apply(null,arguments)};g.pager.directPageList=function(u,y,w){var z=g.initView("fluid.pager.directPageList",u,w);z.pageLinks=z.locate("pageLinks");for(var x=0;x<z.pageLinks.length;++x){var v=z.pageLinks.eq(x);i(v,y,{pageIndex:x})}y.onModelChange.addListener(function(A,B){r(z,A,B)});z.defaultModel={pageIndex:undefined,pageSize:1,totalRange:z.pageLinks.length};return z};g.iota=function(w,x){x=x||0;var v=[];for(var u=0;u<w;++u){v[v.length]=x++}return v};g.pager.everyPageStrategy=g.iota;g.pager.gappedPageStrategy=function(u,v){if(!u){u=3}if(!v){v=u}return function(B,C,x){var A=[];var w=0;var z=false;for(var y=0;y<B;++y){if(y<u||(B-y-1)<u||(y>=x-v&&y<=x+v)){A[w++]=y;z=false}else{if(!z){A[w++]=-1;z=true}}}return A}};g.pager.renderedPageList=function(u,C,w,D,B){D=d.extend(true,w,D);var y=g.initView("fluid.pager.renderedPageList",u,D);D=y.options;var v={cutpoints:[{id:"page-link:link",selector:w.selectors.pageLinks},{id:"page-link:skip",selector:w.selectors.pageLinkSkip},{id:"page-link:disabled",selector:w.selectors.pageLinkDisabled}]};if(D.linkBody){v.cutpoints[v.cutpoints.length]={id:"payload-component",selector:D.linkBody}}function x(E){return function(F){return F===-1?{ID:"page-link:skip"}:{ID:F===E?"page-link:link":"page-link:link",value:F+1,pageIndex:F,decorators:[{type:"jQuery",func:"click",args:function(){C.initiatePageChange.fire({pageIndex:F})}},{type:F===E?"addClass":"",classes:y.options.styles.currentPage}]}}}var z=y.locate("root");g.expectFilledSelector(z,"Error finding root template for fluid.pager.renderedPageList");var A=g.selfRender(z,{},v);C.onModelChange.addListener(function(F,H){var E=y.options.pageStrategy(F.pageCount,0,F.pageIndex);var G=g.transform(E,x(F.pageIndex));G[G.length-1].value=G[G.length-1].value+B.last;C.onRenderPageLinks.fire(G);g.reRender(A,z,G,v);r(y,F,H)});return y};g.defaults("fluid.pager.renderedPageList",{selectors:{root:".flc-pager-links"},linkBody:"a",pageStrategy:g.pager.everyPageStrategy});var j=function(w,u,v){if(v.pageIndex===0){w.previous.addClass(u.styles.disabled)}else{w.previous.removeClass(u.styles.disabled)}if(v.pageIndex===v.pageCount-1){w.next.addClass(u.styles.disabled)}else{w.next.removeClass(u.styles.disabled)}};g.pager.previousNext=function(u,w,v){var x=g.initView("fluid.pager.previousNext",u,v);x.previous=x.locate("previous");i(x.previous,w,{relativePage:-1});x.next=x.locate("next");i(x.next,w,{relativePage:+1});w.onModelChange.addListener(function(y,A,z){j(x,v,y)
});return x};g.pager.pagerBar=function(x,v,w,u){var y=g.initView("fluid.pager.pagerBar",v,w);y.pageList=g.initSubcomponent(y,"pageList",[v,x,y.options,g.COMPONENT_OPTIONS,u]);y.previousNext=g.initSubcomponent(y,"previousNext",[v,x,y.options,g.COMPONENT_OPTIONS,u]);return y};g.defaults("fluid.pager.pagerBar",{previousNext:{type:"fluid.pager.previousNext"},pageList:{type:"fluid.pager.directPageList"},selectors:{pageLinks:".flc-pager-pageLink",pageLinkSkip:".flc-pager-pageLink-skip",pageLinkDisabled:".flc-pager-pageLink-disabled",previous:".flc-pager-previous",next:".flc-pager-next"},styles:{currentPage:"fl-pager-currentPage",disabled:"fl-pager-disabled"}});function a(u){return u.options.columnDefs}g.pager.findColumnDef=function(w,v){var u=d.grep(w,function(x){return x.key===v})[0];return u};function q(x,w,u){var v=(w.options.dataOffset?w.options.dataOffset+".":"");x.shortRoot=u;x.longRoot=v+x.shortRoot}function e(v,w,u){if(v.charAt(0)==="*"){return u+v.substring(1)}else{return v.replace("*",w)}}g.pager.fetchValue=function(x,w,v,z,u){q(u,x,v);var y=e(z,u.shortRoot,u.longRoot);return g.model.getBeanValue(w,y)};g.pager.basicSorter=function(D,w){var A=D.options.dataModel;var C={};var x=a(D);var y=g.pager.findColumnDef(x,w.sortKey);var u=[];for(var v=0;v<w.totalRange;++v){u[v]={index:v,value:g.pager.fetchValue(D,A,v,y.valuebinding,C)}}var B=typeof u[0].value;function z(H,G){var F=H.value;var E=G.value;return F===E?0:(F>E?w.sortDir:-w.sortDir)}u.sort(z);return g.transform(u,function(E){return E.index})};g.pager.directModelFilter=function(x,w,z){var A=[];var u=k(w);for(var y=w.pageIndex*w.pageSize;y<u;++y){var v=z?z[y]:y;A[A.length]={index:v,row:x[v]}}return A};function c(A,z){var y="";var v=0;while(true){var w=A.indexOf("${",v);if(w===-1){y+=A.substring(v);break}else{y+=A.substring(v,w);var u=A.indexOf("}",w+2);var x=A.substring(w+2,u);if(x==="VALUE"){x=z.EL}else{x=e(x,z.shortRoot,z.longRoot)}var B=g.model.getBeanValue(z.dataModel,x);y+=B;v=u+1}}return y}function s(x,u,w){for(var v in u){var y=u[v];if(y===g.VALUE){if(v==="valuebinding"){x[v]=w.EL}else{x[v]={valuebinding:w.EL}}}else{if(v==="valuebinding"){x[v]=e(u[v],w)}else{if(typeof(y)==="object"){x[v]=y.length!==undefined?[]:{};s(x[v],y,w)}else{if(typeof(y)==="string"){x[v]=c(y,w)}else{x[v]=u[v]}}}}}return x}function o(w,A){var x=A.options;var z=w.valuebinding;var y=w.key;if(!z){g.fail("Error in definition for column with key "+y+": valuebinding is not set")}A.EL=e(z,A.shortRoot,A.longRoot);if(!y){var v=g.model.parseEL(z);y=v[v.length-1]}var u=(x.keyPrefix?x.keyPrefix:"")+y;return u}function l(v,w){var u=g.transform(w.columnDefs,function(y){var x=o(y,w);var z;if(!y.components){return{ID:x,valuebinding:w.EL}}else{if(typeof y.components==="function"){z=y.components(v.row,v.index)}else{z=y.components}}z=s({},z,w);z.ID=x;return z});return u}function t(u){return g.model.getBeanValue(u.options.dataModel,u.options.dataOffset)}function p(u,w){var z=w.options.renderOptions.idMap["header:"+u];var x=g.jById(z);if(x.length===0){return null}var y=w.overallOptions.selectors.headerSortStylisticOffset;var v=g.findAncestor(x,function(A){return d(A).is(y)});return v}function m(w,v,u){v=d(v);v.removeClass(w.ascendingHeader);v.removeClass(w.descendingHeader);if(u!==0){v.addClass(u===1?w.ascendingHeader:w.descendingHeader)}}function n(w,v){b(v);if(v.pageIndex>=v.pageCount){v.pageIndex=v.pageCount-1}if(v.pageIndex!==w.model.pageIndex||v.pageSize!==w.model.pageSize||v.sortKey!==w.model.sortKey||v.sortDir!==w.model.sortDir){var u=v.sortKey?w.options.sorter(w,v):null;w.permutation=u;w.events.onModelChange.fire(v,w.model,w);g.model.copyModel(w.model,v)}}function f(w,u,v){return function(){var x=w.model;var z=g.copy(x);var A=w.options.styles;var B=x.sortKey;if(u.key!==x.sortKey){z.sortKey=u.key;z.sortDir=1;var y=p(B,v);if(y){m(A,y,0)}}else{if(z.sortKey===u.key){z.sortDir=-1*z.sortDir}else{return false}}n(w,z);m(A,p(z.sortKey,v),z.sortDir);return false}}function h(w,u,x,v){return{children:g.transform(x,function(y){return{ID:o(y,v),value:y.label,decorators:[{jQuery:["click",f(w,y,v)]},{identify:"header:"+y.key}]}})}}g.pager.selfRender=function(C,v){var x=g.initView("fluid.pager.selfRender",C.container,v);var D=x.options;D.renderOptions.idMap=D.renderOptions.idMap||{};var B=D.renderOptions.idMap;var y=x.locate("root");var A=g.selfRender(y,{},D.renderOptions);y.addClass("fl-pager");var w=a(C);var u={options:D,columnDefs:w,overallOptions:C.options,dataModel:C.options.dataModel,idMap:B};var z=t(C);return{returnedOptions:{listeners:{onModelChange:function(G,I){var F=C.options.modelFilter(z,G,C.permutation);var E=g.transform(F,function(J){var K=q(u,C,J.index);if(w==="explode"){return g.explode(J.row,y)}else{if(w.length){return l(J,u)}}});var H={};H[D.row]=E;if(typeof(w)==="object"){H[D.header]=h(C,G,w,u)}D.renderOptions=D.renderOptions||{};D.renderOptions.model=u.dataModel;g.reRender(A,y,H,D.renderOptions)}}}}};g.defaults("fluid.pager.selfRender",{selectors:{root:".flc-pager-body-template"},keyStrategy:"id",keyPrefix:"",row:"row:",header:"header:",renderOptions:{}});g.pager.summary=function(w,u){var v=w.locate("summary");return{returnedOptions:{listeners:{onModelChange:function(x,z){var y=g.stringTemplate(u.message,{first:x.pageIndex*x.pageSize+1,last:k(x),total:x.totalRange});if(v.length>0){v.text(y)}}}}}};g.pager.directPageSize=function(v){var u=v.locate("pageSize");if(u.length>0){v.events.onModelChange.addListener(function(w,x){if(u.val()!==w.pageSize){u.val(w.pageSize)}});u.change(function(){v.events.initiatePageSizeChange.fire(u.val())})}return v};g.pager.rangeAnnotator=function(w,v){var u={};w.events.onRenderPageLinks.addListener(function(x){var B=w.options.annotateColumnRange;var z=w.options.dataModel;var D=a(w);if(!B||!z||!D){return}var y=g.pager.findColumnDef(D,B);function C(E){E=w.permutation?w.permutation[E]:E;return g.pager.fetchValue(w,z,E,y.valuebinding,u)}var A={};g.model.copyModel(A,w.model);g.transform(x,function(E){if(E.ID==="page-link:link"){var I=E.pageIndex;var L=I*w.model.pageSize;A.pageIndex=I;var F=k(A);var K=C(L);var H=C(F-1);var J="<b>"+K+"</b><br/>&mdash;<br/><b>"+H+"</b>";var G={type:"jQuery",func:"tooltip",args:{delay:w.options.tooltipDelay,extraClass:w.options.styles.tooltip,bodyHandler:function(){return J},showURL:false,id:w.options.tooltipId}};E.decorators.push(G)}})})};g.pagerImpl=function(u,v){var x=g.initView("fluid.pager",u,v);var z=function(B,C){if(C.value<0){C.value=0}};x.events.initiatePageChange.addListener(function(B){var C=g.copy(x.model);if(B.relativePage!==undefined){C.pageIndex=x.model.pageIndex+B.relativePage}else{C.pageIndex=B.pageIndex}if(C.pageIndex===undefined||C.pageIndex<0){C.pageIndex=0}n(x,C)});x.events.initiatePageSizeChange.addListener(function(B){var C=g.copy(x.model);C.pageSize=B;n(x,C)});var y=x.locate("pagerBar");if(y.length>0){x.pagerBar=g.initSubcomponent(x,"pagerBar",[x.events,y,g.COMPONENT_OPTIONS,x.options.strings])}var A=x.locate("pagerBarSecondary");if(A.length>0){x.pagerBarSecondary=g.initSubcomponent(x,"pagerBar",[x.events,A,g.COMPONENT_OPTIONS,x.options.strings])}x.bodyRenderer=g.initSubcomponent(x,"bodyRenderer",[x,g.COMPONENT_OPTIONS]);x.summary=g.initSubcomponent(x,"summary",[x.dom,g.COMPONENT_OPTIONS]);x.pageSize=g.initSubcomponent(x,"pageSize",[x]);x.rangeAnnotator=g.initSubcomponent(x,"rangeAnnotator",[x,g.COMPONENT_OPTIONS]);x.model=g.copy(x.options.model);var w=t(x);if(w){x.model.totalRange=w.length}if(x.model.totalRange===undefined){if(!x.pagerBar){g.fail("Error in Pager configuration - cannot determine total range,  since not configured in model.totalRange and no PagerBar is configured")}x.model=x.pagerBar.pageList.defaultModel}x.applier=g.makeChangeApplier(x.model);x.events.initiatePageChange.fire({pageIndex:0});return x};g.defaults("fluid.pager",{pagerBar:{type:"fluid.pager.pagerBar",options:null},summary:{type:"fluid.pager.summary",options:{message:"%first-%last of %total items"}},pageSize:{type:"fluid.pager.directPageSize"},modelFilter:g.pager.directModelFilter,sorter:g.pager.basicSorter,bodyRenderer:{type:"fluid.emptySubcomponent"},model:{pageIndex:undefined,pageSize:10,totalRange:undefined},dataModel:undefined,dataOffset:"",columnDefs:"explode",annotateColumnRange:undefined,tooltipDelay:300,tooltipId:"tooltip",rangeAnnotator:{type:"fluid.pager.rangeAnnotator"},selectors:{pagerBar:".flc-pager-top",pagerBarSecondary:".flc-pager-bottom",summary:".flc-pager-summary",pageSize:".flc-pager-page-size",headerSortStylisticOffset:".flc-pager-sort-header"},styles:{tooltip:"fl-pager-tooltip",ascendingHeader:"fl-pager-asc",descendingHeader:"fl-pager-desc"},strings:{last:" (last)"},events:{initiatePageChange:null,initiatePageSizeChange:null,onModelChange:null,onRenderPageLinks:null}})})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(i,k){function n(H,G,D,F){var E=document.createEvent("KeyEvents");E.initKeyEvent(G,1,1,null,0,0,0,0,D,F);H.dispatchEvent(E)}k.setCaretToEnd=function(G,E){var H=E?E.length:0;try{G.focus();if(G.setSelectionRange){G.setSelectionRange(H,H);if(i.browser.mozilla&&H>0){n(G,"keypress",92,92);n(G,"keydown",8,0);n(G,"keypress",8,0)}}else{if(G.createTextRange){var D=G.createTextRange();D.move("character",H);D.select()}}}catch(F){}};k.deadMansBlur=function(H,E,G){var D=false;i(H).blur(function(){D=true;setTimeout(function(){if(D){G(H)}},150)});var F=function(){D=false};E.focus(F);E.click(F)};var d=function(E,F){E.editContainer=E.locate("editContainer");E.editField=E.locate("edit");if(E.editContainer.length!==1){if(E.editField.length===1){E.editContainer=E.editField}else{if(E.editContainer.length>1){k.fail("InlineEdit did not find a unique container for selector "+E.options.selectors.editContainer+": "+k.dumpEl(E.editContainer))}}}if(E.editContainer.length===1&&!E.editField){E.editField=E.locate("edit",E.editContainer)}if(!F){return}var D=E.options.editModeRenderer(E);if(D){E.editContainer=D.container;E.editField=D.field}if(E.editField.length===0){k.fail("InlineEdit improperly initialised - editField could not be located (selector "+E.options.selectors.edit+")")
}};var l=function(D){D.editContainer.hide();D.viewEl.show()};var e=function(D){if(D.isEditing()){D.editView.value(D.model.value);l(D)}};var r=function(H){var I=H.editView.value();var F=H.model.value;var D=H.viewEl[0];var G=H.editField[0];var E=H.events.onFinishEdit.fire(I,F,G,D);if(E===false){return}H.updateModelValue(I);H.events.afterFinishEdit.fire(I,F,G,D);l(H)};var w=function(F){if(F.options.submitOnEnter===undefined){F.options.submitOnEnter="textarea"!==k.unwrap(F.editField).nodeName.toLowerCase()}function G(H){return H.keyCode?H.keyCode:(H.which?H.which:0)}var D=function(H){var I=G(H);if(I===i.ui.keyCode.ESCAPE){e(F);return false}};var E=function(H){var I=G(H);if(I!==i.ui.keyCode.ENTER){return true}r(F);F.viewEl.focus();return false};if(F.options.submitOnEnter){F.editContainer.keypress(E)}F.editContainer.keydown(D)};var h=function(D){if(D.options.blurHandlerBinder){D.options.blurHandlerBinder(D)}else{var E=function(F){r(D);return false};D.editField.blur(E)}};var y=function(E,D){if(!E.editInitialized){d(E,!E.options.lazyEditView||!D);if(!E.options.lazyEditView||!D){E.editView=k.initSubcomponent(E,"editView",E.editField);i.extend(true,E.editView,k.initSubcomponent(E,"editAccessor",E.editField));w(E);h(E);E.editView.refreshView(E);E.editInitialized=true}}};var p=function(E){y(E,false);var D=E.viewEl;var F=E.displayView.value();E.updateModelValue(F===E.options.defaultViewText?"":F);if(E.options.applyEditPadding){E.editField.width(Math.max(D.width()+E.options.paddings.edit,E.options.paddings.minimumEdit))}D.removeClass(E.options.styles.invitation);D.removeClass(E.options.styles.focus);D.hide();E.editContainer.show();if(E.tooltipEnabled()){i("#"+E.options.tooltipId).hide()}setTimeout(function(){E.editField.focus();k.setCaretToEnd(E.editField[0],E.editView.value());if(E.options.selectOnEdit){E.editField[0].select()}},0);E.events.afterBeginEdit.fire()};var A=function(E,D,F){E.removeClass(D);E.css("padding-right",F)};var t=function(D){D.displayView.value(D.options.defaultViewText);D.viewEl.css("padding-right",D.existingPadding);D.viewEl.addClass(D.options.styles.defaultViewStyle)};var x=function(D){D.displayView.value("");if(i.browser.msie){if(D.viewEl.css("display")==="inline"){D.viewEl.css("display","inline-block")}}};var o=function(D){D.displayView.value(D.model.value);A(D.viewEl,D.options.styles.defaultViewStyle,D.existingPadding)};var s=function(D,E){D.displayView.refreshView(D,E);if(D.editView){D.editView.refreshView(D,E)}};var z=function(D,E){D.model.value=E;D.refreshView()};var b=function(D,F,E){if(D.model.value!==F){var G=i.extend(true,{},D.model);D.model.value=F;D.events.modelChanged.fire(D.model,G,E);D.refreshView(E)}};var u=function(E,G){var F=function(H){E.addClass(G)};var D=function(H){E.removeClass(G)};E.hover(F,D)};var C=function(D){return function(){var E=D.events.onBeginEdit.fire();if(E===false){return false}p(D);return true}};function g(E){var D=k.unwrap(E.viewEl);return function(G){var F=k.findAncestor(G.target,function(H){if(/input|select|textarea|button|a/i.test(H.nodeName)||H===D){return true}});if(F===D){E.edit();return false}}}var B=function(D){u(D.viewEl,D.options.styles.invitation);D.viewEl.click(g(D))};var a=function(F,D,G){var H=function(){F.addClass(D);F.addClass(G)};var E=function(){F.removeClass(D);F.removeClass(G)};F.focus(H);F.blur(E)};var m=function(E){k.tabbable(E.viewEl);var D=g(E);k.activatable(E.viewEl,function(G,F){return D(F)})};var f=function(D,E){D.attr("role","button")};var v=function(H){if(H.editContainer.length>0&&H.editField.length>0){return{container:H.editContainer,field:H.editField}}var E="<span><input type='text' class='flc-inlineEdit-edit fl-inlineEdit-edit'/></span>";var J=i(E);var D=i("input",J);var G=H.container.attr("id");if(G){var I=G+"-edit-container";var F=G+"-edit";J.attr("id",I);D.attr("id",F)}H.viewEl.after(J);return{container:J,field:D}};var q=function(E){var D=false;E.events.onBeginEdit.addListener(function(){D=true});E.events.afterFinishEdit.addListener(function(){D=false});return function(){return D}};var c=function(D,E){var F=E.viewEl.css("padding-right");E.existingPadding=F?parseFloat(F):0;z(E,E.displayView.value());B(E);m(E);a(E.viewEl,E.options.styles.focus,E.options.styles.invitation);f(E.viewEl);if(E.editContainer){E.editContainer.hide()}var G=function(){if(E.tooltipEnabled()){E.viewEl.tooltip({delay:E.options.tooltipDelay,extraClass:E.options.styles.tooltip,bodyHandler:function(){return E.options.tooltipText},id:E.options.tooltipId})}};i(G);E.decorators=k.initSubcomponents(E,"componentDecorators",[E,k.COMPONENT_OPTIONS])};var j=function(F,D){var E=[];F.each(function(G,H){E.push(k.inlineEdit(i(H),D))});return E};k.inlineEdit=function(D,F){var E=k.initView("inlineEdit",D,F);E.viewEl=E.locate("text");E.displayView=k.initSubcomponent(E,"displayView",E.viewEl);i.extend(true,E.displayView,k.initSubcomponent(E,"displayAccessor",E.viewEl));E.model={value:""};E.edit=C(E);E.isEditing=q(E);E.finish=function(){r(E)};E.cancel=function(){e(E)};E.tooltipEnabled=function(){return E.options.useTooltip&&i.fn.tooltip};E.refreshView=function(G){s(E,G)};E.updateModelValue=function(H,G){b(E,H,G)};E.updateModel=function(G,H){b(E,G.value,H)};y(E,true);c(D,E);return E};k.inlineEdit.standardAccessor=function(D){var F=D.nodeName.toLowerCase();var E="input"===F||"textarea"===F?"val":"text";return{value:function(G){return i(D)[E](G)}}};k.inlineEdit.richTextViewAccessor=function(D){return{value:function(E){return i(D).html(E)}}};k.inlineEdit.standardDisplayView=function(E){var D={refreshView:function(F,G){if(F.model.value){o(F)}else{if(F.options.defaultViewText){t(F)}else{x(F)}}if((i.trim(F.viewEl.text()).length===0)&&(F.existingPadding<F.options.paddings.minimumView)){F.viewEl.css("padding-right",F.options.paddings.minimumView)}}};return D};k.inlineEdit.standardEditView=function(D){var E={refreshView:function(F,G){if(F.editField&&F.editField.index(G)===-1){F.editView.value(F.model.value)}}};i.extend(true,E,k.inlineEdit.standardAccessor(D));return E};k.inlineEdits=function(E,F){F=F||{};var G=i.extend({},k.defaults("inlineEdits").selectors,F.selectors);var D=k.container(E);var H=i(G.editables,D);return j(H,F)};k.defaults("inlineEdit",{selectors:{text:".flc-inlineEdit-text",editContainer:".flc-inlineEdit-editContainer",edit:".flc-inlineEdit-edit"},styles:{edit:"fl-inlineEdit-edit",invitation:"fl-inlineEdit-invitation",defaultViewStyle:"fl-inlineEdit-invitation-text",tooltip:"fl-inlineEdit-tooltip",focus:"fl-inlineEdit-focus"},events:{modelChanged:null,onBeginEdit:"preventable",afterBeginEdit:null,onFinishEdit:"preventable",afterFinishEdit:null,afterInitEdit:null},paddings:{edit:10,minimumEdit:80,minimumView:60},applyEditPadding:true,blurHandlerBinder:null,submitOnEnter:undefined,displayAccessor:{type:"fluid.inlineEdit.standardAccessor"},displayView:{type:"fluid.inlineEdit.standardDisplayView"},editAccessor:{type:"fluid.inlineEdit.standardAccessor"},editView:{type:"fluid.inlineEdit.standardEditView"},editModeRenderer:v,lazyEditView:false,defaultViewText:"Click here to edit",tooltipText:"Click item to edit",tooltipId:"tooltip",useTooltip:false,tooltipDelay:1000,selectOnEdit:false});k.defaults("inlineEdits",{selectors:{editables:".flc-inlineEditable"}})})(jQuery,fluid_1_0);fluid_1_0=fluid_1_0||{};(function(c,b){var a=function(g,d,e){var f=c.extend({},b.defaults(g),e);return b.inlineEdit(d,f)};b.inlineEdit.tinyMCE=function(d,e){return a("fluid.inlineEdit.tinyMCE",d,e)};b.inlineEdit.tinyMCE.viewAccessor=function(d){return{value:function(f){var e=tinyMCE.get(d.id);if(!e){return""}if(f){c(d).val(f);e.setContent(f,{format:"raw"})}else{return e.getContent()}}}};b.inlineEdit.tinyMCE.blurHandlerBinder=function(d){function e(f){setTimeout(function(){tinyMCE.execCommand("mceFocus",false,d.editField[0].id);if(c.browser.mozilla&&c.browser.version.substring(0,3)==="1.8"){return}f.selection.select(f.getBody(),1);f.selection.collapse(0)},10)}d.events.afterInitEdit.addListener(function(f){e(f);var g=f.getBody();b.deadMansBlur(d.editField,c(g),function(){d.cancel()})});d.events.afterBeginEdit.addListener(function(){var f=tinyMCE.get(d.editField[0].id);if(f){e(f)}})};b.inlineEdit.tinyMCE.editModeRenderer=function(g){var d={mode:"exact",theme:"simple"};var f=c.extend(true,d,g.options.tinyMCE);f.elements=b.allocateSimpleId(g.editField);var e=f.init_instance_callback;f.init_instance_callback=function(h){g.events.afterInitEdit.fire(h);if(e){e()}};tinyMCE.init(f)};b.defaults("fluid.inlineEdit.tinyMCE",{useTooltip:true,selectors:{edit:"textarea"},styles:{invitation:null},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.tinyMCE.viewAccessor"},lazyEditView:true,blurHandlerBinder:b.inlineEdit.tinyMCE.blurHandlerBinder,editModeRenderer:b.inlineEdit.tinyMCE.editModeRenderer});b.inlineEdit.FCKEditor=function(d,e){return a("fluid.inlineEdit.FCKEditor",d,e)};b.inlineEdit.FCKEditor.complete=b.event.getEventFirer();b.inlineEdit.FCKEditor.complete.addListener(function(e){var d=e.LinkedField;var f=c.data(d,"fluid.inlineEdit.FCKEditor");f.events.afterInitEdit.fire(e)});b.inlineEdit.FCKEditor.blurHandlerBinder=function(d){function e(f){f.Focus()}d.events.afterInitEdit.addListener(function(f){e(f);var g=f.EditingArea.TargetElement});d.events.afterBeginEdit.addListener(function(){var f=b.inlineEdit.FCKEditor.byId(d.editField[0].id);if(f){e(f)}})};b.inlineEdit.FCKEditor.byId=function(e){var d=typeof(FCKeditorAPI)==="undefined"?null:FCKeditorAPI.GetInstance(e);return d};b.inlineEdit.FCKEditor.editModeRenderer=function(f){var g=b.allocateSimpleId(f.editField);c.data(b.unwrap(f.editField),"fluid.inlineEdit.FCKEditor",f);var e=new FCKeditor(g);var d=b.copy(f.options.FCKEditor);d.BasePath=d.BasePath+"editor/";c.extend(true,e.Config,d);c.extend(true,e,f.options.FCKEditor);e.Config.fluidInstance=f;e.ReplaceTextarea()};b.inlineEdit.FCKEditor.viewAccessor=function(d){return{value:function(f){var e=b.inlineEdit.FCKEditor.byId(d.id);if(!e){if(f){c(d).val(f)}return""}if(f){e.SetHTML(f)
}else{return e.GetHTML()}}}};b.defaults("fluid.inlineEdit.FCKEditor",{selectors:{edit:"textarea"},styles:{invitation:null},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.FCKEditor.viewAccessor"},lazyEditView:true,blurHandlerBinder:b.inlineEdit.FCKEditor.blurHandlerBinder,editModeRenderer:b.inlineEdit.FCKEditor.editModeRenderer,FCKEditor:{BasePath:"fckeditor/"}});b.inlineEdit.dropdown=function(d,e){return a("fluid.inlineEdit.dropdown",d,e)};b.inlineEdit.dropdown.editModeRenderer=function(d){var e=b.allocateSimpleId(d.editField);d.editField.selectbox({finishHandler:function(){d.finish()}});return{container:d.editContainer,field:c("input.selectbox",d.editContainer)}};b.inlineEdit.dropdown.blurHandlerBinder=function(d){b.deadMansBlur(d.editField,c("div.selectbox-wrapper li",d.editContainer),function(){d.cancel()})};b.defaults("fluid.inlineEdit.dropdown",{applyEditPadding:false,blurHandlerBinder:b.inlineEdit.dropdown.blurHandlerBinder,editModeRenderer:b.inlineEdit.dropdown.editModeRenderer})})(jQuery,fluid_1_0);function FCKeditor_OnComplete(a){fluid.inlineEdit.FCKEditor.complete.fire(a)};