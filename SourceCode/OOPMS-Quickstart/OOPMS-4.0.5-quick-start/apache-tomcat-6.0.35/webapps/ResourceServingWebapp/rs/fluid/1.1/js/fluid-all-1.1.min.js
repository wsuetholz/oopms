(function(a){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){if(a.browser.msie){return false}this.addEventListener(c,a.event.special[b].handler,true)},teardown:function(){if(a.browser.msie){return false}this.removeEventListener(c,a.event.special[b].handler,true)},handler:function(d){arguments[0]=a.event.fix(d);arguments[0].type=b;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{delegate:function(d,c,b){return this.bind(d,function(e){var f=a(e.target);if(f.is(c)){return b.apply(f,arguments)}})},triggerEvent:function(b,c){return this.triggerHandler(b,[jQuery.event.fix({type:b,target:c})])}})})(jQuery);var fluid_1_1=fluid_1_1||{};var fluid=fluid||fluid_1_1;(function(f,e){e.version="Infusion 1.1";e.fail=function(h){e.setLogging(true);e.log(h.message?h.message:h);throw new Error(h)};e.wrap=function(h){return((!h||h.jquery)?h:f(h))};e.unwrap=function(h){return h&&h.jquery&&h.length===1?h[0]:h};e.keyForValue=function(j,i){for(var h in j){if(j[h]===i){return h}}return null};e.findKeyInObject=e.keyForValue;e.clear=function(j){if(j instanceof Array){j.length=0}else{for(var h in j){delete j[h]}}};e.container=function(i){var h=i;if(typeof i==="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9)){h=f(i)}if(!h||!h.jquery||h.length!==1){if(typeof(i)!=="string"){i=h.selector}e.fail({name:"NotOne",message:"A single container element was not found for selector "+i})}return h};var c={};var b={};e.defaults=function(){var k=0;var i=c;if(typeof arguments[0]==="boolean"){i=b;k=1}var h=arguments[k];var j=arguments[k+1];if(j!==undefined){i[h]=j;return j}return i[h]};e.createDomBinder=function(i,k){var j={},l={};function m(o,n){return f.data(e.unwrap(n))+"-"+o}function h(p,o,n){j[m(p,o)]=n}l.locate=function(p,r){var n,o,q;n=k[p];o=r?r:i;if(!o){e.fail("DOM binder invoked for selector "+p+" without container")}if(!n){return o}if(typeof(n)==="function"){q=f(n.call(null,e.unwrap(o)))}else{q=f(n,o)}if(q.get(0)===document){q=[]}if(!q.selector){q.selector=n;q.context=o}q.selectorName=p;h(p,o,q);return q};l.fastLocate=function(o,r){var n=r?r:i;var p=m(o,n);var q=j[p];return q?q:l.locate(o,r)};l.clear=function(){j={}};l.refresh=function(q,r){var o=r?r:i;if(typeof q==="string"){q=[q]}if(o.length===undefined){o=[o]}for(var p=0;p<q.length;++p){for(var n=0;n<o.length;++n){l.locate(q[p],o[n])}}};return l};e.mergeListeners=function(k,n){if(n){for(var j in n){var o=n[j];var p=j.indexOf(".");var m;if(p!==-1){m=j.substring(p+1);j=j.substring(0,p)}if(!k[j]){k[j]=e.event.getEventFirer()}var l=k[j];if(typeof(o)==="function"){l.addListener(o,m)}else{if(o&&typeof o.length==="number"){for(var h=0;h<o.length;++h){l.addListener(o[h],m)}}}}}};e.instantiateFirers=function(k,h){k.events={};if(h.events){for(var j in h.events){var i=h.events[j];k.events[j]=e.event.getEventFirer(i==="unicast",i==="preventable")}}e.mergeListeners(k.events,h.listeners)};e.mergeComponentOptions=function(i,h,k){var j=e.defaults(h);i.options=e.merge(j?j.mergePolicy:null,{},j,k)};e.expectFilledSelector=function(h,i){if(h&&h.length===0&&h.jquery){e.fail(i+': selector "'+h.selector+'" with name '+h.selectorName+" returned no results in context "+e.dumpEl(h.context))}};e.initView=function(i,h,k){var j={};e.expectFilledSelector(h,'Error instantiating component with name "'+i);e.mergeComponentOptions(j,i,k);if(h){j.container=e.container(h);e.initDomBinder(j)}e.instantiateFirers(j,j.options);return j};e.COMPONENT_OPTIONS={};e.VALUE={};e.emptySubcomponent=function(h){var k={};h=f.makeArray(h);for(var j=0;j<h.length;++j){k[h[j]]=function(){}}return k};e.initSubcomponent=function(j,i,h){return e.initSubcomponents(j,i,h)[0]};e.initSubcomponents=function(o,p,q){var r=o.options[p];if(!r){return}var n=f.makeArray(r);var s=-1;var k=[];q=f.makeArray(q);for(var m=0;m<q.length;++m){if(q[m]===e.COMPONENT_OPTIONS){s=m}}for(m=0;m<n.length;++m){r=n[m];if(s!==-1&&r.options){q[s]=r.options}if(typeof(r)!=="function"){var l=typeof(r)==="string"?r:r.type;var h=e.defaults(true,l);e.merge("reverse",o.options,h);k[m]=l==="fluid.emptySubcomponent"?e.emptySubcomponent(r.options):e.invokeGlobalFunction(l,q,{fluid:e})}else{k[m]=r.apply(null,q)}var j=k[m]?k[m].returnedOptions:null;if(j){e.merge(o.options.mergePolicy,o.options,j);if(j.listeners){e.mergeListeners(o.events,j.listeners)}}}return k};e.initDomBinder=function(h){h.dom=e.createDomBinder(h.container,h.options.selectors);h.locate=h.dom.locate};e.isPrimitive=function(h){var i=typeof(h);return !h||i==="string"||i==="boolean"||i==="number"};function g(m,o,l,h){var p=m&&typeof(m)!=="string"?m[o]:m;if(typeof(p)==="function"){p.apply(null,l,h);return l}if(p==="replace"){e.clear(l)}for(var j in h){var q=(o?o+".":"")+j;var n=l[j];var k=h[j];var i=e.isPrimitive(n);if(k!==undefined){if(k!==null&&typeof k==="object"&&!k.nodeType&&!k.jquery&&k!==e.VALUE){if(i){l[j]=n=k instanceof Array?[]:{}}g(m,q,n,k)}else{if(n===null||n===undefined||p!=="reverse"){l[j]=k}}}}return l}e.merge=function(m,l){var q="";for(var k=2;k<arguments.length;++k){var h=arguments[k];if(h!==null&&h!==undefined){g(m,q,l,h)}}if(m&&typeof(m)!=="string"){for(var o in m){var p=m[o];if(typeof(p)==="string"&&p!=="replace"){var j=e.model.getBeanValue(l,o);if(j===null||j===undefined){var n=e.model.getBeanValue(l,p);e.model.setBeanValue(l,o,n)}}}}return l};e.copy=function(h){if(e.isPrimitive(h)){return h}return f.extend(true,typeof(h.length)==="number"?[]:{},h)};e.invokeGlobalFunction=function(i,j,h){var k=e.model.getBeanValue(window,i,h);if(!k){e.fail("Error invoking global function: "+i+" could not be located")}else{return k.apply(null,j)}};e.event={};var a=1;e.event.getEventFirer=function(j,k){var i=e.log;var h={};return{addListener:function(n,m,l){if(!n){return}if(j){m="unicast"}if(!m){if(!n.$$guid){n.$$guid=a++}m=n.$$guid}h[m]={listener:n,predicate:l}},removeListener:function(l){if(typeof(l)==="string"){delete h[l]}else{if(typeof(l)==="object"&&l.$$guid){delete h[l.$$guid]}}},fire:function(){for(var n in h){var l=h[n];var o=l.listener;if(l.predicate&&!l.predicate(o,arguments)){continue}try{var m=o.apply(null,arguments);if(k&&m===false){return false}}catch(p){i("FireEvent received exception "+p.message+" e "+p+" firing to listener "+n);throw (p)}}}}};e.model={};e.model.copyModel=function(i,h){e.clear(i);f.extend(true,i,h)};e.model.parseEL=function(h){return h.toString().split(".")};e.model.composePath=function(h,i){return h===""?i:h+"."+i};e.model.setBeanValue=function(j,l,m){var h=e.model.parseEL(l);for(var k=0;k<h.length-1;k+=1){if(!j[h[k]]){j[h[k]]={}}j=j[h[k]]}j[h[h.length-1]]=m};e.model.getBeanValue=function(k,n,h){if(n===""||n===null||n===undefined){return k}var j=e.model.parseEL(n);for(var l=0;l<j.length;++l){if(!k){return k}var m=j[l];if(h&&h[m]){k=h[m];h=null}else{k=k[m]}}return k};var d;e.setLogging=function(h){if(typeof h==="boolean"){d=h}else{d=false}};e.log=function(h){if(d){h=new Date().toTimeString()+":  "+h;if(typeof(console)!=="undefined"){if(console.debug){console.debug(h)}else{console.log(h)}}else{if(typeof(YAHOO)!=="undefined"){YAHOO.log(h)}else{if(typeof(opera)!=="undefined"){opera.postError(h)}}}}};e.dumpEl=function(j){var k;if(!j){return"null"}if(j.nodeType===3||j.nodeType===8){return"[data: "+j.data+"]"}if(j.nodeType===9){return"[document: location "+j.location+"]"}if(!j.nodeType&&typeof j.length==="number"){k="[";for(var h=0;h<j.length;++h){k+=e.dumpEl(j[h]);if(h<j.length-1){k+=", "}}return k+"]"}j=f(j);k=j.get(0).tagName;if(j.attr("id")){k+="#"+j.attr("id")}if(j.attr("class")){k+="."+j.attr("class")}return k};e.findAncestor=function(h,i){h=e.unwrap(h);while(h){if(i(h)){return h}h=h.parentNode}};e.jById=function(k,j){j=j&&j.nodeType===9?j:document;var h=e.byId(k,j);var i=h?f(h):[];i.selector="#"+k;i.context=j;return i};e.byId=function(j,i){i=i&&i.nodeType===9?i:document;var h=i.getElementById(j);if(h){if(h.getAttribute("id")!==j){e.fail("Problem in document structure - picked up element "+e.dumpEl(h)+" for id "+j+" without this id - most likely the element has a name which conflicts with this id")}return h}else{return null}};e.getId=function(h){return e.unwrap(h).getAttribute("id")};e.allocateSimpleId=function(h){h=e.unwrap(h);if(!h.id){h.id="fluid-id-"+(a++)}return h.id};e.transform=function(n){var m=[];for(var l=0;l<n.length;++l){var h=n[l];for(var k=0;k<arguments.length-1;++k){h=arguments[k+1](h,l)}m[m.length]=h}return m};e.find=function(l,k,m){for(var j=0;j<l.length;++j){var h=k(l[j],j);if(h!==null&&h!==undefined){return h}}return m};e.accumulate=function(l,k,h){for(var j=0;j<l.length;++j){h=k(l[j],h,j)}return h};e.remove_if=function(k,j){for(var h=0;h<k.length;++h){if(j(k[h],h)){k.splice(h,1);--h}}return k};e.formatMessage=function(k,h){if(!h){return k}if(typeof(h)==="string"){h=[h]}for(var j=0;j<h.length;++j){k=k.replace("{"+j+"}",h[j])}return k};e.messageLocator=function(h){return function(j,k){if(typeof(j)==="string"){j=[j]}for(var l=0;l<j.length;++l){var n=j[l];var m=h[n];if(m===undefined){continue}return e.formatMessage(m,k)}return"[Message string for key "+j[0]+" not found]"}};e.stringTemplate=function(l,i){var k=l;for(var j in i){if(i.hasOwnProperty(j)){var h="%"+j;k=k.replace(h,i[j])}}return k}})(jQuery,fluid_1_1);var fluid_1_1=fluid_1_1||{};(function(c,b){b.dom=b.dom||{};var a=function(d){if(d.node.firstChild){d.node=d.node.firstChild;d.depth+=1;return d}while(d.node){if(d.node.nextSibling){d.node=d.node.nextSibling;return d}d.node=d.node.parentNode;d.depth-=1}return d};b.dom.iterateDom=function(h,g,f){var e={node:h,depth:0};var d=h;var i;while(e.node!==null&&e.depth>=0&&e.depth<b.dom.iterateDom.DOM_BAIL_DEPTH){i=null;if(e.node.nodeType===1||f){i=g(e.node,e.depth)}if(i){if(i==="delete"){e.node.parentNode.removeChild(e.node);e.node=d}else{if(i==="stop"){return e.node}}}d=e.node;e=a(e)}};b.dom.iterateDom.DOM_BAIL_DEPTH=256;b.dom.computeAbsolutePosition=function(d){var f=0,e=0;if(d.offsetParent){do{f+=d.offsetLeft;e+=d.offsetTop;d=d.offsetParent}while(d);return[f,e]}};b.dom.isContainer=function(d,e){for(;e;e=e.parentNode){if(d===e){return true
}}return false};b.dom.insertAfter=function(d,e){var f=e.nextSibling;if(!f){e.parentNode.appendChild(d)}else{e.parentNode.insertBefore(d,f)}};b.dom.isWhitespaceNode=function(d){return !(/[^\t\n\r ]/.test(d.data))};b.dom.isIgnorableNode=function(d){return(d.nodeType===8)||((d.nodeType===3)&&b.dom.isWhitespaceNode(d))};b.dom.getElementText=function(f){var d=f.childNodes;var g="";for(var e=0;e<d.length;++e){var h=d[e];if(h.nodeType==3){g=g+h.nodeValue}}return g};b.dom.cleanseScripts=function(d){var e=c.data(d,b.dom.cleanseScripts.MARKER);if(!e){b.dom.iterateDom(d,function(f){return f.tagName.toLowerCase()==="script"?"delete":null});c.data(d,b.dom.cleanseScripts.MARKER,true)}};b.dom.cleanseScripts.MARKER="fluid-scripts-cleansed"})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(d,c){c.VALUE={};c.BINDING_ROOT_KEY="fluid-binding-root";c.findData=function(h,g){while(h){var i=d.data(h,g);if(i){return i}h=h.parentNode}};c.bindFossils=function(h,i,g){d.data(h,c.BINDING_ROOT_KEY,{data:i,fossils:g})};c.findForm=function(g){return c.findAncestor(g,function(h){return h.nodeName.toLowerCase()==="form"})};c.value=function(l,i){var j=c.unwrap(l);var o=false;if(j.nodeType===undefined&&j.length>1){j=j[0];o=true}var k=d(j);if("input"!==j.nodeName.toLowerCase()||!/radio|checkbox/.test(j.type)){return d(j).val(i)}var h=j.name;if(h===undefined){c.fail("Cannot acquire value from node "+c.dumpEl(j)+" which does not have name attribute set")}var g;if(o){g=l}else{var g=document.getElementsByName(h);var n=c.findForm(j);g=d.grep(g,function(p){if(p.name!==h){return false}return !n||c.dom.isContainer(n,p)})}if(i!==undefined){if(typeof(i)==="boolean"){i=(i?"true":"false")}d.each(g,function(){this.checked=(i instanceof Array?d.inArray(this.value,i)!==-1:i===this.value)})}else{var m=d.map(g,function(p){return p.checked?p.value:null});return j.type==="radio"?m[0]:m}};c.applyChange=function(l,m,i){l=c.unwrap(l);if(m===undefined){m=c.value(l)}if(l.nodeType===undefined&&l.length>0){l=l[0]}var g=c.findData(l,c.BINDING_ROOT_KEY);if(!g){c.fail("Bound data could not be discovered in any node above "+c.dumpEl(l))}var h=l.name;var j=g.fossils[h];if(!j){c.fail("No fossil discovered for name "+h+" in fossil record above "+c.dumpEl(l))}if(typeof(j.oldvalue)==="boolean"){m=m[0]?true:false}var k=g.fossils[h].EL;if(i){i.fireChangeRequest({path:k,value:m,source:l.id})}else{c.model.setBeanValue(g.data,k,m)}};c.pathUtil={};var f=function(j,m,h){var k=null;if(j){k=""}var l=false;var g=m.length;for(;h<g;++h){var n=m.charAt(h);if(!l){if(n==="."){break}else{if(n==="\\"){l=true}else{if(k!==null){k+=n}}}}else{l=false;if(k!==null){j+=n}}}if(k!==null){j[0]=k}return h};var a=[];c.pathUtil.getPathSegment=function(h,g){f(a,h,g);return a[0]};c.pathUtil.getHeadPath=function(g){return c.pathUtil.getPathSegment(g,0)};c.pathUtil.getFromHeadPath=function(h){var g=f(null,h,0);return g===h.length?null:h.substring(g+1)};function e(g){return g.lastIndexOf(".")}c.pathUtil.getToTailPath=function(h){var g=e(h);return g==-1?null:h.substring(0,g)};c.pathUtil.getTailPath=function(h){var g=e(h);return c.pathUtil.getPathSegment(h,g+1)};var b=function(j,h){for(var g=0;g<h.length;++g){var k=h.charAt(g);if(k==="."||k==="\\"||k==="}"){j+="\\"}j+=k}return j};c.pathUtil.composePath=function(g,h){if(g.length!==0){g+="."}return b(g,h)};c.pathUtil.matchPath=function(g,j){var i="";while(true){if(!g){break}if(!j){return null}var h=c.pathUtil.getHeadPath(g);var k=c.pathUtil.getHeadPath(j);if(h!=="*"&&h!==k){return null}i=c.pathUtil.composePath(i,k);g=c.pathUtil.getFromHeadPath(g);j=c.pathUtil.getFromHeadPath(j)}return i};c.model.applyChangeRequest=function(h,k){if(k.type==="ADD"){c.model.setBeanValue(h,k.path,k.value)}else{if(k.type==="DELETE"){var i=c.pathUtil.getToTailPath(k.path);var g=c.pathUtil.getTailPath(k.path);var j=c.model.getBeanValue(h,j);delete j[g]}}};c.makeChangeApplier=function(h){var i={guards:c.event.getEventFirer(false,true),modelChanged:c.event.getEventFirer(false,false)};var j={model:h};function k(l,m){return function(p,n){var o=n[m];return c.pathUtil.matchPath(p[l],o.path)}}function g(o,n,m,p){var l=k(m,p);o[n]={addListener:function(q,s,r){s[m]=q;i[n].addListener(s,r,l)},removeListener:function(q){i[n].removeListener(q)}}}g(j,"guards","guardedPathSpec",1);g(j,"modelChanged","triggerPathSpec",2);j.fireChangeRequest=function(m){if(!m.type){m.type="ADD"}var l=i.guards.fire(h,m);if(l===false){return}var n={};c.model.copyModel(n,h);c.model.applyChangeRequest(h,m);i.modelChanged.fire(h,n,m)};j.requestChange=function(o,n,l){var m={path:o,value:n,type:l};j.fireChangeRequest(m)};return j};c.makeSuperApplier=function(){var h=[];var g={};g.addSubApplier=function(i,j){h.push({path:i,subApplier:j})};g.fireChangeRequest=function(m){for(var l=0;l<h.length;++l){var n=h[l].path;if(m.path.indexOf(n)===0){var k=m.path.substring(n.length+1);var j=c.copy(m);j.path=k;h[l].subApplier.fireChangeRequest(j)}}};return g};c.attachModel=function(g,n,l){var j=c.model.parseEL(n);for(var m=0;m<j.length-1;++m){var h=j[m];var k=g[h];if(!k){g[h]=k={}}g=k}g[j[j.length-1]]=l};c.assembleModel=function(g){var h={};var j=c.makeSuperApplier();var i={model:h,applier:j};for(path in g){var k=g[path];c.attachModel(h,path,k.model);if(k.applier){j.addSubApplier(path,k.applier)}}return i}})(jQuery,fluid_1_1);var fluid_1_1=fluid_1_1||{};var fluid=fluid||fluid_1_1;(function(t,p){p.thatistBridge=function(L,N){var M=function(O){var Q=O.split(".");var P=N;for(var T=0;T<Q.length;++T){P=P[Q[T]]}var S=[this];if(arguments.length===2){S=S.concat(t.makeArray(arguments[1]))}var R=P.apply(null,S);this.that=function(){return R};var U=typeof(R);return !R||U==="string"||U==="number"||U==="boolean"||R&&R.length!==undefined?R:this};t.fn[L]=M;return M};p.thatistBridge("fluid",p);p.thatistBridge("fluid_1_1",fluid_1_1);var J="fluid-keyboard-a11y";var j=function(N,L){var M=t(N).data(J);return M?M[L]:undefined};var l=function(N,L,M){t(N).each(function(){var O=t.data(this,J)||{};O[L]=M;t.data(this,J,O)})};var m="disabled";if(t.event.special.focusin){m=null;t(document).bind("focusin",function(L){m=L.target})}p.getLastFocusedElement=function(){if(m==="disabled"){p.fail("Focus manager not enabled - please include jquery.delegate.js or equivalent for support of 'focusin' event")}return m};var I=function(){return t.browser.msie?"tabIndex":"tabindex"};var u=function(L){if(L.length<=0){return false}return t(L[0]).is("a, input, button, select, area, textarea, object")};var x=function(M){if(M.length<=0){return undefined}if(!p.tabindex.hasAttr(M)){return u(M)?Number(0):undefined}var L=M.attr(I());return Number(L)};var v=function(L,M){return L.each(function(N,O){t(O).attr(I(),M)})};p.tabindex=function(M,L){M=t(M);if(L!==null&&L!==undefined){return v(M,L)}else{return x(M)}};p.tabindex.remove=function(L){L=t(L);return L.each(function(M,N){t(N).removeAttr(I())})};p.tabindex.hasAttr=function(M){M=t(M);if(M.length<=0){return false}var L=M.map(function(){var N=this.getAttributeNode(I());return N?N.specified:false});return L.length===1?L[0]:L};p.tabindex.has=function(L){L=t(L);return p.tabindex.hasAttr(L)||u(L)};var g="enablement";p.enabled=function(M,L){M=t(M);if(L===undefined){return j(M,g)!==false}else{t("*",M).each(function(){if(j(this,g)!==undefined){l(this,g,L)}else{if(/select|textarea|input/i.test(this.nodeName)){t(this).attr("disabled",!L)}}});l(M,g,L)}};p.a11y=t.a11y||{};p.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var d={next:t.ui.keyCode.DOWN,previous:t.ui.keyCode.UP};var q={next:t.ui.keyCode.RIGHT,previous:t.ui.keyCode.LEFT};var b=function(L){return L.jquery?L[0]:L};var n=function(L){L.each(function(M,N){N=t(N);if(!N.fluid("tabindex.has")||N.fluid("tabindex")<0){N.fluid("tabindex",0)}})};p.tabbable=function(L){L=t(L);n(L)};var D="selectionContext";var B=-32768;var k=function(L){if(L.options.onLeaveContainer){L.options.onLeaveContainer(L.selectables[L.activeItemIndex])}else{if(L.options.onUnselect){L.options.onUnselect(L.selectables[L.activeItemIndex])}}if(!L.options.rememberSelectionState){L.activeItemIndex=B}};var f=function(L,M){if(M){M(L)}};var w=function(M,L){if(L&&M){L(M)}};var i=function(M,L){w(M,L.options.onUnselect)};var s=function(L,M){i(M.selectedElement(),M);L=b(L);var N=M.selectables.index(L);if(N===-1){return}M.activeItemIndex=N;f(L,M.options.onSelect)};var G=function(L){return function(M){s(M.target,L);return M.stopPropagation()}};var r=function(L){return function(M){i(M.target,L);return M.stopPropagation()}};var K=function(L){var M=L.selectables;if(L.activeItemIndex>=M.length){L.activeItemIndex=0}if(L.activeItemIndex<0&&L.activeItemIndex!==B){L.activeItemIndex=M.length-1}if(L.activeItemIndex>=0){t(M[L.activeItemIndex]).focus()}};var c=function(L){i(L.selectedElement(),L);if(L.activeItemIndex===B){L.activeItemIndex=-1}};var o=function(L){c(L);++L.activeItemIndex;K(L)};var e=function(L){c(L);--L.activeItemIndex;K(L)};var z=function(L,N,M){return function(O){if(O.which===N.next){o(L);O.preventDefault()}else{if(O.which===N.previous){e(L);O.preventDefault()}}}};var E=function(L){var M;if(L===p.a11y.orientation.HORIZONTAL){M=q}else{if(L===p.a11y.orientation.VERTICAL){M=d}}return M};var H=function(L){return function(M){if(M.which!==t.ui.keyCode.TAB){return}k(L);if(M.shiftKey){L.focusIsLeavingContainer=true}}};var y=function(L){return function(M){var O=L.options.autoSelectFirstItem;var N=typeof(O)==="function"?O():O;if(L.focusIsLeavingContainer){N=false}if(N&&M.target===L.container.get(0)){if(L.activeItemIndex===B){L.activeItemIndex=0}t(L.selectables[L.activeItemIndex]).focus()}return M.stopPropagation()}};var a=function(L){return function(M){L.focusIsLeavingContainer=false;return M.stopPropagation()}};var A=function(M,P,Q){var N=t.extend(true,{},P,Q);var R=E(N.direction);var L=N.selectableElements?N.selectableElements:M.find(N.selectableSelector);var O={container:M,activeItemIndex:B,selectables:L,focusIsLeavingContainer:false,options:N};O.selectablesUpdated=function(S){if(typeof(O.options.selectablesTabindex)==="number"){O.selectables.fluid("tabindex",O.options.selectablesTabindex)
}O.selectables.unbind("focus."+J);O.selectables.unbind("blur."+J);O.selectables.bind("focus."+J,G(O));O.selectables.bind("blur."+J,r(O));if(S){s(S,O)}else{K(O)}};O.refresh=function(){if(!O.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}O.selectables=M.find(N.selectableSelector);O.selectablesUpdated()};O.selectedElement=function(){return O.activeItemIndex<0?null:O.selectables[O.activeItemIndex]};if(R){M.keydown(z(O,R))}M.keydown(H(O));M.focus(y(O));M.blur(a(O));O.selectablesUpdated();return O};p.selectable=function(N,L){N=t(N);var M=A(N,p.selectable.defaults,L);l(N,D,M);return M};p.selectable.select=function(M,L){t(L).focus()};p.selectable.selectNext=function(L){L=t(L);o(j(L,D))};p.selectable.selectPrevious=function(L){L=t(L);e(j(L,D))};p.selectable.currentSelection=function(M){M=t(M);var L=j(M,D);return t(L.selectedElement())};p.selectable.defaults={direction:p.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null};var h=function(Q,M){if(!Q.modifier){return true}var N=Q.modifier;var O=N&&M.ctrlKey;var L=N&&M.altKey;var P=N&&M.shiftKey;return O||L||P};var F=function(L){return function(M){var P=M.target;if(!p.enabled(M.target)){return}var O=M.which?M.which:M.keyCode;if(O===L.key&&L.activateHandler&&h(L,M)){var N=t.Event("fluid-activate");t(M.target).trigger(N,[L.activateHandler]);if(N.isDefaultPrevented()){M.preventDefault()}}}};var C=function(O,R,L,M){var Q=[];t(L).each(function(S,T){Q.push({modifier:null,key:T,activateHandler:R})});if(M&&M.additionalBindings){Q=Q.concat(M.additionalBindings)}l(O,g,true);for(var N=0;N<Q.length;++N){var P=Q[N];O.keydown(F(P))}O.bind("fluid-activate",function(S,T){T=T||R;return T?T(S):null})};p.activatable=function(N,M,L){N=t(N);C(N,M,p.activatable.defaults.keys,L)};p.activate=function(L){t(L).trigger("fluid-activate")};p.activatable.defaults={keys:[t.ui.keyCode.ENTER,t.ui.keyCode.SPACE]}})(jQuery,fluid_1_1);var fluid_1_1=fluid_1_1||{};(function(f,g){g.orientation={HORIZONTAL:4,VERTICAL:1};g.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};g.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};g.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};g.directionSign=function(k){return k===g.direction.UP||k===g.direction.LEFT?g.direction.PREVIOUS:g.direction.NEXT};g.directionAxis=function(k){return k===g.direction.LEFT||k===g.direction.RIGHT?0:1};g.directionOrientation=function(k){return g.directionAxis(k)?g.orientation.VERTICAL:g.orientation.HORIZONTAL};g.keycodeDirection={up:g.direction.UP,down:g.direction.DOWN,left:g.direction.LEFT,right:g.direction.RIGHT};g.moveDom=function(m,n,k){m=g.unwrap(m);n=g.unwrap(n);var l;if(k===g.position.INSIDE){n.appendChild(m)}else{if(k===g.position.BEFORE){for(l=n.previousSibling;;l=l.previousSibling){if(!l||!g.dom.isIgnorableNode(l)){if(l!==m){g.dom.cleanseScripts(m);n.parentNode.insertBefore(m,n)}break}}}else{if(k===g.position.AFTER){for(l=n.nextSibling;;l=l.nextSibling){if(!l||!g.dom.isIgnorableNode(l)){if(l!==m){g.dom.cleanseScripts(m);g.dom.insertAfter(m,n)}break}}}else{g.fail("Unrecognised position supplied to fluid.moveDom: "+k)}}}};g.normalisePosition=function(l,n,k,m){if(l===g.position.REPLACE){l=n&&k>=m?g.position.AFTER:g.position.BEFORE}return l};g.permuteDom=function(n,r,q,l,o){n=g.unwrap(n);r=g.unwrap(r);var p=f.inArray(n,l);if(p===-1){g.fail("Error in permuteDom: source element "+g.dumpEl(n)+" not found in source list "+g.dumpEl(l))}var v=f.inArray(r,o);if(v===-1){g.fail("Error in permuteDom: target element "+g.dumpEl(r)+" not found in source list "+g.dumpEl(o))}var k=l===o;q=g.normalisePosition(q,k,v,p);var u={};u[g.position.AFTER]=n.nextSibling;u[g.position.BEFORE]=n.previousSibling;g.moveDom(l[p],o[v],q);var t=k?v-1:l.length-2;var m;if(!k||v>p){for(m=t;m>p;--m){g.moveDom(l[m+1],l[m],g.position.AFTER)}if(p+1<l.length){g.moveDom(l[p+1],u[g.position.AFTER],g.position.BEFORE)}}var s=k?p-1:o.length-1;if(q===g.position.AFTER){v++}if(!k||v<p){for(m=v;m<s;++m){g.moveDom(o[m],o[m+1],g.position.BEFORE)}if(s>=0&&s<o.length-1){g.moveDom(o[s],u[g.position.BEFORE],g.position.AFTER)}}};var b=function(k,l){return window.getComputedStyle?window.getComputedStyle(k,null).getPropertyValue(l):k.currentStyle[l]};var h=function(k){while(k&&k.nodeName){if(k.nodeName==="BODY"){return true}k=k.parentNode}return false};var j=function(k){return"hidden"===k.type||b(k,"display")==="none"||b(k,"visibility")==="hidden"||!h(k)};var e=function(m,l,q){var o={};o.element=m;o.orientation=l;if(q===g.position.INSIDE){o.position=q}if(j(m)){o.clazz="hidden"}var p=g.dom.computeAbsolutePosition(m)||[0,0];var n=m.offsetWidth;var k=m.offsetHeight;o.rect={left:p[0],top:p[1]};o.rect.right=p[0]+n;o.rect.bottom=p[1]+k;return o};var c=10000;function d(k){return"Rect top: "+k.top+" left: "+k.left+" bottom: "+k.bottom+" right: "+k.right}function i(k){if(!k||!k.rect){return"null"}else{return d(k.rect)+" position: "+k.position+" for "+g.dumpEl(k.element)}}g.dropManager=function(){var s=[];var l={};var r={};var n;function t(x){return f(x).data("")}function u(x,C,A,B,D,z){var y=f.extend(true,{},A);y.rect[C[B]]=y.rect[C[1-B]]+(B?1:-1);y.rect[C[1-B]]=(B?-1:1)*c;y.position=D===g.position.INSIDE?D:(B?g.position.BEFORE:g.position.AFTER);y.clazz=z;x[x.length]=y}function q(A,y,z,x,C,B){var F=f.extend(true,{},z);var D=f.extend(true,{},z);var E=(F.rect[y[0]]+F.rect[y[1]])/2;F.rect[y[1]]=E;F.position=g.position.BEFORE;D.rect[y[0]]=E;D.position=g.position.AFTER;F.clazz=C;D.clazz=B;A[A.length]=F;A[A.length]=D}function p(z,y,A,x,B){y+=A;if(y<0&&x==="locked"){return"locked"}if(y>=z.length||B===null){return null}else{A=z[y];return B(A)==="locked"&&x==="locked"?"locked":null}}var o;var m,k;r.updateGeometry=function(G){o=G;s=[];l={};var x=G.elementMapper;for(var F=0;F<G.extents.length;++F){var B=G.extents[F];var y=B.orientation;var z=g.rectSides[y];var A=function(L,I,O,P,K){var J=e(L,y,P);J.owner=B;if(J.clazz!=="hidden"&&x){J.clazz=x(L)}l[f.data(L)]=J;var M=p(B.elements,K,g.position.BEFORE,J.clazz,x);var N=p(B.elements,K,g.position.AFTER,J.clazz,x);if(P===g.position.INSIDE){s[s.length]=J}else{q(s,z,J,P,M,N)}if(I&&G.sentinelize){u(s,z,J,1,P,M)}if(O&&G.sentinelize){u(s,z,J,0,P,N)}return J};var H=true;for(var C=0;C<B.elements.length;++C){var E=B.elements[C];var D=A(E,C===0,C===B.elements.length-1,g.position.INTERLEAVED,C);if(D.clazz!=="hidden"){H=false}}if(H&&B.parentElement){A(B.parentElement,true,true,g.position.INSIDE)}}};r.startDrag=function(C,B,z,A){var E=B[0]+z/2;var D=B[1]+A/2;var y=E-C.pageX;var x=D-C.pageY;r.updateGeometry(o);n=null;m=y;k=x;f("").bind("mousemove.fluid-dropManager",r.mouseMove)};r.lastPosition=function(){return n};r.endDrag=function(){f("").unbind("mousemove.fluid-dropManager")};r.mouseMove=function(A){var z=A.pageX+m;var C=A.pageY+k;var B=r.closestTarget(z,C,n);if(B&&B!==g.dropManager.NO_CHANGE){n=B;r.dropChangeFirer.fire(B)}};r.dropChangeFirer=g.event.getEventFirer();var v={element:null};r.closestTarget=function(I,G,D){var C=Number.MAX_VALUE;var A=v;var z=Number.MAX_VALUE;var H=v;for(var F=0;F<s.length;++F){var E=s[F];if(E.clazz==="hidden"){continue}var B=g.geom.minPointRectangle(I,G,E.rect);if(E.clazz==="locked"){if(B<z){z=B;H=E}}else{if(B<C){C=B;A=E}if(B===0){break}}}if(!A){return A}if(z>=C){H=v}if(D&&D.position===A.position&&g.unwrap(D.element)===g.unwrap(A.element)&&g.unwrap(D.lockedelem)===g.unwrap(H.element)){return g.dropManager.NO_CHANGE}return{position:A.position,element:A.element,lockedelem:H.element}};r.projectFrom=function(A,C,B){r.updateGeometry(o);var z=l[t(A)];var y=g.geom.projectFrom(z.rect,C,s,B);if(!y.cacheelem){return null}var x=y.cacheelem.position;return{element:y.cacheelem.element,position:x?x:g.position.BEFORE}};function w(y,A,z){var B=g.directionSign(A);var x=f(z).index(y)+B;if(x<0){x+=z.length}x%=z.length;return z[x]}r.logicalFrom=function(y,A,z){var x=r.getOwningSpan(y,g.position.INTERLEAVED,z);return{element:w(y,A,x),position:g.position.REPLACE}};r.lockedWrapFrom=function(z,D,C){var B=r.logicalFrom(z,D,C);var x=r.getOwningSpan(z,g.position.INTERLEAVED,C);var A=l[t(z)].owner.elements;if(C||x[0]===A[0]){return B}var y=w(z,D,A);if(o.elementMapper(y)==="locked"){B.element=null;B.clazz="locked"}return B};r.getOwningSpan=function(z,y,B){var x=l[t(z)].owner;var A=y===g.position.INSIDE?[x.parentElement]:x.elements;if(!B&&o.elementMapper){A=f.makeArray(A);g.remove_if(A,function(C){return o.elementMapper(C)==="locked"})}return A};r.geometricMove=function(A,B,x){var y=r.getOwningSpan(A,null,true);var z=r.getOwningSpan(B,x,true);g.permuteDom(A,B,x,y,z)};return r};g.dropManager.NO_CHANGE="no change";g.geom=g.geom||{};g.geom.minPointRectangle=function(k,o,n){var m=k<n.left?(n.left-k):(k>n.right?(k-n.right):0);var l=o<n.top?(n.top-o):(o>n.bottom?(o-n.bottom):0);return m*m+l*l};g.geom.minRectRect=function(n,l){var m=n.right<l.left?l.left-n.right:l.right<n.left?n.left-l.right:0;var k=n.bottom<l.top?l.top-n.bottom:l.bottom<n.top?n.top-l.bottom:0;return m*m+k*k};var a=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}};g.geom.projectFrom=function(o,A,B,u){var m=g.directionAxis(A);var x=g.rectSides[A];var v=g.rectSides[m*15+5-A];var r=g.directionSign(A);var k={left:(7*o.left+1*o.right)/8,right:(5*o.left+3*o.right)/8,top:(7*o.top+1*o.bottom)/8,bottom:(5*o.top+3*o.bottom)/8};k[x]=r*c;k[v]=-k[x];function C(G,E,H){var F=E.rect;var I=g.geom.minRectRect(k,F);var D=-r*H*(o[H===1?x:v]-F[H===1?v:x]);if(I<=G.mindist&&D>=0){if(I===G.mindist&&D*H>G.minrdist){return}G.minrdist=D*H;G.mindist=I;G.minelem=E}}var s=a();var w=a();var n=a();for(var y=0;y<B.length;++y){var z=B[y];var l=z.owner&&z.element===z.owner.parentElement;if(z.clazz==="hidden"||u&&l){continue}else{if(!u&&z.clazz==="locked"){C(n,z,1)}else{C(s,z,1);C(w,z,-1)}}}var q=!s.minelem||w.mindist<s.mindist;var t=q?w:s;var p={wrapped:q,cacheelem:t.minelem};
if(n.mindist<t.mindist){p.lockedelem=n.minelem}return p}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(c,d){var b=function(o,l,m){var n=c(o).clone();d.dom.iterateDom(n.get(0),function(p){if(p.tagName.toLowerCase()==="script"){return"delete"}p.removeAttribute("id");if(p.tagName.toLowerCase()==="input"){p.setAttribute("disabled","disabled")}});n.removeAttr("id");n.removeClass("ui-droppable");n.addClass(l);if(m){var k=c(document.createElement("div"));k.append(n);k.append(m);n=k}c("body").append(n);if(!c.browser.safari){n.css("display","block").width(o.offsetWidth).height(o.offsetHeight)}if(c.browser.opera){n.hide()}return n};function f(l){var k=l.dom.fastLocate("selectables");if(k.length<=0){return null}return k[0]}function g(l,n,o,k){var m=n;var p=false;if(c.browser.msie){l[0].ondrag=function(){return false};l[0].onselectstart=function(){return false}}if(c.browser.opera){l.keypress(function(q){if(p){p=false;q.preventDefault();return false}});m=function(r){var q=n(r);if(q===false){p=true}}}l.keydown(m);l.keyup(o)}function j(k){var l=k.dom.fastLocate("selectables")[0];k.container.attr("role",k.options.containerRole.container);k.container.attr("aria-multiselectable","false");k.container.attr("aria-readonly","false");k.container.attr("aria-disabled","false")}function a(k){return k+"_avatar"}var i=function(k){if(k.keysets&&!(k.keysets instanceof Array)){k.keysets=[k.keysets]}};d.reorderer=function(z,m){if(!z){d.fail("Reorderer initialised with no container")}var A=d.initView("fluid.reorderer",z,m);m=A.options;var t=d.dropManager();A.layoutHandler=d.initSubcomponent(A,"layoutHandler",[z,m,t,A.dom]);A.activeItem=undefined;i(m);var k=A.locate("dropWarning");var x;if(k){x=k.clone()}var C=function(F){var H=m.keysets;for(var G=0;G<H.length;G++){if(H[G].modifier(F)){return true}}return false};var l=function(){return c.inArray(A.activeItem,A.dom.fastLocate("movables"))>=0};var n=function(F){A.dom.fastLocate("dropTargets").attr("aria-dropeffect",F)};var u=m.styles;var v=function(F){return(!F.ctrlKey&&!F.altKey&&!F.shiftKey&&!F.metaKey)};var D=function(M){var O=A.activeItem;if(!O){return true}var F=m.keysets;for(var I=0;I<F.length;I++){var H=F[I];var P=false;var L=d.keyForValue(H,M.keyCode);if(!L){continue}var N=H.modifier(M);var G=d.keycodeDirection[L];var J=A.layoutHandler.getRelativePosition(O,G,!N);if(!J){continue}if(N){var K=A.events.onBeginMove.fire(O);if(K===false){return false}if(k.length>0){if(J.clazz==="locked"){A.events.onShowKeyboardDropWarning.fire(O,k);k.show()}else{k.hide()}}if(J.element){A.requestMovement(J,O)}}else{if(v(M)){c(J.element).focus()}}return false}return true};A.handleKeyDown=function(F){if(!A.activeItem||A.activeItem!==F.target){return true}var G=c(A.activeItem);if(!G.hasClass(u.dragging)&&C(F)){if(l()){G.removeClass(u.selected);G.addClass(u.dragging);G.attr("aria-grabbed","true");n("move")}return false}return D(F)};A.handleKeyUp=function(F){if(!A.activeItem||A.activeItem!==F.target){return true}var G=c(A.activeItem);if(G.hasClass(u.dragging)&&!C(F)){if(k){k.hide()}G.removeClass(u.dragging);G.addClass(u.selected);G.attr("aria-grabbed","false");n("none");return false}return false};var o;var p=function(G){var F=c(document.createElement(G));F.addClass(m.styles.dropMarker);F.hide();return F};d.logEnabled=true;A.requestMovement=function(G,F){if(!G||d.unwrap(G.element)===d.unwrap(F)){return}A.events.onMove.fire(F,G);t.geometricMove(F,G.element,G.position);c(A.activeItem).focus();A.refresh();t.updateGeometry(A.layoutHandler.getGeometricInfo());A.events.afterMove.fire(F,G,A.dom.fastLocate("movables"))};var y=function(F,G){A.dom.fastLocate("grabHandle",F)[G?"addClass":"removeClass"](u.hover)};function s(H){var G=m.styles;H.attr("aria-grabbed","false");H.mouseover(function(){A.events.onHover.fire(H,true)});H.mouseout(function(){A.events.onHover.fire(H,false)});var F;A.dom.fastLocate("grabHandle",H).draggable({refreshPositions:false,scroll:true,helper:function(){var I;if(x){I=x[0]}F=c(m.avatarCreator(H[0],G.avatar,I));F.attr("id",a(A.container.id));return F},start:function(O,N){var J=A.events.onBeginMove.fire(H);if(J===false){return false}var M=A.dom.fastLocate("grabHandle",H)[0];var L=d.dom.computeAbsolutePosition(M);var I=M.offsetWidth;var K=M.offsetHeight;H.focus();H.removeClass(m.styles.selected);H.addClass(m.styles.mouseDrag);H.attr("aria-grabbed","true");n("move");t.startDrag(O,L,I,K);F.show()},stop:function(K,J){H.removeClass(m.styles.mouseDrag);H.addClass(m.styles.selected);c(A.activeItem).attr("aria-grabbed","false");var I=d.unwrap(o);if(I.parentNode){I.parentNode.removeChild(I)}F.hide();J.helper=null;n("none");t.endDrag();A.requestMovement(t.lastPosition(),H);A.activeItem.focus()},handle:A.dom.fastLocate("grabHandle",H)})}function E(F,G){F.removeClass(G.selected);F.removeClass(G.dragging);F.addClass(G.defaultStyle);F.attr("aria-selected","false")}var r=function(H){A.events.onSelect.fire(H);var G=m.styles;if(A.activeItem&&A.activeItem!==H){E(c(A.activeItem),G)}A.activeItem=H;var F=c(H);F.removeClass(G.defaultStyle);F.addClass(G.selected);F.attr("aria-selected","true")};var B=function(){var I=function(K){E(c(this),m.styles);return K.stopPropagation()};var J=function(K){r(this);return K.stopPropagation()};var F=A.dom.fastLocate("selectables");for(var H=0;H<F.length;++H){var G=c(F[H]);if(!c.data(G[0],"fluid.reorderer.selectable-initialised")){G.addClass(u.defaultStyle);F.blur(I);F.focus(J);F.click(function(K){var L=d.unwrap(A.dom.fastLocate("grabHandle",this));if(d.dom.isContainer(L,K.target)){c(this).focus()}});F.attr("role",m.containerRole.item);F.attr("aria-selected","false");F.attr("aria-disabled","false");c.data(G[0],"fluid.reorderer.selectable-initialised",true)}}if(!A.selectableContext){A.selectableContext=d.selectable(A.container,{selectableElements:F,selectablesTabindex:A.options.selectablesTabindex,direction:null})}};var w=function(F){d.moveDom(o,F.element,F.position);o.css("display","");if(x){if(F.lockedelem){x.show()}else{x.hide()}}};var q=function(){var I=A.dom.fastLocate("movables");var H=A.dom.fastLocate("dropTargets");B();for(var F=0;F<I.length;F++){var G=I[F];if(!c.data(G,"fluid.reorderer.movable-initialised")){s(c(G));c.data(G,"fluid.reorderer.movable-initialised",true)}}if(I.length>0&&!o){o=p(I[0].tagName)}t.updateGeometry(A.layoutHandler.getGeometricInfo());t.dropChangeFirer.addListener(w,"fluid.Reorderer");H.attr("aria-dropeffect","none")};if(A.container){g(A.container,A.handleKeyDown,A.handleKeyUp);j(A);d.tabbable(A.container);q()}if(m.afterMoveCallbackUrl){A.events.afterMove.addListener(function(){var F=A.layoutHandler;var G=F.getModel?F.getModel():m.acquireModel(A);c.post(m.afterMoveCallbackUrl,JSON.stringify(G))},"postModel")}A.events.onHover.addListener(y,"style");A.refresh=function(){A.dom.refresh("movables");A.dom.refresh("selectables");A.dom.refresh("grabHandle",A.dom.fastLocate("movables"));A.dom.refresh("stylisticOffset",A.dom.fastLocate("movables"));A.dom.refresh("dropTargets");A.events.onRefresh.fire();q();A.selectableContext.selectables=A.dom.fastLocate("selectables");A.selectableContext.selectablesUpdated(A.activeItem)};A.refresh();return A};d.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};d.reorderer.defaultKeysets=[{modifier:function(k){return k.ctrlKey},up:d.reorderer.keys.UP,down:d.reorderer.keys.DOWN,right:d.reorderer.keys.RIGHT,left:d.reorderer.keys.LEFT},{modifier:function(k){return k.ctrlKey},up:d.reorderer.keys.i,down:d.reorderer.keys.m,right:d.reorderer.keys.k,left:d.reorderer.keys.j}];d.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var e=function(k,l,m){m=m||{};m.layoutHandler=l;return d.reorderer(k,m)};d.reorderList=function(k,l){return e(k,"fluid.listLayoutHandler",l)};d.reorderGrid=function(k,l){return e(k,"fluid.gridLayoutHandler",l)};d.reorderer.GEOMETRIC_STRATEGY="projectFrom";d.reorderer.LOGICAL_STRATEGY="logicalFrom";d.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";d.reorderer.NO_STRATEGY=null;d.reorderer.relativeInfoGetter=function(l,n,m,k,o){return function(q,s,p){var r=d.directionOrientation(s);var t=r===l?n:m;return t!==null?k[t](q,s,p):null}};d.defaults("fluid.reorderer",{styles:{defaultStyle:"fl-reorderer-movable-default",selected:"fl-reorderer-movable-selected",dragging:"fl-reorderer-movable-dragging",mouseDrag:"fl-reorderer-movable-dragging",hover:"fl-reorderer-movable-hover",dropMarker:"fl-reorderer-dropMarker",avatar:"fl-reorderer-avatar"},selectors:{dropWarning:".flc-reorderer-dropWarning",movables:".flc-reorderer-movable",grabHandle:"",stylisticOffset:""},avatarCreator:b,keysets:d.reorderer.defaultKeysets,layoutHandler:{type:"fluid.listLayoutHandler"},events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null,onRefresh:null},mergePolicy:{keysets:"replace","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function h(k,m,l){return function(){return{sentinelize:m,extents:[{orientation:k,elements:l.fastLocate("dropTargets")}],elementMapper:function(n){return c.inArray(n,l.fastLocate("movables"))===-1?"locked":null}}}}d.defaults(true,"fluid.listLayoutHandler",{orientation:d.orientation.VERTICAL,containerRole:d.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});d.listLayoutHandler=function(l,m,k,o){var n={};n.getRelativePosition=d.reorderer.relativeInfoGetter(m.orientation,d.reorderer.LOGICAL_STRATEGY,null,k,o);n.getGeometricInfo=h(m.orientation,m.sentinelize,o);return n};d.defaults(true,"fluid.gridLayoutHandler",{orientation:d.orientation.HORIZONTAL,containerRole:d.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});d.gridLayoutHandler=function(l,m,k,o){var n={};n.getRelativePosition=d.reorderer.relativeInfoGetter(m.orientation,d.reorderer.LOGICAL_STRATEGY,d.reorderer.GEOMETRIC_STRATEGY,k,o);n.getGeometricInfo=h(m.orientation,m.sentinelize,o);
return n}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(e,d){var a=function(i,j){return i+"lightbox-cell:"+j+":"};var h=function(j){var i=function(k){if(k.which===d.reorderer.keys.ENTER){var l=e("a",k.target);document.location=l.attr("href")}};e(j).keypress(i)};var c=function(n,p,l){var j=n.getElementsByTagName(p);var o=[];for(var m=0;m<j.length;m+=1){var k=j[m];var q=k.id;if(q&&q.match(l)){o.push(k)}}return o};var f=function(i,j){var k="^"+a(j,"[0-9]+")+"$";return function(){return c(i,"div",k)}};var b=function(i){while(i){if(i.nodeName.toLowerCase()==="form"){return i}i=i.parentNode}};var g=function(j){var i=b(j);return function(){var k,l;k=c(i,"input","^"+a(j.id,"[^:]*")+"reorder-index$");for(l=0;l<k.length;l+=1){k[l].value=l}if(i&&i.action){e.post(i.action,e(i).serialize(),function(n,o,m){})}}};d.defaults("fluid.reorderImages",{layoutHandler:"fluid.gridLayoutHandler",selectors:{imageTitle:".flc-reorderer-imageTitle"}});d.reorderImages=function(i,k){var l=d.initView("fluid.reorderImages",i,k);var m=d.unwrap(l.container);if(!l.options.afterMoveCallback){l.options.afterMoveCallback=g(m)}if(!l.options.selectors.movables){l.options.selectors.movables=f(m,m.id)}var j=d.reorderer(i,l.options);var n=j.locate("movables");d.transform(n,function(o){d.reorderImages.addAriaRoles(l.options.selectors.imageTitle,o)});d.tabindex(e("a",i),-1);h(i);return j};d.reorderImages.addAriaRoles=function(j,i){i=e(i);i.attr("role","img");var m=e(j,i);if(m[0]===i[0]||m[0]===document){d.fail("Could not locate cell title using selector "+j+" in context "+d.dumpEl(i))}var k=d.allocateSimpleId(m);i.attr("aria-labelledby",k);var l=e("img",i);l.attr("role","presentation");l.attr("alt","")};d.lightbox=d.reorderImages})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};fluid.moduleLayout=fluid.moduleLayout||{};(function(c,b){var e=function(g,f){return b.find(f.columns,function(j,i){var h=c.inArray(g,j.elements);return h===-1?null:{columnIndex:i,itemIndex:h}},{columnIndex:-1,itemIndex:-1})};var a=function(g,f){return b.find(f.columns,function(i,h){return g===i.container?h:null},-1)};b.moduleLayout.updateLayout=function(i,k,g,h){i=b.unwrap(i);k=b.unwrap(k);var f=e(i,h);h.columns[f.columnIndex].elements.splice(f.itemIndex,1);var m;if(g===b.position.INSIDE){m=h.columns[a(k,h)].elements;m.splice(m.length,0,i)}else{var l=e(k,h);m=h.columns[l.columnIndex].elements;g=b.normalisePosition(g,f.columnIndex===l.columnIndex,l.itemIndex,f.itemIndex);var j=g===b.position.BEFORE?0:1;m.splice(l.itemIndex+j,0,i)}};b.moduleLayout.layoutFromFlat=function(f,h,g){var i={};i.container=f;i.columns=b.transform(h,function(j){return{container:j,elements:c.makeArray(g.filter(function(){return b.dom.isContainer(j,this)}))}});return i};b.moduleLayout.layoutFromIds=function(f){return{container:b.byId(f.id),columns:b.transform(f.columns,function(g){return{container:b.byId(g.id),elements:b.transform(g.children,b.byId)}})}};b.moduleLayout.layoutToIds=function(f){return{id:b.getId(f.container),columns:b.transform(f.columns,function(g){return{id:b.getId(g.container),children:b.transform(g.elements,b.getId)}})}};var d=function(g,f){if(f){var h=c(g).offset();f=c(f);f.css("position","absolute");f.css("top",h.top);f.css("left",h.left)}};b.defaults(true,"fluid.moduleLayoutHandler",{orientation:b.orientation.VERTICAL,containerRole:b.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});b.moduleLayoutHandler=function(g,n,j,h){var k={};function m(){var p;if(n.selectors.modules){p=b.moduleLayout.layoutFromFlat(g,h.locate("columns"),h.locate("modules"))}if(!p){var o=b.model.getBeanValue(n,"moduleLayout.layout");b.moduleLayout.layoutFromIds(o)}return p}var i=m();k.layout=i;function f(o){var p=n.selectors.lockedModules?h.fastLocate("lockedModules"):[];return c.inArray(o,p)!==-1}k.getRelativePosition=b.reorderer.relativeInfoGetter(n.orientation,b.reorderer.WRAP_LOCKED_STRATEGY,b.reorderer.GEOMETRIC_STRATEGY,j,h);k.getGeometricInfo=function(){var s=[];var r={extents:s,sentinelize:n.sentinelize};r.elementMapper=function(t){return f(t)?"locked":null};for(var o=0;o<i.columns.length;o++){var q=i.columns[o];var p={orientation:n.orientation,elements:c.makeArray(q.elements),parentElement:q.container};s.push(p)}return r};function l(o){return function(){var p=b.accumulate(i.columns,function(q,r){return r.concat(q.elements)},[]);if(!o){b.remove_if(p,f)}return p}}k.returnedOptions={selectors:{movables:l(false),dropTargets:l(false),selectables:l(true)},listeners:{onMove:function(o,p){b.moduleLayout.updateLayout(o,p.element,p.position,i)},onRefresh:function(){i=m();k.layout=i},"onShowKeyboardDropWarning.setPosition":d}};k.getModel=function(){return b.moduleLayout.layoutToIds(i)};return k}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(b,a){a.reorderLayout=function(c,f){var e={layoutHandler:"fluid.moduleLayoutHandler",selectors:{columns:".flc-reorderer-column",modules:".flc-reorderer-module"}};var d=b.extend(true,e,f);return a.reorderer(c,d)}})(jQuery,fluid_1_1);
/*! SWFObject v2.1 <http://code.google.com/p/swfobject/>
	Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
	This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
			ie = true;
			@if (@_win32)
				windows = true;
			@elif (@_mac)
				mac = true;
			@end
		@*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);
if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return}var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)){return a}var c=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var b=window.location.pathname.lastIndexOf("/");if(b<=0){path="/"
}else{path=window.location.pathname.substr(0,b)+"/"}return path+a};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))
};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};fluid_1_1=fluid_1_1||{};(function(f,g){var e=function(r,q,p){q=(q)?q:p;r.animate(q.params,q.duration,q.callback)};var l=function(r,p,q){r.queue("fx",[]);r.animate({width:p,queue:false},q)};var i=function(p,q){if(q===false){p.displayElement.show()}else{e(p.displayElement,q,p.options.showAnimation)}};var a=function(r,q,s){q=(q===null||isNaN(q))?r.options.delay:q;if(q){var p=setTimeout(function(){a(r,0,s)},q)}else{if(s===false){r.displayElement.hide()}else{e(r.displayElement,s,r.options.hideAnimation)}}};var o=function(r,q,t){t=t||false;var p=r.indicator.width();var s=r.options.animate;if((q>p)&&(s==="both"||s==="forward")&&!t){l(r.indicator,q,r.options.speed)}else{if((q<p)&&(s==="both"||s==="backward")&&!t){l(r.indicator,q,r.options.speed)}else{r.indicator.width(q)}}};var j=function(q,p){return Math.round((Math.min(p,100)*q.progressBar.width())/100)};var n=function(p){var q=Math.max(j(p,parseFloat(p.storedPercent)),p.options.minWidth);o(p,q,true)};var k=function(p){p.attr("role","progressbar");p.attr("aria-valuemin","0");p.attr("aria-valuemax","100");p.attr("aria-live","assertive");p.attr("aria-busy","false");p.attr("aria-valuenow","0");p.attr("aria-valuetext","")};var h=function(s,r){var q=r<100&&r>0;s.ariaElement.attr("aria-busy",q);s.ariaElement.attr("aria-valuenow",r);if(q){var p=g.stringTemplate(s.options.ariaBusyText,{percentComplete:r});
s.ariaElement.attr("aria-valuetext",p)}else{if(r===100){s.ariaElement.attr("aria-valuetext",s.options.ariaDoneText)}}};var d=function(p,q){p.html(q)};var m=function(p){p.indicator.css("top",p.progressBar.position().top).css("left",0).height(p.progressBar.height());n(p)};var b=function(r,q,p,t){i(r,t);if(q!==null){r.storedPercent=q;var s=Math.max(j(r,parseFloat(q)),r.options.minWidth);o(r,s)}if(p!==null){d(r.label,p)}if(r.ariaElement){h(r,q)}};var c=function(p){p.displayElement=p.locate("displayElement");if(p.options.initiallyHidden){p.displayElement.hide()}p.progressBar=p.locate("progressBar");p.label=p.locate("label");p.indicator=p.locate("indicator");p.ariaElement=p.locate("ariaElement");p.indicator.width(p.options.minWidth);p.storedPercent=0;if(p.ariaElement){k(p.ariaElement)}};g.progress=function(p,q){var r=g.initView("fluid.progress",p,q);c(r);r.show=function(s){i(r,s)};r.hide=function(s,t){a(r,s,t)};r.update=function(s,t,u){b(r,s,t,u)};r.refreshView=function(){m(r)};return r};g.defaults("fluid.progress",{selectors:{displayElement:".flc-progress",progressBar:".flc-progress-bar",indicator:".flc-progress-indicator",label:".flc-progress-label",ariaElement:".flc-progress-bar"},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:true,updatePosition:false,ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(e,f){var a=function(n,m,o,k){if(!k){return}var l=Math.min(o.chunkSize,n.size);o.bytesUploaded=Math.min(o.bytesUploaded+l,n.size);m.onFileProgress.fire(n,o.bytesUploaded,n.size)};var h=function(l,k){if(l.swfUploadSettings){l.swfUploadSettings.upload_complete_handler(k)}else{l.events.afterFileComplete.fire(k)}};var d=function(l,k){l.queueManager.finishFile(k);if(l.queueManager.shouldUploadNextFile()){i(l)}else{l.queueManager.complete()}};var c=function(l){if(!l.queue.isUploading){return}var k=l.demoState.currentFile;k.filestatus=f.uploader.fileStatusConstants.COMPLETE;l.events.onFileSuccess.fire(k);l.demoState.fileIdx++;d(l,k)};var g=function(l){if(!l.queue.isUploading){return}var k=l.demoState.currentFile;if(l.demoState.bytesUploaded<k.size){l.invokeAfterRandomDelay(function(){a(k,l.events,l.demoState,l.queue.isUploading);g(l)})}else{c(l)}};var i=function(k){k.demoState.currentFile=k.queue.files[k.demoState.fileIdx];k.demoState.chunksForCurrentFile=Math.ceil(k.demoState.currentFile/k.demoState.chunkSize);k.demoState.bytesUploaded=0;k.queue.isUploading=true;k.events.onFileStart.fire(k.demoState.currentFile);k.demoState.currentFile.filestatus=f.uploader.fileStatusConstants.IN_PROGRESS;g(k)};var j=function(l){var k=l.demoState.currentFile;k.filestatus=f.uploader.fileStatusConstants.CANCELLED;l.queue.shouldStop=true;l.events.onFileError.fire(k,f.uploader.errorConstants.UPLOAD_STOPPED,"The demo upload was paused by the user.");d(l,k);l.events.onUploadStop.fire()};var b=function(k){if(k.options.simulateDelay===undefined||k.options.simulateDelay===null){k.options.simulateDelay=true}k.demoState={fileIdx:0,chunkSize:200000};return k};f.demoUploadManager=function(k){var l=k;l.start=function(){l.queueManager.start();i(l)};l.stop=function(){j(l)};l.invokeAfterRandomDelay=function(n){var m;if(l.options.simulateDelay){m=Math.floor(Math.random()*1000+100);setTimeout(n,m)}else{n()}};b(l);return l}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(e,f){var h=function(n,o){var k=[];for(var m=0;m<n.length;m++){var l=n[m];if(o(l)===true){k.push(l)}}return k};var c=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.COMPLETE)})};var i=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.QUEUED||l.filestatus===f.uploader.fileStatusConstants.CANCELLED)})};var j=function(k){return h(k.files,function(l){return(l.filestatus===f.uploader.fileStatusConstants.ERROR)})};var b=function(m,l){var k=e.inArray(l,m.files);m.files.splice(k,1)};var g=function(k){k.currentBatch={fileIdx:-1,files:[],totalBytes:0,numFilesCompleted:0,numFilesErrored:0,bytesUploadedForFile:0,previousBytesUploadedForFile:0,totalBytesUploaded:0}};var a=function(k){var l=k.getReadyFiles();k.currentBatch.files=l;k.currentBatch.totalBytes=f.fileQueue.sizeOfFiles(l)};var d=function(k){g(k);a(k)};f.fileQueue=function(){var k={};k.files=[];k.isUploading=false;k.addFile=function(l){k.files.push(l)};k.removeFile=function(l){b(k,l)};k.totalBytes=function(){return f.fileQueue.sizeOfFiles(k.files)};k.getReadyFiles=function(){return i(k)};k.getErroredFiles=function(){return j(k)};k.sizeOfReadyFiles=function(){return f.fileQueue.sizeOfFiles(k.getReadyFiles())};k.getUploadedFiles=function(){return c(k)};k.sizeOfUploadedFiles=function(){return f.fileQueue.sizeOfFiles(k.getUploadedFiles())};k.setupCurrentBatch=function(){d(k)};k.clearCurrentBatch=function(){g(k)};k.updateCurrentBatch=function(){a(k)};return k};f.fileQueue.sizeOfFiles=function(m){var n=0;for(var l=0;l<m.length;l++){var k=m[l];n+=k.size}return n};f.fileQueue.manager=function(k,l){var m={};m.queue=k;m.events=l;m.start=function(){m.queue.setupCurrentBatch();m.queue.isUploading=true;m.queue.shouldStop=false;m.events.onUploadStart.fire(m.queue.currentBatch.files)};m.startFile=function(){m.queue.currentBatch.fileIdx++;m.queue.currentBatch.bytesUploadedForFile=0;m.queue.currentBatch.previousBytesUploadedForFile=0};m.finishFile=function(o){var n=m.queue.currentBatch;n.numFilesCompleted++;m.events.afterFileComplete.fire(o)};m.shouldUploadNextFile=function(){return !m.queue.shouldStop&&m.queue.isUploading&&m.queue.currentBatch.numFilesCompleted<m.queue.currentBatch.files.length};m.complete=function(){m.events.afterUploadComplete.fire(m.queue.currentBatch.files);m.queue.clearCurrentBatch()};return m}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(f,d){var a=function(i){var h=i.options.maxHeight;var j=(i.scrollingElm.children().eq(0).height()>h);var g=(j)?h:"";i.scrollingElm.height(g)};var e=function(g){g.scrollingElm[0].scrollTop=g.scrollingElm[0].scrollHeight};var c=function(k,j){if(!j||j.length<1){return}var l=0;var h=0;var p=j[0].offsetTop;var i=j.height();var m=k.scrollingElm[0].scrollTop;var o=k.scrollingElm.height();if(k.options.padScroll){var g=j.prev().height();l=(g+i<=o)?g:0;var n=j.next().height();h=(n+i<=o)?n:0}if((p-l)<m){k.scrollingElm[0].scrollTop=p-l}if(((p+i)+h)>(m+o)){i=(i<o)?i:o;k.scrollingElm[0].scrollTop=(p-o+i+h)}};var b=function(g){g.scrollingElm=g.container.parents(g.options.selectors.wrapper);if(!g.scrollingElm.length){d.fail({name:"Missing Scroller",message:"The scroller wrapper element was not found."})}if(!f.browser.msie||f.browser.version>6){g.scrollingElm.css("max-height",g.options.maxHeight)}};d.scroller=function(g,h){var i=d.initView("fluid.scroller",g,h);b(i);i.scrollTo=function(j){c(i,j)};i.scrollBottom=function(){e(i)};i.refreshView=function(){if(f.browser.msie&&f.browser.version<7){a(i)}};i.refreshView();return i};d.defaults("fluid.scroller",{selectors:{wrapper:".flc-scroller"},maxHeight:180,padScroll:true})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(g,m){var k=function(){var t=function(){};SWFUpload.prototype.selectFile=t;SWFUpload.prototype.selectFiles=t};var e=function(t,u){t.returnedOptions={uploadManager:{type:u.options.uploadManager.type||u.options.uploadManager}}};var d=function(t,u){return function(){var w=g("#"+u.uploadManager.swfUploader.movieName,u.container);var v=u.locate("browseButton");m.tabindex(w,0);w.attr("role","button");w.attr("alt","Browse files button");if(t.isTransparent){w.addClass(t.options.styles.browseButtonOverlay);w.css("top",v.position().top);w.css("left",v.position().left)}}};var h=function(){var t=g("<div class='fl-uploader-flash9-container'></div>");var v=g("<span></span>");var u=m.allocateSimpleId(v);t.append(v);g("body").append(t);return u};var i=function(t,u){t.returnedOptions.uploadManager.options={flashURL:t.options.flash9URL||undefined,flashButtonPeerId:h()}};var o=function(){var t=g("<span></span>");m.allocateSimpleId(t);return t};var j=function(u){var v=g("<span></span>");var t=m.allocateSimpleId(v);u.before(v);k();return t};var r=function(v,w){var u=w.locate("browseButton");m.tabindex(u,-1);v.isTransparent=v.options.flashButtonAlwaysVisible?false:(!g.browser.msie||v.options.transparentEvenInIE);var t=v.isTransparent?j(u):m.allocateSimpleId(u);v.returnedOptions.uploadManager.options={flashURL:v.options.flash10URL||undefined,flashButtonImageURL:v.isTransparent?undefined:v.options.flashButtonImageURL,flashButtonPeerId:t,flashButtonHeight:v.isTransparent?u.outerHeight():v.options.flashButtonHeight,flashButtonWidth:v.isTransparent?u.outerWidth():v.options.flashButtonWidth,flashButtonWindowMode:v.isTransparent?SWFUpload.WINDOW_MODE.TRANSPARENT:SWFUpload.WINDOW_MODE.OPAQUE,flashButtonCursorEffect:SWFUpload.CURSOR.HAND,listeners:{afterReady:d(v,w),onUploadStart:function(){w.uploadManager.swfUploader.setButtonDisabled(true)},afterUploadComplete:function(){w.uploadManager.swfUploader.setButtonDisabled(false)}}}};m.swfUploadSetupDecorator=function(v,t){var u={};m.mergeComponentOptions(u,"fluid.swfUploadSetupDecorator",t);u.flashVersion=swfobject.getFlashPlayerVersion().major;e(u,v);if(u.flashVersion===9){i(u,v)}else{r(u,v)}return u};m.defaults("fluid.swfUploadSetupDecorator",{flashButtonAlwaysVisible:true,transparentEvenInIE:false,flashButtonImageURL:"../images/browse.png",flashButtonHeight:22,flashButtonWidth:106,styles:{browseButtonOverlay:"fl-uploader-browse-overlay"}});var f={uploadURL:"upload_url",flashURL:"flash_url",postParams:"post_params",fileSizeLimit:"file_size_limit",fileTypes:"file_types",fileTypesDescription:"file_types_description",fileUploadLimit:"file_upload_limit",fileQueueLimit:"file_queue_limit",flashButtonPeerId:"button_placeholder_id",flashButtonImageURL:"button_image_url",flashButtonHeight:"button_height",flashButtonWidth:"button_width",flashButtonWindowMode:"button_window_mode",flashButtonCursorEffect:"button_cursor",debug:"debug"};
var b={afterReady:"swfupload_loaded_handler",onFileDialog:"file_dialog_start_handler",afterFileQueued:"file_queued_handler",onQueueError:"file_queue_error_handler",afterFileDialog:"file_dialog_complete_handler",onFileStart:"upload_start_handler",onFileProgress:"upload_progress_handler",onFileError:"upload_error_handler",onFileSuccess:"upload_success_handler"};var q=function(y,w,x){var t=x||{};for(var u in w){var v=y[u];if(v){t[v]=w[u]}}return t};var c=function(x,z,y){var u=y||{};for(var v in x.events){var t=x.events[v].fire;var w=z[v];if(w){u[w]=t}}u.upload_complete_handler=function(A){x.queueManager.finishFile(A);if(x.queueManager.shouldUploadNextFile()){x.swfUploader.startUpload()}else{if(x.queueManager.queue.shouldStop){x.swfUploader.stopUpload()}x.queueManager.complete()}};return u};var p=function(t){if(t.queue.isUploading){return}if(t.options.fileQueueLimit===1){t.swfUploader.selectFile()}else{t.swfUploader.selectFiles()}};var l=function(t){t.queue.shouldStop=true;t.events.onUploadStop.fire()};var a=function(t){var u=function(v){m.find(t.queue.files,function(w){if(w.id===v.id){w.filestatus=v.filestatus;return true}})};t.events.afterFileQueued.addListener(function(v){t.queue.addFile(v)});t.events.onFileStart.addListener(function(v){t.queueManager.startFile();u(v)});t.events.onFileProgress.addListener(function(w,z,x){var v=t.queue.currentBatch;var y=z-v.previousBytesUploadedForFile;v.totalBytesUploaded+=y;v.bytesUploadedForFile+=y;v.previousBytesUploadedForFile=z;u(w)});t.events.onFileError.addListener(function(w,v){if(v===m.uploader.errorConstants.UPLOAD_STOPPED){t.queue.isUploading=false}else{if(t.queue.isUploading){t.queue.currentBatch.totalBytesUploaded+=w.size;t.queue.currentBatch.numFilesErrored++}}u(w)});t.events.onFileSuccess.addListener(function(v){if(t.queue.currentBatch.bytesUploadedForFile===0){t.queue.currentBatch.totalBytesUploaded+=v.size}u(v)});t.events.afterUploadComplete.addListener(function(){t.queue.isUploading=false})};var s=function(u,t){u.queue.removeFile(t);u.swfUploader.cancelUpload(t.id);u.events.afterFileRemoved.fire(t)};var n=function(u,t){u.events=t;u.queue=m.fileQueue();u.queueManager=m.fileQueue.manager(u.queue,u.events);u.swfUploadSettings=q(f,u.options);c(u,b,u.swfUploadSettings);u.swfUploader=new SWFUpload(u.swfUploadSettings);a(u)};m.swfUploadManager=function(u,t){var v={};m.mergeComponentOptions(v,"fluid.swfUploadManager",t);m.mergeListeners(u,v.options.listeners);v.browseForFiles=function(){p(v)};v.removeFile=function(w){s(v,w)};v.start=function(){v.queueManager.start();v.swfUploader.startUpload()};v.stop=function(){l(v)};n(v,u);return v};m.defaults("fluid.swfUploadManager",{uploadURL:"",flashURL:"../../../lib/swfupload/flash/swfupload.swf",flashButtonPeerId:"",postParams:{},fileSizeLimit:"20480",fileTypes:"*",fileTypesDescription:null,fileUploadLimit:0,fileQueueLimit:0,debug:false})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(g,i){var D=function(G,F){return G.locate("fileQueue").find("#"+F.id)};var f=function(G,F){return g("#"+F.id+"_error",G.container)};var e=function(I,J){var H=I.uploadManager.queue.files;for(var G=0;G<H.length;G++){var F=H[G];if(F.id.toString()===J.attr("id")){return F}}return null};var u=function(G,F){var H=F.id+"_progress";return G.fileProgressors[H]};var A=function(H,F){var G=D(H,F);H.scroller.scrollTo(G);var I=u(H,F);I.refreshView();I.show()};var r=function(I,G,H,F){var J=i.uploader.derivePercent(H,F);var K=J+"%";u(I,G).update(J,K)};var n=function(H,F){var G=D(H,F);u(H,F).hide();if(F.filestatus===i.uploader.fileStatusConstants.COMPLETE){H.locate("fileIconBtn",G).removeClass(H.options.styles.dim)}};var c=function(H,G){var I=u(H,G);if(!I){return}var F=I.displayElement;F.remove()};var B=function(F,G){G.fadeOut("fast",function(){G.remove();F.refreshView()})};var E=function(G,F){if(F.filestatus===i.uploader.fileStatusConstants.ERROR){B(G,f(G,F))}};var b=function(G,F,H){c(G,F);E(G,F);G.uploadManager.removeFile(F);B(G,H)};var l=function(G,H){var F=e(G,H);if(!F||F.filestatus===i.uploader.fileStatusConstants.COMPLETE){return}b(G,F,H)};var w=function(G,F){var H=D(G,F);b(G,F,H)};var k=function(I,G){var H=function(){if(I.hasClass(G.ready)&&!I.hasClass(G.uploading)){I.addClass(G.hover)}};var F=function(){if(I.hasClass(G.ready)&&!I.hasClass(G.uploading)){I.removeClass(G.hover)}};I.hover(H,F)};var j=function(F,H){var G=function(){l(F,H)};i.activatable(H,null,{additionalBindings:[{key:g.ui.keyCode.DELETE,activateHandler:G}]})};var m=function(F,G){if(g.browser.msie&&g.browser.version<7){k(G,F.options.styles)}F.locate("fileIconBtn",G).click(function(){l(F,G)});j(F,G)};var q=function(G,F){var H=G.rowTemplate.clone();G.locate("fileName",H).text(F.name);G.locate("fileSize",H).text(i.uploader.formatFileSize(F.size));G.locate("fileIconBtn",H).addClass(G.options.styles.remove);H.attr("id",F.id);H.addClass(G.options.styles.ready);m(G,H);return H};var s=function(G,J){var F=G.rowProgressorTemplate.clone();var H=J.attr("id");var I=H+"_progress";F.attr("id",I);F.css("top",J.position().top);F.height(J.height()).width(5);G.container.after(F);G.fileProgressors[I]=i.progress(G.uploadContainer,{selectors:{progressBar:"#"+H,displayElement:"#"+I,label:"#"+I+" .fl-uploader-file-progress-text",indicator:"#"+I}})};var v=function(G,F){var H=q(G,F);if(!(g.browser.msie&&(g.browser.version>=8))){H.hide()}G.container.append(H);H.fadeIn("slow");G.scroller.scrollBottom();s(G,H);G.refreshView()};var z=function(F){var G=F.locate("fileIconBtn",F.locate("fileRows"));G.attr("disabled","disabled");G.addClass(F.options.styles.dim)};var h=function(F){var G=F.locate("fileIconBtn",F.locate("fileRows"));G.removeAttr("disabled");G.removeClass(F.options.styles.dim)};var p=function(F,H,G){H.removeClass(F.options.styles.ready).removeClass(F.options.styles.error).addClass(G)};var a=function(H,G){var I=D(H,G);p(H,I,H.options.styles.uploaded);I.attr("title",H.options.strings.status.success);i.enabled(I,false);var F=H.locate("fileIconBtn",I);F.unbind("click");F.removeClass(H.options.styles.remove);F.attr("title",H.options.strings.status.success)};var x=function(I,K,F){var H=I.errorInfoRowTemplate.clone();H.attr("id",K.attr("id")+"_error");var J=i.keyForValue(i.uploader.errorConstants,F);var G=I.options.strings.errors[J];I.locate("errorText",H).text(G);K.after(H);I.scroller.scrollTo(H)};var C=function(I,G,F){n(I,G);if(G.filestatus===i.uploader.fileStatusConstants.ERROR){var H=D(I,G);p(I,H,I.options.styles.error);x(I,H,F)}};var t=function(F){F.returnedOptions={listeners:{afterFileQueued:F.addFile,onUploadStart:F.prepareForUpload,onFileStart:F.showFileProgress,onFileProgress:F.updateFileProgress,onFileSuccess:F.markFileComplete,onFileError:F.showErrorForFile,afterFileComplete:F.hideFileProgress,afterUploadComplete:F.refreshAfterUpload}}};var y=function(F){i.tabbable(F.container);F.selectableContext=i.selectable(F.container,{selectableSelector:F.options.selectors.fileRows,onSelect:function(G){g(G).addClass(F.options.styles.selected)},onUnselect:function(G){g(G).removeClass(F.options.styles.selected)}})};var o=function(F){F.rowTemplate=F.locate("rowTemplate").remove();if(g.browser.msie&&(g.browser.version>=8)){F.rowTemplate.removeClass(F.options.styles.hiddenTemplate)}F.errorInfoRowTemplate=F.locate("errorInfoRowTemplate").remove();F.errorInfoRowTemplate.removeClass(F.options.styles.hiddenTemplate);F.rowProgressorTemplate=F.locate("rowProgressorTemplate",F.uploadContainer).remove()};var d=function(G,F){G.uploadManager=F;G.scroller=i.scroller(G.container);o(G);y(G);t(G)};i.fileQueueView=function(G,J,F,H){var I=i.initView("fluid.fileQueueView",G,H);I.uploadContainer=J;I.fileProgressors={};I.addFile=function(K){v(I,K)};I.removeFile=function(K){w(I,K)};I.prepareForUpload=function(){z(I)};I.refreshAfterUpload=function(){h(I)};I.showFileProgress=function(K){A(I,K)};I.updateFileProgress=function(L,M,K){r(I,L,M,K)};I.markFileComplete=function(K){u(I,K).update(100,"100%");a(I,K)};I.showErrorForFile=function(L,K){C(I,L,K)};I.hideFileProgress=function(K){n(I,K)};I.refreshView=function(){I.scroller.refreshView();I.selectableContext.refresh()};d(I,F);return I};i.defaults("fluid.fileQueueView",{selectors:{fileRows:".flc-uploader-file",fileName:".flc-uploader-file-name",fileSize:".flc-uploader-file-size",fileIconBtn:".flc-uploader-file-action",errorText:".flc-uploader-file-error",rowTemplate:".flc-uploader-file-tmplt",errorInfoRowTemplate:".flc-uploader-file-error-tmplt",rowProgressorTemplate:".flc-uploader-file-progressor-tmplt"},styles:{hover:"fl-uploader-file-hover",selected:"fl-uploader-file-focus",ready:"fl-uploader-file-state-ready",uploading:"fl-uploader-file-state-uploading",uploaded:"fl-uploader-file-state-uploaded",error:"fl-uploader-file-state-error",remove:"fl-uploader-file-action-remove",dim:"fl-uploader-dim",hiddenTemplate:"fl-uploader-hidden-templates"},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",singleFile:"file",pluralFiles:"files"},status:{success:"File Uploaded",error:"File Upload Error"},errors:{HTTP_ERROR:"File upload error: a network error occured or the file was rejected (reason unknown).",IO_ERROR:"File upload error: a network error occured.",UPLOAD_LIMIT_EXCEEDED:"File upload error: you have uploaded as many files as you are allowed during this session",UPLOAD_FAILED:"File upload error: the upload failed for an unknown reason.",QUEUE_LIMIT_EXCEEDED:"You have as many files in the queue as can be added at one time. Removing files from the queue may allow you to add different files.",FILE_EXCEEDS_SIZE_LIMIT:"One or more of the files that you attempted to add to the queue exceeded the limit of %fileSizeLimit.",ZERO_BYTE_FILE:"One or more of the files that you attempted to add contained no data.",INVALID_FILETYPE:"One or more files were not added to the queue because they were of the wrong type."}}})})(jQuery,fluid_1_1);(function(h,l){var n=function(D,E){return(E===1)?D.options.strings.progress.singleFile:D.options.strings.progress.pluralFiles};var u=function(D,E){E.removeAttr("disabled");
E.removeClass(D.options.styles.dim)};var o=function(D,E){E.attr("disabled","disabled");E.addClass(D.options.styles.dim)};var a=function(D,E){E.removeClass(D.options.styles.hidden)};var f=function(D,E){E.addClass(D.options.styles.hidden)};var A=function(F,E){E=E||false;var D=F.totalProgress.indicator;D.toggleClass(F.options.styles.totalProgress,!E);D.toggleClass(F.options.styles.totalProgressError,E)};var g=function(D){o(D,D.locate("uploadButton"));if(D.uploadManager.queue.files.length===0){D.locate("browseButton").text(D.options.strings.buttons.browse);a(D,D.locate("instructions"))}};var c=function(D){o(D,D.locate("uploadButton"));u(D,D.locate("browseButton"));f(D,D.locate("pauseButton"));a(D,D.locate("uploadButton"))};var m=function(D){D.locate("browseButton").text(D.options.strings.buttons.addMore);f(D,D.locate("pauseButton"));a(D,D.locate("uploadButton"));u(D,D.locate("uploadButton"));u(D,D.locate("browseButton"));f(D,D.locate("instructions"));D.totalProgress.hide()};var d=function(D){D.totalProgress.hide(false,false);A(D);f(D,D.locate("uploadButton"));o(D,D.locate("browseButton"));u(D,D.locate("pauseButton"));a(D,D.locate("pauseButton"));D.locate(D.options.focusWithEvent.afterUploadStart).focus()};var x=function(G){var E=G.uploadManager.queue.getReadyFiles().length;var H=G.uploadManager.queue.sizeOfReadyFiles();var D=n(G,E);var F=l.stringTemplate(G.options.strings.progress.toUploadLabel,{fileCount:E,fileLabel:D,totalBytes:l.uploader.formatFileSize(H)});G.locate("totalFileStatusText").html(F)};var b=function(I){var G=I.uploadManager.queue.currentBatch;var D=l.uploader.derivePercent(G.totalBytesUploaded,G.totalBytes);var F=G.files.length;var H=n(I,F);var E=l.stringTemplate(I.options.strings.progress.totalProgressLabel,{curFileN:G.fileIdx+1,totalFilesN:F,fileLabel:H,currBytes:l.uploader.formatFileSize(G.totalBytesUploaded),totalBytes:l.uploader.formatFileSize(G.totalBytes)});I.totalProgress.update(D,E)};var s=function(H){var J=H.uploadManager.queue.getErroredFiles().length;var I=H.uploadManager.queue.files.length;var F=n(H,I);var G="";if(J>0){var E=(J===1)?H.options.strings.progress.singleError:H.options.strings.progress.pluralErrors;A(H,true);G=l.stringTemplate(H.options.strings.progress.numberOfErrors,{errorsN:J,errorLabel:E})}var D=l.stringTemplate(H.options.strings.progress.completedLabel,{curFileN:H.uploadManager.queue.getUploadedFiles().length,totalFilesN:I,errorString:G,fileLabel:F,totalCurrBytes:l.uploader.formatFileSize(H.uploadManager.queue.sizeOfUploadedFiles())});H.totalProgress.update(100,D)};var t=function(D){D.locate("browseButton").click(function(E){D.uploadManager.browseForFiles();E.preventDefault()});D.locate("uploadButton").click(function(){D.uploadManager.start()});D.locate("pauseButton").click(function(){D.uploadManager.stop()})};var C=function(D){if(D.uploadManager.queue.getReadyFiles().length>0){m(D);x(D);D.locate(D.options.focusWithEvent.afterFileDialog).focus()}};var i=function(D){if(D.uploadManager.queue.getReadyFiles().length===0){g(D)}x(D)};var j=function(D){};var p=function(E){var D=E.uploadManager.queue.shouldStop;if(E.uploadManager.queue.getReadyFiles().length===0){c(E)}else{m(E)}s(E)};var w=function(D){D.events.afterFileDialog.addListener(function(){C(D)});D.events.afterFileRemoved.addListener(function(){i(D)});D.events.onUploadStart.addListener(function(){d(D)});D.events.onUploadStop.addListener(function(){D.locate(D.options.focusWithEvent.afterUploadStop).focus()});D.events.onFileProgress.addListener(function(){b(D)});D.events.onFileSuccess.addListener(function(){b(D)});D.events.onFileError.addListener(function(F,E,G){if(E===l.uploader.errorConstants.UPLOAD_STOPPED){j(D)}});D.events.afterUploadComplete.addListener(function(){p(D)})};var z=function(E){var D=l.initSubcomponent(E,"uploadManager",[E.events,l.COMPONENT_OPTIONS]);return E.options.demo?l.demoUploadManager(D):D};var k=function(D){D.decorators=l.initSubcomponents(D,"decorators",[D,l.COMPONENT_OPTIONS]);D.uploadManager=z(D);D.fileQueueView=l.initSubcomponent(D,"fileQueueView",[D.locate("fileQueue"),D.container,D.uploadManager,l.COMPONENT_OPTIONS]);D.totalProgress=l.initSubcomponent(D,"totalProgressBar",[D.container,l.COMPONENT_OPTIONS]);o(D,D.locate("uploadButton"));t(D);w(D)};l.uploader=function(D,E){var F=l.initView("fluid.uploader",D,E);k(F);return F};l.progressiveEnhanceableUploader=function(D,F,E){F=l.container(F);D=l.container(D);if(swfobject.getFlashPlayerVersion().major<9){F.show()}else{D.show();return l.uploader(D,E)}};l.uploader.formatFileSize=function(D){if(typeof D==="number"){if(D===0){return"0.0 KB"}else{if(D>0){if(D<1048576){return(Math.ceil(D/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(D/1048576*10)/10).toFixed(1)+" MB"}}}}return""};l.uploader.derivePercent=function(D,E){return Math.round((D*100)/E)};l.defaults("fluid.uploader",{demo:false,decorators:[{type:"fluid.swfUploadSetupDecorator"},{type:"fluid.manuallyDegrade",options:{selectors:{enhanceable:".fl-uploader.fl-progEnhance-basic"}}}],uploadManager:{type:"fluid.swfUploadManager"},fileQueueView:{type:"fluid.fileQueueView"},totalProgressBar:{type:"fluid.progress",options:{selectors:{progressBar:".flc-uploader-queue-footer",displayElement:".flc-uploader-total-progress",label:".flc-uploader-total-progress-text",indicator:".flc-uploader-total-progress",ariaElement:".flc-uploader-total-progress"}}},selectors:{fileQueue:".flc-uploader-queue",browseButton:".flc-uploader-button-browse",uploadButton:".flc-uploader-button-upload",pauseButton:".flc-uploader-button-pause",totalFileStatusText:".flc-uploader-total-progress-text",instructions:".flc-uploader-browse-instructions"},focusWithEvent:{afterFileDialog:"uploadButton",afterUploadStart:"pauseButton",afterUploadStop:"uploadButton"},styles:{disabled:"fl-uploader-disabled",hidden:"fl-uploader-hidden",dim:"fl-uploader-dim",totalProgress:"fl-uploader-total-progress-okay",totalProgressError:"fl-uploader-total-progress-errored"},events:{afterReady:null,onFileDialog:null,afterFileQueued:null,afterFileRemoved:null,onQueueError:null,afterFileDialog:null,onUploadStart:null,onUploadStop:null,onFileStart:null,onFileProgress:null,onFileError:null,onFileSuccess:null,afterFileComplete:null,afterUploadComplete:null},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",totalProgressLabel:"Uploading: %curFileN of %totalFilesN %fileLabel (%currBytes of %totalBytes)",completedLabel:"Uploaded: %curFileN of %totalFilesN %fileLabel (%totalCurrBytes)%errorString",numberOfErrors:", %errorsN %errorLabel",singleFile:"file",pluralFiles:"files",singleError:"error",pluralErrors:"errors"},buttons:{browse:"Browse Files",addMore:"Add More",stopUpload:"Stop Upload",cancelRemaning:"Cancel remaining Uploads",resumeUpload:"Resume Upload"}}});l.uploader.errorConstants={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};l.uploader.fileStatusConstants={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};var B=function(D,H,E,G){var F=h("<a href='#'>"+H+"</a>");F.addClass(E);if(D==="before"){G.before(F)}else{G.after(F)}return F};var e=function(D,E){if(window.opera){D.show().removeClass("hideUploaderForOpera");E.show().addClass("hideUploaderForOpera")}else{D.show();E.hide()}};var y=function(D){var F=B(D.options.defaultRenderLocation,D.options.strings.degradeLinkText,D.options.styles.degradeLinkClass,D.enhancedContainer);F.addClass("flc-manuallyDegrade-degrade");var E=B(D.options.defaultRenderLocation,D.options.strings.enhanceLinkText,D.options.styles.enhanceLinkClass,D.degradedContainer);E.addClass("flc-manuallyDegrade-enhance")};var v=function(D){D.degradeControl=D.locate("degradeControl");D.enhanceControl=D.locate("enhanceControl")};var r=function(D){if(!D.degradedContainer.length){return}v(D);if(!D.degradeControl.length&&!D.enhanceControl.length){D.options.controlRenderer(D);v(D)}D.degradeControl.click(D.degrade);D.enhanceControl.click(D.enhance);D.enhanceControl.hide()};var q=function(D){var E=l.defaults("fluid.manuallyDegrade");return(D&&D.container)?D.container:E.container};l.manuallyDegrade=function(F,E){var D=q(E);var H=l.initView("fluid.manuallyDegrade",D,E);var G=false;H.enhancedContainer=F.container;H.degradedContainer=H.locate("enhanceable");H.degrade=function(){e(H.enhanceControl,H.degradeControl);e(H.degradedContainer,H.enhancedContainer);G=true};H.enhance=function(){e(H.degradeControl,H.enhanceControl);e(H.enhancedContainer,H.degradedContainer);G=false};H.isDegraded=function(){return G};r(H);return H};l.defaults("fluid.manuallyDegrade",{container:"body",controlRenderer:y,defaultRenderLocation:"before",strings:{degradeLinkText:"Switch to the standard single-file Uploader",enhanceLinkText:"Switch to the Flash-based multi-file Uploader"},selectors:{enhanceable:".fl-ProgEnhance-basic",degradeControl:".flc-manuallyDegrade-degrade",enhanceControl:".flc-manuallyDegrade-enhance"},styles:{degradeLinkClass:"fl-uploader-manually-degrade",enhanceLinkClass:"fl-uploader-manually-enhance"}})})(jQuery,fluid_1_1);var whitespace="\n\r\t ";var closedTags={abbr:true,br:true,col:true,img:true,input:true,link:true,meta:true,param:true,hr:true,area:true,embed:true};XMLP=function(a){this.m_xml=a;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=[];this.m_attributes={};this.m_emitSynthetic=false};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";
XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infinite loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._checkStructure=function(c){var a=this.m_stack;if(XMLP._STATE_PROLOG==this.m_iState){this.m_iState=XMLP._STATE_DOCUMENT}if(XMLP._STATE_DOCUMENT===this.m_iState){if((XMLP._ELM_B==c)||(XMLP._ELM_EMP==c)){this.m_stack[a.length]=this.getName()}if((XMLP._ELM_E==c)||(XMLP._ELM_EMP==c)){if(a.length===0){return XMLP._NONE}var b=a[a.length-1];this.m_stack.length--;if(b===null||b!==this.getName()){return this._setErr(XMLP.ERR_ELM_NESTING)}}}return c};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){var d=this.m_iP;var a=this.m_xml;if(d===a.length){return XMLP._NONE}var e=a.charAt(d);if(e==="<"){var b=a.charAt(d+1);if(b==="?"){return this._parsePI(d+2)}else{if(b==="!"){if(d===a.indexOf("<!DOCTYPE",d)){return this._parseDTD(d+9)}else{if(d===a.indexOf("<!--",d)){return this._parseComment(d+4)}else{if(d===a.indexOf("<![CDATA[",d)){return this._parseCDATA(d+9)}}}}else{return this._parseElement(d+1)}}}else{return this._parseText(d)}};var nameRegex=/([^\s>]+)/g;var attrStartRegex=/\s*([\w:]+)/gm;var attrValRegex=/\"([^\"]*)\"\s*/gm;var attrValIERegex=/([^\>\s]+)\s*/gm;var closeRegex=/\s*<\//g;XMLP.prototype._parseElement=function(m){var j,d,g;var n,e,a;d=j=this.m_xml.indexOf(">",m);if(j==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(m)=="/"){n=XMLP._ELM_E;m++}else{n=XMLP._ELM_B}if(this.m_xml.charAt(j-1)=="/"){if(n==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}n=XMLP._ELM_EMP;d--}nameRegex.lastIndex=m;var k=nameRegex.exec(this.m_xml);if(!k){return this._setErr(XMLP.ERR_ELM_NAME)}e=k[1].toLowerCase();if("li"===e&&n!==XMLP._ELM_E&&this.m_stack.length>0&&this.m_stack[this.m_stack.length-1]==="li"&&!this.m_emitSynthetic){this.m_name="li";this.m_emitSynthetic=true;return XMLP._ELM_E}this.m_attributes={};this.m_cAlt="";if(nameRegex.lastIndex<d){this.m_iP=nameRegex.lastIndex;while(this.m_iP<d){attrStartRegex.lastIndex=this.m_iP;var c=attrStartRegex.exec(this.m_xml);if(!c){return this._setErr(XMLP.ERR_ATT_VALUES)}var h=c[1].toLowerCase();var l;if(this.m_xml.charCodeAt(attrStartRegex.lastIndex)===61){var b=this.m_xml.charCodeAt(attrStartRegex.lastIndex+1)===34?attrValRegex:attrValIERegex;b.lastIndex=attrStartRegex.lastIndex+1;c=b.exec(this.m_xml);if(!c){return this._setErr(XMLP.ERR_ATT_VALUES)}l=c[1]}else{l=h;b=attrStartRegex}if(!this.m_attributes[h]){this.m_attributes[h]=l}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=b.lastIndex}}if(e.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=e;this.m_iP=j+1;if(closedTags[e]){closeRegex.lastIndex=j+1;var f=closeRegex.exec;if(f){var i=this.m_xml.indexOf(e,f.lastIndex);if(i===f.lastIndex){return n}else{return XMLP._ELM_EMP}}}this.m_emitSynthetic=false;return n};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]>",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("-->",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,a-4,b+3);this.m_iP=b+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(b){var e,a,c,d;e=this.m_xml.indexOf(">",b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}c=this.m_xml.indexOf("[",b);a=((c!=-1)&&(c<e))?"]>":">";while(true){if(e==d){return this._setErr(XMLP.ERR_INFINITELOOP)}d=e;e=this.m_xml.indexOf(a,b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(e-1,e+2)!="]]>"){break}}this.m_iP=e+a.length;return XMLP._DTD};XMLP.prototype._parsePI=function(b){var e,a,d,f,c;e=this.m_xml.indexOf("?>",b);if(e==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}a=SAXStrings.indexOfNonWhitespace(this.m_xml,b,e);if(a==-1){return this._setErr(XMLP.ERR_PI_TARGET)}d=SAXStrings.indexOfWhitespace(this.m_xml,a,e);if(d==-1){d=e}f=SAXStrings.indexOfNonWhitespace(this.m_xml,d,e);if(f==-1){f=e}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,f,e);if(c==-1){c=e-1}this.m_name=this.m_xml.substring(a,d);this._setContent(XMLP._CONT_XML,f,c+1);this.m_iP=e+2;return XMLP._PI};XMLP.prototype._parseText=function(a){var b=this.m_xml.indexOf("<",a);if(b==-1){b=this.m_xml.length}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b;return XMLP._TEXT};XMLP.prototype._setContent=function(b){var a=arguments;if(XMLP._CONT_XML==b){this.m_cAlt=null;this.m_cB=a[1];this.m_cE=a[2]}else{this.m_cAlt=a[1];this.m_cB=0;this.m_cE=a[1].length}this.m_cSrc=b};XMLP.prototype._setErr=function(b){var a=XMLP._errs[b];this.m_cAlt=a;this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXStrings={};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(d,c){if(!d){return -1}c=c||d.length;var a=d.substring(0,c).split("\n");a.length--;var b=a.join("\n").length;return c-b};SAXStrings.getLineNumber=function(b,a){if(!b){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};SAXStrings.indexOfNonWhitespace=function(f,a,d){if(!f){return -1}a=a||0;d=d||f.length;for(var b=a;b<d;++b){var e=f.charAt(b);if(e!==" "&&e!=="\t"&&e!=="\n"&&e!=="\r"){return b}}return -1};SAXStrings.indexOfWhitespace=function(d,a,c){if(!d){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};SAXStrings.lastIndexOfNonWhitespace=function(d,a,c){if(!d){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.replace=function(e,a,d,c,b){if(!e){return""}a=a||0;d=d||e.length;return e.substring(a,d).split(c).join(b)};function __unescapeString(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}function __escapeString(e){var f=/&/g;var c=/</g;var a=/>/g;var b=/"/g;var d=/'/g;e=e.replace(f,"&amp;");e=e.replace(c,"&lt;");e=e.replace(a,"&gt;");e=e.replace(b,"&quot;");e=e.replace(d,"&apos;");return e}fluid_1_1=fluid_1_1||{};(function(w,s){var C;var u;var K;var G=0;var r=0;var m=false;var f=-1;var e=-1;var H;var M=false;var k=[];var h=[];function I(P,t,O){C.rootlump=s.XMLLump(0,-1);K=[C.rootlump];G=0;r=0;m=false;f=-1;e=-1;H=P;M=t;k=O;if(k){for(var N=0;N<k.length;++N){h[N]=[];k[N].tree=s.parseSelector(k[N].selector)}}}function v(){for(var t=K.length-1;t>=0;--t){var N=K[t];if(N.rsfID!==undefined){return N}}return C.rootlump}function A(){var t=s.XMLLump(G,r);if(M){t.line=u.getLineNumber();t.column=u.getColumnNumber()}C.lumps[G]=t;++G;return t}function n(N,t,O){var P=N[t];if(!P){P=[];N[t]=P}P[P.length]=O}function g(t,N){if(t.indexOf("scr=contribute-")!==-1){var O=t.substring("scr=contribute-".length);n(C.collectmap,O,N)}}var z=function(P){var Q=z.options,O=Q.parser[Q.strictMode?"strict":"loose"].exec(P);for(var t=0,N={};t<14;t++){N[Q.key[t]]=O[t]||""}N[Q.q.name]={};N[Q.key[12]].replace(Q.q.parser,function(S,R,T){if(R){N[Q.q.name][R]=T}});return N};z.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function c(N){var t=z(N);if(t.protocol||N.charAt(0)==="/"){return N}else{return H+N}}s.debugLump=function(N){var t=N.text;t+=" at ";t+="lump line "+N.line+" column "+N.column+" index "+N.lumpindex;t+=parent.href===null?"":" in file "+parent.href;return t};function F(t){return"<"+t.tagname+">"}function q(N,t){if(!t){return false}return(" "+t+" ").indexOf(" "+N+" ")!==-1}function p(O,P){if(O.predList){for(var N=0;N<O.predList.length;++N){var t=O.predList[N];if(t.id&&P.attributemap.id!==t.id){return false}if(t.clazz&&!q(t.clazz,P.attributemap["class"])){return false}if(t.tag&&P.tagname!==t.tag){return false}}return true}}function E(T){var Q=undefined;if(k){for(var O=0;O<k.length;++O){var R=k[O];var S=h[O];var t=S.length;if(t<R.tree.length){var N=R.tree[t];if(t>0){if(R.tree[t-1].child&&S[t-1]!==T.nestingdepth-1){continue}}var P=p(N,T);if(P){S[S.length]=T.nestingdepth;if(S.length===R.tree.length){if(Q!==undefined){s.fail("Cutpoint specification error - node "+F(T)+" has already matched with rsf:id of "+Q)
}if(R.id===undefined||R.id===null){s.fail("Error in cutpoints list - entry at position "+O+" does not have an id set")}Q=R.id}}}}}return Q}function y(){if(k){for(var t=0;t<k.length;++t){var N=h[t];if(N.length>0&&N[N.length-1]===r){N.length--}}}}function a(U,Y){++r;if(m){m=false;var Q=A();Q.nestingdepth--}if(C.firstdocumentindex===-1){C.firstdocumentindex=G}var T=A();var t=K[K.length-1];T.uplump=t;var W=u.getName();T.tagname=W;var X=T.attributemap=u.m_attributes;var V=X[s.ID_ATTRIBUTE];if(V===undefined){V=E(T)}for(var P in X){var S=X[P];if(/href|src|codebase|action/.test(P)){S=c(S);X[P]=S}else{if(V===undefined&&/for|headers/.test(P)){V=X[s.ID_ATTRIBUTE]="scr=null"}}}if(V){if(V.charCodeAt(0)===126){V=V.substring(1);T.elide=true}g(V,T);T.rsfID=V;var O=v();if(!O.downmap){O.downmap={}}n(O.downmap,V,T);n(C.globalmap,V,T);var N=V.indexOf(":");if(N!==-1){var R=V.substring(0,N);if(!t.finallump){t.finallump={}}t.finallump[R]=T}}T.text="<"+W+s.dumpAttributes(X)+">";K[K.length]=T;if(U){o()}}function o(){y();var t=A();--r;t.text="</"+u.getName()+">";var N=K[K.length-1];N.close_tag=C.lumps[G-1];K.length--;m=true}function i(){if(f!==-1){if(C.firstdocumentindex===-1){C.firstdocumentindex=G}var N=u.getContent().substr(f,e-f);m=false;var t=A();t.text=N;f=-1}}s.ID_ATTRIBUTE="rsf:id";s.getPrefix=function(N){var t=N.indexOf(":");return t===-1?N:N.substring(0,t)};s.SplitID=function(O){var N={};var t=O.indexOf(":");if(t===-1){N.prefix=O}else{N.prefix=O.substring(0,t);N.suffix=O.substring(t+1)}return N};s.XMLLump=function(N,t){return{nestingdepth:t,lumpindex:N,parent:C}};s.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}};s.fetchResources=function(P,T){var N=function(U){return{success:function(V){U.resourceText=V;U.resourceKey=U.href;U.queued=false;s.fetchResources(P,T)},error:function(V,X,W){U.fetchError={status:V.status,textStatus:X,errorThrown:W}}}};var t=true;for(var Q in P){var O=P[Q];if(O.href&&!O.resourceText){if(!O.queued){var S=N(O);w.ajax({url:O.href,success:S.success,error:S.error});O.queued=true}t=false}else{if(O.nodeId&&!O.resourceText){var R=document.getElementById(O.nodeId);O.resourceText=s.dom.getElementText(R);O.resourceKey=O.nodeId}}}if(t){if(w.browser.mozilla){setTimeout(function(){T(P)},1)}else{T(P)}}};s.XMLEncode=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};s.dumpAttributes=function(t){var O="";for(var P in t){var N=t[P];if(N!==null&&N!==undefined){O+=" "+P+'="'+N+'"'}}return O};s.aggregateMMap=function(P,O){for(var t in O){var N=P[t];if(!N){P[t]=[]}P[t]=P[t].concat(O[t])}};var D=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;s.unescapeProperties=function(N){N=N.replace(D,function(R){var S=R.substring(2);var Q=parseInt(S,16);return String.fromCharCode(Q)});var P=0;while(true){var t=N.indexOf("\\",P);if(t===-1){break}if(t===N.length-1){return[N.substring(0,N.length-1),true]}var O=N.charAt(t+1);if(O==="n"){O="\n"}if(O==="r"){O="\r"}if(O==="t"){O="\t"}N=N.substring(0,t)+O+N.substring(t+2);P=t+1}return[N,false]};var B=/[^\\][\s:=]/;s.parseJavaProperties=function(S){var N={};S=S.replace(/\r\n/g,"\n");S=S.replace(/\r/g,"\n");lines=S.split("\n");var T,R,t,V,Q;for(var O=0;O<lines.length;++O){var U=w.trim(lines[O]);if(!U||U.charAt(0)==="#"||U.charAt(0)==="!"){continue}if(!T){t="";var P=U.search(B);if(P===-1){R=U;V=""}else{R=w.trim(U.substring(0,P+1));V=w.trim(U.substring(P+2));if(V.charAt(0)===":"||V.charAt(0)==="="){V=w.trim(V.substring(1))}}R=s.unescapeProperties(R)[0];Q=s.unescapeProperties(V)}else{Q=s.unescapeProperties(U)}T=Q[1];if(!Q[1]){N[R]=t+Q[0]}else{t+=Q[0]}}return N};s.parseTemplates=function(Q,S,t){var O=[];O.globalmap={};for(var R=0;R<S.length;++R){var P=Q[S[R]];var T=P.href.lastIndexOf("/");var N=T===-1?"":P.href.substring(0,T+1);var U=s.parseTemplate(P.resourceText,N,t.scanStart&&R===0,P.cutpoints,t);if(R===0){s.aggregateMMap(O.globalmap,U.globalmap)}U.href=P.href;U.baseURL=N;U.resourceKey=P.resourceKey;O[R]=U;s.aggregateMMap(O.globalmap,U.rootlump.downmap)}return O};s.parseTemplate=function(T,P,R,Q,t){C=s.XMLViewTemplate();t=t||{};I(P,t.debugMode,Q);var S=T.indexOf(s.ID_ATTRIBUTE);if(R){var N=T.indexOf(">",S);u=new XMLP(T.substring(N+1))}else{u=new XMLP(T)}parseloop:while(true){var O=u.next();switch(O){case XMLP._ELM_B:i();a(false,"");break;case XMLP._ELM_E:i();o();break;case XMLP._ELM_EMP:i();a(true,"");break;case XMLP._PI:case XMLP._DTD:f=-1;continue;case XMLP._TEXT:case XMLP._ENTITY:case XMLP._CDATA:case XMLP._COMMENT:if(f===-1){f=u.m_cB}e=u.m_cE;break;case XMLP._ERROR:s.setLogging(true);var U="Error parsing template: "+u.m_cAlt+" at line "+u.getLineNumber();s.log(U);s.log("Just read: "+u.m_xml.substring(u.m_iP-30,u.m_iP));s.log("Still to read: "+u.m_xml.substring(u.m_iP,u.m_iP+30));s.fail(U);break parseloop;case XMLP._NONE:break parseloop}}return C};var L="(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";var J=new RegExp("^>\\s*("+L+"+)");var x=new RegExp("^("+L+"+)(#)("+L+"+)");var l=new RegExp("^s*([#.]?)("+L+"*)");var b=new RegExp("([#.]?)("+L+"+)","g");var d=new RegExp("\\s*(>)?\\s*","g");var j=new RegExp("^\\w*$");s.parseSelector=function(S){var N=[];S=w.trim(S);b.lastIndex=0;var R=0;while(true){var P=[];while(true){var V=b.exec(S);if(!V||V.index!==R){break}var Q={};var U=V[2];if(V[1]===""){Q.tag=U}else{if(V[1]==="#"){Q.id=U}else{if(V[1]==="."){Q.clazz=U}}}P[P.length]=Q;R=b.lastIndex}d.lastIndex=R;var t={predList:P};var O=d.exec(S);if(!O||O.index!==R){var T=S.substring(R);s.fail("Error in selector string - can not match child selector expression at "+T)}if(O[1]===">"){t.child=true}N[N.length]=t;if(d.lastIndex>=S.length){break}R=d.lastIndex;b.lastIndex=d.lastIndex}return N}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(af,C){function h(av){return"as child of "+(av.parent.fullID?"component with full ID "+av.parent.fullID:"root")}function ae(ay){var aA="";var aw=ay;if(ay.children===undefined){aA=ay.ID+(ay.localID!==undefined?ay.localID:"");aw=ay.parent}while(aw.parent){var az=aw.parent;if(aw.fullID!==undefined){aA=aw.fullID+aA;return aA}if(aw.noID===undefined){var av=aw.ID;if(av===undefined){C.fail("Error in component tree - component found with no ID "+h(az)+": please check structure")}var ax=av.indexOf(":");var aB=ax===-1?av:av.substring(0,ax);aA=aB+":"+(aw.localID===undefined?"":aw.localID)+":"+aA}aw=az}return aA}function b(av){return C.isPrimitive(av)||av instanceof Array&&(av.length===0||typeof(av[0])==="string")}function n(ax,aw){if(b(ax)){return{componentType:"UIBound",value:ax,ID:aw}}else{var av=o(ax);if(av.ID){return{ID:aw,componentType:"UIContainer",children:[av]}}else{av.ID=aw;return av}}}function an(ax){if(!(ax instanceof Array)){var ay=[];for(var aw in ax){var az=ax[aw];if(az instanceof Array){for(var av=0;av<az.length;++av){var aA=n(az[av],aw);ay[ay.length]=aA}}else{ay[ay.length]=n(az,aw)}}return ay}else{return ax}}function i(av,aw){if(av.value===undefined&&av.valuebinding!==undefined){if(!aw){C.fail("Cannot perform value fixup for valuebinding "+av.valuebinding+" since no model was supplied to rendering")}av.value=C.model.getBeanValue(aw,av.valuebinding)}}function Z(aw,ax,av){if(aw[ax]!==undefined){if(b(aw[ax])){aw[ax]={value:aw[ax]}}}else{aw[ax]={value:null}}i(aw[ax],av)}var ah={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};function o(ay,ax){if(ay){for(var az in ah){if(ay[az]!==undefined){ay.componentType=ah[az];break}}if(ay.componentType===undefined&&ay.ID!==undefined){ay.componentType="UIBound"}}if(!ay||ay.componentType===undefined){var aw=ay.decorators;if(aw){delete ay.decorators}ay={componentType:"UIContainer",children:ay};ay.decorators=aw}var av=ay.componentType;if(av==="UIContainer"){ay.children=an(ay.children)}else{if(av==="UISelect"){Z(ay,"selection",ax);Z(ay,"optionlist",ax);Z(ay,"optionnames",ax)}else{if(av==="UILink"){Z(ay,"target",ax);Z(ay,"linktext",ax)}}}return ay}function R(aw,av){if(aw.submittingname===undefined&&aw.willinput!==false){aw.submittingname=av?av:aw.fullID}return aw.submittingname}function k(aE,aB){if(aE.componentType===undefined){aE=o(aE,aB)}if(aE.componentType!=="UIContainer"&&!aE.parent){aE={children:[aE]}}if(aE.children){aE.childmap={};for(var aA=0;aA<aE.children.length;++aA){var aw=aE.children[aA];if(aw.componentType===undefined){aw=o(aw,aB);aE.children[aA]=aw}aw.parent=aE;if(aw.ID===undefined){C.fail("Error in component tree: component found with no ID "+h(aw))}aE.childmap[aw.ID]=aw;var ay=aw.ID.indexOf(":");if(ay===-1){}else{var aC=aw.ID.substring(0,ay);var av=aE.childmap[aC];if(!av){av=[];aE.childmap[aC]=av}if(aw.localID===undefined&&av.length!==0){aw.localID=av.length}av[av.length]=aw}aw.fullID=ae(aw);var ax=aw.componentType;if(ax=="UISelect"){aw.selection.fullID=aw.fullID+"-selection"}else{if(ax=="UIInitBlock"){var aD=aw.functionname+"(";for(var az=0;az<aw.arguments.length;++az){if(aw.arguments[az] instanceof C.ComponentReference){aw.arguments[az]=aw.parent.fullID+aw.arguments[az].reference}aD+='"'+aw.arguments[az]+'"';if(az<aw.arguments.length-1){aD+=", "}}aw.markup=aD+")\n";aw.componentType="UIVerbatim"}else{if(ax=="UIBound"){i(aw,aB)}}}k(aw,aB)}}return aE}var ap={};var x={};var p={};var M={};var ag={};var ao="";var g=false;var e={};var G={};var L=[];var v={};function m(aw,av,ax){return aw.resourceKey+av.fullID+ax}function F(aA,av,ax,aC){var aB;var az=ax?ax[aA]:null;if(az){for(var aw=0;aw<az.length;++aw){var ay=az[aw];if(!aB&&ay.rsfID==av){aB=ay}if(ay.rsfID==aA){return ay}}}return aB}function al(ay,aA){var az=aA.jointID?aA.jointID:aA.ID;var ax=C.SplitID(az);var av=ax.prefix+":";var aw=F(az,av,ay.downmap,aA);if(aw){return aw}if(aA.children){aw=F(az,av,ap,aA);if(aw){return aw}}return null}function au(av){if(!M[av.href]){C.aggregateMMap(ag,av.collectmap);M[av.href]=true}}function j(aA,ax){for(var ay=0;ay<aA.children.length;++ay){var aB=aA.children[ay];if(aB.children){var aD=al(ax,aB);if(aD){x[aB.fullID]=aD;var av=aD.attributemap.id;
if(av!==undefined){p[m(ax.parent,aA,av)]=aB.fullID}au(aD.parent);j(aB,aD)}}}if(ax.downmap){for(var av in ax.downmap){var aC=ax.downmap[av];for(var ay=0;ay<aC.length;++ay){var az=aC[ay];var aE=az.attributemap.id;if(aE!==undefined&&az.rsfID!==undefined){var aD=a(aA,az.rsfID);if(aD!==null){var aw=aD.fullID;if(aD.componentType==="UISelect"){aw=aw+"-selection"}p[m(ax.parent,aA,aE)]=aw}}}}}}function ar(ax,aw,av){x={};p={};M={};ag={};ap=ax;x[aw.fullID]=av;j(aw,av)}function r(ax,av){if(av.elide){return}var aw={};af.extend(true,aw,av.attributemap);aq(aw,ax);y(ax,aw);ao+="<"+av.tagname+" ";ao+=C.dumpAttributes(aw);ao+=">"}function s(aw,ay,av){for(;ay<av;++ay){var ax=aw[ay].text;if(ax){ao+=aw[ay].text}}}function E(ax,aA,av,az,aw){var aB=aA;while(true){if(aA===ax.length){break}var ay=ax[aA];if(ay.nestingdepth<av){break}if(ay.rsfID!==undefined){if(!aw){break}if(aw&&ay.nestingdepth>av+(az?0:1)){C.log("Error in component tree - leaf component found to contain further components - at "+ay.toString())}else{break}}++aA}if(!az&&(aA==ax.length||!ax[aA].rsfID)){--aA}s(ax,aB,aA);return aA}var A={};function P(){if(!A.iselide){ao+="<"+A.uselump.tagname}}function u(){if(!A.iselide){ao+="</"+A.uselump.tagname+">"}}function c(){s(A.uselump.parent.lumps,A.uselump.lumpindex+1,A.close.lumpindex+(A.iselide?0:1))}function at(){if(!A.iselide){ao+=C.dumpAttributes(A.attrcopy)}ab()}function B(){if(A.iselide){at()}else{ao+=C.dumpAttributes(A.attrcopy);ao+=">";A.nextpos=A.endopen.lumpindex}}function ab(){if(A.endopen.lumpindex===A.close.lumpindex){if(!A.iselide){ao+="/>"}}else{if(!A.iselide){ao+=">"}s(A.uselump.parent.lumps,A.endopen.lumpindex,A.close.lumpindex+(A.iselide?0:1))}}function q(av){if(Y(av)){ad(av)}else{at()}}function aj(av){if(A.iselide){q(A.value)}else{if(Y(av)){ad(av)}else{B()}}}function ad(av){ao+=C.dumpAttributes(A.attrcopy);if(!A.iselide){ao+=">"}ao+=C.XMLEncode(av.toString());u()}function Y(av){return av!==null&&av!==undefined&&!w(av)}function w(av){return false}function U(aw,av){return av}function l(ax){ao+='<input type="hidden" ';var aw=ax.virtual;var av={};av[aw?"id":"name"]=ax.name;av.value=ax.value;ao+=C.dumpAttributes(av);ao+=" />\n"}function X(av,aw){var aA=A.uselump.tagname;var ay=G.applier;function az(){C.applyChange(C.byId(aw),undefined,ay)}if(G.autoBind&&/input|select|textarea/.test(aA)&&!v[aw]){var ax=[{jQuery:["change",az]}];if(af.browser.msie&&aA==="input"&&/radio|checkbox/.test(A.attrcopy.type)){ax.push({jQuery:["click",az]})}Q(av,ax,A.attrcopy,aw)}}function ai(av,ax){if(av){var aw=ax?ax:av;if(e&&aw.submittingname&&aw.valuebinding){e[aw.submittingname]={name:aw.submittingname,EL:aw.valuebinding,oldvalue:aw.value};X(av,av.fullID)}if(av.fossilizedbinding){l(av.fossilizedbinding)}if(av.fossilizedshaper){l(av.fossilizedshaper)}}}function aa(av){if(!v[av.selection.fullID]){v[av.selection.fullID]=true;ai(av.selection);ai(av.optionlist);ai(av.optionnames)}}C.NULL_STRING="\u25a9null\u25a9";var am={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};function D(av,ax){var aw=av.selection;return aw.value&&typeof(aw.value)!=="string"&&typeof(aw.value.length)==="number"?af.inArray(ax,aw.value,ax)!==-1:aw.value===ax}function W(av,aw){av=av.parent;if(aw.indexOf("..::")===0){aw=aw.substring(4);av=av.parent}return av.childmap[aw]}function V(aw){var ay=[];if(aw.type){ay[0]=aw}else{for(var ax in aw){if(ax==="$"){ax="jQuery"}var az=aw[ax];var av={type:ax};if(ax==="jQuery"){av.func=az[0];av.args=az.slice(1)}else{if(ax==="addClass"||ax==="removeClass"){av.classes=az}else{if(ax==="attrs"){av.attributes=az}else{if(ax==="identify"){av.key=az}}}}ay[ay.length]=av}}return ay}function Q(az,aD,aw,aB){G.idMap=G.idMap||{};for(var ay=0;ay<aD.length;++ay){var ax=aD[ay];var aA=ax.type;if(!aA){var aC=V(ax);Q(az,aC,aw,aB);continue}if(aA==="$"){aA=ax.type="jQuery"}if(aA==="jQuery"||aA==="event"||aA==="fluid"){var av=aq(aw,az,true,aB);ax.id=av;L[L.length]=ax}else{if(aA==="attrs"){af.extend(true,aw,ax.attributes)}else{if(aA==="addClass"||aA==="removeClass"){var aE={nodeType:1,className:aw["class"]||""};af(aE)[aA](ax.classes);aw["class"]=aE.className}else{if(aA==="identify"){var av=aq(aw,az,true,aB);G.idMap[ax.key]=av}}}}}}function y(av,aw){if(!av.decorators){return}if(av.decorators.length===undefined){av.decorators=V(av.decorators)}Q(av,av.decorators,aw)}function J(aI){var aA=A.attrcopy;var av=A.uselump.parent.lumps;var aC=A.uselump.lumpindex;var aG=aI.componentType;var aL=A.uselump.tagname;y(aI,aA);if(aG==="UIMessage"){aG="UIBound";if(!G.messageLocator){aI.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}else{aI.value=G.messageLocator(aI.messagekey,aI.args)}}function ax(aP,aQ){C.fail("Error in component tree - UISelectChoice with id "+aP.fullID+aQ)}if(aG==="UIBound"||aG==="UISelectChoice"){var aD;if(aI.choiceindex!==undefined){if(aI.parentFullID){aD=getAbsoluteComponent(view,aI.parentFullID);if(!aD){ax(aI," has parentFullID of "+aI.parentFullID+" which cannot be resolved")}}else{if(aI.parentRelativeID!==undefined){aD=W(aI,aI.parentRelativeID);if(!aD){ax(aI," has parentRelativeID of "+aI.parentRelativeID+" which cannot be resolved")}}else{ax(aI," does not have either parentFullID or parentRelativeID set")}}R(aD.selection);aa(aD)}var az=aD?aD.selection.submittingname:aI.submittingname;if(aL==="input"||aL==="textarea"){if(!aD){az=R(aI)}if(az!==undefined){aA.name=az}}ai(aI,aD?aD.selection:null);if(typeof(aI.value)==="boolean"||aA.type==="radio"||aA.type==="checkbox"){var aB;var aK=aI.value;if(aI.choiceindex!==undefined){if(!aD.optionlist.value){C.fail("Error in component tree - selection control with full ID "+aD.fullID+" has no values")}aB=aD.optionlist.value[aI.choiceindex];aK=D(aD,aB)}if(Y(aK)){if(aK){aA.checked="checked"}else{delete aA.checked}}aA.value=aB?aB:"true";q(null)}else{if(aI.value instanceof Array){c()}else{var aH=aD?aD[aL==="textarea"||aL==="input"?"optionlist":"optionnames"].value[aI.choiceindex]:aI.value;if(aL==="textarea"){if(w(aH)&&aI.willinput){aH=""}q(aH)}else{if(aL==="input"){if(aI.willinput||Y(aH)){aA.value=aH}q(null)}else{delete aA.name;aj(aH)}}}}}else{if(aG==="UISelect"){X(aI,aI.selection.fullID);var aO=aL==="select";var ay=false;if(aI.selection.value instanceof Array){ay=true;if(aO){aA.multiple="multiple"}}R(aI.selection,aA.id);if(aO){if(aI.selection.willinput!==false){aA.name=aI.selection.submittingname}}ao+=C.dumpAttributes(aA);if(aO){ao+=">";var aw=aI.optionlist.value;var aF=aI.optionnames===null||aI.optionnames===undefined||!aI.optionnames.value?aw:aI.optionnames.value;if(!aF||!aF.length){C.fail("Error in component tree - UISelect component with fullID "+aI.fullID+" does not have optionnames set")}for(var aJ=0;aJ<aF.length;++aJ){ao+='<option value="';var aH=aw[aJ];if(aH===null){aH=C.NULL_STRING}ao+=C.XMLEncode(aH);if(D(aI,aH)){ao+='" selected="selected'}ao+='">';ao+=C.XMLEncode(aF[aJ]);ao+="</option>\n"}u()}else{ab()}aa(aI)}else{if(aG==="UILink"){var aE=am[aL];if(aE){var aN=aI.target.value;if(!Y(aN)){aN=aA[attname]}else{aN=U(A.uselump.parent,aN)}aA[aE]=aN}var aH=aI.linktext.value;if(!Y(aH)){B()}else{q(aH)}}else{if(aI.markup!==undefined){var aM=aI.markup;if(aM===null){ao+=C.dumpAttributes(aA);ao+=">";c()}else{if(!A.iselide){ao+=C.dumpAttributes(aA);ao+=">"}ao+=aM;u()}}else{}}}}}function aq(ay,ax,aw,aA){if(!aw){delete ay["rsf:id"]}if(aA!==undefined){ay.id=aA}else{if(ay.id||aw){ay.id=ax.fullID}}var az=1;var av=ay.id;while(G.document.getElementById(ay.id)){ay.id=av+"-"+(az++)}return ay.id}function H(av){var az;var ax=A.attrcopy["for"];if(ax!==undefined){az="for"}else{ax=A.attrcopy.headers;if(ax!==undefined){az="headers"}}if(!az){return}var ay=A.uselump.tagname;if(az==="for"&&ay!=="label"){return}if(az==="headers"&&ay!=="td"&&ay!=="th"){return}var aw=p[m(A.uselump.parent,av,ax)];if(aw!==undefined){A.attrcopy[az]=aw}}function f(av){ao+=("<!-- "+C.XMLEncode(av)+"-->")}function S(av){ao+='<span style="background-color:#FF466B;color:white;padding:1px;">';ao+=av;ao+="</span><br/>"}function ac(av){var aw=av.fullID;return !aw?"component tree root":"full path "+aw}function N(aw,aF,aB){var aD=aB.lumpindex;var aJ=aB.parent.lumps;var aC=-1;var aE=aJ[aD+1];var av=aB.close_tag;aC=av.lumpindex+1;var aA=aB.downmap?aB.downmap["payload-component"]:null;var aI=aA?aA[0]:null;var aH=aB.rsfID.charCodeAt(0)===126;var az=aE;var aK=av;var ay=aB;var ax={};af.extend(true,ax,(aI===null?aB:aI).attributemap);A.attrcopy=ax;A.uselump=ay;A.endopen=az;A.close=aK;A.nextpos=aC;A.iselide=aH;H(aw);if(aF===null){if(aB.rsfID.indexOf("scr=")===(aH?1:0)){var aG=aB.rsfID.substring(4+(aH?1:0));if(aG==="ignore"){aC=A.close.lumpindex+1}else{P();B();aC=A.endopen.lumpindex}}}else{if(aI){A.endopen=aJ[aI.lumpindex+1];A.close=aI.close_tag;A.uselump=aI;s(aJ,aD,aI.lumpindex);aD=aI.lumpindex}aq(ax,aF);P();J(aF);if(aI!==null){if(A.nextpos===aC){s(aJ,A.close.lumpindex+1,av.lumpindex+1)}}aC=A.nextpos}return aC}function O(ay,av){var ax=av.parent;var aw=ax.lumps[av.lumpindex+1];if(ay.children!==undefined){r(ay,av)}else{N(ay.parent,ay,av)}ak(ay,av,aw)}function a(ay,az,ax){if(az.indexOf("msg=")===0){var av=az.substring(4);return{componentType:"UIMessage",messagekey:av}}while(ay){var aw=ay.childmap[az];if(aw){return aw}ay=ay.parent}return null}function T(aw,ax){var av;while(aw){av=aw.childmap[ax];if(av){break}aw=aw.parent}return av}function K(ax,ay){var aw=C.SplitID(ay.ID);var av=ax.downmap[ay.ID];if(av===null){av=ax.downmap[aw.prefix+":"]}return av===null?null:av[0]}function ak(aA,aP,aG){var aJ=aG.lumpindex;var aM=aP.nestingdepth;var aB=aP.parent;if(g){var aN={}}while(true){aJ=E(aB.lumps,aJ,aM,!aP.elide,false);if(aJ===aB.lumps.length){break}var aE=aB.lumps[aJ];var aF=aE.rsfID;if(aE.nestingdepth<aM||aF===undefined){break}if(aF.charCodeAt(0)===126){aF=aF.substring(1)}if(aF.indexOf(":")!==-1){var aH=C.getPrefix(aF);var av=T(aA,aH);var ax=aE.uplump.finallump[aH];var ay=ax.close_tag;if(av){for(var aI=0;aI<av.length;++aI){var aw=av[aI];if(aw.children){var aK=x[aw.fullID];
if(aK){if(g){f("Branching for "+aw.fullID+" from "+C.debugLump(aE)+" to "+C.debugLump(aK))}O(aw,aK);if(g){f("Branch returned for "+aw.fullID+C.debugLump(aE)+" to "+C.debugLump(aK))}}else{if(g){S("No matching template branch found for branch container with full ID "+aw.fullID+" rendering from parent template branch "+C.debugLump(aG))}}}else{var aK=K(aP,aw);if(!aK){if(g){S("Repetitive leaf with full ID "+aw.fullID+" could not be rendered from parent template branch "+C.debugLump(aG))}continue}var aL=N(aA,aw,aK);var aD=aL<aB.lumps.lengtn&&aB.lumps[aL].nestingdepth>=aK.nestingdepth;var az=aw.children?aw:aA;if(aD){ak(az,aK,aB.lumps[aL]);aL=aK.close_tag.lumpindex+1}if(aI!==av.length-1){if(aL<ay.lumpindex){E(aB.lumps,aL,aK.nestingdepth-1,false,false)}}else{E(aB.lumps,aL,aK.nestingdepth,true,false)}}}}else{if(g){S("No branch container with prefix "+aH+": found in container "+ac(aA)+" rendering at template position "+C.debugLump(aG)+", skipping")}}aJ=ay.lumpindex+1;if(g){f("Stack returned from branch for ID "+aF+" to "+C.debugLump(aG)+": skipping from "+C.debugLump(aE)+" to "+C.debugLump(ay))}}else{var aC;if(aF){if(g){aN[aF]=true}aC=a(aA,aF,aE)}if(aC&&aC.children!==undefined){O(aC);aJ=aE.close_tag.lumpindex+1}else{aJ=N(aA,aC,aE)}}if(aJ===aB.lumps.length){break}}if(g){var av=aA.children;for(var aO=0;aO<av.length;++aO){var aw=av[aO];if(!(aw.ID.indexOf(":")!==-1)&&!aN[aw.ID]){S("Leaf child component "+aw.componentType+" with full ID "+aw.fullID+" could not be found within template "+C.debugLump(aG))}}}}function d(av){s(av.parent.lumps,av.lumpindex,av.close_tag.lumpindex+1)}function z(){for(var ax in ag){var av=ag[ax];for(var aw=0;aw<av.length;++aw){d(av[aw])}}}function I(){for(var ay=0;ay<L.length;++ay){var av=L[ay];var aA=C.byId(av.id);if(!aA){C.fail("Error during rendering - component with id "+av.id+" which has a queued decorator was not found in the output markup")}if(av.type==="jQuery"){var ax=af(aA);ax[av.func].apply(ax,af.makeArray(av.args))}else{if(av.type==="fluid"){var aw=av.args;if(!aw){if(!av.container){av.container=aA}aw=[av.container,av.options]}var az=C.invokeGlobalFunction(av.func,aw,C);av.that=az}else{if(av.type==="event"){aA[av.event]=av.handler}}}}}C.ComponentReference=function(av){this.reference=av};C.explode=function(ay,av){var ax=[];for(var aw in ay){var az=av===undefined?aw:av+"."+aw;ax[ax.length]={ID:aw,value:ay[aw],valuebinding:az}}return ax};C.explodeSelectionToInputs=function(av,aw){return C.transform(av,function(ay,ax){return{ID:aw.rowID,children:[{ID:aw.inputID,parentRelativeID:"..::"+aw.selectID,choiceindex:ax},{ID:aw.labelID,parentRelativeID:"..::"+aw.selectID,choiceindex:ax}]}})};C.resolveMessageSource=function(av){if(av.type==="data"){if(av.url===undefined){return C.messageLocator(av.messages)}else{}}};C.makeBranches=function(){var ay;var aw;for(var av=0;av<arguments.length;++av){var ax=arguments[av];var az;if(typeof(ax)==="string"){az={ID:ax}}else{if(ax instanceof Array){az={ID:ax[0],jointID:ax[1]}}else{af.extend(true,aw,ax);az=aw}}if(aw&&az!==aw){if(!aw.children){aw.children=[]}aw.children[aw.children.length]=az}aw=az;if(!ay){ay=az}}return ay};C.renderTemplates=function(ay,av,aw,ax){aw=aw||{};av=av||{};g=aw.debugMode;if(!aw.messageLocator&&aw.messageSource){aw.messageLocator=C.resolveMessageSource(aw.messageSource)}aw.document=aw.document||document;e=ax;L=[];av=k(av,aw.model);var az=ay[0];ar(ay.globalmap,av,az.rootlump);ao="";v={};G=aw;z();ak(av,az.rootlump,az.lumps[az.firstdocumentindex]);return ao};C.reRender=function(aB,ax,aD,aC){aC=aC||{};ax=C.unwrap(ax);var az=C.getLastFocusedElement?C.getLastFocusedElement():null;var av;if(az&&C.dom.isContainer(ax,az)){av=az.id}if(af.browser.msie){af(ax).empty()}else{ax.innerHTML=""}var aA={};var aw=C.renderTemplates(aB,aD,aC,aA);if(aC.renderRaw){aw=C.XMLEncode(aw);aw=aw.replace(/\n/g,"<br/>")}if(aC.model){C.bindFossils(ax,aC.model,aA)}if(af.browser.msie){af(ax).html(aw)}else{ax.innerHTML=aw}I();if(av){var ay=C.byId(av);if(ay){af(ay).focus()}}return aB};function t(av){var aw=C.dom.iterateDom(av,function(ay){return ay.nodeType===8||ay.nodeType===4?"stop":null},true);var ax=aw.nodeValue;if(ax.indexOf("[CDATA[")===0){return ax.substring(6,ax.length-2)}else{return ax}}C.extractTemplate=function(aw,av){if(!av){return aw.innerHTML}else{return t(aw)}};C.selfRender=function(az,av,ax){ax=ax||{};az=C.unwrap(az);var aw={base:{resourceText:C.extractTemplate(az,ax.armouring),href:".",resourceKey:".",cutpoints:ax.cutpoints}};var ay=C.parseTemplates(aw,["base"],ax);return C.reRender(ay,az,av,ax)}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(d,b){var f=function(h){var g=d("<a name='"+h.text()+"' />",h[0].ownerDocument);h.before(g)};var e=function(h){var g={ID:h,children:[]};return g};var a=function(k,j){var i=function(m,l,s){if(l.length===0){return}var p=l[0];if(s===p.level){m[m.length-1].push(p.leaf);l.shift();return i(m,l,s)}if(s<p.level){var q=s>-1?"level"+(s+1)+":":"";var r=s===-1?"s:":"s";var n=q+"level"+(s+2)+r;var o=e(n);m[m.length-1].push(o);m.push(o.children);return i(m,l,s+1)}if(s>p.level){m.pop();return i(m,l,s-1)}};var g={children:[]};var h=b.transform(k,function(l){var n=d.inArray(l.tagName,j);var m=d(l).text();return{level:n,leaf:{ID:"level"+(n+1)+":item",children:[{ID:"link",linktext:m,target:"#"+m}]}}});i([g.children],h,-1);return g};var c=function(g,k,h,j,l){k.each(function(m,n){f(d(n))});var i={toc:{href:j}};b.fetchResources(i,function(){var m=b.parseTemplates(i,["toc"],{});var n=d("<div></div>",g[0].ownerDocument);b.reRender(m,n,a(k,h),{});g.prepend(n);l.fire(n)})};b.tableOfContents=function(g,h){var i=b.initView("fluid.tableOfContents",g,h);i.events.afterRender.addListener(function(j){i.tocNode=d(j)});c(i.container,i.locate("headings"),i.options.levels,i.options.templateUrl,i.events.afterRender);i.hide=function(){if(i.tocNode){i.tocNode.hide()}};i.show=function(){if(i.tocNode){i.tocNode.show()}};return i};b.defaults("fluid.tableOfContents",{selectors:{headings:":header"},events:{afterRender:null},templateUrl:"../html/TableOfContents.html",levels:["H1","H2","H3","H4","H5","H6"]})})(jQuery,fluid_1_1);(function(e){var b={},k,m,o,j=e.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),a=false;e.tooltip={blocked:false,defaults:{delay:200,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){e.tooltip.blocked=!e.tooltip.blocked}};e.fn.extend({tooltip:function(p){p=e.extend({},e.tooltip.defaults,p);h(p);return this.each(function(){e.data(this,"tooltip-settings",p);this.tooltipText=this.title;e(this).removeAttr("title");this.alt=""}).hover(l,f).click(f)},fixPNG:j?function(){return this.each(function(){var p=e(this).css("backgroundImage");if(p.match(/^url\(["']?(.*\.png)["']?\)$/i)){p=RegExp.$1;e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+p+"')"}).each(function(){var q=e(this).css("position");if(q!="absolute"&&q!="relative"){e(this).css("position","relative")}})}})}:function(){return this},unfixPNG:j?function(){return this.each(function(){e(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){e(this)[e(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function h(p){if(b.parent){return}b.parent=e('<div id="'+p.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(e.fn.bgiframe){b.parent.bgiframe()}b.title=e("h3",b.parent);b.body=e("div.body",b.parent);b.url=e("div.url",b.parent)}function c(p){return e.data(p,"tooltip-settings")}function g(p){if(c(this).delay){o=setTimeout(n,c(this).delay)}else{n()}a=!!c(this).track;e(document.body).bind("mousemove",d);d(p)}function l(){if(e.tooltip.blocked||this==k||(!this.tooltipText&&!c(this).bodyHandler)){return}k=this;m=this.tooltipText;if(c(this).bodyHandler){b.title.hide();var s=c(this).bodyHandler.call(this);if(s.nodeType||s.jquery){b.body.empty().append(s)}else{b.body.html(s)}b.body.show()}else{if(c(this).showBody){var r=m.split(c(this).showBody);b.title.html(r.shift()).show();b.body.empty();for(var q=0,p;p=r[q];q++){if(q>0){b.body.append("<br/>")}b.body.append(p)}b.body.hideWhenEmpty()}else{b.title.html(m).show();b.body.hide()}}if(c(this).showURL&&e(this).url()){b.url.html(e(this).url().replace("http://","")).show()}else{b.url.hide()}b.parent.addClass(c(this).extraClass);if(c(this).fixPNG){b.parent.fixPNG()}g.apply(this,arguments)}function n(){o=null;b.parent.show();d()}function d(r){if(e.tooltip.blocked){return}if(!a&&b.parent.is(":visible")){e(document.body).unbind("mousemove",d)}if(k==null||!c(k)){return}b.parent.removeClass("viewport-right").removeClass("viewport-bottom");var t=b.parent[0].offsetLeft;var s=b.parent[0].offsetTop;if(r){t=r.pageX+c(k).left;s=r.pageY+c(k).top;b.parent.css({left:t+"px",top:s+"px"})}var p=i(),q=b.parent[0];if(p.x+p.cx<q.offsetLeft+q.offsetWidth){t-=q.offsetWidth+20+c(k).left;b.parent.css({left:t+"px"}).addClass("viewport-right")}if(p.y+p.cy<q.offsetTop+q.offsetHeight){s-=q.offsetHeight+20+c(k).top;b.parent.css({top:s+"px"}).addClass("viewport-bottom")}}function i(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function f(p){if(e.tooltip.blocked){return}if(o){clearTimeout(o)}k=null;b.parent.hide().removeClass(c(this).extraClass);if(c(this).fixPNG){b.parent.unfixPNG()}}e.fn.Tooltip=e.fn.tooltip})(jQuery);fluid_1_1=fluid_1_1||{};(function(h,f){var d="state_initial",c="state_changed",b="state_reverted";function g(l,j){var i="<span class='flc-undo'><span class='flc-undo-undoContainer'>[<a href='#' class='flc-undo-undoControl'>undo</a>]</span><span class='flc-undo-redoContainer'>[<a href='#' class='flc-undo-redoControl'>redo</a>]</span></span>";var k=h(i);j.append(k);return k}function a(i){if(i.state===d){i.locate("undoContainer").hide();i.locate("redoContainer").hide()}else{if(i.state===c){i.locate("undoContainer").show();i.locate("redoContainer").hide()
}else{if(i.state===b){i.locate("undoContainer").hide();i.locate("redoContainer").show()}}}}var e=function(i){i.locate("undoControl").click(function(){if(i.state!==b){f.model.copyModel(i.extremalModel,i.component.model);i.component.updateModel(i.initialModel,i);i.state=b;a(i);i.locate("redoControl").focus()}return false});i.locate("redoControl").click(function(){if(i.state!==c){i.component.updateModel(i.extremalModel,i);i.state=c;a(i);i.locate("undoControl").focus()}return false});return{modelChanged:function(j,l,k){if(k!==i){i.state=c;f.model.copyModel(i.initialModel,l);a(i)}}}};f.undoDecorator=function(i,l){var k=f.initView("undo",null,l);k.container=k.options.renderer(k,i.container);f.initDomBinder(k);f.tabindex(k.locate("undoControl"),0);f.tabindex(k.locate("redoControl"),0);k.component=i;k.initialModel={};k.extremalModel={};f.model.copyModel(k.initialModel,i.model);f.model.copyModel(k.extremalModel,i.model);k.state=d;a(k);var j=e(k);k.returnedOptions={listeners:j};return k};f.defaults("undo",{selectors:{undoContainer:".flc-undo-undoContainer",undoControl:".flc-undo-undoControl",redoContainer:".flc-undo-redoContainer",redoControl:".flc-undo-redoControl"},renderer:g})})(jQuery,fluid_1_1);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}fluid_1_1=fluid_1_1||{};(function(d,f){var j=function(q,p,s,r){r=r||"";d(p,q).andSelf().each(function(u){var t=(d.browser.msie===false)?"class":"className";if(this.getAttribute(t)){this.setAttribute(t,this.getAttribute(t).replace(s,r))}})};var n=function(r,q,t,u){var p=u[q]||{};var s=p[t];if(s){r.addClass(s)}};var o=function(p){return p&&(p===true||p==="true")};var h=function(p,q){if(o(q)){if(p.tableOfContents){p.tableOfContents.show()}else{p.tableOfContents=f.initSubcomponent(p,"tableOfContents",[p.container,f.COMPONENT_OPTIONS])}}else{if(p.tableOfContents){p.tableOfContents.hide()}}};var b=function(p,q){q=q&&q>0?q:1;p.css("line-height",q+"em")};var k=function(p,q){if(q&&q>0){p.css("font-size",q+"pt");j(p,"[class*=fl-font-size-]",/\bfl-font-size-[0-9]{1,2}\s+/g,"fl-font-size-100")}else{p.css("font-size","")}};var e=function(p,q,r){n(p,"textFont",q.textFont,r);n(p,"textSpacing",q.textSpacing,r);n(p,"theme",q.theme,r);n(p,"layout",q.layout,r)};var m=function(q,p,r){if(p){q.addClass(r)}else{q.removeClass(r)}};var a=function(p,r,s){var q=d("a",p);m(q,r.linksUnderline,s.linksUnderline);m(q,r.linksBold,s.linksBold);m(q,r.linksLarger,s.linksLarger)};var l=function(p,q,r){m(d("input",p),q.inputsLarger,r.inputsLarger)};var c=function(p){if(p.options.savedSettings){p.model=p.options.savedSettings;return}p.model=p.settingsStore.fetch()||f.copy(p.defaultSiteSettings)};var g=function(p,q){var s=["textFont","textSpacing","theme","layout"];var x="fl-noBackgroundImages";var v=".fl-noBackgroundImages";for(var w=0;w<s.length;w++){var t=q[s[w]];for(var r in t){var u=t[r];if(u){x=x+" "+u;v=v+",."+u}}}d(v,p).removeClass(x);return x};var i=function(p){p.settingsStore=f.initSubcomponent(p,"settingsStore",[f.COMPONENT_OPTIONS]);c(p);p.refreshView()};f.uiEnhancer=function(s,q){s=s||document;var r=f.initView("fluid.uiEnhancer",s,q);d(s).data("uiEnhancer",r);r.container=d("body",s);r.defaultSiteSettings=r.options.defaultSiteSettings;var p;r.refreshView=function(){r.container.removeClass(p);e(r.container,r.model,r.options.classnameMap);m(r.container,!o(r.model.backgroundImages),r.options.classnameMap.noBackgroundImages);k(r.container,r.model.textSize);b(r.container,r.model.lineSpacing);h(r,r.model.toc);a(r.container,r.model,r.options.classnameMap);l(r.container,r.model,r.options.classnameMap)};r.updateModel=function(t,u){r.events.modelChanged.fire(t,r.model,u);f.clear(r.model);f.model.copyModel(r.model,t);r.settingsStore.save(r.model);r.refreshView()};p=g(r.container,r.options.classnameMap);i(r);return r};f.defaults("fluid.uiEnhancer",{tableOfContents:{type:"fluid.tableOfContents",options:{templateUrl:"../../tableOfContents/html/TableOfContents.html"}},settingsStore:{type:"fluid.uiEnhancer.cookieStore"},events:{modelChanged:null},classnameMap:{textFont:{serif:"fl-font-serif",sansSerif:"fl-font-sans",arial:"fl-font-arial",verdana:"fl-font-verdana",monospace:"fl-font-monospace",courier:"fl-font-courier",times:"fl-font-times"},textSpacing:{"default":"",wide0:"fl-font-spacing-0",wide1:"fl-font-spacing-1",wide2:"fl-font-spacing-2",wide3:"fl-font-spacing-3",wide4:"fl-font-spacing-4",wide5:"fl-font-spacing-5",wide6:"fl-font-spacing-6"},theme:{mist:"fl-theme-mist",rust:"fl-theme-rust",highContrast:"fl-theme-hc",highContrastInverted:"fl-theme-hci",lowContrast:"fl-theme-slate",mediumContrast:"fl-theme-coal","default":""},layout:{simple:"fl-layout-linear","default":""},noBackgroundImages:"fl-noBackgroundImages",linksUnderline:"fl-text-underline",linksBold:"fl-text-bold",linksLarger:"fl-text-larger",inputsLarger:"fl-text-larger"},defaultSiteSettings:{textFont:"",textSpacing:"",theme:"default",layout:"default",textSize:"",lineSpacing:"",backgroundImages:true,toc:false,linksUnderline:false,linksBold:false,linksLarger:false,inputsLarger:false}});f.uiEnhancer.cookieStore=function(p){var q={};f.mergeComponentOptions(q,"fluid.uiEnhancer.cookieStore",p);q.fetch=function(){var s=document.cookie;var r=q.options.cookieName+"=";var u,v,t;if(s.length>0){v=s.indexOf(r);if(v>-1){v=v+r.length;t=s.indexOf(";",v);if(t<v){t=s.length}u=JSON.parse(decodeURIComponent(s.substring(v,t)))}}return u};q.save=function(r){document.cookie=q.options.cookieName+"="+encodeURIComponent(JSON.stringify(r))};return q};f.defaults("fluid.uiEnhancer.cookieStore",{cookieName:"fluid-ui-settings"});f.uiEnhancer.tempStore=function(p){var q={};q.model=null;q.fetch=function(){return q.model};q.save=function(r){q.model=r};return q}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(c,b){var d=function(e,g){var f={role:"slider","aria-valuenow":g.value,"aria-valuemin":g.min,"aria-valuemax":g.max};e.attr(f)};var a=function(g){var f=g.locate("textfield");f.val(g.model);var h=g.options.sliderOptions;h.value=g.model;h.min=g.options.min;h.max=g.options.max;var e=g.locate("slider").slider(h);d(g.locate("thumb"),h);f.change(function(){if(g.isValid(this.value)){if(!g.isInRange(this.value)){this.value=(this.value<g.min)?g.min:g.max}e.slider("value",this.value);g.updateModel(this.value,this)}else{this.value=g.model}});f.keypress(function(i){if(i.keyCode!==c.ui.keyCode.ENTER){return true}else{c(i.target).change();c(b.findForm(i.target)).submit();return false}});e.bind("slide",function(j,i){f.val(i.value);g.updateModel(i.value,e)})};b.textfieldSlider=function(e,f){var g=b.initView("fluid.textfieldSlider",e,f);g.model=g.options.value||g.locate("textfield").val();g.min=g.options.min;g.max=g.options.max;a(g);g.isInRange=function(h){return(h>=g.min&&h<=g.max)};g.isValid=function(h){return !(isNaN(parseInt(h,10))||isNaN(h))};g.updateModel=function(h,i){if(g.isInRange(h)){g.events.modelChanged.fire(h,g.model,i);g.model=h;g.locate("thumb").attr("aria-valuenow",g.model)}};return g};b.defaults("fluid.textfieldSlider",{selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider",thumb:".ui-slider-handle"},events:{modelChanged:null},sliderOptions:{orientation:"horizontal"},min:0,max:100,value:null})})(jQuery,fluid_1_1);(function(d,g){var j=function(p,m,n,o){return{ID:p,selection:{valuebinding:m},optionlist:{valuebinding:n},optionnames:{valuebinding:o}}};var a=function(n,m){return{ID:n,valuebinding:m}};var k=function(p,r){var o=[];o.push(j("text-font","selections.textFont","labelMap.textFont.values","labelMap.textFont.names"));o.push(j("text-spacing","selections.textSpacing","labelMap.textSpacing.values","labelMap.textSpacing.names"));o.push(j("theme","selections.theme","labelMap.theme.values","labelMap.theme.names"));var n={selectID:"background-images",rowID:"background-images-row:",inputID:"background-images-choice",labelID:"background-images-label"};o.push(j("background-images","selections.backgroundImages","labelMap.backgroundImages.values","labelMap.backgroundImages.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.backgroundImages,n));var q={selectID:"layout",rowID:"layout-row:",inputID:"layout-choice",labelID:"layout-label"};o.push(j("layout","selections.layout","labelMap.layout.values","labelMap.layout.names"));
o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.layout,q));var m={selectID:"toc",rowID:"toc-row:",inputID:"toc-choice",labelID:"toc-label"};o.push(j("toc","selections.toc","labelMap.toc.values","labelMap.toc.names"));o=o.concat(g.explodeSelectionToInputs(p.options.controlValues.layout,m));o.push(a("links-underline","selections.linksUnderline"));o.push(a("links-bold","selections.linksBold"));o.push(a("links-larger","selections.linksLarger"));o.push(a("inputs-larger","selections.inputsLarger"));return{children:o}};var h=function(n){var o=n.locate("save");o.click(n.save);n.locate("reset").click(n.reset);n.locate("cancel").click(n.cancel);var m=g.findForm(o);d(m).submit(function(){n.save()})};var i=function(m){var o=m.locate("previewFrame");var n;m.events.modelChanged.addListener(function(p){setTimeout(function(){if(n){n.updateModel(p)}},0)});o.load(function(){var p=o.contents();var q={savedSettings:m.model,tableOfContents:m.uiEnhancer.options.tableOfContents,settingsStore:{type:"fluid.uiEnhancer.tempStore"}};n=g.uiEnhancer(p,q)})};var e=function(m){var o={};for(var n in m.controlValues){o[n]={names:m.strings[n],values:m.controlValues[n]}}return o};var c=function(n){n.model.toc=String(n.model.toc);n.model.backgroundImages=String(n.model.backgroundImages);var m=g.assembleModel({selections:{model:n.model,applier:n.applier},labelMap:{model:e(n.options)}});return{model:m.model,applier:m.applier,autoBind:true}};var f=function(o){var n=function(p){return{listeners:{modelChanged:function(q){o.applier.requestChange(p,q)}},value:o.model[p]}};var m=n("textSize");g.merge(null,m,o.options.textMinSize.options);g.initSubcomponents(o,"textMinSize",[o.options.selectors.textMinSizeCtrl,m]);m=n("lineSpacing");g.merge(null,m,o.options.lineSpacing.options);g.initSubcomponents(o,"lineSpacing",[o.options.selectors.lineSpacingCtrl,m])};var b=function(o,s){for(var p in o.controlValues){var q=String(s[p]);var m=o.controlValues[p];if(q){var n=d.inArray(q,m);if(n===-1){var r=d.inArray("default",m);if(r===-1){m.push(q)}else{m[r]=q}}}}};var l=function(n){n.applier.modelChanged.addListener("*",function(p,r,q){n.events.modelChanged.fire(p,r,q.source)});b(n.options,n.uiEnhancer.defaultSiteSettings);n.events.afterRender.addListener(function(){f(n);h(n);i(n)});var o=c(n);var m=g.selfRender(n.container,k(n,o.model),o);n.events.afterRender.fire();return m};g.uiOptions=function(m,o){var q=g.initView("fluid.uiOptions",m,o);q.uiEnhancer=d(document).data("uiEnhancer");q.model=g.copy(q.uiEnhancer.model);q.applier=g.makeChangeApplier(q.model);var n=q.uiEnhancer.model;var p;q.save=function(){q.events.onSave.fire(q.model);n=g.copy(q.model);q.uiEnhancer.updateModel(n)};q.reset=function(){q.events.onReset.fire();q.updateModel(g.copy(q.uiEnhancer.defaultSiteSettings),q);q.refreshView()};q.cancel=function(){q.events.onCancel.fire();q.updateModel(g.copy(n),q);q.refreshView()};q.refreshView=function(){var r=c(q);g.reRender(p,q.container,k(q,r.model),r);q.events.afterRender.fire()};q.updateModel=function(r,s){q.events.modelChanged.fire(r,q.model,s);g.clear(q.model);g.model.copyModel(q.model,r)};p=l(q);return q};g.defaults("fluid.uiOptions",{textMinSize:{type:"fluid.textfieldSlider",options:{min:6,max:30}},lineSpacing:{type:"fluid.textfieldSlider",options:{min:1,max:10}},selectors:{controls:".flc-uiOptions-control",textMinSizeCtrl:".flc-uiOptions-min-text-size",lineSpacingCtrl:".flc-uiOptions-line-spacing",cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{modelChanged:null,onSave:null,onCancel:null,onReset:null,afterRender:null},strings:{textFont:["Serif","Sans-Serif","Arial","Verdana","Courier","Times"],textSpacing:["Regular","Wide","Wider","Widest"],theme:["Low Contrast","Medium Contrast","Medium Contrast Grey Scale","High Contrast","High Contrast Inverted"],backgroundImages:["Yes","No"],layout:["Yes","No"],toc:["Yes","No"]},controlValues:{textFont:["serif","sansSerif","arial","verdana","courier","times"],textSpacing:["default","wide1","wide2","wide3"],theme:["lowContrast","default","mediumContrast","highContrast","highContrastInverted"],backgroundImages:["true","false"],layout:["simple","default"],toc:["true","false"]}})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(d,h){function s(y,z,B){if(!y.pageLinks){return}if(B.pageIndex!==undefined){var A=y.pageLinks.eq(B.pageIndex);A.removeClass(y.options.styles.currentPage)}var x=y.pageLinks.eq(z.pageIndex);x.addClass(y.options.styles.currentPage)}function j(y,x,z){y.unbind("click.fluid.pager");y.bind("click.fluid.pager",function(){x.initiatePageChange.fire(z)})}function b(x){x.pageCount=Math.max(1,Math.floor((x.totalRange-1)/x.pageSize)+1)}function l(x){return Math.min(x.totalRange,(x.pageIndex+1)*x.pageSize)}h.pager=function(){return h.pagerImpl.apply(null,arguments)};h.pager.directPageList=function(x,B,z){var C=h.initView("fluid.pager.directPageList",x,z);C.pageLinks=C.locate("pageLinks");for(var A=0;A<C.pageLinks.length;++A){var y=C.pageLinks.eq(A);j(y,B,{pageIndex:A})}B.onModelChange.addListener(function(D,E){s(C,D,E)});C.defaultModel={pageIndex:undefined,pageSize:1,totalRange:C.pageLinks.length};return C};h.iota=function(z,A){A=A||0;var y=[];for(var x=0;x<z;++x){y[y.length]=A++}return y};h.pager.everyPageStrategy=h.iota;h.pager.gappedPageStrategy=function(x,y){if(!x){x=3}if(!y){y=x}return function(E,F,A){var D=[];var z=0;var C=false;for(var B=0;B<E;++B){if(B<x||(E-B-1)<x||(B>=A-y&&B<=A+y)){D[z++]=B;C=false}else{if(!C){D[z++]=-1;C=true}}}return D}};h.pager.renderedPageList=function(x,F,z,G,E){G=d.extend(true,z,G);var B=h.initView("fluid.pager.renderedPageList",x,G);G=B.options;var y={cutpoints:[{id:"page-link:link",selector:z.selectors.pageLinks},{id:"page-link:skip",selector:z.selectors.pageLinkSkip},{id:"page-link:disabled",selector:z.selectors.pageLinkDisabled}]};if(G.linkBody){y.cutpoints[y.cutpoints.length]={id:"payload-component",selector:G.linkBody}}function A(H){return function(I){return I===-1?{ID:"page-link:skip"}:{ID:I===H?"page-link:link":"page-link:link",localID:I+1,value:I+1,pageIndex:I,decorators:[{type:"jQuery",func:"click",args:function(){F.initiatePageChange.fire({pageIndex:I})}},{type:I===H?"addClass":"",classes:B.options.styles.currentPage}]}}}var C=B.locate("root");h.expectFilledSelector(C,"Error finding root template for fluid.pager.renderedPageList");var D=h.selfRender(C,{},y);F.onModelChange.addListener(function(I,K){var H=B.options.pageStrategy(I.pageCount,0,I.pageIndex);var J=h.transform(H,A(I.pageIndex));J[J.length-1].value=J[J.length-1].value+E.last;F.onRenderPageLinks.fire(J,I);h.reRender(D,C,J,y);s(B,I,K)});return B};h.defaults("fluid.pager.renderedPageList",{selectors:{root:".flc-pager-links"},linkBody:"a",pageStrategy:h.pager.everyPageStrategy});var k=function(z,x,y){if(y.pageIndex===0){z.previous.addClass(x.styles.disabled)}else{z.previous.removeClass(x.styles.disabled)}if(y.pageIndex===y.pageCount-1){z.next.addClass(x.styles.disabled)}else{z.next.removeClass(x.styles.disabled)}};h.pager.previousNext=function(x,z,y){var A=h.initView("fluid.pager.previousNext",x,y);A.previous=A.locate("previous");j(A.previous,z,{relativePage:-1});A.next=A.locate("next");j(A.next,z,{relativePage:+1});z.onModelChange.addListener(function(B,D,C){k(A,y,B)});return A};h.pager.pagerBar=function(A,y,z,x){var B=h.initView("fluid.pager.pagerBar",y,z);B.pageList=h.initSubcomponent(B,"pageList",[y,A,B.options,h.COMPONENT_OPTIONS,x]);B.previousNext=h.initSubcomponent(B,"previousNext",[y,A,B.options,h.COMPONENT_OPTIONS,x]);return B};h.defaults("fluid.pager.pagerBar",{previousNext:{type:"fluid.pager.previousNext"},pageList:{type:"fluid.pager.directPageList"},selectors:{pageLinks:".flc-pager-pageLink",pageLinkSkip:".flc-pager-pageLink-skip",pageLinkDisabled:".flc-pager-pageLink-disabled",previous:".flc-pager-previous",next:".flc-pager-next"},styles:{currentPage:"fl-pager-currentPage",disabled:"fl-pager-disabled"}});function a(x){return x.options.columnDefs}h.pager.findColumnDef=function(z,y){var x=d.grep(z,function(A){return A.key===y})[0];return x};function r(A,z,x){var y=(z.options.dataOffset?z.options.dataOffset+".":"");A.shortRoot=x;A.longRoot=y+A.shortRoot}function e(y,z,x){if(y.charAt(0)==="*"){return x+y.substring(1)}else{return y.replace("*",z)}}h.pager.fetchValue=function(A,z,y,C,x){r(x,A,y);var B=e(C,x.shortRoot,x.longRoot);return h.model.getBeanValue(z,B)};h.pager.basicSorter=function(G,z){var D=G.options.dataModel;var F={};var A=a(G);var B=h.pager.findColumnDef(A,z.sortKey);var x=[];for(var y=0;y<z.totalRange;++y){x[y]={index:y,value:h.pager.fetchValue(G,D,y,B.valuebinding,F)}}var E=typeof x[0].value;function C(K,J){var I=K.value;var H=J.value;return I===H?0:(I>H?z.sortDir:-z.sortDir)}x.sort(C);return h.transform(x,function(H){return H.index})};h.pager.directModelFilter=function(A,z,C){var D=[];var x=l(z);for(var B=z.pageIndex*z.pageSize;B<x;++B){var y=C?C[B]:B;D[D.length]={index:y,row:A[y]}}return D};function c(D,C){var B="";var y=0;while(true){var z=D.indexOf("${",y);if(z===-1){B+=D.substring(y);break}else{B+=D.substring(y,z);var x=D.indexOf("}",z+2);var A=D.substring(z+2,x);if(A==="VALUE"){A=C.EL}else{A=e(A,C.shortRoot,C.longRoot)}var E=h.model.getBeanValue(C.dataModel,A);B+=E;y=x+1}}return B}function u(A,x,z){for(var y in x){var B=x[y];if(B===h.VALUE){if(y==="valuebinding"){A[y]=z.EL}else{A[y]={valuebinding:z.EL}}}else{if(y==="valuebinding"){A[y]=e(x[y],z)}else{if(typeof(B)==="object"){A[y]=B.length!==undefined?[]:{};u(A[y],B,z)}else{if(typeof(B)==="string"){A[y]=c(B,z)}else{A[y]=x[y]}}}}}return A}function p(z,D){var A=D.options;var C=z.valuebinding;var B=z.key;if(!C){h.fail("Error in definition for column with key "+B+": valuebinding is not set")}D.EL=e(C,D.shortRoot,D.longRoot);if(!B){var y=h.model.parseEL(C);B=y[y.length-1]}var x=(A.keyPrefix?A.keyPrefix:"")+B;return x}function m(y,z){var x=h.transform(z.columnDefs,function(B){var A=p(B,z);var C;if(!B.components){return{ID:A,valuebinding:z.EL}
}else{if(typeof B.components==="function"){C=B.components(y.row,y.index)}else{C=B.components}}C=u({},C,z);C.ID=A;return C});return x}function w(x){return h.model.getBeanValue(x.options.dataModel,x.options.dataOffset)}function q(x,z){var C=z.options.renderOptions.idMap["header:"+x];var A=h.jById(C);if(A.length===0){return null}var B=z.overallOptions.selectors.headerSortStylisticOffset;var y=h.findAncestor(A,function(D){return d(D).is(B)});return y}function n(z,y,x){y=d(y);y.removeClass(z.ascendingHeader);y.removeClass(z.descendingHeader);if(x!==0){y.addClass(x===1?z.ascendingHeader:z.descendingHeader)}}function t(z,y){var x=y.sortKey?h.pager.findColumnDef(z,y.sortKey):null;return x?x.sortable:false}function v(y,A){var z=A.overallOptions.styles;var x=t(A.columnDefs,y)?y.sortDir:0;n(z,q(y.sortKey,A),x)}function o(A,z,y){b(z);if(z.pageIndex>=z.pageCount){z.pageIndex=z.pageCount-1}if(y||z.pageIndex!==A.model.pageIndex||z.pageSize!==A.model.pageSize||z.sortKey!==A.model.sortKey||z.sortDir!==A.model.sortDir){var x=t(a(A),z)?A.options.sorter(A,z):null;A.permutation=x;A.events.onModelChange.fire(z,A.model,A);h.model.copyModel(A.model,z)}}function g(z,x,y){return function(){if(x.sortable===true){var A=z.model;var C=h.copy(A);var D=z.options.styles;var E=A.sortKey;if(x.key!==A.sortKey){C.sortKey=x.key;C.sortDir=1;var B=q(E,y);if(B){n(D,B,0)}}else{if(C.sortKey===x.key){C.sortDir=-1*C.sortDir}else{return false}}C.pageIndex=0;o(z,C,true);v(C,y)}return false}}function f(y,x){return y[x.sortable?"sortableHeader":"unsortableHeader"]}function i(z,x,A,y){return{children:h.transform(A,function(B){return{ID:p(B,y),value:B.label,decorators:[{jQuery:["click",g(z,B,y)]},{identify:"header:"+B.key}].concat(f(y.overallOptions.decorators,B))}})}}h.pager.selfRender=function(F,y){var A=h.initView("fluid.pager.selfRender",F.container,y);var G=A.options;G.renderOptions.idMap=G.renderOptions.idMap||{};var E=G.renderOptions.idMap;var B=A.locate("root");var D=h.selfRender(B,{},G.renderOptions);B.addClass(G.styles.root);var z=a(F);var x={options:G,columnDefs:z,overallOptions:F.options,dataModel:F.options.dataModel,idMap:E};var C=w(F);return{returnedOptions:{listeners:{onModelChange:function(J,L){var I=F.options.modelFilter(C,J,F.permutation);var H=h.transform(I,function(M){var N=r(x,F,M.index);if(z==="explode"){return h.explode(M.row,B)}else{if(z.length){return m(M,x)}}});var K={};K[G.row]=H;if(typeof(z)==="object"){K[G.header]=i(F,J,z,x)}G.renderOptions=G.renderOptions||{};G.renderOptions.model=x.dataModel;h.reRender(D,B,K,G.renderOptions);v(J,x)}}}}};h.defaults("fluid.pager.selfRender",{selectors:{root:".flc-pager-body-template"},styles:{root:"fl-pager"},keyStrategy:"id",keyPrefix:"",row:"row:",header:"header:",renderOptions:{}});h.pager.summary=function(z,x){var y=z.locate("summary");return{returnedOptions:{listeners:{onModelChange:function(A,C){var B=h.stringTemplate(x.message,{first:A.pageIndex*A.pageSize+1,last:l(A),total:A.totalRange});if(y.length>0){y.text(B)}}}}}};h.pager.directPageSize=function(y){var x=y.locate("pageSize");if(x.length>0){y.events.onModelChange.addListener(function(z,A){if(x.val()!==z.pageSize){x.val(z.pageSize)}});x.change(function(){y.events.initiatePageSizeChange.fire(x.val())})}return y};h.pager.rangeAnnotator=function(z,y){var x={};z.events.onRenderPageLinks.addListener(function(A,D){var F=z.options.annotateColumnRange;var C=z.options.dataModel;var H=a(z);if(!F||!C||!H){return}var B=h.pager.findColumnDef(H,F);function G(I){I=z.permutation?z.permutation[I]:I;return h.pager.fetchValue(z,C,I,B.valuebinding,x)}var E={};h.model.copyModel(E,D);h.transform(A,function(I){if(I.ID==="page-link:link"){var M=I.pageIndex;var P=M*E.pageSize;E.pageIndex=M;var J=l(E);var O=G(P);var L=G(J-1);var N="<b>"+O+"</b><br/>&mdash;<br/><b>"+L+"</b>";var K={type:"jQuery",func:"tooltip",args:{delay:z.options.tooltipDelay,extraClass:z.options.styles.tooltip,bodyHandler:function(){return N},showURL:false,id:z.options.tooltipId}};I.decorators.push(K)}})})};h.pagerImpl=function(x,y){var A=h.initView("fluid.pager",x,y);var C=function(E,F){if(F.value<0){F.value=0}};A.events.initiatePageChange.addListener(function(E){var F=h.copy(A.model);if(E.relativePage!==undefined){F.pageIndex=A.model.pageIndex+E.relativePage}else{F.pageIndex=E.pageIndex}if(F.pageIndex===undefined||F.pageIndex<0){F.pageIndex=0}o(A,F,E.forceUpdate)});A.events.initiatePageSizeChange.addListener(function(E){var F=h.copy(A.model);F.pageSize=E;o(A,F)});var B=A.locate("pagerBar");if(B.length>0){A.pagerBar=h.initSubcomponent(A,"pagerBar",[A.events,B,h.COMPONENT_OPTIONS,A.options.strings])}var D=A.locate("pagerBarSecondary");if(D.length>0){A.pagerBarSecondary=h.initSubcomponent(A,"pagerBar",[A.events,D,h.COMPONENT_OPTIONS,A.options.strings])}A.bodyRenderer=h.initSubcomponent(A,"bodyRenderer",[A,h.COMPONENT_OPTIONS]);A.summary=h.initSubcomponent(A,"summary",[A.dom,h.COMPONENT_OPTIONS]);A.pageSize=h.initSubcomponent(A,"pageSize",[A]);A.rangeAnnotator=h.initSubcomponent(A,"rangeAnnotator",[A,h.COMPONENT_OPTIONS]);A.model=h.copy(A.options.model);var z=w(A);if(z){A.model.totalRange=z.length}if(A.model.totalRange===undefined){if(!A.pagerBar){h.fail("Error in Pager configuration - cannot determine total range,  since not configured in model.totalRange and no PagerBar is configured")}A.model=A.pagerBar.pageList.defaultModel}A.applier=h.makeChangeApplier(A.model);A.events.initiatePageChange.fire({pageIndex:A.model.pageIndex?A.model.pageIndex:0,forceUpdate:true});return A};h.defaults("fluid.pager",{pagerBar:{type:"fluid.pager.pagerBar",options:null},summary:{type:"fluid.pager.summary",options:{message:"%first-%last of %total items"}},pageSize:{type:"fluid.pager.directPageSize"},modelFilter:h.pager.directModelFilter,sorter:h.pager.basicSorter,bodyRenderer:{type:"fluid.emptySubcomponent"},model:{pageIndex:undefined,pageSize:10,totalRange:undefined},dataModel:undefined,dataOffset:"",columnDefs:"explode",annotateColumnRange:undefined,tooltipDelay:300,tooltipId:"tooltip",rangeAnnotator:{type:"fluid.pager.rangeAnnotator"},selectors:{pagerBar:".flc-pager-top",pagerBarSecondary:".flc-pager-bottom",summary:".flc-pager-summary",pageSize:".flc-pager-page-size",headerSortStylisticOffset:".flc-pager-sort-header"},styles:{tooltip:"fl-pager-tooltip",ascendingHeader:"fl-pager-asc",descendingHeader:"fl-pager-desc"},decorators:{sortableHeader:[],unsortableHeader:[]},strings:{last:" (last)"},events:{initiatePageChange:null,initiatePageSizeChange:null,onModelChange:null,onRenderPageLinks:null}})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(i,k){function n(H,G,D,F){var E=document.createEvent("KeyEvents");E.initKeyEvent(G,1,1,null,0,0,0,0,D,F);H.dispatchEvent(E)}k.setCaretToEnd=function(G,E){var H=E?E.length:0;try{G.focus();if(G.setSelectionRange){G.setSelectionRange(H,H);if(i.browser.mozilla&&H>0){n(G,"keypress",92,92);n(G,"keydown",8,0);n(G,"keypress",8,0)}}else{if(G.createTextRange){var D=G.createTextRange();D.move("character",H);D.select()}}}catch(F){}};k.deadMansBlur=function(H,E,G){var D=false;i(H).blur(function(){D=true;setTimeout(function(){if(D){G(H)}},150)});var F=function(){D=false};E.focus(F);E.click(F)};var d=function(E,F){E.editContainer=E.locate("editContainer");E.editField=E.locate("edit");if(E.editContainer.length!==1){if(E.editField.length===1){E.editContainer=E.editField}else{if(E.editContainer.length>1){k.fail("InlineEdit did not find a unique container for selector "+E.options.selectors.editContainer+": "+k.dumpEl(E.editContainer))}}}if(E.editContainer.length===1&&!E.editField){E.editField=E.locate("edit",E.editContainer)}if(!F){return}var D=E.options.editModeRenderer(E);if(D){E.editContainer=D.container;E.editField=D.field}if(E.editField.length===0){k.fail("InlineEdit improperly initialised - editField could not be located (selector "+E.options.selectors.edit+")")}};var l=function(D){D.editContainer.hide();D.viewEl.show()};var e=function(D){if(D.isEditing()){D.editView.value(D.model.value);l(D)}};var r=function(H){var I=H.editView.value();var F=H.model.value;var D=H.viewEl[0];var G=H.editField[0];var E=H.events.onFinishEdit.fire(I,F,G,D);if(E===false){return}H.updateModelValue(I);H.events.afterFinishEdit.fire(I,F,G,D);l(H)};var w=function(F){if(F.options.submitOnEnter===undefined){F.options.submitOnEnter="textarea"!==k.unwrap(F.editField).nodeName.toLowerCase()}function G(H){return H.keyCode?H.keyCode:(H.which?H.which:0)}var D=function(H){var I=G(H);if(I===i.ui.keyCode.ESCAPE){e(F);return false}};var E=function(H){var I=G(H);if(I!==i.ui.keyCode.ENTER){return true}r(F);F.viewEl.focus();return false};if(F.options.submitOnEnter){F.editContainer.keypress(E)}F.editContainer.keydown(D)};var h=function(D){if(D.options.blurHandlerBinder){D.options.blurHandlerBinder(D)}else{var E=function(F){r(D);return false};D.editField.blur(E)}};var y=function(E,D){if(!E.editInitialized){d(E,!E.options.lazyEditView||!D);if(!E.options.lazyEditView||!D){E.editView=k.initSubcomponent(E,"editView",E.editField);i.extend(true,E.editView,k.initSubcomponent(E,"editAccessor",E.editField));w(E);h(E);E.editView.refreshView(E);E.editInitialized=true}}};var p=function(E){y(E,false);var D=E.viewEl;var F=E.displayView.value();E.updateModelValue(F===E.options.defaultViewText?"":F);if(E.options.applyEditPadding){E.editField.width(Math.max(D.width()+E.options.paddings.edit,E.options.paddings.minimumEdit))}D.removeClass(E.options.styles.invitation);D.removeClass(E.options.styles.focus);D.hide();E.editContainer.show();if(E.tooltipEnabled()){i("#"+E.options.tooltipId).hide()}setTimeout(function(){E.editField.focus();k.setCaretToEnd(E.editField[0],E.editView.value());if(E.options.selectOnEdit){E.editField[0].select()}},0);E.events.afterBeginEdit.fire()};var A=function(E,D,F){E.removeClass(D);E.css("padding-right",F)};var t=function(D){D.displayView.value(D.options.defaultViewText);D.viewEl.css("padding-right",D.existingPadding);D.viewEl.addClass(D.options.styles.defaultViewStyle)};var x=function(D){D.displayView.value("");if(i.browser.msie){if(D.viewEl.css("display")==="inline"){D.viewEl.css("display","inline-block")
}}};var o=function(D){D.displayView.value(D.model.value);A(D.viewEl,D.options.styles.defaultViewStyle,D.existingPadding)};var s=function(D,E){D.displayView.refreshView(D,E);if(D.editView){D.editView.refreshView(D,E)}};var z=function(D,E){D.model.value=E;D.refreshView()};var b=function(D,F,E){if(D.model.value!==F){var G=i.extend(true,{},D.model);D.model.value=F;D.events.modelChanged.fire(D.model,G,E);D.refreshView(E)}};var u=function(E,G){var F=function(H){E.addClass(G)};var D=function(H){E.removeClass(G)};E.hover(F,D)};var C=function(D){return function(){var E=D.events.onBeginEdit.fire();if(E===false){return false}p(D);return true}};function g(E){var D=k.unwrap(E.viewEl);return function(G){var F=k.findAncestor(G.target,function(H){if(/input|select|textarea|button|a/i.test(H.nodeName)||H===D){return true}});if(F===D){E.edit();return false}}}var B=function(D){u(D.viewEl,D.options.styles.invitation);D.viewEl.click(g(D))};var a=function(F,D,G){var H=function(){F.addClass(D);F.addClass(G)};var E=function(){F.removeClass(D);F.removeClass(G)};F.focus(H);F.blur(E)};var m=function(E){k.tabbable(E.viewEl);var D=g(E);k.activatable(E.viewEl,function(F){return D(F)})};var f=function(D,E){D.attr("role","button")};var v=function(H){if(H.editContainer.length>0&&H.editField.length>0){return{container:H.editContainer,field:H.editField}}var E="<span><input type='text' class='flc-inlineEdit-edit fl-inlineEdit-edit'/></span>";var J=i(E);var D=i("input",J);var G=H.container.attr("id");if(G){var I=G+"-edit-container";var F=G+"-edit";J.attr("id",I);D.attr("id",F)}H.viewEl.after(J);return{container:J,field:D}};var q=function(E){var D=false;E.events.onBeginEdit.addListener(function(){D=true});E.events.afterFinishEdit.addListener(function(){D=false});return function(){return D}};var c=function(D,E){var F=E.viewEl.css("padding-right");E.existingPadding=F?parseFloat(F):0;z(E,E.displayView.value());B(E);m(E);a(E.viewEl,E.options.styles.focus,E.options.styles.invitation);f(E.viewEl);if(E.editContainer){E.editContainer.hide()}var G=function(){if(E.tooltipEnabled()){E.viewEl.tooltip({delay:E.options.tooltipDelay,extraClass:E.options.styles.tooltip,bodyHandler:function(){return E.options.tooltipText},id:E.options.tooltipId})}};i(G);E.decorators=k.initSubcomponents(E,"componentDecorators",[E,k.COMPONENT_OPTIONS])};var j=function(F,D){var E=[];F.each(function(G,H){E.push(k.inlineEdit(i(H),D))});return E};k.inlineEdit=function(D,F){var E=k.initView("inlineEdit",D,F);E.viewEl=E.locate("text");E.displayView=k.initSubcomponent(E,"displayView",E.viewEl);i.extend(true,E.displayView,k.initSubcomponent(E,"displayAccessor",E.viewEl));E.model={value:""};E.edit=C(E);E.isEditing=q(E);E.finish=function(){r(E)};E.cancel=function(){e(E)};E.tooltipEnabled=function(){return E.options.useTooltip&&i.fn.tooltip};E.refreshView=function(G){s(E,G)};E.updateModelValue=function(H,G){b(E,H,G)};E.updateModel=function(G,H){b(E,G.value,H)};y(E,true);c(D,E);return E};k.inlineEdit.standardAccessor=function(D){var F=D.nodeName.toLowerCase();var E="input"===F||"textarea"===F?"val":"text";return{value:function(G){return i(D)[E](G)}}};k.inlineEdit.richTextViewAccessor=function(D){return{value:function(E){return i(D).html(E)}}};k.inlineEdit.standardDisplayView=function(E){var D={refreshView:function(F,G){if(F.model.value){o(F)}else{if(F.options.defaultViewText){t(F)}else{x(F)}}if((i.trim(F.viewEl.text()).length===0)&&(F.existingPadding<F.options.paddings.minimumView)){F.viewEl.css("padding-right",F.options.paddings.minimumView)}}};return D};k.inlineEdit.standardEditView=function(D){var E={refreshView:function(F,G){if(F.editField&&F.editField.index(G)===-1){F.editView.value(F.model.value)}}};i.extend(true,E,k.inlineEdit.standardAccessor(D));return E};k.inlineEdits=function(E,F){F=F||{};var G=i.extend({},k.defaults("inlineEdits").selectors,F.selectors);var D=k.container(E);var H=i(G.editables,D);return j(H,F)};k.defaults("inlineEdit",{selectors:{text:".flc-inlineEdit-text",editContainer:".flc-inlineEdit-editContainer",edit:".flc-inlineEdit-edit"},styles:{text:"fl-inlineEdit-text",edit:"fl-inlineEdit-edit",invitation:"fl-inlineEdit-invitation",defaultViewStyle:"fl-inlineEdit-invitation-text",tooltip:"fl-inlineEdit-tooltip",focus:"fl-inlineEdit-focus"},events:{modelChanged:null,onBeginEdit:"preventable",afterBeginEdit:null,onFinishEdit:"preventable",afterFinishEdit:null,afterInitEdit:null},paddings:{edit:10,minimumEdit:80,minimumView:60},applyEditPadding:true,blurHandlerBinder:null,submitOnEnter:undefined,displayAccessor:{type:"fluid.inlineEdit.standardAccessor"},displayView:{type:"fluid.inlineEdit.standardDisplayView"},editAccessor:{type:"fluid.inlineEdit.standardAccessor"},editView:{type:"fluid.inlineEdit.standardEditView"},editModeRenderer:v,lazyEditView:false,defaultViewText:"Click here to edit",tooltipText:"Click item to edit",tooltipId:"tooltip",useTooltip:false,tooltipDelay:1000,selectOnEdit:false});k.defaults("inlineEdits",{selectors:{editables:".flc-inlineEditable"}})})(jQuery,fluid_1_1);(function(a){if(typeof(tinyMCE)!=="undefined"){tinyMCE.init({mode:"none",theme:"simple"})}a.fn.tinymce=function(){this.each(function(){tinyMCE.execCommand("mceAddControl",false,this.id)});return this}})(jQuery);fluid_1_1=fluid_1_1||{};(function(c,b){var a=function(g,d,e){var f=c.extend({},b.defaults(g),e);return b.inlineEdit(d,f)};b.inlineEdit.tinyMCE=function(d,e){return a("fluid.inlineEdit.tinyMCE",d,e)};b.inlineEdit.tinyMCE.viewAccessor=function(d){return{value:function(f){var e=tinyMCE.get(d.id);if(!e){return""}if(f){c(d).val(f);e.setContent(f,{format:"raw"})}else{return e.getContent()}}}};b.inlineEdit.tinyMCE.blurHandlerBinder=function(d){function e(f){setTimeout(function(){tinyMCE.execCommand("mceFocus",false,d.editField[0].id);if(c.browser.mozilla&&c.browser.version.substring(0,3)==="1.8"){return}f.selection.select(f.getBody(),1);f.selection.collapse(0)},10)}d.events.afterInitEdit.addListener(function(f){e(f);var g=f.getBody();b.deadMansBlur(d.editField,c(g),function(){d.cancel()})});d.events.afterBeginEdit.addListener(function(){var f=tinyMCE.get(d.editField[0].id);if(f){e(f)}})};b.inlineEdit.tinyMCE.editModeRenderer=function(g){var d={mode:"exact",theme:"simple"};var f=c.extend(true,d,g.options.tinyMCE);f.elements=b.allocateSimpleId(g.editField);var e=f.init_instance_callback;f.init_instance_callback=function(h){g.events.afterInitEdit.fire(h);if(e){e()}};tinyMCE.init(f)};b.defaults("fluid.inlineEdit.tinyMCE",{useTooltip:true,selectors:{edit:"textarea"},styles:{invitation:null},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.tinyMCE.viewAccessor"},lazyEditView:true,blurHandlerBinder:b.inlineEdit.tinyMCE.blurHandlerBinder,editModeRenderer:b.inlineEdit.tinyMCE.editModeRenderer});b.inlineEdit.FCKEditor=function(d,e){return a("fluid.inlineEdit.FCKEditor",d,e)};b.inlineEdit.FCKEditor.complete=b.event.getEventFirer();b.inlineEdit.FCKEditor.complete.addListener(function(e){var d=e.LinkedField;var f=c.data(d,"fluid.inlineEdit.FCKEditor");f.events.afterInitEdit.fire(e)});b.inlineEdit.FCKEditor.blurHandlerBinder=function(d){function e(f){f.Focus()}d.events.afterInitEdit.addListener(function(f){e(f);var g=f.EditingArea.TargetElement});d.events.afterBeginEdit.addListener(function(){var f=b.inlineEdit.FCKEditor.byId(d.editField[0].id);if(f){e(f)}})};b.inlineEdit.FCKEditor.byId=function(e){var d=typeof(FCKeditorAPI)==="undefined"?null:FCKeditorAPI.GetInstance(e);return d};b.inlineEdit.FCKEditor.editModeRenderer=function(f){var g=b.allocateSimpleId(f.editField);c.data(b.unwrap(f.editField),"fluid.inlineEdit.FCKEditor",f);var e=new FCKeditor(g);var d=b.copy(f.options.FCKEditor);d.BasePath=d.BasePath+"editor/";c.extend(true,e.Config,d);c.extend(true,e,f.options.FCKEditor);e.Config.fluidInstance=f;e.ReplaceTextarea()};b.inlineEdit.FCKEditor.viewAccessor=function(d){return{value:function(f){var e=b.inlineEdit.FCKEditor.byId(d.id);if(!e){if(f){c(d).val(f)}return""}if(f){e.SetHTML(f)}else{return e.GetHTML()}}}};b.defaults("fluid.inlineEdit.FCKEditor",{selectors:{edit:"textarea"},styles:{invitation:null},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.FCKEditor.viewAccessor"},lazyEditView:true,blurHandlerBinder:b.inlineEdit.FCKEditor.blurHandlerBinder,editModeRenderer:b.inlineEdit.FCKEditor.editModeRenderer,FCKEditor:{BasePath:"fckeditor/"}});b.inlineEdit.dropdown=function(d,e){return a("fluid.inlineEdit.dropdown",d,e)};b.inlineEdit.dropdown.editModeRenderer=function(d){var e=b.allocateSimpleId(d.editField);d.editField.selectbox({finishHandler:function(){d.finish()}});return{container:d.editContainer,field:c("input.selectbox",d.editContainer)}};b.inlineEdit.dropdown.blurHandlerBinder=function(d){b.deadMansBlur(d.editField,c("div.selectbox-wrapper li",d.editContainer),function(){d.cancel()})};b.defaults("fluid.inlineEdit.dropdown",{applyEditPadding:false,blurHandlerBinder:b.inlineEdit.dropdown.blurHandlerBinder,editModeRenderer:b.inlineEdit.dropdown.editModeRenderer})})(jQuery,fluid_1_1);function FCKeditor_OnComplete(a){fluid.inlineEdit.FCKEditor.complete.fire(a)};