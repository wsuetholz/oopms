(function(a){a.fn.jqmAccordion=function(b){var c=a.extend({categoryShown:0},b);function d(){a("li[data-role=list-divider]").eq(c.categoryShown).nextUntil("li[data-role=list-divider]").css("display","block");}d();return this.delegate(".ui-li-divider","click",function(){var e=a(this);if(e.next().is(":visible")){return;}a(".ui-listview > .ui-li:not(.ui-li-divider)").slideUp(150);e.nextUntil(".ui-li-divider").slideDown(300);});};})(jQuery);
"use strict";var up=up||{};(function(b,a){up.defaultNodeIdExtractor=function(c){return b(c).attr("id").split("_")[1];};up.getStringPropertySortFunction=function(c,d){return function(f,e){var h=f[c].toLowerCase();var g=e[c].toLowerCase();if(h===g){return 0;}if(d){d=d.toLowerCase();if(h===d){return -1;}else{if(g===d){return 1;}}}if(h>g){return 1;}else{return -1;}};};up.escapeSpecialChars=function(d){var c=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return d.replace(c,"\\$&");};up.refreshPager=function(c,e){var d=a.copy(c.model);d.totalRange=e.length;d.pageIndex=0;d.pageCount=Math.max(1,Math.floor((d.totalRange-1)/d.pageSize)+1);a.clear(c.options.dataModel);a.model.copyModel(c.options.dataModel,e);c.permutation=undefined;c.events.onModelChange.fire(d,c.model,c);a.model.copyModel(c.model,d);};up.showLoader=function(c){c.show();};up.hideLoader=function(c,f){var d,e;e=(f===undefined)?1000:f;d=setTimeout(function(){c.fadeOut("slow");clearTimeout(d);},e);};up.formatMessage=function(g,c){var f=g;for(var d=0;d<c.length;d++){var e=new RegExp("\\{"+d+"\\}","gm");f=f.replace(e,c[d]);}return f;};})(jQuery,fluid);
"use strict";var up=up||{};(function(d,a){var c=function(g){return{id:g.id,description:g.description,fname:g.fname,title:g.title,name:g.name,state:g.state,type:g.typeId,iconUrl:g.iconUrl};};var b=function(g){return{id:g.id,name:g.name,description:g.description,categories:[],deepCategories:[],portlets:[],deepPortlets:[]};};var f=function(h,g){if(!h.state.categories[g.id]){var i=new b(g);d(g.categories).each(function(j,k){k=f(h,k);i.categories.push(k);i.categories[k.id]=i.categories[i.categories.length-1];if(!i.deepCategories[k.id]){i.deepCategories.push(k);i.deepCategories[k.id]=i.deepCategories[i.deepCategories.length-1];}d(k.deepCategories).each(function(l,m){if(!i.deepCategories[m.id]){i.deepCategories.push(m);i.deepCategories[m.id]=i.deepCategories[i.deepCategories.length-1];}});d(k.deepPortlets).each(function(l,m){if(!i.deepPortlets["portlet."+m.id]){i.deepPortlets.push(m);i.deepPortlets["portlet."+m.id]=i.deepPortlets[i.deepPortlets.length-1];}});});d(g.channels).each(function(j,k){var l=new c(k);i.portlets.push(l);i.portlets["portlet."+l.id]=i.portlets[i.portlets.length-1];if(!h.state.portlets["portlet."+l.id]){h.state.portlets.push(l);h.state.portlets["portlet."+l.id]=h.state.portlets[h.state.portlets.length-1];}if(!i.deepPortlets["portlet."+l.id]){i.deepPortlets.push(l);i.deepPortlets["portlet."+l.id]=h.state.portlets[i.deepPortlets.length-1];}});h.state.categories.push(i);h.state.categories[i.id]=h.state.categories[h.state.categories.length-1];return i;}else{return h.state.categories[g.id];}};var e=function(g){d.ajax({url:g.options.portletListUrl,success:function(h){g.state=g.state||{};g.state.portlets=[];g.state.categories=[];d(h.registry.categories).each(function(i,j){f(g,j);});if(h.registry.channels.length>0){f(g,{id:"uncat",name:"Uncategorized",description:"Uncategorized Channels",categories:[],channels:h.registry.channels});}g.events.onLoad.fire();},dataType:"json"});};up.PortletRegistry=function(g,h){var i=a.initView("up.PortletRegistry",g,h);i.refreshRegistry=function(){e(i);};i.getPortlet=function(j){return i.state.portlets["portlet."+j];};i.getCategory=function(j){return i.state.categories[j];};i.getMemberPortlets=function(j,k){return k?i.state.categories[j].deepPortlets:i.state.categories[j].portlets;};i.getMemberCategories=function(j,k){return k?i.state.categories[j].deepCategories:i.state.categories[j].categories;};i.getAllCategories=function(){return i.state.categories;};i.getAllPortlets=function(){return i.state.portlets;};e(i);return i;};a.defaults("up.PortletRegistry",{portletListUrl:null,allCategoriesName:"All",events:{onLoad:null},listeners:{onLoad:null}});})(jQuery,fluid);
"use strict";var up=up||{};(function(b,a){up.EntityRegistry=function(c,d){var e=a.initView("up.EntityRegistry",c,d);e.state=e.state||{};e.state.entityCache=new Array();e.searchEntities=function(i,f){var g,h;g=e.options.entitiesUrl+".json";b.ajax({async:false,url:g,type:"GET",dataType:"json",data:{entityType:i,q:f},success:function(j){h=j.jsonEntityBeanList;}});return h;};e.getEntity=function(j,i){var f,h,g;f=j+":"+i;if(e.state.entityCache[f]){g=e.state.entityCache[f];}h=e.options.entitiesUrl+"/"+j+"/"+i+".json";b.ajax({async:false,url:h,type:"GET",dataType:"json",success:function(k){e.state.entityCache[f]=k.jsonEntityBean;g=k.jsonEntityBean;}});return g;};return e;};a.defaults("up.EntityRegistry",{entitiesUrl:"/uPortal/api/entities"});})(jQuery,fluid);
"use strict";var up=up||{};(function(c,b){up.DefaultPortletSearchView=function(e,i,g){var h,f,d;h=b.initView("up.DefaultPortletSearchView",e,g);h.state={};f=[{id:"searchForm",selector:h.options.selectors.searchForm},{id:"searchInput",selector:h.options.selectors.searchInput}];d={children:[{ID:"searchForm",decorators:[{type:"jQuery",func:"submit",args:function(){i.events.onPortletSearch.fire(i,h.locate("searchInput").val(),true);return false;}}]},{ID:"searchInput",value:h.options.searchInvitationMessage,decorators:[{type:"jQuery",func:"keyup",args:function(){i.events.onPortletSearch.fire(i,c(this).val(),false);}},{type:"jQuery",func:"focus",args:function(){if(c(this).val()===h.options.searchInvitationMessage){c(this).val("");}}},{type:"jQuery",func:"blur",args:function(){var j;j=c.trim(c(this).val());if(j===""){c(this).val(h.options.searchInvitationMessage);}}}]}]};h.state.templates=b.selfRender(h.locate("portletSearchView"),d,{cutpoints:f});return h;};b.defaults("up.DefaultPortletSearchView",{searchInvitationMessage:"Search for stuff",selectors:{portletSearchView:".portlet-search-view",searchForm:".portlet-search-form",searchInput:".portlet-search-input"}});up.PortletBrowser=function(d,g,e){var f=b.initView("up.PortletBrowser",d,e);f.options.portletRegistry.options=f.options.portletRegistry.options||{};f.options.portletRegistry.options.listeners=f.options.portletRegistry.options.listeners||{};f.options.portletRegistry.options.listeners.onLoad=function(){a(f,g,d);};f.registry=b.initSubcomponent(f,"portletRegistry",[d,b.COMPONENT_OPTIONS]);return f;};var a=function(e,f,d){e.state={};e.categoryListView=b.initSubcomponent(e,"categoryListView",[d,e,b.COMPONENT_OPTIONS]);e.searchView=b.initSubcomponent(e,"searchView",[d,e,b.COMPONENT_OPTIONS]);e.portletListView=b.initSubcomponent(e,"portletListView",[d,e,b.COMPONENT_OPTIONS]);e.events.onLoad.fire(e,f);};b.defaults("up.PortletBrowser",{portletRegistry:{type:"up.PortletRegistry"},searchView:{type:"up.DefaultPortletSearchView"},events:{onLoad:null,onCategorySelect:null,onPortletSearch:null,onPortletSelect:null,onPortletDrag:null},listeners:{onLoad:null,onCategorySelect:function(e,d){e.state.currentCategory=d.id;e.categoryListView.refresh();e.portletListView.refresh();},onPortletSearch:function(f,e,d){e=c.trim(e);f.state.portletRegex=e.length>0?new RegExp(up.escapeSpecialChars(e),"i"):undefined;f.portletListView.refresh();},onPortletSelect:function(d,e){d.portletListView.refresh();},onPortletDrag:null}});})(jQuery,fluid);
var uportal=uportal||{};(function(b,a){up.UrlProvider=function(c,d){var e=a.initView("up.UrlProvider",c,d);e.getPortletUrl=function(f){return e.options.portalContext+"/p/"+f;};e.getTabUrl=function(f){return e.options.portalContext+"/f/"+f;};e.getPortalHomeUrl=function(){return e.options.portalContext+"/";};return e;};a.defaults("up.UrlProvider",{portalContext:"/uPortal"});})(jQuery,fluid);
"use strict";var up=up||{};(function(b,a){up.Autocomplete=function(c,e){var f=a.initView("up.Autocomplete",c,e);f.state=f.state||{};var d=[{id:"match:",selector:f.options.selectors.match},{id:"matchLink",selector:f.options.selectors.matchLink},{id:"matchText",selector:f.options.selectors.matchText}];f.search=function(){f.locate("input").removeClass("up-autocomplete-validinput");f.locate("dropdown").show();var h=f.options.searchFunction(f.locate("input").val());var g={children:[]};b(h).each(function(j,i){g.children.push({ID:"match:",children:[{ID:"matchLink",decorators:[{type:"jQuery",func:"click",args:function(){f.locate("input").val(i.text);f.state.currentValue=i.value;f.locate("dropdown").hide();f.locate("input").addClass("up-autocomplete-validinput");}}]},{ID:"matchText",value:i.text}]});});if(f.state.templates){a.reRender(f.state.templates,f.locate("matches"),g,{cutpoints:d});}else{f.state.templates=a.selfRender(f.locate("matches"),g,{cutpoints:d});}f.locate("loadingMessage").hide();};f.getValue=function(){return f.state.currentValue;};f.locate("close").click(function(){f.locate("dropdown").hide();});f.locate("input").keyup(f.search);f.locate("input").focus(function(){var g=f.locate("input").val();if(g==f.options.initialText){f.locate("input").val("");}});f.locate("input").blur(function(){var g=f.locate("input").val();if(g==""){f.locate("input").val(f.options.initialText);}});return f;};a.defaults("up.Autocomplete",{initialText:"",searchFunction:null,selectors:{input:".up-autocomplete-searchterm",dropdown:".up-autocomplete-dropdown",close:".up-autocomplete-close",noResultsMessage:".up-autocomplete-noresults",matches:".up-autocomplete-matches",match:".up-autocomplete-match",matchLink:".up-autocomplete-match-link",matchText:".up-autocomplete-match-text",loadingMessage:".up-autocomplete-loading"},events:{onSearch:null,onClose:null},listeners:{onSearch:null,onClose:null}});})(jQuery,fluid);
var up=up||{};(function(c,b){var d=function(e){c(e.locate("stacktracediv")).hide();};var a=function(h){var e=c(h.locate("stacktracetoggle"));var i=c(h.locate("stacktracediv"));var f=h.options.hidemessage;var g=h.options.showmessage;e.toggle(function(){i.show("fast",function(){e.text(f);});},function(){i.hide("fast",function(){e.text(g);});});};up.showHideToggle=function(e,f){var g=b.initView("up.showHideToggle",e,f);d(g);a(g);return g;};b.defaults("up.showHideToggle",{showmessage:"Show Stack Trace",hidemessage:"Hide Stack Trace",selectors:{stacktracediv:".stacktrace",stacktracetoggle:".stacktracetoggle"}});})(jQuery,fluid);
"use strict";var up=up||{};(function(e,i){var f=function(r){var s=r.indexOf(":");return r.substring(0,s);};var g=function(r){var s=r.indexOf(":");return r.substring(s+1,r.length);};var d=function(u,s,t){var r;switch(t){case false:r='<span class="selection" title="'+u.options.messages.nothingSelected+'">'+u.options.messages.nothingSelected+"</span>";break;case true:r='<a href="javascript:;" title="'+u.options.messages.removeSelection+'" key="'+s.entityType+":"+s.id+'" class="'+u.options.styles.selection+'">'+s.name+'</a><input type="hidden" name="groups" value="'+s.entityType+":"+s.id+'"/>';break;}return r;};var n=function(w,s,u){var t,y,x,v,r;t=w.locate("currentEntityName");y=t.attr("key");x=w.locate("entityBrowserTitlebar");v=w.locate("selectEntityLink");v.unbind("click");r=w.registry.getEntity(f(s),g(s));if(e.inArray(y,w.options.selected)<0){x.removeClass(w.options.styles.selected);}else{x.addClass(w.options.styles.selected);}if(!u){v.bind("click",function(z){b(w,w.currentEntity.entityType+":"+w.currentEntity.id);});v.attr("title",w.currentEntity.name);}else{v.bind("click",function(z){p(w,w.currentEntity.entityType+":"+w.currentEntity.id);});v.attr("title",w.currentEntity.name);}};var p=function(v,t){var w,s,r,u;w=v.locate("selectionBasket");r=v.locate("buttonPrimary");s=v.registry.getEntity(f(t),g(t));u=[];switch(v.selectMultiple){case false:v.options.selected=[];w.html(d(v,s,false));break;case true:w.find("a").each(function(){var x=e(this);if(x.attr("key")!==t){u.push(x.attr("key"));}else{x.parent().remove();}});v.options.selected=u;break;}if(t===(v.currentEntity.entityType+":"+v.currentEntity.id)){n(v,t,false);}else{n(v,t,true);}if(v.options.selected.length<1){r.attr("disabled","disabled");}};var b=function(v,u){var w,s,r,t;w=v.locate("selectionBasket");s=v.locate("buttonPrimary");t=v.registry.getEntity(f(u),g(u));switch(v.selectMultiple){case false:v.options.selected=[];v.options.selected.push(u);w.html(d(v,t,true));break;case true:if(e.inArray(u,v.options.selected)<0){v.options.selected.push(u);r=e('<li><a href="javascript:;" key="'+t.entityType+":"+t.id+'">'+t.name+'</a><input type="hidden" name="groups" value="'+t.entityType+":"+t.id+'"/></li>');w.find("ul").append(r);r.find("a").click(function(){p(v,e(this).attr("key"));});}break;}if(u===(v.currentEntity.entityType+":"+v.currentEntity.id)){n(v,u,true);}else{n(v,u,false);}s.removeAttr("disabled");};var m=function(u,s){var r,t;r=s.parent();t=r.nextAll();t.remove();l(u,s.attr("key"));};var k=function(u,t,s,r){var v;v='<span><a href="javascript:;" title="'+s+'" key="'+t+'">'+s+"</a> &gt; </span>";r.append(v);r.find("a").unbind("click").click(function(){m(u,e(this));});};var o=function(u,s){var r,t,v;r=u.locate("breadcrumbs");t=s.entityType+":"+s.id;if(r.find("span").length>0){v=(r.find('span a[key="'+t+'"]').length>0)?true:false;if(!v){k(u,t,s.name,r);}}else{k(u,t,s.name,r);}r.find("."+u.options.styles.last).removeClass(u.options.styles.last).css("visibility","visible");r.find("span:last").addClass(u.options.styles.last).css("visibility","hidden");};var l=function(v,s){var r,t,u,w,x,y;r=v.registry.getEntity(f(s),g(s));v.currentEntity=r;t=v.locate("currentEntityName");u=v.locate("browsingInclude");w=v.locate("entityBrowserContent");x=w.find("."+v.options.styles.memberList);y=v.locate("browsingResultNoMembers");o(v,r);t.text(r.name);t.attr("key",r.entityType+":"+r.id);u.text(r.name);x.html("").hide();e.each(r.children,function(A,C){var z,B;z='<li class="'+C.entityType+'"><a href="javascript:;"><span class="'+v.options.styles.memberLink+'" key="'+C.entityType+":"+C.id+'">'+C.name+"</span></a></li>";B=w.find("."+C.entityType.toLowerCase()).find("."+v.options.styles.memberList);B.append(z);B.show();});w.find("a").click(function(){l(v,e(this).find("span").attr("key"));});y.css("display",w.find("."+v.options.styles.memberList).find("li").size()>0?"none":"block");n(v,s,e.inArray(s,v.options.selected)>=0);};var a=function(r){var s;s=r.searchDropDown.find(r.options.selectors.searchResults);s.find("."+r.options.styles.selected).removeClass(r.options.styles.selected);e.each(r.options.selected,function(t,v){var u=s.find('span[key="'+v+'"]');u.parent().parent().addClass(r.options.styles.selected);});};var h=function(t,s){var r=t.registry.getEntity(f(s),g(s));if(e.inArray(s,t.options.selected)!==-1){p(t,r.entityType+":"+r.id);}else{b(t,r.entityType+":"+r.id);}a(t);};var q=function(w,t,v){var y,x,u,s,r;if(t===w.options.messages.searchValue){t="";}y=w.registry.searchEntities(w.options.entityTypes,t);x=w.searchDropDown.find(w.options.selectors.searchResults);s=w.locate("searchResultsNoMembers");x.html("");u="";e.each(y,function(z,A){u+='<li class="'+A.entityType+'"><a href="javascript:;" title="'+A.name+'"><span key="'+A.entityType+":"+A.id+'">'+A.name+"</span></a></li>";});x.html(u);x.find("a").bind("click",function(){var z=e(this).find("span");h(w,z.attr("key"));});r=x.find("li");if(r.length<1){s.show();x.hide();}else{x.show();s.hide();}a(w);return false;};var j=function(w){var s,v,u,x,t,r;v=w.locate("closeSearch");u=w.locate("searchForm");s=u.parent();x=u.find("input[type=text]");r=w.locate("searchLoader");t=w.locate("searchDropDown");x.val(w.options.messages.searchValue);t.css({top:x.outerHeight()});x.bind("click focus",function(){e(this).val("");});u.submit(function(){up.showLoader(r);q(w,x.val(),u);t.show();up.hideLoader(r);return false;});v.bind("click",function(){t.hide();});e(document).bind("click",function(y){if(w.isEmptyArray(e(y.target).parents("."+w.options.styles.search))){t.hide();}});};var c=function(r){j(r);r.locate("selectionBasket").find("a").click(function(){p(r,e(this).attr("key"));});l(r,r.options.initialFocusedEntity);if(r.options.selected.length<1&&r.options.requireSelection){r.locate("buttonPrimary").attr("disabled","disabled");}};up.entityselection=function(r,s){var t;t=i.initView("up.entityselection",r,s);t.selectMultiple=t.options.selectMultiple;t.searchDropDown=t.locate("searchDropDown");t.registry=i.initSubcomponent(t,"entityRegistry",[r,i.COMPONENT_OPTIONS]);t.isEmptyArray=function(u){return((u.length>0)?false:true);};c(t);return t;};i.defaults("up.entityselection",{entityRegistry:{type:"up.EntityRegistry"},entityTypes:[],selected:[],initialFocusedEntity:"group:local.0",selectMultiple:true,requireSelection:true,selectors:{selectionBasket:"#selectionBasket",breadcrumbs:"#entityBrowsingBreadcrumbs",currentEntityName:"#currentEntityName",selectEntityLink:"#selectEntityLink",entityBrowserContent:"#entityBrowserContent",entityBrowserTitlebar:"#entityBrowserTitlebar",browsingInclude:"#browsingInclude",browsingResultNoMembers:"#browsingResultNoMembers",closeSearch:"closeDropDown",searchForm:"#searchForm",searchDropDown:"#searchDropDown",searchResults:"#searchResults",searchResultsNoMembers:"#searchResultsNoMembers",searchLoader:"searchLoader",buttonPanel:"#buttonPanel",buttonPrimary:"#buttonPrimary"},styles:{memberList:"member-list",memberLink:"member-link",selection:"selection",selected:"selected",last:"last",title:"title",search:"portlet-search"},messages:{selectButtonMessage:"",deselectButtonMessage:"",removeCrumb:"",removeSelection:"",addSelection:"",selected:"",nothingSelected:"",searchValue:""}});})(jQuery,fluid);
var up=up||{};(function(d,f){var e=function(j,k){return k.options.parameterBindName+"['"+k.options.parameterNamePrefix+j+"'].value";};var b=function(j,k){return k.options.auxiliaryBindName+"['"+k.options.parameterNamePrefix+j+"'].value";};var h=function(m,l){var o,p,k,j,n;k=d(m).find("input[name=name]").val();j=b(k,l);o=d(document.createElement("tr"));o.append(d(document.createElement("td")).text(k));p=d(document.createElement("td"));o.append(p);if(l.options.multivalued){p.append(d(document.createElement("a")).attr("href","javascript:;").addClass(l.options.displayClasses.addValueLink).text(l.options.messages.addValue).attr("paramName",k).click(function(){a(d(this),l);}));a(p.find("."+l.options.displayClasses.addValueLink),l);}else{p.append(d(document.createElement("input")).attr("name",j));}if(l.options.useAuxiliaryCheckbox){n=d(document.createElement("input")).attr("type","checkbox").attr("name",b(k,l)).val("true");o.append(d(document.createElement("td")).append(n));}o.append(d(document.createElement("td")).append(d(document.createElement("a")).text(l.options.messages.remove).addClass(l.options.displayClasses.removeItemLink).attr("href","javascript:;").click(function(){g(d(this),l);})));l.locate("preferencesTable").append(o);l.options.dialog.dialog("close");return false;};var g=function(k,j){d(k).parent().parent().remove();};var a=function(l,k){var j,m;l=d(l);j=e(l.attr("paramName"),k);l.before(d(document.createElement("div")).append(d(document.createElement("input")).attr("name",j)).append(d(document.createElement("a")).attr("href","javascript:;").addClass(k.options.displayClasses.deleteValueLink).text(k.options.messages.remove).click(function(){c(d(this),k);})));};var c=function(k,j){d(k).parent().remove();};var i=function(k){var j=k.options.dialog;if(k.options.dialogInitialized){j.dialog("open");}else{j.find("form").submit(function(){return h(this,k);});j.dialog();k.options.dialogInitialized=true;}};up.ParameterEditor=function(j,k){var l=f.initView("up.ParameterEditor",j,k);j=d(j);j.find("."+l.options.displayClasses.deleteItemLink).click(function(){g(this,l);});j.find("."+l.options.displayClasses.deleteValueLink).click(function(){c(this,l);});j.find("."+l.options.displayClasses.addValueLink).click(function(){a(this,l);});j.find("."+l.options.displayClasses.addItemLink).click(function(){i(l);});l.options.dialogInitialized=false;};f.defaults("up.ParameterEditor",{parameterNamePrefix:"",parameterBindName:"",auxiliaryBindName:"",useAuxiliaryCheckbox:false,dialog:null,multivalued:false,displayClasses:{deleteItemLink:"delete-parameter-link",deleteValueLink:"delete-parameter-value-link",addItemLink:"add-parameter-link",addValueLink:"add-parameter-value-link"},messages:{remove:"Remove",addValue:"Add value"},selectors:{preferencesTable:"tbody"}});})(jQuery,fluid);